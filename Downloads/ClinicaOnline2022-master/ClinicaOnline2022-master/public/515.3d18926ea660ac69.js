"use strict";(self.webpackChunkClinicaOnline2022=self.webpackChunkClinicaOnline2022||[]).push([[515],{5515:(y,d,a)=>{a.r(d),a.d(d,{AutenticacionModule:()=>Z});var b=a(9808),u=a(441);class c{constructor(){this.nombre="",this.apellido="",this.edad=0,this.dni="",this.mail="",this.tipo=""}}var t=a(5e3),p=a(2290),M=a(7566);let h=(()=>{class n{constructor(e){this.db=e,this.usuariosRef=this.db.collection("usuarios")}crearUsuario(e){return this.usuariosRef.add(Object.assign({},e))}obtenerUsuario(){return this.usuariosRef.valueChanges()}update(e,o){return this.usuariosRef.doc(e).update(o)}delete(e){return this.usuariosRef.doc(e).delete()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(M.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=a(7579),v=a(1205);let m=(()=>{class n{constructor(){}setData(e,o){const r=JSON.stringify(o);localStorage.setItem(e,r)}getData(e){return localStorage.getItem(e)}removeData(e){localStorage.removeItem(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f=(()=>{class n{constructor(e,o){this.afAuth=e,this.localStorageService=o,this.userLogged=new c,this.logged=!1,this.loggedChange=new _.x,this.loggedChange.subscribe(r=>{this.logged=r})}signIn(e,o){return this.afAuth.signInWithEmailAndPassword(e,o)}signUp(e,o){return this.afAuth.createUserWithEmailAndPassword(e,o)}signOut(){return this.afAuth.signOut()}setLogged(e){this.loggedChange.next(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v.zQ),t.LFG(m))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=a(7562),g=a(2382);const A=[{path:"",redirectTo:"ingreso",pathMatch:"full"},{path:"ingreso",component:(()=>{class n{constructor(e,o,r,s,l){this.toastr=e,this.router=o,this.userFire=r,this.userAuthService=s,this.spinner=l,this.usuario=new c,this.password=""}ngOnInit(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},2e3)}fastLogIn(e){"paciente"==e?(this.usuario.mail="admin@test.com",this.usuario.tipo="admin",this.password="123456"):"especialista"==e&&(this.usuario.mail="empleado@test.com",this.usuario.tipo="empleado",this.password="123456")}showSuccess(){this.toastr.success("Ingreso correcto!")}showError(e){this.toastr.error("Error: "+e)}logIn(){this.userAuthService.signIn(this.usuario.mail,this.password).then(e=>{this.userAuthService.userLogged=this.usuario,this.userAuthService.setLogged(!0),this.showSuccess(),setTimeout(()=>{this.router.navigate(["bienvenido"])},1e3)}).catch(e=>{this.showError(e.message)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p._W),t.Y36(u.F0),t.Y36(h),t.Y36(f),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ingreso"]],decls:25,vars:2,consts:[[1,"text-center"],[1,"form-signin"],["src","../../../../favicon.ico","height","100","alt","icono",1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"container-buttons"],[1,"w-100","mb-4","btn","btn-lg","btn-primary",3,"click"],[1,"w-100","mb-2","btn","btn-lg","btn-primary",3,"click"],["routerLink","/autenticacion/registro"],[1,"mt-5","mb-3","text-muted"],["bdColor","rgba(255, 255, 255, 1)","template","<img height='30px' src='../../assets/Heart beat.gif' />"]],template:function(e,o){1&e&&(t.TgZ(0,"body",0)(1,"main",1),t._UZ(2,"br")(3,"br")(4,"img",2),t.TgZ(5,"div",3)(6,"input",4),t.NdJ("ngModelChange",function(s){return o.usuario.mail=s}),t.qZA(),t.TgZ(7,"label",5),t._uU(8,"Email"),t.qZA()(),t.TgZ(9,"div",3)(10,"input",6),t.NdJ("ngModelChange",function(s){return o.password=s}),t.qZA(),t.TgZ(11,"label",7),t._uU(12,"Contrase\xf1a"),t.qZA()(),t.TgZ(13,"div",8)(14,"button",9),t.NdJ("click",function(){return o.logIn()}),t._uU(15,"Ingreso"),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){return o.fastLogIn("paciente")}),t._uU(17,"Ingreso Rapido Paciente"),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return o.fastLogIn("especialista")}),t._uU(19,"Ingreso Rapido Especialista"),t.qZA()(),t.TgZ(20,"a",11),t._uU(21,"Registrarse"),t.qZA(),t.TgZ(22,"p",12),t._uU(23,"\xa9 Ezequiel Archilla 2022"),t.qZA()()(),t._UZ(24,"ngx-spinner",13)),2&e&&(t.xp6(6),t.Q6J("ngModel",o.usuario.mail),t.xp6(4),t.Q6J("ngModel",o.password))},directives:[g.Fj,g.JJ,g.On,u.yS,C.Ro],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.container-buttons[_ngcontent-%COMP%]{margin-top:30%}"]}),n})()},{path:"registro",component:(()=>{class n{constructor(e,o,r,s,l){this.toastr=e,this.router=o,this.userAuthService=r,this.userFire=s,this.localStorageService=l,this.user=new c,this.password=""}ngOnInit(){}showSuccess(){this.toastr.success("Registrado correcto!")}showError(e){this.toastr.error("Error: "+e)}signUp(){this.userAuthService.signUp(this.user.mail,this.password).then(e=>{this.userFire.crearUsuario(this.user),this.userAuthService.userLogged=this.user,this.userAuthService.setLogged(!0),this.localStorageService.setData("userEmail",this.user.mail),this.showSuccess(),setTimeout(()=>{this.router.navigateByUrl("/home")},1e3)}).catch(e=>{this.showError(e.message)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p._W),t.Y36(u.F0),t.Y36(f),t.Y36(h),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-registro"]],decls:24,vars:4,consts:[[1,"text-center"],[1,"form-signin"],["height","100","src","../../../../favicon.ico","alt","icono"],[1,"form-floating"],["type","email",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],[2,"display","flex"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary",3,"click"],[1,"mt-5","mb-3","text-muted"]],template:function(e,o){1&e&&(t.TgZ(0,"body",0)(1,"main",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"input",4),t.NdJ("ngModelChange",function(s){return o.user.mail=s}),t.qZA(),t.TgZ(5,"label",5),t._uU(6,"Email"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",3)(9,"input",7),t.NdJ("ngModelChange",function(s){return o.user.nombre=s}),t.qZA(),t.TgZ(10,"label",5),t._uU(11,"Nombre"),t.qZA()(),t.TgZ(12,"div",3)(13,"input",7),t.NdJ("ngModelChange",function(s){return o.user.apellido=s}),t.qZA(),t.TgZ(14,"label",5),t._uU(15,"Apellido"),t.qZA()()(),t.TgZ(16,"div",3)(17,"input",8),t.NdJ("ngModelChange",function(s){return o.password=s}),t.qZA(),t.TgZ(18,"label",9),t._uU(19,"Contrase\xf1a"),t.qZA()(),t.TgZ(20,"button",10),t.NdJ("click",function(){return o.signUp()}),t._uU(21," Registrar "),t.qZA(),t.TgZ(22,"p",11),t._uU(23,"\xa9 Ezequiel Archilla 2022"),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngModel",o.user.mail),t.xp6(5),t.Q6J("ngModel",o.user.nombre),t.xp6(4),t.Q6J("ngModel",o.user.apellido),t.xp6(4),t.Q6J("ngModel",o.password))},directives:[g.Fj,g.JJ,g.On],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.form-floating[_ngcontent-%COMP%]{margin-top:3px}"]}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.ez,w]]}),n})()}}]);