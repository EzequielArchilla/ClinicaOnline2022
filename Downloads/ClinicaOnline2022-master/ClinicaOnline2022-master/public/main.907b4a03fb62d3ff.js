"use strict";var hI=Object.defineProperty,fI=Object.defineProperties,pI=Object.getOwnPropertyDescriptors,kE=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,mI=Object.prototype.propertyIsEnumerable,FE=(kt,We,U)=>We in kt?hI(kt,We,{enumerable:!0,configurable:!0,writable:!0,value:U}):kt[We]=U,LE=(kt,We)=>{for(var U in We||(We={}))gI.call(We,U)&&FE(kt,U,We[U]);if(kE)for(var U of kE(We))mI.call(We,U)&&FE(kt,U,We[U]);return kt},VE=(kt,We)=>fI(kt,pI(We));(self.webpackChunkClinicaOnline2022=self.webpackChunkClinicaOnline2022||[]).push([[179],{440:(kt,We,U)=>{U.d(We,{nm:()=>yr});var g=U(5813);U(5e3),U(5867);var oe=U(5861),le=U(9681),$e=U(4859),ct=U(2090),st=U(1877);const me=new Map,ke={activated:!1,tokenObservers:[]},re={initialized:!1,enabled:!1};function ce(Oe){return me.get(Oe)||ke}function de(Oe,Ie){me.set(Oe,Ie)}function Be(){return re}class pn{constructor(Ie,Ze,ht,Ot,zt){if(this.operation=Ie,this.retryPolicy=Ze,this.getWaitDuration=ht,this.lowerBound=Ot,this.upperBound=zt,this.pending=null,this.nextErrorWaitInterval=Ot,Ot>zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var Ze=this;return(0,oe.Z)(function*(){Ze.stop();try{Ze.pending=new ct.BH,yield function on(Oe){return new Promise(Ie=>{setTimeout(Ie,Oe)})}(Ze.getNextRun(Ie)),Ze.pending.resolve(),yield Ze.pending.promise,Ze.pending=new ct.BH,yield Ze.operation(),Ze.pending.resolve(),yield Ze.pending.promise,Ze.process(!0).catch(()=>{})}catch(ht){Ze.retryPolicy(ht)?Ze.process(!1).catch(()=>{}):Ze.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ze=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ze}}}const Qe=new ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ve(Oe){if(!ce(Oe).activated)throw Qe.create("use-before-activation",{appName:Oe.name})}function Kn(Oe,Ie){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,oe.Z)(function*({url:Oe,body:Ie},Ze){const ht={"Content-Type":"application/json"},Ot=Ze.getImmediate({optional:!0});if(Ot){const si=yield Ot.getHeartbeatsHeader();si&&(ht["X-Firebase-Client"]=si)}const zt={method:"POST",body:JSON.stringify(Ie),headers:ht};let Yn,Br;try{Yn=yield fetch(Oe,zt)}catch(si){throw Qe.create("fetch-network-error",{originalErrorMessage:si.message})}if(200!==Yn.status)throw Qe.create("fetch-status-error",{httpStatus:Yn.status});try{Br=yield Yn.json()}catch(si){throw Qe.create("fetch-parse-error",{originalErrorMessage:si.message})}const $n=Br.ttl.match(/^([\d.]+)(s)$/);if(!$n||!$n[2]||isNaN(Number($n[1])))throw Qe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Br.ttl}`});const es=1e3*Number($n[1]),Ss=Date.now();return{token:Br.token,expireTimeMillis:Ss+es,issuedAtTimeMillis:Ss}})).apply(this,arguments)}function lr(Oe,Ie){const{projectId:Ze,appId:ht,apiKey:Ot}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ze}/apps/${ht}:exchangeDebugToken?key=${Ot}`,body:{debug_token:Ie}}}const fn="firebase-app-check-store";let mn=null;function ci(){return mn||(mn=new Promise((Oe,Ie)=>{try{const Ze=indexedDB.open("firebase-app-check-database",1);Ze.onsuccess=ht=>{Oe(ht.target.result)},Ze.onerror=ht=>{var Ot;Ie(Qe.create("storage-open",{originalErrorMessage:null===(Ot=ht.target.error)||void 0===Ot?void 0:Ot.message}))},Ze.onupgradeneeded=ht=>{0===ht.oldVersion&&ht.target.result.createObjectStore(fn,{keyPath:"compositeKey"})}}catch(Ze){Ie(Qe.create("storage-open",{originalErrorMessage:Ze.message}))}}),mn)}function Vt(){return(Vt=(0,oe.Z)(function*(Oe,Ie){const ht=(yield ci()).transaction(fn,"readwrite"),zt=ht.objectStore(fn).put({compositeKey:Oe,value:Ie});return new Promise((Yn,Br)=>{zt.onsuccess=$n=>{Yn()},ht.onerror=$n=>{var es;Br(Qe.create("storage-set",{originalErrorMessage:null===(es=$n.target.error)||void 0===es?void 0:es.message}))}})})).apply(this,arguments)}const zr=new st.Yd("@firebase/app-check");function Fr(Oe,Ie){return(0,ct.hl)()?function Kr(Oe,Ie){return function Gr(Oe,Ie){return Vt.apply(this,arguments)}(function rr(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),Ie)}(Oe,Ie).catch(Ze=>{zr.warn(`Failed to write token to IndexedDB. Error: ${Ze}`)}):Promise.resolve()}function we(){return Be().enabled}function Ae(){return pt.apply(this,arguments)}function pt(){return(pt=(0,oe.Z)(function*(){const Oe=Be();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Le={error:"UNKNOWN_ERROR"};function yt(Oe){return ct.US.encodeString(JSON.stringify(Oe),!1)}function Ut(Oe){return jt.apply(this,arguments)}function jt(){return(jt=(0,oe.Z)(function*(Oe,Ie=!1){const Ze=Oe.app;Ve(Ze);const ht=ce(Ze);let zt,Ot=ht.token;if(!Ot){const $n=yield ht.cachedTokenPromise;$n&&gi($n)&&(Ot=$n)}if(!Ie&&Ot&&gi(Ot))return{token:Ot.token};let Br,Yn=!1;if(we()){ht.exchangeTokenPromise||(ht.exchangeTokenPromise=Kn(lr(Ze,yield Ae()),Oe.heartbeatServiceProvider).then(es=>(ht.exchangeTokenPromise=void 0,es)),Yn=!0);const $n=yield ht.exchangeTokenPromise;return yield Fr(Ze,$n),de(Ze,Object.assign(Object.assign({},ht),{token:$n})),{token:$n.token}}try{ht.exchangeTokenPromise||(ht.exchangeTokenPromise=ht.provider.getToken().then($n=>(ht.exchangeTokenPromise=void 0,$n)),Yn=!0),Ot=yield ht.exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?zr.warn($n.message):zr.error($n),zt=$n}return Ot?(Br={token:Ot.token},de(Ze,Object.assign(Object.assign({},ht),{token:Ot})),yield Fr(Ze,Ot)):Br=ze(zt),Yn&&Lr(Ze,Br),Br})).apply(this,arguments)}function ir(Oe,Ie){const Ze=ce(Oe),ht=Ze.tokenObservers.filter(Ot=>Ot.next!==Ie);0===ht.length&&Ze.tokenRefresher&&Ze.tokenRefresher.isRunning()&&Ze.tokenRefresher.stop(),de(Oe,Object.assign(Object.assign({},Ze),{tokenObservers:ht}))}function rn(Oe){const{app:Ie}=Oe,Ze=ce(Ie);let ht=Ze.tokenRefresher;ht||(ht=function tr(Oe){const{app:Ie}=Oe;return new pn((0,oe.Z)(function*(){let ht;if(ht=ce(Ie).token?yield Ut(Oe,!0):yield Ut(Oe),ht.error)throw ht.error}),()=>!0,()=>{const Ze=ce(Ie);if(Ze.token){let ht=Ze.token.issuedAtTimeMillis+.5*(Ze.token.expireTimeMillis-Ze.token.issuedAtTimeMillis)+3e5;return ht=Math.min(ht,Ze.token.expireTimeMillis-3e5),Math.max(0,ht-Date.now())}return 0},3e4,96e4)}(Oe),de(Ie,Object.assign(Object.assign({},Ze),{tokenRefresher:ht}))),!ht.isRunning()&&Ze.isTokenAutoRefreshEnabled&&ht.start()}function Lr(Oe,Ie){const Ze=ce(Oe).tokenObservers;for(const ht of Ze)try{"EXTERNAL"===ht.type&&null!=Ie.error?ht.error(Ie.error):ht.next(Ie)}catch(Ot){}}function gi(Oe){return Oe.expireTimeMillis-Date.now()>0}function ze(Oe){return{token:yt(Le),error:Oe}}class be{constructor(Ie,Ze){this.app=Ie,this.heartbeatServiceProvider=Ze}_delete(){const{tokenObservers:Ie}=ce(this.app);for(const Ze of Ie)ir(this.app,Ze.next);return Promise.resolve()}}const Ai="app-check-internal";!function Wr(){(0,le._registerComponent)(new $e.wA("app-check",Oe=>function ie(Oe,Ie){return new be(Oe,Ie)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,Ie,Ze)=>{Oe.getProvider(Ai).initialize()})),(0,le._registerComponent)(new $e.wA(Ai,Oe=>function Re(Oe){return{getToken:Ie=>Ut(Oe,Ie),addTokenListener:Ie=>function nn(Oe,Ie,Ze,ht){const{app:Ot}=Oe,zt=ce(Ot),Yn={next:Ze,error:ht,type:Ie};if(de(Ot,Object.assign(Object.assign({},zt),{tokenObservers:[...zt.tokenObservers,Yn]})),zt.token&&gi(zt.token)){const Br=zt.token;Promise.resolve().then(()=>{Ze({token:Br.token}),rn(Oe)}).catch(()=>{})}zt.cachedTokenPromise.then(()=>rn(Oe))}(Oe,"INTERNAL",Ie),removeTokenListener:Ie=>ir(Oe.app,Ie)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)("@firebase/app-check","0.5.8")}();class yr{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(kt,We,U)=>{U.d(We,{zQ:()=>Ge,ww:()=>_t,rT:()=>re,f7:()=>de,L6:()=>me,_Q:()=>ke,lh:()=>ce,Qv:()=>st,nw:()=>Be});var g=U(5e3),z=U(7579),ee=U(9646),Ce=U(8306),Me=U(8996),Ne=U(6451),He=U(6063);class Fe extends z.x{constructor(Kt=1/0,Zt=1/0,ft=He.l){super(),this._bufferSize=Kt,this._windowTime=Zt,this._timestampProvider=ft,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Zt===1/0,this._bufferSize=Math.max(1,Kt),this._windowTime=Math.max(1,Zt)}next(Kt){const{isStopped:Zt,_buffer:ft,_infiniteTimeWindow:pn,_timestampProvider:on,_windowTime:tt}=this;Zt||(ft.push(Kt),!pn&&ft.push(on.now()+tt)),this._trimBuffer(),super.next(Kt)}_subscribe(Kt){this._throwIfClosed(),this._trimBuffer();const Zt=this._innerSubscribe(Kt),{_infiniteTimeWindow:ft,_buffer:pn}=this,on=pn.slice();for(let tt=0;tt<on.length&&!Kt.closed;tt+=ft?1:2)Kt.next(on[tt]);return this._checkFinalizedStatuses(Kt),Zt}_trimBuffer(){const{_bufferSize:Kt,_timestampProvider:Zt,_buffer:ft,_infiniteTimeWindow:pn}=this,on=(pn?1:2)*Kt;if(Kt<1/0&&on<ft.length&&ft.splice(0,ft.length-on),!pn){const tt=Zt.now();let Qe=0;for(let Te=1;Te<ft.length&&ft[Te]<=tt;Te+=2)Qe=Te;Qe&&ft.splice(0,Qe+1)}}}var je=U(3099);function pe(Mt,Kt,Zt){let ft,pn=!1;return Mt&&"object"==typeof Mt?({bufferSize:ft=1/0,windowTime:Kt=1/0,refCount:pn=!1,scheduler:Zt}=Mt):ft=null!=Mt?Mt:1/0,(0,je.B)({connector:()=>new Fe(ft,Kt,Zt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pn})}var fe=U(3900),De=U(576);function at(Mt,Kt){return(0,De.m)(Kt)?(0,fe.w)(()=>Mt,Kt):(0,fe.w)(()=>Mt)}var Je=U(5363),ut=U(4004),wt=U(590),Ye=U(9468),lt=U(9300),xt=U(5813),Rt=U(2011),oe=U(9808),le=U(440),$e=U(127);const st=new g.OlP("angularfire2.auth.use-emulator"),me=new g.OlP("angularfire2.auth.settings"),ke=new g.OlP("angularfire2.auth.tenant-id"),re=new g.OlP("angularfire2.auth.langugage-code"),ce=new g.OlP("angularfire2.auth.use-device-language"),de=new g.OlP("angularfire.auth.persistence"),Be=(Mt,Kt,Zt,ft,pn,on,tt,Qe)=>(0,Rt.cc)(`${Mt.name}.auth`,"AngularFireAuth",Mt.name,()=>{const Te=Kt.runOutsideAngular(()=>Mt.auth());if(Zt&&Te.useEmulator(...Zt),ft&&(Te.tenantId=ft),Te.languageCode=pn,on&&Te.useDeviceLanguage(),tt)for(const[Ve,vt]of Object.entries(tt))Te.settings[Ve]=vt;return Qe&&Te.setPersistence(Qe),Te},[Zt,ft,pn,on,tt,Qe]);let Ge=(()=>{class Mt{constructor(Zt,ft,pn,on,tt,Qe,Te,Ve,vt,an,Nn,Kn){const Wn=new z.x,wr=(0,ee.of)(void 0).pipe((0,Je.Q)(tt.outsideAngular),(0,fe.w)(()=>on.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8775)))),(0,ut.U)(()=>(0,Rt.on)(Zt,on,ft)),(0,ut.U)(ur=>Be(ur,on,Qe,Ve,vt,an,Te,Nn)),pe({bufferSize:1,refCount:!1}));if((0,oe.PM)(pn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{wr.pipe((0,wt.P)()).subscribe();const lr=wr.pipe((0,fe.w)(fn=>fn.getRedirectResult().then(Cn=>Cn,()=>null)),xt.iC,pe({bufferSize:1,refCount:!1})),Hn=wr.pipe((0,fe.w)(fn=>new Ce.y(Cn=>({unsubscribe:on.runOutsideAngular(()=>fn.onAuthStateChanged(mn=>Cn.next(mn),mn=>Cn.error(mn),()=>Cn.complete()))})))),Wt=wr.pipe((0,fe.w)(fn=>new Ce.y(Cn=>({unsubscribe:on.runOutsideAngular(()=>fn.onIdTokenChanged(mn=>Cn.next(mn),mn=>Cn.error(mn),()=>Cn.complete()))}))));this.authState=lr.pipe(at(Hn),(0,Ye.R)(tt.outsideAngular),(0,Je.Q)(tt.insideAngular)),this.user=lr.pipe(at(Wt),(0,Ye.R)(tt.outsideAngular),(0,Je.Q)(tt.insideAngular)),this.idToken=this.user.pipe((0,fe.w)(fn=>fn?(0,Me.D)(fn.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,fe.w)(fn=>fn?(0,Me.D)(fn.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Ne.T)(lr,Wn,this.authState.pipe((0,lt.h)(fn=>!fn))).pipe((0,ut.U)(fn=>(null==fn?void 0:fn.user)?fn:null),(0,Ye.R)(tt.outsideAngular),(0,Je.Q)(tt.insideAngular))}return(0,Rt.pX)(this,wr,on,{spy:{apply:(ur,lr,Hn)=>{(ur.startsWith("signIn")||ur.startsWith("createUser"))&&Hn.then(Wt=>Wn.next(Wt))}}})}}return Mt.\u0275fac=function(Zt){return new(Zt||Mt)(g.LFG(Rt.Dh),g.LFG(Rt.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(xt.HU),g.LFG(st,8),g.LFG(me,8),g.LFG(ke,8),g.LFG(re,8),g.LFG(ce,8),g.LFG(de,8),g.LFG(le.nm,8))},Mt.\u0275prov=g.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"any"}),Mt})(),_t=(()=>{class Mt{constructor(){$e.Z.registerVersion("angularfire",xt.q4.full,"auth-compat")}}return Mt.\u0275fac=function(Zt){return new(Zt||Mt)},Mt.\u0275mod=g.oAB({type:Mt}),Mt.\u0275inj=g.cJS({providers:[Ge]}),Mt})()},7566:(kt,We,U)=>{U.d(We,{ST:()=>Ad,yb:()=>hh});var g=U(5e3),z=U(4986),ee=U(8306),Ce=U(8996),Me=U(9646),Ne=U(5813),He=U(4482),Fe=U(5403);function je(){return(0,He.e)((i,e)=>{let t,o=!1;i.subscribe((0,Fe.x)(e,u=>{const h=t;t=u,o&&e.next([h,u]),o=!0}))})}var pe=U(4671);function De(i,e){return i===e}var re,at=U(8675),Je=U(4004),ut=U(5026),wt=U(9300),Ye=U(2011),lt=U(9808),Rt=(U(8775),U(3942)),oe=U(5861),le=U(9681),$e=U(4859),ct=U(1877),st=U(2090),me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ke={},ce=ce||{},de=me||self;function Be(){}function Ge(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function _t(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Kt="closure_uid_"+(1e9*Math.random()>>>0),Zt=0;function ft(i,e,t){return i.call.apply(i.bind,arguments)}function pn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function on(i,e,t){return(on=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ft:pn).apply(null,arguments)}function tt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Qe(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,h){for(var v=Array(arguments.length-2),A=2;A<arguments.length;A++)v[A-2]=arguments[A];return e.prototype[u].apply(o,v)}}function Te(){this.s=this.s,this.o=this.o}var vt={};Te.prototype.s=!1,Te.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Mt(i){return Object.prototype.hasOwnProperty.call(i,Kt)&&i[Kt]||(i[Kt]=++Zt)}(this);delete vt[i]}},Te.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const an=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Nn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let h=0;h<o;h++)h in u&&e.call(t,u[h],h,i)};function Wn(i){return Array.prototype.concat.apply([],arguments)}function wr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function ur(i){return/^[\s\xa0]*$/.test(i)}var fn,lr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Hn(i,e){return-1!=i.indexOf(e)}function Wt(i,e){return i<e?-1:i>e?1:0}e:{var Cn=de.navigator;if(Cn){var mn=Cn.userAgent;if(mn){fn=mn;break e}}fn=""}function ci(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function fr(i){const e={};for(const t in i)e[t]=i[t];return e}var Kr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function br(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let h=0;h<Kr.length;h++)t=Kr[h],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function ti(i){return ti[" "](i),i}ti[" "]=Be;var Fr,i,Vt=Hn(fn,"Opera"),Yt=Hn(fn,"Trident")||Hn(fn,"MSIE"),en=Hn(fn,"Edge"),rr=en||Yt,zr=Hn(fn,"Gecko")&&!(Hn(fn.toLowerCase(),"webkit")&&!Hn(fn,"Edge"))&&!(Hn(fn,"Trident")||Hn(fn,"MSIE"))&&!Hn(fn,"Edge"),Un=Hn(fn.toLowerCase(),"webkit")&&!Hn(fn,"Edge");function Yi(){var i=de.document;return i?i.documentMode:void 0}e:{var cr="",ge=(i=fn,zr?/rv:([^\);]+)(\)|;)/.exec(i):en?/Edge\/([\d\.]+)/.exec(i):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Un?/WebKit\/(\S+)/.exec(i):Vt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(ge&&(cr=ge?ge[1]:""),Yt){var we=Yi();if(null!=we&&we>parseFloat(cr)){Fr=String(we);break e}}Fr=cr}var Ae={};var yt=de.document&&Yt&&(Yi()||parseInt(Fr,10))||void 0,Ut=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{de.addEventListener("test",Be,e),de.removeEventListener("test",Be,e)}catch(t){}return i}();function jt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function nn(i,e){if(jt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(zr){e:{try{ti(e.nodeName);var u=!0;break e}catch(h){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ir[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&nn.Z.h.call(this)}}jt.prototype.h=function(){this.defaultPrevented=!0},Qe(nn,jt);var ir={2:"touch",3:"pen",4:"mouse"};nn.prototype.h=function(){nn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),tr=0;function Lr(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++tr,this.ca=this.fa=!1}function gi(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function ze(i){this.src=i,this.g={},this.h=0}function be(i,e){var t=e.type;if(t in i.g){var h,o=i.g[t],u=an(o,e);(h=0<=u)&&Array.prototype.splice.call(o,u,1),h&&(gi(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ie(i,e,t,o){for(var u=0;u<i.length;++u){var h=i[u];if(!h.ca&&h.listener==e&&h.capture==!!t&&h.ia==o)return u}return-1}ze.prototype.add=function(i,e,t,o,u){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var v=ie(i,e,o,u);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new Lr(e,this.src,h,!!o,u)).fa=t,i.push(e)),e};var Re="closure_lm_"+(1e6*Math.random()|0),gt={};function Xt(i,e,t,o,u){if(o&&o.once)return Mr(i,e,t,o,u);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Xt(i,e[h],t,o,u);return null}return t=Pt(t),i&&i[rn]?i.N(e,t,_t(o)?!!o.capture:!!o,u):sn(i,e,t,!1,o,u)}function sn(i,e,t,o,u,h){if(!e)throw Error("Invalid event type");var v=_t(u)?!!u.capture:!!u,A=mi(i);if(A||(i[Re]=A=new ze(i)),(t=A.add(e,t,o,v,h)).proxy)return t;if(o=function zn(){var e=Ir;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Ut||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(ni(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Mr(i,e,t,o,u){if(Array.isArray(e)){for(var h=0;h<e.length;h++)Mr(i,e[h],t,o,u);return null}return t=Pt(t),i&&i[rn]?i.O(e,t,_t(o)?!!o.capture:!!o,u):sn(i,e,t,!0,o,u)}function ji(i,e,t,o,u){if(Array.isArray(e))for(var h=0;h<e.length;h++)ji(i,e[h],t,o,u);else o=_t(o)?!!o.capture:!!o,t=Pt(t),i&&i[rn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ie(h=i.g[e],t,o,u))&&(gi(h[t]),Array.prototype.splice.call(h,t,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=mi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ie(e,t,o,u)),(t=-1<i?e[i]:null)&&di(t))}function di(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[rn])be(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(ni(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=mi(e))?(be(t,i),0==t.h&&(t.src=null,e[Re]=null)):gi(i)}}}function ni(i){return i in gt?gt[i]:gt[i]="on"+i}function Ir(i,e){if(i.ca)i=!0;else{e=new nn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&di(i),i=t.call(o,e)}return i}function mi(i){return(i=i[Re])instanceof ze?i:null}var ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pt(i){return"function"==typeof i?i:(i[ri]||(i[ri]=function(e){return i.handleEvent(e)}),i[ri])}function Bt(){Te.call(this),this.i=new ze(this),this.P=this,this.I=null}function yn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new jt(e,i);else if(e instanceof jt)e.target=e.target||i;else{var u=e;br(e=new jt(o,i),u)}if(u=!0,t)for(var h=t.length-1;0<=h;h--){var v=e.g=t[h];u=xr(v,o,!0,e)&&u}if(u=xr(v=e.g=i,o,!0,e)&&u,u=xr(v,o,!1,e)&&u,t)for(h=0;h<t.length;h++)u=xr(v=e.g=t[h],o,!1,e)&&u}function xr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,h=0;h<e.length;++h){var v=e[h];if(v&&!v.ca&&v.capture==t){var A=v.listener,H=v.ia||v.src;v.fa&&be(i.i,v),u=!1!==A.call(H,o)&&u}}return u&&!o.defaultPrevented}Qe(Bt,Te),Bt.prototype[rn]=!0,Bt.prototype.removeEventListener=function(i,e,t,o){ji(this,i,e,t,o)},Bt.prototype.M=function(){if(Bt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)gi(t[o]);delete i.g[e],i.h--}}this.I=null},Bt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Bt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var mr=de.JSON.stringify;function Cr(){var i=Ai;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Qi,qn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ri,i=>i.reset());class Ri{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rr(i){de.setTimeout(()=>{throw i},0)}function Sn(i,e){Qi||function Bs(){var i=de.Promise.resolve(void 0);Qi=function(){i.then(Wr)}}(),Hi||(Qi(),Hi=!0),Ai.add(i,e)}var Hi=!1,Ai=new class yi{constructor(){this.h=this.g=null}add(e,t){const o=qn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Wr(){for(var i;i=Cr();){try{i.h.call(i.g)}catch(t){Rr(t)}var e=qn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Hi=!1}function Vr(i,e){Bt.call(this),this.h=i||1,this.g=e||de,this.j=on(this.kb,this),this.l=Date.now()}function Ur(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function yr(i,e,t){if("function"==typeof i)t&&(i=on(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=on(i.handleEvent,i)}return 2147483647<Number(e)?-1:de.setTimeout(i,e||0)}function sr(i){i.g=yr(()=>{i.g=null,i.i&&(i.i=!1,sr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Qe(Vr,Bt),(re=Vr.prototype).da=!1,re.S=null,re.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yn(this,"tick"),this.da&&(Ur(this),this.start()))}},re.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},re.M=function(){Vr.Z.M.call(this),Ur(this),delete this.g};class Ts extends Te{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sr(this)}M(){super.M(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(i){Te.call(this),this.h=i,this.g={}}Qe(ii,Te);var Zr=[];function Oi(i,e,t,o){Array.isArray(t)||(t&&(Zr[0]=t.toString()),t=Zr);for(var u=0;u<t.length;u++){var h=Xt(e,t[u],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function As(i){ci(i.g,function(e,t){this.g.hasOwnProperty(t)&&di(e)},i),i.g={}}function Js(){this.g=!0}function Xi(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oa(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var h=u[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var v=1;v<u.length;v++)u[v]=""}}}return mr(t)}catch(A){return e}}(i,t)+(o?" "+o:"")})}ii.prototype.M=function(){ii.Z.M.call(this),As(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Js.prototype.Aa=function(){this.g=!1},Js.prototype.info=function(){};var Zn={},Ni=null;function js(){return Ni=Ni||new Bt}function Oe(i){jt.call(this,Zn.Ma,i)}function Ie(i){const e=js();yn(e,new Oe(e,i))}function Ze(i,e){jt.call(this,Zn.STAT_EVENT,i),this.stat=e}function ht(i){const e=js();yn(e,new Ze(e,i))}function Ot(i,e){jt.call(this,Zn.Na,i),this.size=e}function zt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){i()},e)}Zn.Ma="serverreachability",Qe(Oe,jt),Zn.STAT_EVENT="statevent",Qe(Ze,jt),Zn.Na="timingevent",Qe(Ot,jt);var Yn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Br={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $n(){}function Ss(){}$n.prototype.h=null;var to,si={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function eo(){jt.call(this,"d")}function Ms(){jt.call(this,"c")}function xs(){}function yo(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new ii(this),this.P=Hs,this.W=new Vr(i=rr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}Qe(eo,jt),Qe(Ms,jt),Qe(xs,$n),xs.prototype.g=function(){return new XMLHttpRequest},xs.prototype.i=function(){return{}},to=new xs;var Hs=45e3,ts={},cs={};function $s(i,e,t){i.K=1,i.v=Qt(q(e)),i.s=t,i.U=!0,ds(i,null)}function ds(i,e){i.F=Date.now(),hi(i),i.A=q(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),L(t.h,"t",o),i.C=0,t=i.l.H,i.h=new oi,i.g=Da(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ts(on(i.Ia,i,i.g),i.O)),Oi(i.V,i.g,"readystatechange",i.gb),e=i.H?fr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ie(1),function Ji(i,e,t,o,u,h){i.info(function(){if(i.g)if(h)for(var v="",A=h.split("&"),H=0;H<A.length;H++){var K=A[H].split("=");if(1<K.length){var he=K[0];K=K[1];var xe=he.split("_");v=2<=xe.length&&"type"==xe[1]?v+(he+"=")+K+"&":v+(he+"=redacted&")}}else v=null;else v=h;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function aa(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function bi(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=_o(i,t),u==cs){4==e&&(i.o=4,ht(14),o=!1),Xi(i.j,i.m,null,"[Incomplete Response]");break}if(u==ts){i.o=4,ht(15),Xi(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Xi(i.j,i.m,u,null),vo(i,u)}aa(i)&&u!=cs&&u!=ts&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ht(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),En(e),e.L=!0,ht(11))):(Xi(i.j,i.m,t,"[Invalid Chunked Response]"),Or(i),ns(i))}function _o(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?cs:(t=Number(e.substring(t,o)),isNaN(t)?ts:(o+=1)+t>e.length?cs:(e=e.substr(o,t),i.C=o+t,e))}function hi(i){i.Y=Date.now()+i.P,Wo(i,i.P)}function Wo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=zt(on(i.eb,i),e)}function fi(i){i.B&&(de.clearTimeout(i.B),i.B=null)}function ns(i){0==i.l.G||i.I||so(i.l,i)}function Or(i){fi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ur(i.W),As(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function vo(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||ki(t.i,i)))if(t.I=i.N,!i.J&&ki(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(K){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=zt(on(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;ca(t),kr(t)}ko(t),ht(18)}if(1>=Qn(t.i)&&t.ka){try{t.ka()}catch(K){}t.ka=void 0}}else as(t,11)}else if((i.J||t.g==i)&&ca(t),!ur(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let K=u[e];if(t.U=K[0],K=K[1],2==t.G)if("c"==K[0]){t.J=K[1],t.la=K[2];const he=K[3];null!=he&&(t.ma=he,t.h.info("VER="+t.ma));const xe=K[4];null!=xe&&(t.za=xe,t.h.info("SVER="+t.za));const it=K[5];null!=it&&"number"==typeof it&&0<it&&(t.K=o=1.5*it,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const It=i.g;if(It){const At=It.g?It.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(At){var h=o.i;!h.g&&(Hn(At,"spdy")||Hn(At,"quic")||Hn(At,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(hs(h,h.h),h.h=null))}if(o.D){const dn=It.g?It.g.getResponseHeader("X-HTTP-Session-Id"):null;dn&&(o.sa=dn,ot(o.F,o.D,dn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((o=t).oa=ao(o,o.H?o.la:null,o.W),v.J){Fi(o.i,v);var A=v,H=o.K;H&&A.setTimeout(H),A.B&&(fi(A),hi(A)),o.g=v}else io(o);0<t.l.length&&Ba(t)}else"stop"!=K[0]&&"close"!=K[0]||as(t,7);else 3==t.G&&("stop"==K[0]||"close"==K[0]?"stop"==K[0]?as(t,7):No(t):"noop"!=K[0]&&t.j&&t.j.wa(K),t.A=0)}Ie(4)}catch(K){}}function Rs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ge(i)||"string"==typeof i)Nn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ge(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function no(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ge(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var h=0;h<u;h++)e.call(void 0,o[h],t&&t[h],i)}}function rs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof rs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function is(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];_i(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)_i(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function _i(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(re=yo.prototype).setTimeout=function(i){this.P=i},re.gb=function(i){i=i.target;const e=this.L;e&&3==Es(i)?e.l():this.Ia(i)},re.Ia=function(i){try{if(i==this.g)e:{const he=Es(this.g);var e=this.g.Da();const xe=this.g.ba();if(!(3>he)&&(3!=he||rr||this.g&&(this.h.h||this.g.ga()||ru(this.g)))){this.I||4!=he||7==e||Ie(8==e||0>=xe?3:2),fi(this);var t=this.g.ba();this.N=t;t:if(aa(this)){var o=ru(this.g);i="";var u=o.length,h=4==Es(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Or(this),ns(this);var v="";break t}this.h.i=new de.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:h&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function ls(i,e,t,o,u,h,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+h+" "+v})}(this.j,this.u,this.A,this.m,this.X,he,t),this.i){if(this.$&&!this.J){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ur(A)){var K=A;break t}}K=null}if(!(t=K)){this.i=!1,this.o=3,ht(12),Or(this),ns(this);break e}Xi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vo(this,t)}this.U?(bi(this,he,v),rr&&this.i&&3==he&&(Oi(this.V,this.W,"tick",this.fb),this.W.start())):(Xi(this.j,this.m,v,null),vo(this,v)),4==he&&Or(this),this.i&&!this.I&&(4==he?so(this.l,this):(this.i=!1,hi(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,ht(12)):(this.o=0,ht(13)),Or(this),ns(this)}}}catch(he){}},re.fb=function(){if(this.g){var i=Es(this.g),e=this.g.ga();this.C<e.length&&(fi(this),bi(this,i,e),this.i&&4!=i&&hi(this))}},re.cancel=function(){this.I=!0,Or(this)},re.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Xs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ie(3),ht(17)),Or(this),this.o=2,ns(this)):Wo(this,this.Y-i)},(re=rs.prototype).R=function(){is(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},re.T=function(){return is(this),this.g.concat()},re.get=function(i,e){return _i(this.h,i)?this.h[i]:e},re.set=function(i,e){_i(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},re.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],h=this.get(u);i.call(e,h,u,this)}};var ua=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function k(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof k){this.g=void 0!==e?e:i.g,P(this,i.j),this.s=i.s,Q(this,i.i),Ee(this,i.m),this.l=i.l,e=i.h;var t=new Pi;t.i=e.i,e.g&&(t.g=new rs(e.g),t.h=e.h),rt(this,t),this.o=i.o}else i&&(t=String(i).match(ua))?(this.g=!!e,P(this,t[1]||"",!0),this.s=In(t[2]||""),Q(this,t[3]||"",!0),Ee(this,t[4]),this.l=In(t[5]||"",!0),rt(this,t[6]||"",!0),this.o=In(t[7]||"")):(this.g=!!e,this.h=new Pi(null,this.g))}function q(i){return new k(i)}function P(i,e,t){i.j=t?In(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Q(i,e,t){i.i=t?In(e,!0):e}function Ee(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function rt(i,e,t){e instanceof Pi?(i.h=e,function R(i,e){e&&!i.j&&(vs(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Eo(this,o),L(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Ln(e,vi)),i.h=new Pi(e,i.g))}function ot(i,e,t){i.h.set(e,t)}function Qt(i){return ot(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function In(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ln(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Nr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Nr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}k.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ln(e,or,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ln(e,or,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ln(t,"/"==t.charAt(0)?Pr:Dr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ln(t,vn)),i.join("")};var or=/[#\/\?@]/g,Dr=/[#\?:]/g,Pr=/[#\?]/g,vi=/[#\?@]/g,vn=/#/g;function Pi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function vs(i){i.g||(i.g=new rs,i.h=0,i.i&&function _r(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var h=i[t].substring(0,o);u=i[t].substring(o+1)}else h=i[t];e(h,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Eo(i,e){vs(i),e=N(i,e),_i(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,_i((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&is(i)))}function Mo(i,e){return vs(i),e=N(i,e),_i(i.g.h,e)}function L(i,e,t){Eo(i,e),0<t.length&&(i.i=null,i.g.set(N(i,e),wr(t)),i.h+=t.length)}function N(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ve(i){this.l=i||Tt,i=de.PerformanceNavigationTiming?0<(i=de.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(de.g&&de.g.Ea&&de.g.Ea()&&de.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(re=Pi.prototype).add=function(i,e){vs(this),this.i=null,i=N(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},re.forEach=function(i,e){vs(this),this.g.forEach(function(t,o){Nn(t,function(u){i.call(e,u,o,this)},this)},this)},re.T=function(){vs(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],h=0;h<u.length;h++)t.push(e[o]);return t},re.R=function(i){vs(this);var e=[];if("string"==typeof i)Mo(this,i)&&(e=Wn(e,this.g.get(N(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Wn(e,i[t])}return e},re.set=function(i,e){return vs(this),this.i=null,Mo(this,i=N(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},re.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},re.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var h=0;h<o.length;h++){var v=u;""!==o[h]&&(v+="="+encodeURIComponent(String(o[h]))),i.push(v)}}return this.i=i.join("&")};var Tt=10;function pr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Qn(i){return i.h?1:i.g?i.g.size:0}function ki(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function hs(i,e){i.g?i.g.add(e):i.h=e}function Fi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Os(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return wr(i.i)}function wo(){}function Iu(){this.g=new wo}function ju(i,e,t){const o=t||"";try{Rs(i,function(u,h){let v=u;_t(u)&&(v=mr(u)),e.push(o+h+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ro(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(h){}}function Si(i){this.l=i.$b||null,this.j=i.ib||!1}function fs(i,e){Bt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ve.prototype.cancel=function(){if(this.i=Os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},wo.prototype.stringify=function(i){return de.JSON.stringify(i,void 0)},wo.prototype.parse=function(i){return de.JSON.parse(i,void 0)},Qe(Si,$n),Si.prototype.g=function(){return new fs(this.l,this.j)},Si.prototype.i=function(i){return function(){return i}}({}),Qe(fs,Bt);var ba=0;function xo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function ss(i){i.readyState=4,i.l=null,i.j=null,i.A=null,qo(i)}function qo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(re=fs.prototype).open=function(i,e){if(this.readyState!=ba)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,qo(this)},re.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||de).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ss(this)),this.readyState=ba},re.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==de.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xo(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},re.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ss(this):qo(this),3==this.readyState&&xo(this)}},re.Ua=function(i){this.g&&(this.response=this.responseText=i,ss(this))},re.Ta=function(i){this.g&&(this.response=i,ss(this))},re.ha=function(){this.g&&ss(this)},re.setRequestHeader=function(i,e){this.v.append(i,e)},re.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},re.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Na=de.JSON.parse;function Jr(i){Bt.call(this),this.headers=new rs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nu,this.K=this.L=!1}Qe(Jr,Bt);var nu="",Pa=/^https?$/i,ka=["POST","PUT"];function Ko(i){return"content-type"==i.toLowerCase()}function Fa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ia(i),La(i)}function Ia(i){i.D||(i.D=!0,yn(i,"complete"),yn(i,"error"))}function bo(i){if(i.h&&void 0!==ce&&(!i.C[1]||4!=Es(i)||2!=i.ba()))if(i.v&&4==Es(i))yr(i.Fa,0,i);else if(yn(i,"readystatechange"),4==Es(i)){i.h=!1;try{const A=i.ba();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===A){var u=String(i.H).match(ua)[1]||null;if(!u&&de.self&&de.self.location){var h=de.self.location.protocol;u=h.substr(0,h.length-1)}o=!Pa.test(u?u.toLowerCase():"")}t=o}if(t)yn(i,"complete"),yn(i,"success");else{i.m=6;try{var v=2<Es(i)?i.g.statusText:""}catch(H){v=""}i.j=v+" ["+i.ba()+"]",Ia(i)}}finally{La(i)}}}function La(i,e){if(i.g){Ro(i);const t=i.g,o=i.C[0]?Be:null;i.g=null,i.C=null,e||yn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function Ro(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(de.clearTimeout(i.A),i.A=null)}function Es(i){return i.g?i.g.readyState:0}function ru(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case nu:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Du(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function la(i){let e="";return ci(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ot(i,e,t))}function Oo(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function os(i){this.za=0,this.l=[],this.h=new Js,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Oo("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Oo("baseRetryDelayMs",5e3,i),this.$a=Oo("retryDelaySeedMs",1e4,i),this.Ya=Oo("forwardChannelMaxRetries",2,i),this.ra=Oo("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ve(i&&i.concurrentRequestLimit),this.Ca=new Iu,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function No(i){if(Va(i),3==i.G){var e=i.V++,t=q(i.F);ot(t,"SID",i.J),ot(t,"RID",e),ot(t,"TYPE","terminate"),ja(i,t),(e=new yo(i,i.h,e,void 0)).K=2,e.v=Qt(q(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=Da(e.l,null),e.g.ea(e.v)),e.F=Date.now(),hi(e)}$u(i)}function kr(i){i.g&&(En(i),i.g.cancel(),i.g=null)}function Va(i){kr(i),i.u&&(de.clearTimeout(i.u),i.u=null),ca(i),i.i.cancel(),i.m&&("number"==typeof i.m&&de.clearTimeout(i.m),i.m=null)}function Ua(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ba(i)}function Ba(i){pr(i.i)||i.m||(i.m=!0,Sn(i.Ha,i),i.C=0)}function Hu(i,e){var t;t=e?e.m:i.V++;const o=q(i.F);ot(o,"SID",i.J),ot(o,"RID",t),ot(o,"AID",i.U),ja(i,o),i.o&&i.s&&Du(o,i.o,i.s),t=new yo(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Po(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),hs(i.i,t),$s(t,o,e)}function ja(i,e){i.j&&Rs({},function(t,o){ot(e,o,t)})}function Po(i,e,t){t=Math.min(i.l.length,t);var o=i.j?on(i.j.Oa,i.j,i):null;e:{var u=i.l;let h=-1;for(;;){const v=["count="+t];-1==h?0<t?(h=u[0].h,v.push("ofs="+h)):h=0:v.push("ofs="+h);let A=!0;for(let H=0;H<t;H++){let K=u[H].h;const he=u[H].g;if(K-=h,0>K)h=Math.max(0,u[H].h-100),A=!1;else try{ju(he,v,"req"+K+"_")}catch(xe){o&&o(he)}}if(A){o=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function io(i){i.g||i.u||(i.Y=1,Sn(i.Ga,i),i.A=0)}function ko(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=zt(on(i.Ga,i),oo(i,i.A)),i.A++,0))}function En(i){null!=i.B&&(de.clearTimeout(i.B),i.B=null)}function Ca(i){i.g=new yo(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=q(i.oa);ot(e,"RID","rpc"),ot(e,"SID",i.J),ot(e,"CI",i.N?"0":"1"),ot(e,"AID",i.U),ja(i,e),ot(e,"TYPE","xmlhttp"),i.o&&i.s&&Du(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Qt(q(e)),t.s=null,t.U=!0,ds(t,i)}function ca(i){null!=i.v&&(de.clearTimeout(i.v),i.v=null)}function so(i,e){var t=null;if(i.g==e){ca(i),En(i),i.g=null;var o=2}else{if(!ki(i.i,e))return;t=e.D,Fi(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;yn(o=js(),new Ot(o,t,e,u)),Ba(i)}else io(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function Gs(i,e){return!(Qn(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=zt(on(i.Ha,i,e),oo(i,i.C)),i.C++,0)))}(i,e)||2==o&&ko(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:as(i,5);break;case 4:as(i,10);break;case 3:as(i,6);break;default:as(i,2)}}function oo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function as(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=on(i.jb,i);t||(t=new k("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||P(t,"https"),Qt(t)),function hl(i,e){const t=new Js;if(de.Image){const o=new Image;o.onload=tt(ro,t,o,"TestLoadImage: loaded",!0,e),o.onerror=tt(ro,t,o,"TestLoadImage: error",!1,e),o.onabort=tt(ro,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=tt(ro,t,o,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else ht(2);i.G=0,i.j&&i.j.va(e),$u(i),Va(i)}function $u(i){i.G=0,i.I=-1,i.j&&((0!=Os(i.i).length||0!=i.l.length)&&(i.i.i.length=0,wr(i.l),i.l.length=0),i.j.ua())}function ao(i,e,t){let o=function Mn(i){return i instanceof k?q(i):new k(i,void 0)}(t);if(""!=o.i)e&&Q(o,e+"."+o.i),Ee(o,o.m);else{const u=de.location;o=function nr(i,e,t,o){var u=new k(null,void 0);return i&&P(u,i),e&&Q(u,e),t&&Ee(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&ci(i.aa,function(u,h){ot(o,h,u)}),t=i.sa,(e=i.D)&&t&&ot(o,e,t),ot(o,"VER",i.ma),ja(i,o),o}function Da(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&i.Ba&&!i.qa?new Si({ib:!0}):i.qa)).L=i.H,e}function Tu(){}function Ha(){if(Yt&&!(10<=Number(yt)))throw Error("Environmental error: no available transport.")}function Ns(i,e){Bt.call(this),this.g=new os(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!ur(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ur(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new zs(this)}function ws(i){eo.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Zo(){Ms.call(this),this.status=1}function zs(i){this.g=i}(re=Jr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():to.g(),this.C=function es(i){return i.h||(i.h=i.i())}(this.u?this.u:to),this.g.onreadystatechange=on(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(h){return void Fa(this,h)}i=t||"";const u=new rs(this.headers);o&&Rs(o,function(h,v){u.set(v,h)}),o=function Kn(i){e:{var e=Ko;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=de.FormData&&i instanceof de.FormData,!(0<=an(ka,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(h,v){this.g.setRequestHeader(v,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ro(this),0<this.B&&((this.K=function Cu(i){return Yt&&function pt(){return function Gr(i){var e=Ae;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=lr(String(Fr)).split("."),t=lr("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var u=e[v]||"",h=t[v]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==u[0].length&&0==h[0].length)break;i=Wt(0==u[1].length?0:parseInt(u[1],10),0==h[1].length?0:parseInt(h[1],10))||Wt(0==u[2].length,0==h[2].length)||Wt(u[2],h[2]),u=u[3],h=h[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=on(this.pa,this)):this.A=yr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Fa(this,h)}},re.pa=function(){void 0!==ce&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},re.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yn(this,"complete"),yn(this,"abort"),La(this))},re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),La(this,!0)),Jr.Z.M.call(this)},re.Fa=function(){this.s||(this.F||this.v||this.l?bo(this):this.cb())},re.cb=function(){bo(this)},re.ba=function(){try{return 2<Es(this)?this.g.status:-1}catch(i){return-1}},re.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},re.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Na(e)}},re.Da=function(){return this.m},re.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(re=os.prototype).ma=8,re.G=1,re.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},re.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new yo(this,this.h,i,void 0);let h=this.s;if(this.P&&(h?(h=fr(h),br(h,this.P)):h=this.P),null===this.o&&(u.H=h),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Po(this,u,e),ot(t=q(this.F),"RID",i),ot(t,"CVER",22),this.D&&ot(t,"X-HTTP-Session-Id",this.D),ja(this,t),this.o&&h&&Du(t,this.o,h),hs(this.i,u),this.Ra&&ot(t,"TYPE","init"),this.ja?(ot(t,"$req",e),ot(t,"SID","null"),u.$=!0,$s(u,t,null)):$s(u,t,e),this.G=2}}else 3==this.G&&(i?Hu(this,i):0==this.l.length||pr(this.i)||Hu(this))},re.Ga=function(){if(this.u=null,Ca(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=zt(on(this.bb,this),i)}},re.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ht(10),kr(this),Ca(this))},re.ab=function(){null!=this.v&&(this.v=null,kr(this),ko(this),ht(19))},re.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ht(2)):(this.h.info("Failed to ping google.com"),ht(1))},(re=Tu.prototype).xa=function(){},re.wa=function(){},re.va=function(){},re.ua=function(){},re.Oa=function(){},Ha.prototype.g=function(i,e){return new Ns(i,e)},Qe(Ns,Bt),Ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Sn(on(i.hb,i,e))),ht(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ao(i,null,i.W),Ba(i)},Ns.prototype.close=function(){No(this.g)},Ns.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Ua(this.g,e)}else this.v?((e={}).__data__=mr(i),Ua(this.g,e)):Ua(this.g,i)},Ns.prototype.M=function(){this.g.j=null,delete this.j,No(this.g),delete this.g,Ns.Z.M.call(this)},Qe(ws,eo),Qe(Zo,Ms),Qe(zs,Tu),zs.prototype.xa=function(){yn(this.g,"a")},zs.prototype.wa=function(i){yn(this.g,new ws(i))},zs.prototype.va=function(i){yn(this.g,new Zo(i))},zs.prototype.ua=function(){yn(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Br.COMPLETE="complete",Ss.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",Bt.prototype.listen=Bt.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var uo=ke.createWebChannelTransport=function(){return new Ha},Io=ke.getStatEventTarget=function(){return js()},$a=ke.ErrorCode=Yn,da=ke.EventType=Br,Ws=ke.Event=Zn,Xr=ke.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ai=ke.FetchXmlHttpFactory=Si,Co=ke.WebChannel=Ss,Ta=ke.XhrIo=Jr;const Au="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let Fo="9.8.0";const Lo=new ct.Yd("@firebase/firestore");function Yo(){return Lo.logLevel}function St(i,...e){if(Lo.logLevel<=ct.in.DEBUG){const t=e.map(C);Lo.debug(`Firestore (${Fo}): ${i}`,...t)}}function jr(i,...e){if(Lo.logLevel<=ct.in.ERROR){const t=e.map(C);Lo.error(`Firestore (${Fo}): ${i}`,...t)}}function T(i,...e){if(Lo.logLevel<=ct.in.WARN){const t=e.map(C);Lo.warn(`Firestore (${Fo}): ${i}`,...t)}}function C(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function E(i="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+i;throw jr(e),new Error(e)}function M(i,e){i||E()}function G(i,e){return i}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends st.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class et{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Li.UNAUTHENTICATED))}shutdown(){}}class ln{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gr{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const h=K=>this.i!==u?(u=this.i,t(K)):Promise.resolve();let v=new et;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new et,e.enqueueRetryable(()=>h(this.currentUser))};const A=()=>{const K=v;e.enqueueRetryable((0,oe.Z)(function*(){yield K.promise,yield h(o.currentUser)}))},H=K=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=K,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(K=>H(K)),setTimeout(()=>{if(!this.auth){const K=this.t.getImmediate({optional:!0});K?H(K):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new et)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(M("string"==typeof o.accessToken),new qt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return M(null===e||"string"==typeof e),new Li(e)}}class vr{constructor(e,t,o){this.type="FirstParty",this.user=Li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Tr{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new vr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ps{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=h=>{null!=h.error&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const v=h.token!==this.p;return this.p=h.token,St("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const u=h=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.g.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.g.getImmediate({optional:!0});h?u(h):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(M("string"==typeof t.token),this.p=t.token,new Ps(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Yr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ha(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Yr.A=-1;class Qo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=ha(40);for(let h=0;h<u.length;++h)o.length<20&&u[h]<t&&(o+=e.charAt(u[h]%e.length))}return o}}function Vn(i,e){return i<e?-1:i>e?1:0}function Aa(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function za(i){return i+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ar(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tn(e)}static min(){return new Tn(new Ar(0,0))}static max(){return new Tn(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ii(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function iu(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function rc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Gu{constructor(e,t,o){void 0===t?t=0:t>e.length&&E(),void 0===o?o=e.length-t:o>e.length-t&&E(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Gu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gu?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const h=e.get(u),v=t.get(u);if(h<v)return-1;if(h>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pn extends Gu{construct(e,t,o){return new Pn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Pn(t)}static emptyPath(){return new Pn([])}}const Su=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends Gu{construct(e,t,o){return new us(e,t,o)}static isValidIdentifier(e){return Su.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new us(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const h=()=>{if(0===o.length)throw new ne(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;u<e.length;){const A=e[u];if("\\"===A){if(u+1===e.length)throw new ne(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[u+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new ne(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=H,u+=2}else"`"===A?(v=!v,u++):"."!==A||v?(o+=A,u++):(h(),u++)}if(h(),v)throw new ne(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new us(t)}static emptyPath(){return new us([])}}class fa{constructor(e){this.fields=e,e.sort(us.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vi(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const Ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(i){if(M(!!i),"string"==typeof i){let e=0;const t=Ui.exec(i);if(M(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Qr(i.seconds),nanos:Qr(i.nanos)}}function Qr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function pa(i){return"string"==typeof i?Vi.fromBase64String(i):Vi.fromUint8Array(i)}function zu(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bs(i){const e=i.mapValue.fields.__previous_value__;return zu(e)?bs(e):e}function ps(i){const e=To(i.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class lo{constructor(e,t,o,u,h,v,A,H){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=h,this.forceLongPolling=v,this.autoDetectLongPolling=A,this.useFetchStreams=H}}class Ei{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ei("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ei&&e.projectId===this.projectId&&e.database===this.database}}function Is(i){return null==i}function Ao(i){return 0===i&&1/i==-1/0}function Jo(i){return"number"==typeof i&&Number.isInteger(i)&&!Ao(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ft{constructor(e){this.path=e}static fromPath(e){return new Ft(Pn.fromString(e))}static fromName(e){return new Ft(Pn.fromString(e).popFirst(5))}static empty(){return new Ft(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ft(new Pn(e.slice()))}}const co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},su={nullValue:"NULL_VALUE"};function Wa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?zu(i)?4:Ml(i)?9007199254740991:10:E()}function pi(i,e){if(i===e)return!0;const t=Wa(i);if(t!==Wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ps(i).isEqual(ps(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=To(o.timestampValue),v=To(u.timestampValue);return h.seconds===v.seconds&&h.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,pa(i.bytesValue).isEqual(pa(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Qr(o.geoPointValue.latitude)===Qr(u.geoPointValue.latitude)&&Qr(o.geoPointValue.longitude)===Qr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Qr(o.integerValue)===Qr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Qr(o.doubleValue),v=Qr(u.doubleValue);return h===v?Ao(h)===Ao(v):isNaN(h)&&isNaN(v)}return!1}(i,e);case 9:return Aa(i.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:return function(o,u){const h=o.mapValue.fields||{},v=u.mapValue.fields||{};if(Ii(h)!==Ii(v))return!1;for(const A in h)if(h.hasOwnProperty(A)&&(void 0===v[A]||!pi(h[A],v[A])))return!1;return!0}(i,e);default:return E()}var u}function qa(i,e){return void 0!==(i.values||[]).find(t=>pi(t,e))}function ho(i,e){if(i===e)return 0;const t=Wa(i),o=Wa(e);if(t!==o)return Vn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vn(i.booleanValue,e.booleanValue);case 2:return function(u,h){const v=Qr(u.integerValue||u.doubleValue),A=Qr(h.integerValue||h.doubleValue);return v<A?-1:v>A?1:v===A?0:isNaN(v)?isNaN(A)?0:-1:1}(i,e);case 3:return ic(i.timestampValue,e.timestampValue);case 4:return ic(ps(i),ps(e));case 5:return Vn(i.stringValue,e.stringValue);case 6:return function(u,h){const v=pa(u),A=pa(h);return v.compareTo(A)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const v=u.split("/"),A=h.split("/");for(let H=0;H<v.length&&H<A.length;H++){const K=Vn(v[H],A[H]);if(0!==K)return K}return Vn(v.length,A.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const v=Vn(Qr(u.latitude),Qr(h.latitude));return 0!==v?v:Vn(Qr(u.longitude),Qr(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,h){const v=u.values||[],A=h.values||[];for(let H=0;H<v.length&&H<A.length;++H){const K=ho(v[H],A[H]);if(K)return K}return Vn(v.length,A.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,h){if(u===co.mapValue&&h===co.mapValue)return 0;if(u===co.mapValue)return 1;if(h===co.mapValue)return-1;const v=u.fields||{},A=Object.keys(v),H=h.fields||{},K=Object.keys(H);A.sort(),K.sort();for(let he=0;he<A.length&&he<K.length;++he){const xe=Vn(A[he],K[he]);if(0!==xe)return xe;const it=ho(v[A[he]],H[K[he]]);if(0!==it)return it}return Vn(A.length,K.length)}(i.mapValue,e.mapValue);default:throw E()}}function ic(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Vn(i,e);const t=To(i),o=To(e),u=Vn(t.seconds,o.seconds);return 0!==u?u:Vn(t.nanos,o.nanos)}function qs(i){return xu(i)}function xu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=To(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?pa(i.bytesValue).toBase64():"referenceValue"in i?Ft.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",h=!0;for(const v of o.values||[])h?h=!1:u+=",",u+=xu(v);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let h="{",v=!0;for(const A of u)v?v=!1:h+=",",h+=`${A}:${xu(o.fields[A])}`;return h+"}"}(i.mapValue):E();var e}function Xo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ou(i){return!!i&&"integerValue"in i}function ks(i){return!!i&&"arrayValue"in i}function Wu(i){return!!i&&"nullValue"in i}function ga(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Uo(i){return!!i&&"mapValue"in i}function Ka(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return iu(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Ka(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ml(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mi(i){return"nullValue"in i?su:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Xo(Ei.empty(),Ft.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:E()}function Za(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Xo(Ei.empty(),Ft.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?co:E()}function au(i,e){const t=ho(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function x(i,e){const t=ho(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class F{constructor(e){this.value=e}static empty(){return new F({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Uo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=us.emptyPath(),o={},u=[];e.forEach((v,A)=>{if(!t.isImmediateParentOf(A)){const H=this.getFieldsMap(t);this.applyChanges(H,o,u),o={},u=[],t=A.popLast()}v?o[A.lastSegment()]=Ka(v):u.push(A.lastSegment())});const h=this.getFieldsMap(t);this.applyChanges(h,o,u)}delete(e){const t=this.field(e.popLast());Uo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Uo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){iu(t,(u,h)=>e[u]=h);for(const u of o)delete e[u]}clone(){return new F(Ka(this.value))}}function Y(i){const e=[];return iu(i.fields,(t,o)=>{const u=new us([t]);if(Uo(o)){const h=Y(o.mapValue).fields;if(0===h.length)e.push(u);else for(const v of h)e.push(u.child(v))}else e.push(u)}),new fa(e)}class ae{constructor(e,t,o,u,h,v){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=h,this.documentState=v}static newInvalidDocument(e){return new ae(e,0,Tn.min(),Tn.min(),F.empty(),0)}static newFoundDocument(e,t,o){return new ae(e,1,t,Tn.min(),o,0)}static newNoDocument(e,t){return new ae(e,2,t,Tn.min(),F.empty(),0)}static newUnknownDocument(e,t){return new ae(e,3,t,Tn.min(),F.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=F.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=F.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ue{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Xe(i){return i.fields.find(e=>2===e.kind)}function Dt(i){return i.fields.filter(e=>2!==e.kind)}Ue.UNKNOWN_ID=-1;class un{constructor(e,t){this.fieldPath=e,this.kind=t}}class hn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hn(0,Dn.min())}}function xn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Tn.fromTimestamp(1e9===o?new Ar(t+1,0):new Ar(t,o));return new Dn(u,Ft.empty(),e)}function Jn(i){return new Dn(i.readTime,i.key,-1)}class Dn{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Dn(Tn.min(),Ft.empty(),-1)}static max(){return new Dn(Tn.max(),Ft.empty(),-1)}}function $i(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ft.comparator(i.documentKey,e.documentKey),0!==t?t:Vn(i.largestBatchId,e.largestBatchId))}class Xn{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}}class ma{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?o(e.key,t):1,t&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,o,u,h){this.key=e,this.value=t,this.color=null!=o?o:Ci.RED,this.left=null!=u?u:Ci.EMPTY,this.right=null!=h?h:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,h){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const h=o(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===h?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Ci.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw E();const e=this.left.check();if(e!==this.right.check())throw E();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw E()}get value(){throw E()}get color(){throw E()}get left(){throw E()}get right(){throw E()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Ci(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ks(this.data.getIterator())}getIteratorFrom(e){return new Ks(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,h=o.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class Ks{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cs(i){return i.hasNext()?i.getNext():void 0}class Ya{constructor(e,t=null,o=[],u=[],h=null,v=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=h,this.startAt=v,this.endAt=A,this.P=null}}function sc(i,e=null,t=[],o=[],u=null,h=null,v=null){return new Ya(i,e,t,o,u,h,v)}function Qa(i){const e=G(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+qs(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Is(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>qs(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>qs(o)).join(",")),e.P=t}return e.P}function uu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Ku(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!pi(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!kc(i.startAt,e.startAt)&&kc(i.endAt,e.endAt)}function Ru(i){return Ft.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function qu(i,e){return i.filters.filter(t=>t instanceof Gi&&t.field.isEqual(e))}function Nc(i,e,t){let o=su,u=!0;for(const h of qu(i,e)){let v=su,A=!0;switch(h.op){case"<":case"<=":v=Mi(h.value);break;case"==":case"in":case">=":v=h.value;break;case">":v=h.value,A=!1;break;case"!=":case"not-in":v=su}au({value:o,inclusive:u},{value:v,inclusive:A})<0&&(o=v,u=A)}if(null!==t)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=t.position[h];au({value:o,inclusive:u},{value:v,inclusive:t.inclusive})<0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}function lu(i,e,t){let o=co,u=!0;for(const h of qu(i,e)){let v=co,A=!0;switch(h.op){case">=":case">":v=Za(h.value),A=!1;break;case"==":case"in":case"<=":v=h.value;break;case"<":v=h.value,A=!1;break;case"!=":case"not-in":v=co}x({value:o,inclusive:u},{value:v,inclusive:A})>0&&(o=v,u=A)}if(null!==t)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=t.position[h];x({value:o,inclusive:u},{value:v,inclusive:t.inclusive})>0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}class Gi extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Rl(e,t,o):"array-contains"===t?new Sd(e,o):"in"===t?new fl(e,o):"not-in"===t?new _h(e,o):"array-contains-any"===t?new vh(e,o):new Gi(e,t,o)}static V(e,t,o){return"in"===t?new yh(e,o):new Ol(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ho(t,this.value)):null!==t&&Wa(this.value)===Wa(t)&&this.v(ho(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return E()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Rl extends Gi{constructor(e,t,o){super(e,t,o),this.key=Ft.fromName(o.referenceValue)}matches(e){const t=Ft.comparator(e.key,this.key);return this.v(t)}}class yh extends Gi{constructor(e,t){super(e,"in",t),this.keys=Nl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ol extends Gi{constructor(e,t){super(e,"not-in",t),this.keys=Nl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ft.fromName(o.referenceValue))}class Sd extends Gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ks(t)&&qa(t.arrayValue,this.value)}}class fl extends Gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qa(this.value.arrayValue,t)}}class _h extends Gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qa(this.value.arrayValue,t)}}class vh extends Gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ks(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>qa(this.value.arrayValue,o))}}class Sa{constructor(e,t){this.position=e,this.inclusive=t}}class cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ku(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Pc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const h=e[u],v=i.position[u];if(o=h.field.isKeyField()?Ft.comparator(Ft.fromName(v.referenceValue),t.key):ho(v,t.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function kc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!pi(i.position[t],e.position[t]))return!1;return!0}class du{constructor(e,t=null,o=[],u=[],h=null,v="F",A=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=h,this.limitType=v,this.startAt=A,this.endAt=H,this.D=null,this.C=null}}function Ou(i,e,t,o,u,h,v,A){return new du(i,e,t,o,u,h,v,A)}function hu(i){return new du(i)}function Pl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function ac(i){for(const e of i.filters)if(e.S())return e.field;return null}function Ja(i){return null!==i.collectionGroup}function Zu(i){const e=G(i);if(null===e.D){e.D=[];const t=ac(e),o=Pl(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new cu(t)),e.D.push(new cu(us.keyField(),"asc"));else{let u=!1;for(const h of e.explicitOrderBy)e.D.push(h),h.field.isKeyField()&&(u=!0);if(!u){const h=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new cu(us.keyField(),h))}}}return e.D}function ya(i){const e=G(i);if(!e.C)if("F"===e.limitType)e.C=sc(e.path,e.collectionGroup,Zu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const h of Zu(e))t.push(new cu(h.field,"desc"===h.dir?"asc":"desc"));const o=e.endAt?new Sa(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Sa(e.startAt.position,e.startAt.inclusive):null;e.C=sc(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function Fc(i,e,t){return new du(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function pl(i,e){return uu(ya(i),ya(e))&&i.limitType===e.limitType}function gl(i){return`${Qa(ya(i))}|lt:${i.limitType}`}function So(i){return`Query(target=${function xl(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${qs(o.value)}`;var o}).join(", ")}]`),Is(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>qs(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>qs(t)).join(",")),`Target(${e})`}(ya(i))}; limitType=${i.limitType})`}function Xa(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ft.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,h,v){const A=Pc(u,h,v);return u.inclusive?A<=0:A<0}(t.startAt,Zu(t),o)||t.endAt&&!function(u,h,v){const A=Pc(u,h,v);return u.inclusive?A>=0:A>0}(t.endAt,Zu(t),o)));var t,o}function Bo(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function uc(i){return(e,t)=>{let o=!1;for(const u of Zu(i)){const h=lc(u,e,t);if(0!==h)return h;o=o||u.field.isKeyField()}return 0}}function lc(i,e,t){const o=i.field.isKeyField()?Ft.comparator(e.key,t.key):function(u,h,v){const A=h.data.field(u),H=v.data.field(u);return null!==A&&null!==H?ho(A,H):E()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return E()}}function Lc(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function kl(i){return{integerValue:""+i}}function Vc(i,e){return Jo(e)?kl(e):Lc(i,e)}class Yu{constructor(){this._=void 0}}function Uc(i,e,t){return i instanceof Qu?function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(h.fields.__previous_value__=u),{mapValue:h}}(t,e):i instanceof Ju?_a(i,e):i instanceof va?cc(i,e):function(o,u){const h=Bc(o,u),v=Xu(h)+Xu(o.k);return ou(h)&&ou(o.k)?kl(v):Lc(o.M,v)}(i,e)}function Md(i,e,t){return i instanceof Ju?_a(i,e):i instanceof va?cc(i,e):t}function Bc(i,e){return i instanceof Fs?ou(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Qu extends Yu{}class Ju extends Yu{constructor(e){super(),this.elements=e}}function _a(i,e){const t=ml(e);for(const o of i.elements)t.some(u=>pi(u,o))||t.push(o);return{arrayValue:{values:t}}}class va extends Yu{constructor(e){super(),this.elements=e}}function cc(i,e){let t=ml(e);for(const o of i.elements)t=t.filter(u=>!pi(u,o));return{arrayValue:{values:t}}}class Fs extends Yu{constructor(e,t){super(),this.M=e,this.k=t}}function Xu(i){return Qr(i.integerValue||i.doubleValue)}function ml(i){return ks(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class yl{constructor(e,t){this.field=e,this.transform=t}}class Hc{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class _{}function c(i,e,t){i instanceof te?function(o,u,h){const v=o.value.clone(),A=qe(o.fieldTransforms,u,h.transformResults);v.setAll(A),u.convertToFoundDocument(h.version,v).setHasCommittedMutations()}(i,e,t):i instanceof se?function(o,u,h){if(!dc(o.precondition,u))return void u.convertToUnknownDocument(h.version);const v=qe(o.fieldTransforms,u,h.transformResults),A=u.data;A.setAll(_e(o)),A.setAll(v),u.convertToFoundDocument(h.version,A).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function m(i,e,t){var u;i instanceof te?function(o,u,h){if(!dc(o.precondition,u))return;const v=o.value.clone(),A=Et(o.fieldTransforms,h,u);v.setAll(A),u.convertToFoundDocument($(u),v).setHasLocalMutations()}(i,e,t):i instanceof se?function(o,u,h){if(!dc(o.precondition,u))return;const v=Et(o.fieldTransforms,h,u),A=u.data;A.setAll(_e(o)),A.setAll(v),u.convertToFoundDocument($(u),A).setHasLocalMutations()}(i,e,t):dc(i.precondition,u=e)&&u.convertToNoDocument(Tn.min())}function b(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),h=Bc(o.transform,u||null);null!=h&&(null==t&&(t=F.empty()),t.set(o.field,h))}return t||null}function O(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Aa(t,o,(u,h)=>function jc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ju&&o instanceof Ju||t instanceof va&&o instanceof va?Aa(t.elements,o.elements,pi):t instanceof Fs&&o instanceof Fs?pi(t.k,o.k):t instanceof Qu&&o instanceof Qu);var t,o}(u,h))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function $(i){return i.isFoundDocument()?i.version:Tn.min()}class te extends _{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class se extends _{constructor(e,t,o,u,h=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=h,this.type=1}}function _e(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function qe(i,e,t){const o=new Map;M(i.length===t.length);for(let u=0;u<t.length;u++){const h=i[u],v=h.transform,A=e.data.field(h.field);o.set(h.field,Md(v,A,t[u]))}return o}function Et(i,e,t){const o=new Map;for(const u of i){const h=u.transform,v=t.data.field(u.field);o.set(u.field,Uc(h,v,e))}return o}class Lt extends _{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class tn extends _{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class wn{constructor(e){this.count=e}}var Nt,bt;function Rn(i){switch(i){default:return E();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function qr(i){if(void 0===i)return jr("GRPC error has no .code"),W.UNKNOWN;switch(i){case Nt.OK:return W.OK;case Nt.CANCELLED:return W.CANCELLED;case Nt.UNKNOWN:return W.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return W.INTERNAL;case Nt.UNAVAILABLE:return W.UNAVAILABLE;case Nt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Nt.NOT_FOUND:return W.NOT_FOUND;case Nt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Nt.ABORTED:return W.ABORTED;case Nt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Nt.DATA_LOSS:return W.DATA_LOSS;default:return E()}}(bt=Nt||(Nt={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";class ar{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,h]of o)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,(t,o)=>{for(const[u,h]of o)e(u,h)})}isEmpty(){return rc(this.inner)}size(){return this.innerSize}}const Sr=new Xn(Ft.comparator);function jn(){return Sr}const jo=new Xn(Ft.comparator);function ms(...i){let e=jo;for(const t of i)e=e.insert(t.key,t);return e}function ui(){return new ar(i=>i.toString(),(i,e)=>i.isEqual(e))}const fo=new Xn(Ft.comparator),Ho=new dr(Ft.comparator);function hr(...i){let e=Ho;for(const t of i)e=e.add(t);return e}const el=new dr(Vn);function Bi(){return el}class $o{constructor(e,t,o,u,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t)),new $o(Tn.min(),o,Bi(),jn(),hr())}}class fu{constructor(e,t,o,u,h){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fu(Vi.EMPTY_BYTE_STRING,t,hr(),hr(),hr())}}class pu{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class Gt{constructor(e,t){this.targetId=e,this.$=t}}class bn{constructor(e,t,o=Vi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class On{constructor(){this.B=0,this.L=Di(),this.U=Vi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=hr(),t=hr(),o=hr();return this.L.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:E()}}),new fu(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=Di()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Er{constructor(e){this.nt=e,this.st=new Map,this.it=jn(),this.rt=ys(),this.ot=new dr(Vn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:E()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const h=u.target;if(Ru(h))if(0===o){const v=new Ft(h.path);this.ct(t,v,ae.newNoDocument(v,Tn.min()))}else M(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((h,v)=>{const A=this.wt(v);if(A){if(h.current&&Ru(A.target)){const H=new Ft(A.target.path);null!==this.it.get(H)||this.It(v,H)||this.ct(v,H,ae.newNoDocument(H,e))}h.j&&(t.set(v,h.H()),h.J())}});let o=hr();this.rt.forEach((h,v)=>{let A=!0;v.forEachWhile(H=>{const K=this.wt(H);return!K||2===K.purpose||(A=!1,!1)}),A&&(o=o.add(h))}),this.it.forEach((h,v)=>v.setReadTime(e));const u=new $o(e,t,this.ot,this.it,o);return this.it=jn(),this.rt=ys(),this.ot=new dr(Vn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new On,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new dr(Vn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||St("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new On),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ys(){return new Xn(Ft.comparator)}function Di(){return new Xn(Ft.comparator)}const Ls={asc:"ASCENDING",desc:"DESCENDING"},Ma={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class xi{constructor(e,t){this.databaseId=e,this.N=t}}function eu(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fl(i,e){return i.N?e.toBase64():e.toUint8Array()}function po(i,e){return eu(i,e.toTimestamp())}function li(i){return M(!!i),Tn.fromTimestamp(function(e){const t=To(e);return new Ar(t.seconds,t.nanos)}(i))}function xa(i,e){return(t=i,new Pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function go(i){const e=Pn.fromString(i);return M(Pe(e)),e}function Ra(i,e){return xa(i.databaseId,e.path)}function gu(i,e){const t=go(e);if(t.get(1)!==i.databaseId.projectId)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ft(Go(t))}function xd(i,e){return xa(i.databaseId,e)}function hc(i){const e=go(i);return 4===e.length?Pn.emptyPath():Go(e)}function Ll(i){return new Pn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Go(i){return M(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function $c(i,e,t){return{name:Ra(i,e),fields:t.value.mapValue.fields}}function Gc(i,e,t){const o=gu(i,e.name),u=li(e.updateTime),h=new F({mapValue:{fields:e.fields}}),v=ae.newFoundDocument(o,u,h);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Nu(i,e){let t;if(e instanceof te)t={update:$c(i,e.key,e.value)};else if(e instanceof Lt)t={delete:Ra(i,e.key)};else if(e instanceof se)t={update:$c(i,e.key,e.data),updateMask:X(e.fieldMask)};else{if(!(e instanceof tn))return E();t={verify:Ra(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,h){const v=h.transform;if(v instanceof Qu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Ju)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof va)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Fs)return{fieldPath:h.field.canonicalString(),increment:v.k};throw E()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:po(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:E()),t;var u}function zc(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?gs.updateTime(li(u.updateTime)):void 0!==u.exists?gs.exists(u.exists):gs.none():gs.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(h,v){let A=null;"setToServerValue"in v?(M("REQUEST_TIME"===v.setToServerValue),A=new Qu):"appendMissingElements"in v?A=new Ju(v.appendMissingElements.values||[]):"removeAllFromArray"in v?A=new va(v.removeAllFromArray.values||[]):"increment"in v?A=new Fs(h,v.increment):E();const H=us.fromServerFormat(v.fieldPath);return new yl(H,A)}(i,u)):[];var u;if(e.update){const u=gu(i,e.update.name),h=new F({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new fa((e.updateMask.fieldPaths||[]).map(K=>us.fromServerFormat(K)));return new se(u,h,v,t,o)}return new te(u,h,t,o)}if(e.delete){const u=gu(i,e.delete);return new Lt(u,t)}if(e.verify){const u=gu(i,e.verify);return new tn(u,t)}return E()}function wh(i,e){return{documents:[xd(i,e.path)]}}function Wc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=xd(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xd(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(H){if(0===H.length)return;const K=H.map(he=>function(xe){if("=="===xe.op){if(ga(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NAN"}};if(Wu(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NULL"}}}else if("!="===xe.op){if(ga(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NOT_NAN"}};if(Wu(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:d(xe.field),op:y(xe.op),value:xe.value}}}(he));return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}(e.filters);u&&(t.structuredQuery.where=u);const h=function(H){if(0!==H.length)return H.map(K=>{return{field:d((he=K).field),direction:Vl(he.dir)};var he})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const v=(K=e.limit,i.N||Is(K)?K:{value:K});var K,A,H;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(A=e.startAt).inclusive,values:A.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function bh(i){let e=hc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){M(1===o);const he=t.from[0];he.allDescendants?u=he.collectionId:e=e.child(he.collectionId)}let h=[];t.where&&(h=Ch(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(he=>{return new cu(f((xe=he).field),function(it){switch(it){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xe.direction));var xe}));let A=null;t.limit&&(A=function(he){let xe;return xe="object"==typeof he?he.value:he,Is(xe)?null:xe}(t.limit));let H=null;var he;t.startAt&&(H=new Sa((he=t.startAt).values||[],!!he.before));let K=null;return t.endAt&&(K=function(he){return new Sa(he.values||[],!he.before)}(t.endAt)),Ou(e,u,v,h,A,"F",H,K)}function Ch(i){return i?void 0!==i.unaryFilter?[B(i)]:void 0!==i.fieldFilter?[I(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Ch(e)).reduce((e,t)=>e.concat(t)):E():[]}function Vl(i){return Ls[i]}function y(i){return Ma[i]}function d(i){return{fieldPath:i.canonicalString()}}function f(i){return us.fromServerFormat(i.fieldPath)}function I(i){return Gi.create(f(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return E()}}(i.fieldFilter.op),i.fieldFilter.value)}function B(i){switch(i.unaryFilter.op){case"IS_NAN":const e=f(i.unaryFilter.field);return Gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=f(i.unaryFilter.field);return Gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=f(i.unaryFilter.field);return Gi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=f(i.unaryFilter.field);return Gi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return E()}}function X(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pe(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function nt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=cn(e)),e=$t(i.get(t),e);return cn(e)}function $t(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const h=i.charAt(u);switch(h){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=h}}return t}function cn(i){return i+"\x01\x01"}function gn(i){const e=i.length;if(M(e>=2),2===e)return M("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Pn.emptyPath();const t=e-2,o=[];let u="";for(let h=0;h<e;){const v=i.indexOf("\x01",h);switch((v<0||v>t)&&E(),i.charAt(v+1)){case"\x01":const A=i.substring(h,v);let H;0===u.length?H=A:(u+=A,H=u,u=""),o.push(H);break;case"\x10":u+=i.substring(h,v),u+="\0";break;case"\x11":u+=i.substring(h,v+1);break;default:E()}h=v+2}return new Pn(o)}const An=["userId","batchId"];function zi(i,e){return[i,nt(e)]}function ea(i,e,t){return[i,nt(e),t]}const Ul={},Rd=["prefixPath","collectionGroup","readTime","documentId"],Dh=["prefixPath","collectionGroup","documentId"],_l=["collectionGroup","readTime","prefixPath","documentId"],qc=["canonicalId","targetId"],Kc=["targetId","path"],Th=["path","targetId"],Zc=["collectionId","parent"],Od=["indexId","uid"],Ah=["uid","sequenceNumber"],zf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nd=["indexId","uid","orderedDocumentKey"],Wf=["userId","collectionPath","documentId"],Uy=["userId","collectionPath","largestBatchId"],Ag=["userId","collectionGroup","largestBatchId"],Sh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sg=[...Sh,"documentOverlays"],Mh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],By=[...Mh,"indexConfiguration","indexState","indexEntries"],Mg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class dt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&E(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dt((o,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,u)},this.catchCallback=h=>{this.wrapFailure(t,h).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof dt?t:dt.resolve(t)}catch(t){return dt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dt.reject(t)}static resolve(e){return new dt((t,o)=>{t(e)})}static reject(e){return new dt((t,o)=>{o(e)})}static waitFor(e){return new dt((t,o)=>{let u=0,h=0,v=!1;e.forEach(A=>{++u,A.next(()=>{++h,v&&h===u&&t()},H=>o(H))}),v=!0,h===u&&t()})}static or(e){let t=dt.resolve(!1);for(const o of e)t=t.next(u=>u?dt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,h)=>{o.push(t.call(this,u,h))}),this.waitFor(o)}}class tl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new et,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Pd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=xh(o.target.error);this.At.reject(new Pd(e,u))}}static open(e,t,o,u){try{return new tl(t,e.transaction(u,o))}catch(h){throw new Pd(t,h)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(St("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jy(t)}}class yu{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===yu.Vt((0,st.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return St("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,st.hl)())return!1;if(yu.St())return!0;const e=(0,st.z$)(),t=yu.Vt(e),o=0<t&&t<10,u=yu.Dt(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,oe.Z)(function*(){return t.db||(St("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const h=indexedDB.open(t.name,t.version);h.onsuccess=v=>{o(v.target.result)},h.onblocked=()=>{u(new Pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=v=>{const A=v.target.error;u("VersionError"===A.name?new ne(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new ne(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new Pd(e,A))},h.onupgradeneeded=v=>{St("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.Pt.kt(v.target.result,h.transaction,v.oldVersion,t.version).next(()=>{St("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var h=this;return(0,oe.Z)(function*(){const v="readonly"===t;let A=0;for(;;){++A;try{h.db=yield h.Nt(e);const H=tl.open(h.db,e,v?"readonly":"readwrite",o),K=u(H).next(he=>(H.bt(),he)).catch(he=>(H.abort(he),dt.reject(he))).toPromise();return K.catch(()=>{}),yield H.Rt,K}catch(H){const K="FirebaseError"!==H.name&&A<3;if(St("SimpleDb","Transaction failed with error:",H.message,"Retrying:",K),h.close(),!K)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xg{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bl(this.Ft.delete())}}class Pd extends ne{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nl(i){return"IndexedDbTransactionError"===i.name}class jy{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(St("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(St("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bl(o)}add(e){return St("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),St("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return St("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return St("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),h=[];return this.Kt(u,(v,A)=>{h.push(A)}).next(()=>h)}{const u=this.store.getAll(o.range);return new dt((h,v)=>{u.onerror=A=>{v(A.target.error)},u.onsuccess=A=>{h(A.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new dt((u,h)=>{o.onerror=v=>{h(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}Qt(e,t){St("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(h,v,A)=>A.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new dt((o,u)=>{t.onerror=h=>{const v=xh(h.target.error);u(v)},t.onsuccess=h=>{const v=h.target.result;v?e(v.primaryKey,v.value).next(A=>{A?v.continue():o()}):o()}})}Kt(e,t){const o=[];return new dt((u,h)=>{e.onerror=v=>{h(v.target.error)},e.onsuccess=v=>{const A=v.target.result;if(!A)return void u();const H=new xg(A),K=t(A.primaryKey,A.value,H);if(K instanceof dt){const he=K.catch(xe=>(H.done(),dt.reject(xe)));o.push(he)}H.isDone?u():null===H.Lt?A.continue():A.continue(H.Lt)}}).next(()=>dt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(i){return new dt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=xh(o.target.error);t(u)}})}let Kf=!1;function xh(i){const e=yu.Vt((0,st.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kf||(Kf=!0,setTimeout(()=>{throw o},0)),o}}return i}class Rh extends qf{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function mo(i,e){const t=G(i);return yu.xt(t.Ht,e)}class Yc{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&c(h,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&m(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&m(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(Tn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hr())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(t,o)=>O(t,o))&&Aa(this.baseMutations,e.baseMutations,(t,o)=>O(t,o))}}class Qc{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){M(e.mutations.length===o.length);let u=fo;const h=e.mutations;for(let v=0;v<h.length;v++)u=u.insert(h[v].key,o[v].version);return new Qc(e,t,o,u)}}class Oh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rl{constructor(e,t,o,u,h=Tn.min(),v=Tn.min(),A=Vi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=A}withSequenceNumber(e){return new rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Zf{constructor(e){this.Jt=e}}function Jc(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Ra(u=i.Jt,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:eu(u,h.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:jl(e.version)};else{if(!e.isUnknownDocument())return E();o.unknownDocument={path:t.path.toArray(),version:jl(e.version)}}var u,h;return o}function Nh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function jl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fc(i){const e=new Ar(i.seconds,i.nanoseconds);return Tn.fromTimestamp(e)}function Xc(i,e){const t=(e.baseMutations||[]).map(h=>zc(i.Jt,h));for(let h=0;h<e.mutations.length-1;++h){const v=e.mutations[h];h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(v.updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h)}const o=e.mutations.map(h=>zc(i.Jt,h)),u=Ar.fromMillis(e.localWriteTimeMs);return new Yc(e.batchId,u,t,o)}function ed(i){const e=fc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?fc(i.lastLimboFreeSnapshotVersion):Tn.min();let o;var u;return void 0!==i.query.documents?(M(1===(u=i.query).documents.length),o=ya(hu(hc(u.documents[0])))):o=ya(bh(i.query)),new rl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Vi.fromBase64String(i.resumeToken))}function Ph(i,e){const t=jl(e.snapshotVersion),o=jl(e.lastLimboFreeSnapshotVersion);let u;u=Ru(e.target)?wh(i.Jt,e.target):Wc(i.Jt,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qa(e.target),readTime:t,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function kh(i){const e=bh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Fc(e,e.limit,"L"):e}function Rg(i,e){return new Oh(e.largestBatchId,zc(i.Jt,e.overlayMutation))}function Qf(i,e){const t=e.path.lastSegment();return[i,nt(e.path.popLast()),t]}class Hy{getBundleMetadata(e,t){return Jf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:fc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Jf(e).put({bundleId:(o=t).id,createTime:jl(li(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Og(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:kh(u.bundledQuery),readTime:fc(u.readTime)};var u})}saveNamedQuery(e,t){return Og(e).put({name:(o=t).name,readTime:jl(li(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Jf(i){return mo(i,"bundles")}function Og(i){return mo(i,"namedQueries")}class Xf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Xf(e,t.uid||"")}getOverlay(e,t){return Ea(e).get(Qf(this.userId,t)).next(o=>o?Rg(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((h,v)=>{const A=new Oh(t,v);u.push(this.Xt(e,A))}),dt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(v=>u.add(nt(v.getCollectionPath())));const h=[];return u.forEach(v=>{const A=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);h.push(Ea(e).Qt("collectionPathOverlayIndex",A))}),dt.waitFor(h)}getOverlaysForCollection(e,t,o){const u=ui(),h=nt(t),v=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return Ea(e).qt("collectionPathOverlayIndex",v).next(A=>{for(const H of A){const K=Rg(this.M,H);u.set(K.getKey(),K)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const h=ui();let v;const A=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ea(e).Wt({index:"collectionGroupOverlayIndex",range:A},(H,K,he)=>{const xe=Rg(this.M,K);h.size()<u||xe.largestBatchId===v?(h.set(xe.getKey(),xe),v=xe.largestBatchId):he.done()}).next(()=>h)}Xt(e,t){return Ea(e).put(function(o,u,h){const[v,A,H]=Qf(u,h.mutation.key);return{userId:u,collectionPath:A,documentId:H,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Nu(o.Jt,h.mutation)}}(this.M,this.userId,t))}}function Ea(i){return mo(i,"documentOverlays")}class pc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qr(e.integerValue));else if("doubleValue"in e){const o=Qr(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Ao(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Ml(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):E()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Ft.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Ng(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Pg(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const h=Ng(255&t[u]);if(o+=h,8!==h)break}return o}(i);return Math.ceil(e/8)}pc.fe=new pc;class $y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Pg(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Pg(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Gy{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class zy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class td{constructor(){this.De=new $y,this.Ce=new Gy(this.De),this.xe=new zy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class gc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,o)}}function mc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=kg(i.arrayValue,e.arrayValue),0!==t?t:(t=kg(i.directionalValue,e.directionalValue),0!==t?t:Ft.comparator(i.documentKey,e.documentKey)))}function kg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class er{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Xe(e);if(void 0!==t&&!this.Be(t))return!1;const o=Dt(e);let u=0,h=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const v=o[u];if(!this.Le(this.Fe,v)||!this.Ue(this.Me[h++],v))return!1;++u}for(;u<o.length;++u){const v=o[u];if(h>=this.Me.length||!this.Ue(this.Me[h++],v))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Fg{constructor(){this.qe=new Fh}addToCollectionParentIndex(e,t){return this.qe.add(t),dt.resolve()}getCollectionParents(e,t){return dt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return dt.resolve()}deleteFieldIndex(e,t){return dt.resolve()}getDocumentsMatchingTarget(e,t){return dt.resolve(null)}getIndexType(e,t){return dt.resolve(0)}getFieldIndexes(e,t){return dt.resolve([])}getNextCollectionGroupToUpdate(e){return dt.resolve(null)}getMinOffset(e,t){return dt.resolve(Dn.min())}updateCollectionGroup(e,t,o){return dt.resolve()}updateIndexEntries(e,t){return dt.resolve()}}class Fh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new dr(Pn.comparator),h=!u.has(o);return this.index[t]=u.add(o),h}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new dr(Pn.comparator)).toArray()}}const kd=new Uint8Array(0);class Lh{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Fh,this.Ge=new ar(o=>Qa(o),(o,u)=>uu(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const h={collectionId:o,parent:nt(u)};return _u(e).put(h)}return dt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[za(t),""],!1,!0);return _u(e).qt(u).next(h=>{for(const v of h){if(v.collectionId!==t)break;o.push(gn(v.parent))}return o})}addFieldIndex(e,t){const o=Vh(e),u={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(v=>[v.fieldPath.canonicalString(),v.kind])};var h;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Vh(e),u=rd(e),h=nd(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=nd(e);let u=!0;const h=new Map;return dt.forEach(this.Qe(t),v=>this.je(e,v).next(A=>{u&&(u=!!A),h.set(v,A)})).next(()=>{if(u){let v=hr();const A=[];return dt.forEach(h,(H,K)=>{var he;St("IndexedDbIndexManager",`Using index ${he=H,`id=${he.indexId}|cg=${he.collectionGroup}|f=${he.fields.map(ei=>`${ei.fieldPath}:${ei.kind}`).join(",")}`} to execute ${Qa(t)}`);const xe=function(ei,Qs){const Zi=Xe(Qs);if(void 0===Zi)return null;for(const _s of qu(ei,Zi.fieldPath))switch(_s.op){case"array-contains-any":return _s.value.arrayValue.values||[];case"array-contains":return[_s.value]}return null}(K,H),it=function(ei,Qs){const Zi=new Map;for(const _s of Dt(Qs))for(const sa of qu(ei,_s.fieldPath))switch(sa.op){case"==":case"in":Zi.set(_s.fieldPath.canonicalString(),sa.value);break;case"not-in":case"!=":return Zi.set(_s.fieldPath.canonicalString(),sa.value),Array.from(Zi.values())}return null}(K,H),It=function(ei,Qs){const Zi=[];let _s=!0;for(const sa of Dt(Qs)){const fh=0===sa.kind?Nc(ei,sa.fieldPath,ei.startAt):lu(ei,sa.fieldPath,ei.startAt);Zi.push(fh.value),_s&&(_s=fh.inclusive)}return new Sa(Zi,_s)}(K,H),At=function(ei,Qs){const Zi=[];let _s=!0;for(const sa of Dt(Qs)){const fh=0===sa.kind?lu(ei,sa.fieldPath,ei.endAt):Nc(ei,sa.fieldPath,ei.endAt);Zi.push(fh.value),_s&&(_s=fh.inclusive)}return new Sa(Zi,_s)}(K,H),dn=this.We(H,K,It),Gn=this.We(H,K,At),Ki=this.ze(H,K,it),Ds=this.He(H.indexId,xe,dn,It.inclusive,Gn,At.inclusive,Ki);return dt.forEach(Ds,ei=>o.Gt(ei,t.limit).next(Qs=>{Qs.forEach(Zi=>{const _s=Ft.fromSegments(Zi.documentKey);v.has(_s)||(v=v.add(_s),A.push(_s))})}))}).next(()=>A)}return dt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,o,u,h,v,A){const H=(null!=t?t.length:1)*Math.max(o.length,h.length),K=H/(null!=t?t.length:1),he=[];for(let xe=0;xe<H;++xe){const it=t?this.Je(t[xe/K]):kd,It=this.Ye(e,it,o[xe%K],u),At=this.Xe(e,it,h[xe%K],v),dn=A.map(Gn=>this.Ye(e,it,Gn,!0));he.push(...this.createRange(It,At,dn))}return he}Ye(e,t,o,u){const h=new gc(e,Ft.empty(),t,o);return u?h:h.ke()}Xe(e,t,o,u){const h=new gc(e,Ft.empty(),t,o);return u?h.ke():h}je(e,t){const o=new er(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let v=null;for(const A of h)o.$e(A)&&(!v||A.fields.length>v.fields.length)&&(v=A);return v})}getIndexType(e,t){let o=2;return dt.forEach(this.Qe(t),u=>this.je(e,u).next(h=>{h?0!==o&&h.fields.length<function(v){let A=new dr(us.comparator),H=!1;for(const K of v.filters){const he=K;he.field.isKeyField()||("array-contains"===he.op||"array-contains-any"===he.op?H=!0:A=A.add(he.field))}for(const K of v.orderBy)K.field.isKeyField()||(A=A.add(K.field));return A.size+(H?1:0)}(u)&&(o=1):o=0})).next(()=>o)}Ze(e,t){const o=new td;for(const u of Dt(e)){const h=t.data.field(u.fieldPath);if(null==h)return null;const v=o.Ne(u.kind);pc.fe.Zt(h,v)}return o.Se()}Je(e){const t=new td;return pc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new td;return pc.fe.Zt(Xo(this.databaseId,t),o.Ne(function(u){const h=Dt(u);return 0===h.length?0:h[h.length-1].kind}(e))),o.Se()}ze(e,t,o){if(null===o)return[];let u=[];u.push(new td);let h=0;for(const v of Dt(e)){const A=o[h++];for(const H of u)if(this.en(t,v.fieldPath)&&ks(A))u=this.nn(u,v,A);else{const K=H.Ne(v.kind);pc.fe.Zt(A,K)}}return this.sn(u)}We(e,t,o){return this.ze(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],h=[];for(const v of o.arrayValue.values||[])for(const A of u){const H=new td;H.seed(A.Se()),pc.fe.Zt(v,H.Ne(t.kind)),h.push(H)}return h}en(e,t){return!!e.filters.find(o=>o instanceof Gi&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Vh(e),u=rd(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(h=>{const v=[];return dt.forEach(h,A=>u.get([A.indexId,this.uid]).next(H=>{v.push(function(K,he){const xe=he?new hn(he.sequenceNumber,new Dn(fc(he.readTime),new Ft(gn(he.documentKey)),he.largestBatchId)):hn.empty(),it=K.fields.map(([It,At])=>new un(us.fromServerFormat(It),At));return new Ue(K.indexId,K.collectionGroup,it,xe)}(A,H))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const h=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:Vn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Vh(e),h=rd(e);return this.rn(e).next(v=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(A=>dt.forEach(A,H=>{return h.put({indexId:H.indexId,uid:this.user.uid||"",sequenceNumber:v,readTime:jl((it=o).readTime),documentKey:nt(it.documentKey.path),largestBatchId:it.largestBatchId});var it})))}updateIndexEntries(e,t){const o=new Map;return dt.forEach(t,(u,h)=>{const v=o.get(u.collectionGroup);return(v?dt.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(A=>(o.set(u.collectionGroup,A),dt.forEach(A,H=>this.on(e,u,H).next(K=>{const he=this.un(h,H);return K.isEqual(he)?dt.resolve():this.an(e,h,H,K,he)}))))})}cn(e,t,o,u){return nd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return nd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=nd(e);let h=new dr(mc);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(v,A)=>{h=h.add(new gc(o.indexId,t,A.arrayValue,A.directionalValue))}).next(()=>h)}un(e,t){let o=new dr(mc);const u=this.Ze(t,e);if(null==u)return o;const h=Xe(t);if(null!=h){const v=e.data.field(h.fieldPath);if(ks(v))for(const A of v.arrayValue.values||[])o=o.add(new gc(t.indexId,e.key,this.Je(A),u))}else o=o.add(new gc(t.indexId,e.key,kd,u));return o}an(e,t,o,u,h){St("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(A,H,K,he,xe){const it=A.getIterator(),It=H.getIterator();let At=Cs(it),dn=Cs(It);for(;At||dn;){let Gn=!1,Ki=!1;if(At&&dn){const Ds=K(At,dn);Ds<0?Ki=!0:Ds>0&&(Gn=!0)}else null!=At?Ki=!0:Gn=!0;Gn?(he(dn),dn=Cs(It)):Ki?(xe(At),At=Cs(it)):(At=Cs(it),dn=Cs(It))}}(u,h,mc,A=>{v.push(this.cn(e,t,o,A))},A=>{v.push(this.hn(e,t,o,A))}),dt.waitFor(v)}rn(e){let t=1;return rd(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,h)=>{h.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,A)=>mc(v,A)).filter((v,A,H)=>!A||0!==mc(v,H[A-1]));const u=[];u.push(e);for(const v of o){const A=mc(v,e),H=mc(v,t);if(0===A)u[0]=e.ke();else if(A>0&&H<0)u.push(v),u.push(v.ke());else if(H>0)break}u.push(t);const h=[];for(let v=0;v<u.length;v+=2)h.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,kd,[]],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,kd,[]]));return h}getMinOffset(e,t){let o;return dt.forEach(this.Qe(t),u=>this.je(e,u).next(h=>{h?(!o||$i(h.indexState.offset,o)<0)&&(o=h.indexState.offset):o=Dn.min()})).next(()=>o)}}function _u(i){return mo(i,"collectionParents")}function nd(i){return mo(i,"indexEntries")}function Vh(i){return mo(i,"indexConfiguration")}function rd(i){return mo(i,"indexState")}const il={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ta{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ta(e,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ep(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),h=[],v=IDBKeyRange.only(t.batchId);let A=0;const H=o.Wt({range:v},(he,xe,it)=>(A++,it.delete()));h.push(H.next(()=>{M(1===A)}));const K=[];for(const he of t.mutations){const xe=ea(e,he.key.path,t.batchId);h.push(u.delete(xe)),K.push(he.key)}return dt.waitFor(h).next(()=>K)}function id(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw E();e=i.noDocument}return JSON.stringify(e).length}ta.DEFAULT_COLLECTION_PERCENTILE=10,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ta.DEFAULT=new ta(41943040,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ta.DISABLED=new ta(-1,0,0);class Lg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){M(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Lg(h,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yc(e).Wt({index:"userMutationsIndex",range:o},(u,h,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const h=vl(e),v=yc(e);return v.add({}).next(A=>{M("number"==typeof A);const H=new Yc(A,t,o,u),K=function(it,It,At){const dn=At.baseMutations.map(Ki=>Nu(it.Jt,Ki)),Gn=At.mutations.map(Ki=>Nu(it.Jt,Ki));return{userId:It,batchId:At.batchId,localWriteTimeMs:At.localWriteTime.toMillis(),baseMutations:dn,mutations:Gn}}(this.M,this.userId,H),he=[];let xe=new dr((it,It)=>Vn(it.canonicalString(),It.canonicalString()));for(const it of u){const It=ea(this.userId,it.key.path,A);xe=xe.add(it.key.path.popLast()),he.push(v.put(K)),he.push(h.put(It,Ul))}return xe.forEach(it=>{he.push(this.indexManager.addToCollectionParentIndex(e,it))}),e.addOnCommittedListener(()=>{this.ln[A]=H.keys()}),dt.waitFor(he).next(()=>H)})}lookupMutationBatch(e,t){return yc(e).get(t).next(o=>o?(M(o.userId===this.userId),Xc(this.M,o)):null)}fn(e,t){return this.ln[t]?dt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return yc(e).Wt({index:"userMutationsIndex",range:u},(v,A,H)=>{A.userId===this.userId&&(M(A.batchId>=o),h=Xc(this.M,A)),H.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return yc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,h,v)=>{o=h.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yc(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Xc(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=zi(this.userId,t.path),u=IDBKeyRange.lowerBound(o),h=[];return vl(e).Wt({range:u},(v,A,H)=>{const[K,he,xe]=v,it=gn(he);if(K===this.userId&&t.path.isEqual(it))return yc(e).get(xe).next(It=>{if(!It)throw E();M(It.userId===this.userId),h.push(Xc(this.M,It))});H.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new dr(Vn);const u=[];return t.forEach(h=>{const v=zi(this.userId,h.path),A=IDBKeyRange.lowerBound(v),H=vl(e).Wt({range:A},(K,he,xe)=>{const[it,It,At]=K,dn=gn(It);it===this.userId&&h.path.isEqual(dn)?o=o.add(At):xe.done()});u.push(H)}),dt.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,h=zi(this.userId,o),v=IDBKeyRange.lowerBound(h);let A=new dr(Vn);return vl(e).Wt({range:v},(H,K,he)=>{const[xe,it,It]=H,At=gn(it);xe===this.userId&&o.isPrefixOf(At)?At.length===u&&(A=A.add(It)):he.done()}).next(()=>this.dn(e,A))}dn(e,t){const o=[],u=[];return t.forEach(h=>{u.push(yc(e).get(h).next(v=>{if(null===v)throw E();M(v.userId===this.userId),o.push(Xc(this.M,v))}))}),dt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return ep(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),dt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return dt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return vl(e).Wt({range:o},(h,v,A)=>{if(h[0]===this.userId){const H=gn(h[1]);u.push(H)}else A.done()}).next(()=>{M(0===u.length)})})}containsKey(e,t){return tp(e,this.userId,t)}wn(e){return Fd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tp(i,e,t){const o=zi(e,t.path),u=o[1],h=IDBKeyRange.lowerBound(o);let v=!1;return vl(i).Wt({range:h,jt:!0},(A,H,K)=>{const[he,xe,it]=A;he===e&&xe===u&&(v=!0),K.done()}).next(()=>v)}function yc(i){return mo(i,"mutations")}function vl(i){return mo(i,"documentMutations")}function Fd(i){return mo(i,"mutationQueues")}class El{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new El(0)}static yn(){return new El(-1)}}class np{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new El(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Tn.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hl(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(M(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const h=[];return Hl(e).Wt((v,A)=>{const H=ed(A);H.sequenceNumber<=t&&null===o.get(H.targetId)&&(u++,h.push(this.removeTargetData(e,H)))}).next(()=>dt.waitFor(h)).next(()=>u)}forEachTarget(e,t){return Hl(e).Wt((o,u)=>{const h=ed(u);t(h)})}pn(e){return Wy(e).get("targetGlobalKey").next(t=>(M(null!==t),t))}In(e,t){return Wy(e).put("targetGlobalKey",t)}Tn(e,t){return Hl(e).put(Ph(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Qa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return Hl(e).Wt({range:u,index:"queryTargetsIndex"},(v,A,H)=>{const K=ed(A);uu(t,K.target)&&(h=K,H.done())}).next(()=>h)}addMatchingKeys(e,t,o){const u=[],h=$l(e);return t.forEach(v=>{const A=nt(v.path);u.push(h.put({targetId:o,path:A})),u.push(this.referenceDelegate.addReference(e,o,v))}),dt.waitFor(u)}removeMatchingKeys(e,t,o){const u=$l(e);return dt.forEach(t,h=>{const v=nt(h.path);return dt.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,t){const o=$l(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=$l(e);let h=hr();return u.Wt({range:o,jt:!0},(v,A,H)=>{const K=gn(v[1]),he=new Ft(K);h=h.add(he)}).next(()=>h)}containsKey(e,t){const o=nt(t.path),u=IDBKeyRange.bound([o],[za(o)],!1,!0);let h=0;return $l(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([v,A],H,K)=>{0!==v&&(h++,K.done())}).next(()=>h>0)}Et(e,t){return Hl(e).get(t).next(o=>o?ed(o):null)}}function Hl(i){return mo(i,"targets")}function Wy(i){return mo(i,"targetGlobal")}function $l(i){return mo(i,"targetDocuments")}function _c(i){return rp.apply(this,arguments)}function rp(){return rp=(0,oe.Z)(function*(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==Mg)throw i;St("LocalStore","Unexpectedly lost primary lease")}),rp.apply(this,arguments)}function Vg([i,e],[t,o]){const u=Vn(i,t);return 0===u?Vn(e,o):u}class Ug{constructor(e){this.An=e,this.buffer=new dr(Vg),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Vg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $v{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;St("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,oe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){nl(u)?St("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield _c(u)}yield t.Sn(e)}))}}class qy{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return dt.resolve(Yr.A);const o=new Ug(t);return this.Dn.forEachTarget(e,u=>o.Pn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.Pn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(il)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),il):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,h,v,A,H,K;const he=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(xe=>(xe>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${xe}`),u=this.params.maximumSequenceNumbersToCollect):u=xe,v=Date.now(),this.nthSequenceNumber(e,u))).next(xe=>(o=xe,A=Date.now(),this.removeTargets(e,o,t))).next(xe=>(h=xe,H=Date.now(),this.removeOrphanedDocuments(e,o))).next(xe=>(K=Date.now(),Yo()<=ct.in.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-he}ms\n\tDetermined least recently used ${u} in `+(A-v)+`ms\n\tRemoved ${h} targets in `+(H-A)+`ms\n\tRemoved ${xe} documents in `+(K-H)+`ms\nTotal Duration: ${K-he}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:xe})))}}class Gv{constructor(e,t){this.db=e,this.garbageCollector=new qy(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Ld(e,o)}removeReference(e,t,o){return Ld(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ld(e,t)}On(e,t){return function(o,u){let h=!1;return Fd(o).zt(v=>tp(o,v,u).next(A=>(A&&(h=!0),dt.resolve(!A)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.Mn(e,(v,A)=>{if(A<=t){const H=this.On(e,v).next(K=>{if(!K)return h++,o.getEntry(e,v).next(()=>(o.removeEntry(v,Tn.min()),$l(e).delete([0,nt(v.path)])))});u.push(H)}}).next(()=>dt.waitFor(u)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ld(e,t)}Mn(e,t){const o=$l(e);let u,h=Yr.A;return o.Wt({index:"documentTargetsIndex"},([v,A],{path:H,sequenceNumber:K})=>{0===v?(h!==Yr.A&&t(new Ft(gn(u)),h),h=K,u=H):h=Yr.A}).next(()=>{h!==Yr.A&&t(new Ft(gn(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ld(i,e){return $l(i).put((o=i.currentSequenceNumber,{targetId:0,path:nt(e.path),sequenceNumber:o}));var o}class ip{constructor(){this.changes=new ar(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ae.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?dt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ky{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return sd(e).put(o)}removeEntry(e,t,o){return sd(e).delete(function(u,h){const v=u.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Nh(h),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=ae.newInvalidDocument(t);return sd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(u,h)=>{o=this.$n(t,h)}).next(()=>o)}Bn(e,t){let o={size:0,document:ae.newInvalidDocument(t)};return sd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(u,h)=>{o={document:this.$n(t,h),size:id(h)}}).next(()=>o)}getEntries(e,t){let o=jn();return this.Ln(e,t,(u,h)=>{const v=this.$n(u,h);o=o.insert(u,v)}).next(()=>o)}Un(e,t){let o=jn(),u=new Xn(Ft.comparator);return this.Ln(e,t,(h,v)=>{const A=this.$n(h,v);o=o.insert(h,A),u=u.insert(h,id(v))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return dt.resolve();let u=new dr(Qy);t.forEach(H=>u=u.add(H));const h=IDBKeyRange.bound(Uh(u.first()),Uh(u.last())),v=u.getIterator();let A=v.getNext();return sd(e).Wt({index:"documentKeyIndex",range:h},(H,K,he)=>{const xe=Ft.fromSegments([...K.prefixPath,K.collectionGroup,K.documentId]);for(;A&&Qy(A,xe)<0;)o(A,null),A=v.getNext();A&&A.isEqual(xe)&&(o(A,K),A=v.hasNext()?v.getNext():null),A?he.Ut(Uh(A)):he.done()}).next(()=>{for(;A;)o(A,null),A=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Nh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],h=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sd(e).qt(IDBKeyRange.bound(u,h,!0)).next(v=>{let A=jn();for(const H of v){const K=this.$n(Ft.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);A=A.insert(K.key,K)}return A})}getAllFromCollectionGroup(e,t,o,u){let h=jn();const v=Yy(t,o),A=Yy(t,Dn.max());return sd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,A,!0)},(H,K,he)=>{const xe=this.$n(Ft.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);h=h.insert(xe.key,xe),h.size===u&&he.done()}).next(()=>h)}newChangeBuffer(e){return new sp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zy(e).get("remoteDocumentGlobalKey").next(t=>(M(!!t),t))}Fn(e,t){return Zy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function Yf(i,e){let t;if(e.document)t=Gc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ft.fromSegments(e.noDocument.path),u=fc(e.noDocument.readTime);t=ae.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return E();{const o=Ft.fromSegments(e.unknownDocument.path),u=fc(e.unknownDocument.version);t=ae.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Ar(o[0],o[1]);return Tn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(Tn.min()))return o}return ae.newInvalidDocument(e)}}class sp extends ip{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ar(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new dr((h,v)=>Vn(h.canonicalString(),v.canonicalString()));return this.changes.forEach((h,v)=>{const A=this.Gn.get(h);if(t.push(this.Kn.removeEntry(e,h,A.readTime)),v.isValidDocument()){const H=Jc(this.Kn.M,v);u=u.add(h.path.popLast()),o+=id(H)-A.size,t.push(this.Kn.addEntry(e,h,H))}else if(o-=A.size,this.trackRemovals){const H=Jc(this.Kn.M,v.convertToNoDocument(Tn.min()));t.push(this.Kn.addEntry(e,h,H))}}),u.forEach(h=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,h))}),t.push(this.Kn.updateMetadata(e,o)),dt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((h,v)=>{this.Gn.set(h,{size:v,readTime:o.get(h).readTime})}),o))}}function Zy(i){return mo(i,"remoteDocumentGlobal")}function sd(i){return mo(i,"remoteDocumentsV14")}function Uh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yy(i,e){const t=e.documentKey.path.toArray();return[i,Nh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let h=0;h<t.length-2&&h<o.length-2;++h)if(u=Vn(t[h],o[h]),u)return u;return u=Vn(t.length,o.length),u||(u=Vn(t[t.length-2],o[o.length-2]),u||Vn(t[t.length-1],o[o.length-1]))}class zv{constructor(e){this.M=e}kt(e,t,o,u){const h=new tl("createOrUpgrade",t);var A;o<1&&u>=1&&(e.createObjectStore("owner"),(A=e).createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",An,{unique:!0}),A.createObjectStore("documentMutations"),Jy(e),function(A){A.createObjectStore("remoteDocuments")}(e));let v=dt.resolve();return o<3&&u>=3&&(0!==o&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),Jy(e)),v=v.next(()=>function(A){const H=A.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",K)}(h))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(A,H){return H.store("mutations").qt().next(K=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",An,{unique:!0});const he=H.store("mutations"),xe=K.map(it=>he.put(it));return dt.waitFor(xe)})}(e,h))),v=v.next(()=>{!function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Qn(h))),o<6&&u>=6&&(v=v.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.jn(h)))),o<7&&u>=7&&(v=v.next(()=>this.Wn(h))),o<8&&u>=8&&(v=v.next(()=>this.zn(e,h))),o<9&&u>=9&&(v=v.next(()=>{!function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.Hn(h))),o<11&&u>=11&&(v=v.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(A){const H=A.createObjectStore("documentOverlays",{keyPath:Wf});H.createIndex("collectionPathOverlayIndex",Uy,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Ag,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(A){const H=A.createObjectStore("remoteDocumentsV14",{keyPath:Rd});H.createIndex("documentKeyIndex",Dh),H.createIndex("collectionGroupIndex",_l)}(e)).next(()=>this.Jn(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>{!function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:Od}).createIndex("sequenceNumberIndex",Ah,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:zf}).createIndex("documentKeyIndex",Nd,{unique:!1})}(e)})),v}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=id(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>dt.forEach(u,h=>{const v=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",v).next(A=>dt.forEach(A,H=>{M(H.userId===h.userId);const K=Xc(this.M,H);return ep(e,h.userId,K).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return o.Wt((v,A)=>{const H=new Pn(v),K=[0,nt(H)];h.push(t.get(K).next(he=>he?dt.resolve():t.put({targetId:0,path:nt(H),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>dt.waitFor(h))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Zc});const o=t.store("collectionParents"),u=new Fh,h=v=>{if(u.add(v)){const A=v.lastSegment(),H=v.popLast();return o.put({collectionId:A,parent:nt(H)})}};return t.store("remoteDocuments").Wt({jt:!0},(v,A)=>{const H=new Pn(v);return h(H.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([v,A,H],K)=>{const he=gn(A);return h(he.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const h=ed(u),v=Ph(this.M,h);return t.put(v)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((h,v)=>{const A=t.store("remoteDocumentsV14"),H=(K=v,K.document?new Ft(Pn.fromString(K.document.name).popFirst(5)):K.noDocument?Ft.fromSegments(K.noDocument.path):K.unknownDocument?Ft.fromSegments(K.unknownDocument.path):E()).path.toArray();var K;const he={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};u.push(A.put(he))}).next(()=>dt.waitFor(u))}}function Jy(i){i.createObjectStore("targetDocuments",{keyPath:Kc}).createIndex("documentTargetsIndex",Th,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qc,{unique:!0}),i.createObjectStore("targetGlobal")}const Bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jg{constructor(e,t,o,u,h,v,A,H,K,he,xe=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=h,this.window=v,this.document=A,this.Xn=K,this.Zn=he,this.ts=xe,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=it=>Promise.resolve(),!jg.vt())throw new ne(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gv(this,u),this.hs=t+"main",this.M=new Zf(H),this.ls=new yu(this.hs,this.ts,new zv(this.M)),this.fs=new np(this.referenceDelegate,this.M),this.ds=new Ky(this.M),this._s=new Hy,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===he&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(W.FAILED_PRECONDITION,Bg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Yr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,oe.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,oe.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,oe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(nl(e))return St("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return St("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Bh(e).get("owner").next(t=>dt.resolve(this.Ps(t)))}Vs(e){return Pu(e).delete(this.clientId)}vs(){var e=this;return(0,oe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=mo(o,"clientMetadata");return u.qt().next(h=>{const v=e.Ds(h,18e5),A=h.filter(H=>-1===v.indexOf(H));return dt.forEach(A,H=>u.delete(H.clientId)).next(()=>A)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?dt.resolve(!0):Bh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new ne(W.FAILED_PRECONDITION,Bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pu(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const v=!this.inForeground&&u.inForeground,A=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||v&&A)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&St("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,oe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Rh(t,Yr.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Pu(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Lg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Lh(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Xf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){St("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",h=14===(v=this.ts)?By:13===v?Mh:12===v?Sg:11===v?Sh:void E();var v;let A;return this.ls.runTransaction(e,u,h,H=>(A=new Rh(H,this.es?this.es.next():Yr.A),"readwrite-primary"===t?this.Es(A).next(K=>!!K||this.As(A)).next(K=>{if(!K)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ne(W.FAILED_PRECONDITION,Mg);return o(A)}).next(K=>this.bs(A).next(()=>K)):this.$s(A).next(()=>o(A)))).then(H=>(A.raiseOnCommittedEvent(),H))}$s(e){return Bh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ne(W.FAILED_PRECONDITION,Bg)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bh(e).put("owner",t)}static vt(){return yu.vt()}Rs(e){const t=Bh(e);return t.get("owner").next(o=>this.Ps(o)?(St("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):dt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(jr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,st.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return St("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return jr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bh(i){return mo(i,"owner")}function Pu(i){return mo(i,"clientMetadata")}function Vd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Xy{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const h of o)h.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const h of t)h.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Ft.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):Ja(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new Ft(t)).next(o=>{let u=ms();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let h=ms();return this.indexManager.getCollectionParents(e,u).next(v=>dt.forEach(v,A=>{const H=(K=t,he=A.child(u),new du(he,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,he;return this.zs(e,H,o).next(K=>{K.forEach((he,xe)=>{h=h.insert(he,xe)})})}).next(()=>h))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(h=>(u=h,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(h=>{for(const v of h)for(const A of v.mutations){const H=A.key;let K=u.get(H);null==K&&(K=ae.newInvalidDocument(H),u=u.insert(H,K)),m(A,K,v.localWriteTime),K.isFoundDocument()||(u=u.remove(H))}}).next(()=>(u.forEach((h,v)=>{Xa(t,v)||(u=u.remove(h))}),u))}}class jh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=hr(),u=hr();for(const h of t.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new jh(e,t.fromCache,o,u)}}class Hh{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,o,u){return this.ti(e,t).next(h=>h||this.ei(e,t,u,o)).next(h=>h||this.ni(e,t))}ti(e,t){return dt.resolve(null)}ei(e,t,o,u){return function oc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||u.isEqual(Tn.min())?this.ni(e,t):this.Zs.Ks(e,o).next(h=>{const v=this.si(t,h);return this.ii(t,v,o,u)?this.ni(e,t):(Yo()<=ct.in.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),So(t)),this.ri(e,v,t,xn(u,-1)))})}si(e,t){let o=new dr(uc(e));return t.forEach((u,h)=>{Xa(e,h)&&(o=o.add(h))}),o}ii(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const h="F"===e.limitType?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}ni(e,t){return Yo()<=ct.in.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",So(t)),this.Zs.Qs(e,t,Dn.min())}ri(e,t,o,u){return this.Zs.Qs(e,o,u).next(h=>(t.forEach(v=>{h=h.insert(v.key,v)}),h))}}class Hg{constructor(e,t,o,u){this.persistence=e,this.oi=t,this.M=u,this.ui=new Xn(Vn),this.ai=new ar(h=>Qa(h),uu),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(o)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Xy(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function $h(i,e,t,o){return new Hg(i,e,t,o)}function $g(i,e){return sl.apply(this,arguments)}function sl(){return sl=(0,oe.Z)(function*(i,e){const t=G(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(h=>(u=h,t.li(e),t.Bs.getAllMutationBatches(o))).next(h=>{const v=[],A=[];let H=hr();for(const K of u){v.push(K.batchId);for(const he of K.mutations)H=H.add(he.key)}for(const K of h){A.push(K.batchId);for(const he of K.mutations)H=H.add(he.key)}return t.fi.Ks(o,H).next(K=>({di:K,removedBatchIds:v,addedBatchIds:A}))})})}),sl.apply(this,arguments)}function Gg(i,e){const t=G(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),h=t.hi.newChangeBuffer({trackRemovals:!0});return function(v,A,H,K){const he=H.batch,xe=he.keys();let it=dt.resolve();return xe.forEach(It=>{it=it.next(()=>K.getEntry(A,It)).next(At=>{const dn=H.docVersions.get(It);M(null!==dn),At.version.compareTo(dn)<0&&(he.applyToRemoteDocument(At,H),At.isValidDocument()&&(At.setReadTime(H.commitVersion),K.addEntry(At)))})}),it.next(()=>v.Bs.removeMutationBatch(A,he))}(t,o,e,h).next(()=>h.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.fi.Ks(o,u))})}function zg(i){const e=G(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function op(i,e){const t=G(i),o=e.snapshotVersion;let u=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const v=t.hi.newChangeBuffer({trackRemovals:!0});u=t.ui;const A=[];e.targetChanges.forEach((K,he)=>{const xe=u.get(he);if(!xe)return;A.push(t.fs.removeMatchingKeys(h,K.removedDocuments,he).next(()=>t.fs.addMatchingKeys(h,K.addedDocuments,he)));let it=xe.withSequenceNumber(h.currentSequenceNumber);var It,At,dn;e.targetMismatches.has(he)?it=it.withResumeToken(Vi.EMPTY_BYTE_STRING,Tn.min()).withLastLimboFreeSnapshotVersion(Tn.min()):K.resumeToken.approximateByteSize()>0&&(it=it.withResumeToken(K.resumeToken,o)),u=u.insert(he,it),At=it,dn=K,(0===(It=xe).resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-It.snapshotVersion.toMicroseconds()>=3e8||dn.addedDocuments.size+dn.modifiedDocuments.size+dn.removedDocuments.size>0)&&A.push(t.fs.updateTargetData(h,it))});let H=jn();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(h,K))}),A.push(Wg(h,v,e.documentUpdates).next(K=>{H=K})),!o.isEqual(Tn.min())){const K=t.fs.getLastRemoteSnapshotVersion(h).next(he=>t.fs.setTargetsMetadata(h,h.currentSequenceNumber,o));A.push(K)}return dt.waitFor(A).next(()=>v.apply(h)).next(()=>t.fi.Gs(h,H)).next(()=>H)}).then(h=>(t.ui=u,h))}function Wg(i,e,t){let o=hr();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let h=jn();return t.forEach((v,A)=>{const H=u.get(v);A.isNoDocument()&&A.version.isEqual(Tn.min())?(e.removeEntry(v,A.readTime),h=h.insert(v,A)):!H.isValidDocument()||A.version.compareTo(H.version)>0||0===A.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(A),h=h.insert(v,A)):St("LocalStore","Ignoring outdated watch update for ",v,". Current version:",H.version," Watch version:",A.version)}),h})}function qg(i,e){const t=G(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function od(i,e){const t=G(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(h=>h?(u=h,dt.resolve(u)):t.fs.allocateTargetId(o).next(v=>(u=new rl(e,v,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ui=t.ui.insert(o.targetId,o),t.ai.set(e,o.targetId)),o})}function ad(i,e,t){return vc.apply(this,arguments)}function vc(){return vc=(0,oe.Z)(function*(i,e,t){const o=G(i),u=o.ui.get(e),h=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",h,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!nl(v))throw v;St("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.ui=o.ui.remove(e),o.ai.delete(u.target)}),vc.apply(this,arguments)}function wl(i,e,t){const o=G(i);let u=Tn.min(),h=hr();return o.persistence.runTransaction("Execute query","readonly",v=>function(A,H,K){const he=G(A),xe=he.ai.get(K);return void 0!==xe?dt.resolve(he.ui.get(xe)):he.fs.getTargetData(H,K)}(o,v,ya(e)).next(A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(v,A.targetId).next(H=>{h=H})}).next(()=>o.oi.Qs(v,e,t?u:Tn.min(),t?h:hr())).next(A=>(ud(o,Bo(e),A),{documents:A,_i:h})))}function Gh(i,e){const t=G(i),o=G(t.fs),u=t.ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",h=>o.Et(h,e).next(v=>v?v.target:null))}function Ec(i,e){const t=G(i),o=t.ci.get(e)||Tn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.hi.getAllFromCollectionGroup(u,e,xn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(ud(t,e,u),u))}function ud(i,e,t){let o=Tn.min();t.forEach((u,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),i.ci.set(e,o)}function ap(){return ap=(0,oe.Z)(function*(i,e,t,o){const u=G(i);let h=hr(),v=jn();for(const K of t){const he=e.wi(K.metadata.name);K.document&&(h=h.add(he));const xe=e.mi(K);xe.setReadTime(e.gi(K.metadata.readTime)),v=v.insert(he,xe)}const A=u.hi.newChangeBuffer({trackRemovals:!0}),H=yield od(u,(K=o,ya(hu(Pn.fromString(`__bundle__/docs/${K}`)))));var K;return u.persistence.runTransaction("Apply bundle documents","readwrite",K=>Wg(K,A,v).next(he=>(A.apply(K),he)).next(he=>u.fs.removeMatchingKeysForTargetId(K,H.targetId).next(()=>u.fs.addMatchingKeys(K,h,H.targetId)).next(()=>u.fi.Gs(K,he)).next(()=>he)))}),ap.apply(this,arguments)}function Kg(i,e){return zh.apply(this,arguments)}function zh(){return zh=(0,oe.Z)(function*(i,e,t=hr()){const o=yield od(i,ya(kh(e.bundledQuery))),u=G(i);return u.persistence.runTransaction("Save named query","readwrite",h=>{const v=li(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u._s.saveNamedQuery(h,e);const A=o.withResumeToken(Vi.EMPTY_BYTE_STRING,v);return u.ui=u.ui.insert(A.targetId,A),u.fs.updateTargetData(h,A).next(()=>u.fs.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>u.fs.addMatchingKeys(h,t,o.targetId)).next(()=>u._s.saveNamedQuery(h,e))})}),zh.apply(this,arguments)}class up{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return dt.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var o;return this.yi.set(t.id,{id:(o=t).id,version:o.version,createTime:li(o.createTime)}),dt.resolve()}getNamedQuery(e,t){return dt.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(o=t).name,query:kh(o.bundledQuery),readTime:li(o.readTime)}),dt.resolve();var o}}class lp{constructor(){this.overlays=new Xn(Ft.comparator),this.Ii=new Map}getOverlay(e,t){return dt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,h)=>{this.Xt(e,t,h)}),dt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.Ii.get(o);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.Ii.delete(o)),dt.resolve()}getOverlaysForCollection(e,t,o){const u=ui(),h=t.length+1,v=new Ft(t.child("")),A=this.overlays.getIteratorFrom(v);for(;A.hasNext();){const H=A.getNext().value,K=H.getKey();if(!t.isPrefixOf(K.path))break;K.path.length===h&&H.largestBatchId>o&&u.set(H.getKey(),H)}return dt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let h=new Xn((K,he)=>K-he);const v=this.overlays.getIterator();for(;v.hasNext();){const K=v.getNext().value;if(K.getKey().getCollectionGroup()===t&&K.largestBatchId>o){let he=h.get(K.largestBatchId);null===he&&(he=ui(),h=h.insert(K.largestBatchId,he)),he.set(K.getKey(),K)}}const A=ui(),H=h.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((K,he)=>A.set(K,he)),!(A.size()>=u)););return dt.resolve(A)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const v=this.Ii.get(u.largestBatchId).delete(o.key);this.Ii.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new Oh(t,o));let h=this.Ii.get(t);void 0===h&&(h=hr(),this.Ii.set(t,h)),this.Ii.set(t,h.add(o.key))}}class Wh{constructor(){this.Ti=new dr(Vs.Ei),this.Ai=new dr(Vs.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const o=new Vs(e,t);this.Ti=this.Ti.add(o),this.Ai=this.Ai.add(o)}bi(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Pi(new Vs(e,t))}Vi(e,t){e.forEach(o=>this.removeReference(o,t))}vi(e){const t=new Ft(new Pn([])),o=new Vs(t,e),u=new Vs(t,e+1),h=[];return this.Ai.forEachInRange([o,u],v=>{this.Pi(v),h.push(v.key)}),h}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ft(new Pn([])),o=new Vs(t,e),u=new Vs(t,e+1);let h=hr();return this.Ai.forEachInRange([o,u],v=>{h=h.add(v.key)}),h}containsKey(e){const t=new Vs(e,0),o=this.Ti.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Vs{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ft.comparator(e.key,t.key)||Vn(e.Ci,t.Ci)}static Ri(e,t){return Vn(e.Ci,t.Ci)||Ft.comparator(e.key,t.key)}}class e_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new dr(Vs.Ei)}checkEmpty(e){return dt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const h=this.xi;this.xi++;const v=new Yc(h,t,o,u);this.Bs.push(v);for(const A of u)this.Ni=this.Ni.add(new Vs(A.key,h)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return dt.resolve(v)}lookupMutationBatch(e,t){return dt.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Mi(t+1),h=u<0?0:u;return dt.resolve(this.Bs.length>h?this.Bs[h]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return dt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Vs(t,0),u=new Vs(t,Number.POSITIVE_INFINITY),h=[];return this.Ni.forEachInRange([o,u],v=>{const A=this.ki(v.Ci);h.push(A)}),dt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new dr(Vn);return t.forEach(u=>{const h=new Vs(u,0),v=new Vs(u,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([h,v],A=>{o=o.add(A.Ci)})}),dt.resolve(this.Oi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let h=o;Ft.isDocumentKey(h)||(h=h.child(""));const v=new Vs(new Ft(h),0);let A=new dr(Vn);return this.Ni.forEachWhile(H=>{const K=H.key.path;return!!o.isPrefixOf(K)&&(K.length===u&&(A=A.add(H.Ci)),!0)},v),dt.resolve(this.Oi(A))}Oi(e){const t=[];return e.forEach(o=>{const u=this.ki(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){M(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let o=this.Ni;return dt.forEach(t.mutations,u=>{const h=new Vs(u.key,t.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Ni=o})}_n(e){}containsKey(e,t){const o=new Vs(t,0),u=this.Ni.firstAfterOrEqual(o);return dt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return dt.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Zg{constructor(e){this.$i=e,this.docs=new Xn(Ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),h=u?u.size:0,v=this.$i(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return dt.resolve(o?o.document.mutableCopy():ae.newInvalidDocument(t))}getEntries(e,t){let o=jn();return t.forEach(u=>{const h=this.docs.get(u);o=o.insert(u,h?h.document.mutableCopy():ae.newInvalidDocument(u))}),dt.resolve(o)}getAllFromCollection(e,t,o){let u=jn();const h=new Ft(t.child("")),v=this.docs.getIteratorFrom(h);for(;v.hasNext();){const{key:A,value:{document:H}}=v.getNext();if(!t.isPrefixOf(A.path))break;A.path.length>t.length+1||$i(Jn(H),o)<=0||(u=u.insert(H.key,H.mutableCopy()))}return dt.resolve(u)}getAllFromCollectionGroup(e,t,o,u){E()}Bi(e,t){return dt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Wv(this)}getSize(e){return dt.resolve(this.size)}}class Wv extends ip{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),dt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Yg{constructor(e){this.persistence=e,this.Li=new ar(t=>Qa(t),uu),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Wh,this.targetCount=0,this.Ki=El.gn()}forEachTarget(e,t){return this.Li.forEach((o,u)=>t(u)),dt.resolve()}getLastRemoteSnapshotVersion(e){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dt.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Ui&&(this.Ui=t),dt.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new El(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,dt.resolve()}updateTargetData(e,t){return this.Tn(t),dt.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,dt.resolve()}removeTargets(e,t,o){let u=0;const h=[];return this.Li.forEach((v,A)=>{A.sequenceNumber<=t&&null===o.get(A.targetId)&&(this.Li.delete(v),h.push(this.removeMatchingKeysForTargetId(e,A.targetId)),u++)}),dt.waitFor(h).next(()=>u)}getTargetCount(e){return dt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Li.get(t)||null;return dt.resolve(o)}addMatchingKeys(e,t,o){return this.qi.bi(t,o),dt.resolve()}removeMatchingKeys(e,t,o){this.qi.Vi(t,o);const u=this.persistence.referenceDelegate,h=[];return u&&t.forEach(v=>{h.push(u.markPotentiallyOrphaned(e,v))}),dt.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),dt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.qi.Di(t);return dt.resolve(o)}containsKey(e,t){return dt.resolve(this.qi.containsKey(t))}}class Qg{constructor(e,t){this.Gi={},this.overlays={},this.es=new Yr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Yg(this),this.indexManager=new Fg,this.ds=new Zg(o=>this.referenceDelegate.Qi(o)),this.M=new Zf(t),this._s=new up(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Gi[e.toKey()];return o||(o=new e_(t,this.referenceDelegate),this.Gi[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){St("MemoryPersistence","Starting transaction:",e);const u=new t_(this.es.next());return this.referenceDelegate.ji(),o(u).next(h=>this.referenceDelegate.Wi(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}zi(e,t){return dt.or(Object.values(this.Gi).map(o=>()=>o.containsKey(e,t)))}}class t_ extends qf{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.Hi=new Wh,this.Ji=null}static Yi(e){return new qh(e)}get Xi(){if(this.Ji)return this.Ji;throw E()}addReference(e,t,o){return this.Hi.addReference(o,t),this.Xi.delete(o.toString()),dt.resolve()}removeReference(e,t,o){return this.Hi.removeReference(o,t),this.Xi.add(o.toString()),dt.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),dt.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(u=>this.Xi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(h=>this.Xi.add(h.toString()))}).next(()=>o.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Xi,o=>{const u=Ft.fromPath(o);return this.Zi(e,u).next(h=>{h||t.removeEntry(u,Tn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(o=>{o?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return dt.or([()=>dt.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Jg(i,e){return`firestore_clients_${i}_${e}`}function Xg(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function wa(i,e){return`firestore_targets_${i}_${e}`}class Kh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static tr(e,t,o){const u=JSON.parse(o);let h,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(h=new ne(u.error.code,u.error.message))),v?new Kh(e,t,u.state,h):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ud{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static tr(e,t){const o=JSON.parse(t);let u,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new ne(o.error.code,o.error.message))),h?new Ud(e,o.state,u):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,h=Bi();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=Jo(o.activeTargetIds[v]),h=h.add(o.activeTargetIds[v]);return u?new cp(e,h):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class em{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new em(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zh{constructor(){this.activeTargetIds=Bi()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tm{constructor(e,t,o,u,h){this.window=e,this.Yn=t,this.persistenceKey=o,this.ir=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Xn(Vn),this.started=!1,this.cr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.hr=Jg(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Zh),this.dr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,oe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.ir)continue;const h=e.getItem(Jg(e.persistenceKey,u));if(h){const v=cp.tr(u,h);v&&(e.ar=e.ar.insert(v.clientId,v))}}e.yr();const o=e.storage.getItem(e.mr);if(o){const u=e.pr(o);u&&e.Ir(u)}for(const u of e.cr)e.ur(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,o){this.Er(e,t,o),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(wa(this.persistenceKey,e));if(o){const u=Ud.tr(e,o);u&&(t=u.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wa(this.persistenceKey,e))}updateQueryState(e,t,o){this.br(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ar(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return St("SharedClientState","READ",e,t),t}setItem(e,t){St("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){St("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const o=e;if(o.storageArea===this.storage){if(St("SharedClientState","EVENT",o.key,o.newValue),o.key===this.hr)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,oe.Z)(function*(){if(t.started){if(null!==o.key)if(t.dr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Sr(u,null)}{const u=t.Dr(o.key,o.newValue);if(u)return t.Sr(u.clientId,u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Cr(o.key,o.newValue);if(u)return t.Nr(u)}}else if(t.wr.test(o.key)){if(null!==o.newValue){const u=t.kr(o.key,o.newValue);if(u)return t.Mr(u)}}else if(o.key===t.mr){if(null!==o.newValue){const u=t.pr(o.newValue);if(u)return t.Ir(u)}}else if(o.key===t.lr){const u=function(h){let v=Yr.A;if(null!=h)try{const A=JSON.parse(h);M("number"==typeof A),v=A}catch(A){jr("SharedClientState","Failed to read sequence number from WebStorage",A)}return v}(o.newValue);u!==Yr.A&&t.sequenceNumberHandler(u)}else if(o.key===t.gr){const u=t.Or(o.newValue);yield Promise.all(u.map(h=>t.syncEngine.Fr(h)))}}else t.cr.push(o)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,o){const u=new Kh(this.currentUser,e,t,o),h=Xg(this.persistenceKey,this.currentUser,e);this.setItem(h,u.er())}Ar(e){const t=Xg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,o){const u=wa(this.persistenceKey,e),h=new Ud(e,t,o);this.setItem(u,h.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const o=this.vr(e);return cp.tr(o,t)}Cr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Kh.tr(new Li(void 0!==o[2]?o[2]:null),u,t)}kr(e,t){const o=this.wr.exec(e),u=Number(o[1]);return Ud.tr(u,t)}pr(e){return em.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);St("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const o=t?this.ar.insert(e,t):this.ar.remove(e),u=this.Tr(this.ar),h=this.Tr(o),v=[],A=[];return h.forEach(H=>{u.has(H)||v.push(H)}),u.forEach(H=>{h.has(H)||A.push(H)}),this.syncEngine.Lr(v,A).then(()=>{this.ar=o})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Bi();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class nm{constructor(){this.Ur=new Zh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Zh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dp{Kr(e){}shutdown(){}}class hp{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){St("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){St("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const n_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class r_{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class i_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,h){const v=this.ho(e,t);St("RestConnection","Sending: ",v,o);const A={};return this.lo(A,u,h),this.fo(e,v,A,o).then(H=>(St("RestConnection","Received: ",H),H),H=>{throw T("RestConnection",`${e} failed with error: `,H,"url: ",v,"request:",o),H})}_o(e,t,o,u,h){return this.co(e,t,o,u,h)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,h)=>e[h]=u),o&&o.headers.forEach((u,h)=>e[h]=u)}ho(e,t){return`${this.uo}/v1/${t}:${n_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((h,v)=>{const A=new Ta;A.listenOnce(da.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case $a.NO_ERROR:const K=A.getResponseJson();St("Connection","XHR received:",JSON.stringify(K)),h(K);break;case $a.TIMEOUT:St("Connection",'RPC "'+e+'" timed out'),v(new ne(W.DEADLINE_EXCEEDED,"Request time out"));break;case $a.HTTP_ERROR:const he=A.getStatus();if(St("Connection",'RPC "'+e+'" failed with status:',he,"response text:",A.getResponseText()),he>0){const xe=A.getResponseJson().error;if(xe&&xe.status&&xe.message){const it=function(It){const At=It.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(At)>=0?At:W.UNKNOWN}(xe.status);v(new ne(it,xe.message))}else v(new ne(W.UNKNOWN,"Server responded with status "+A.getStatus()))}else v(new ne(W.UNAVAILABLE,"Connection failed."));break;default:E()}}finally{St("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(u);A.send(t,"POST",H,o,15)})}wo(e,t,o){const u=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=uo(),v=Io(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(A.xmlHttpFactory=new ai({})),this.lo(A.initMessageHeaders,t,o),(0,st.uI)()||(0,st.b$)()||(0,st.d)()||(0,st.w1)()||(0,st.Mn)()||(0,st.ru)()||(A.httpHeadersOverwriteParam="$httpHeaders");const H=u.join("");St("Connection","Creating WebChannel: "+H,A);const K=h.createWebChannel(H,A);let he=!1,xe=!1;const it=new r_({Jr:At=>{xe?St("Connection","Not sending because WebChannel is closed:",At):(he||(St("Connection","Opening WebChannel transport."),K.open(),he=!0),St("Connection","WebChannel sending:",At),K.send(At))},Yr:()=>K.close()}),It=(At,dn,Gn)=>{At.listen(dn,Ki=>{try{Gn(Ki)}catch(Ds){setTimeout(()=>{throw Ds},0)}})};return It(K,Co.EventType.OPEN,()=>{xe||St("Connection","WebChannel transport opened.")}),It(K,Co.EventType.CLOSE,()=>{xe||(xe=!0,St("Connection","WebChannel transport closed"),it.ro())}),It(K,Co.EventType.ERROR,At=>{xe||(xe=!0,T("Connection","WebChannel transport errored:",At),it.ro(new ne(W.UNAVAILABLE,"The operation could not be completed")))}),It(K,Co.EventType.MESSAGE,At=>{var dn;if(!xe){const Gn=At.data[0];M(!!Gn);const Ki=Gn,Ds=Ki.error||(null===(dn=Ki[0])||void 0===dn?void 0:dn.error);if(Ds){St("Connection","WebChannel received error:",Ds);const ei=Ds.status;let Qs=function(_s){const sa=Nt[_s];if(void 0!==sa)return qr(sa)}(ei),Zi=Ds.message;void 0===Qs&&(Qs=W.INTERNAL,Zi="Unknown error status: "+ei+" with message "+Ds.message),xe=!0,it.ro(new ne(Qs,Zi)),K.close()}else St("Connection","WebChannel received:",Gn),it.oo(Gn)}}),It(v,Ws.STAT_EVENT,At=>{At.stat===Xr.PROXY?St("Connection","Detected buffering proxy"):At.stat===Xr.NOPROXY&&St("Connection","Detected no buffering proxy")}),setTimeout(()=>{it.io()},0),it}}function fp(){return"undefined"!=typeof window?window:null}function Yh(){return"undefined"!=typeof document?document:null}function cd(i){return new xi(i,!0)}class pp{constructor(e,t,o=1e3,u=1.5,h=6e4){this.Yn=e,this.timerId=t,this.mo=o,this.yo=u,this.po=h,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&St("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class rm{constructor(e,t,o,u,h,v,A,H){this.Yn=e,this.Vo=o,this.vo=u,this.So=h,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=A,this.listener=H,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new pp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,oe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,oe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,oe.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===W.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new ne(W.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{o(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.No.Ro((0,oe.Z)(function*(){e.state=0,e.start()}))}jo(e){return St("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(St("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class im extends rm{constructor(e,t,o,u,h,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,v),this.M=h}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function mu(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:E(),u=e.targetChange.targetIds||[],h=function(H,K){return H.N?(M(void 0===K||"string"==typeof K),Vi.fromBase64String(K||"")):(M(void 0===K||K instanceof Uint8Array),Vi.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,A=v&&function(H){const K=void 0===H.code?W.UNKNOWN:qr(H.code);return new ne(K,H.message||"")}(v);t=new bn(o,u,h,A||null)}else if("documentChange"in e){const o=e.documentChange,u=gu(i,o.document.name),h=li(o.document.updateTime),v=new F({mapValue:{fields:o.document.fields}}),A=ae.newFoundDocument(u,h,v);t=new pu(o.targetIds||[],o.removedTargetIds||[],A.key,A)}else if("documentDelete"in e){const o=e.documentDelete,u=gu(i,o.document),h=o.readTime?li(o.readTime):Tn.min(),v=ae.newNoDocument(u,h);t=new pu([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=gu(i,o.document);t=new pu([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return E();{const o=e.filter,h=new wn(o.count||0);t=new Gt(o.targetId,h)}}var H;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return Tn.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Tn.min():h.readTime?li(h.readTime):Tn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=Ll(this.M),t.addTarget=function(u,h){let v;const A=h.target;return v=Ru(A)?{documents:wh(u,A)}:{query:Wc(u,A)},v.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?v.resumeToken=Fl(u,h.resumeToken):h.snapshotVersion.compareTo(Tn.min())>0&&(v.readTime=eu(u,h.snapshotVersion.toTimestamp())),v}(this.M,e);const o=function Ih(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return E()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=Ll(this.M),t.removeTarget=e,this.Lo(t)}}class sm extends rm{constructor(e,t,o,u,h,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,v),this.M=h,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(M(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Eh(i,e){return i&&i.length>0?(M(void 0!==e),i.map(t=>function(o,u){let h=li(o.updateTime?o.updateTime:u);return h.isEqual(Tn.min())&&(h=li(u)),new Hc(h,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=li(e.commitTime);return this.listener.tu(o,t)}return M(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ll(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Nu(this.M,o))};this.Lo(t)}}class s_ extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.M=u,this.su=!1}iu(){if(this.su)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.So.co(e,t,o,u,h)).catch(u=>{throw"FirebaseError"===u.name?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ne(W.UNKNOWN,u.toString())})}_o(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.So._o(e,t,o,u,h)).catch(u=>{throw"FirebaseError"===u.name?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ne(W.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class ol{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(jr(t),this.uu=!1):St("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class gp{constructor(e,t,o,u,h){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=h,this.gu.Kr(A=>{o.enqueueAndForget((0,oe.Z)(function*(){var H;ku(v)&&(St("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,oe.Z)(function*(K){const he=G(K);he.wu.add(4),yield jd(he),he.yu.set("Unknown"),he.wu.delete(4),yield Bd(he)}),function(K){return H.apply(this,arguments)})(v))}))}),this.yu=new ol(o,u)}}function Bd(i){return mp.apply(this,arguments)}function mp(){return mp=(0,oe.Z)(function*(i){if(ku(i))for(const e of i.mu)yield e(!0)}),mp.apply(this,arguments)}function jd(i){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,oe.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Qh.apply(this,arguments)}function Jh(i,e){const t=G(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),vp(t)?_p(t):Ic(t).Mo()&&yp(t,e))}function Hd(i,e){const t=G(i),o=Ic(t);t._u.delete(e),o.Mo()&&Xh(t,e),0===t._u.size&&(o.Mo()?o.$o():ku(t)&&t.yu.set("Unknown"))}function yp(i,e){i.pu.Z(e.targetId),Ic(i).Ho(e)}function Xh(i,e){i.pu.Z(e),Ic(i).Jo(e)}function _p(i){i.pu=new Er({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),Ic(i).start(),i.yu.au()}function vp(i){return ku(i)&&!Ic(i).ko()&&i._u.size>0}function ku(i){return 0===G(i).wu.size}function ef(i){i.pu=void 0}function o_(i){return $d.apply(this,arguments)}function $d(){return $d=(0,oe.Z)(function*(i){i._u.forEach((e,t)=>{yp(i,e)})}),$d.apply(this,arguments)}function Ep(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,oe.Z)(function*(i,e){ef(i),vp(i)?(i.yu.lu(e),_p(i)):i.yu.set("Unknown")}),tf.apply(this,arguments)}function qv(i,e,t){return om.apply(this,arguments)}function om(){return om=(0,oe.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof bn&&2===e.state&&e.cause)try{yield(o=(0,oe.Z)(function*(u,h){const v=h.cause;for(const A of h.targetIds)u._u.has(A)&&(yield u.remoteSyncer.rejectListen(A,v),u._u.delete(A),u.pu.removeTarget(A))}),function(u,h){return o.apply(this,arguments)})(i,e)}catch(o){St("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield dd(i,o)}else if(e instanceof pu?i.pu.ut(e):e instanceof Gt?i.pu._t(e):i.pu.ht(e),!t.isEqual(Tn.min()))try{const o=yield zg(i.localStore);t.compareTo(o)>=0&&(yield function(u,h){const v=u.pu.yt(h);return v.targetChanges.forEach((A,H)=>{if(A.resumeToken.approximateByteSize()>0){const K=u._u.get(H);K&&u._u.set(H,K.withResumeToken(A.resumeToken,h))}}),v.targetMismatches.forEach(A=>{const H=u._u.get(A);if(!H)return;u._u.set(A,H.withResumeToken(Vi.EMPTY_BYTE_STRING,H.snapshotVersion)),Xh(u,A);const K=new rl(H.target,A,1,H.sequenceNumber);yp(u,K)}),u.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){St("RemoteStore","Failed to raise snapshot:",o),yield dd(i,o)}var o}),om.apply(this,arguments)}function dd(i,e,t){return am.apply(this,arguments)}function am(){return am=(0,oe.Z)(function*(i,e,t){if(!nl(e))throw e;i.wu.add(1),yield jd(i),i.yu.set("Offline"),t||(t=()=>zg(i.localStore)),i.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){St("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Bd(i)}))}),am.apply(this,arguments)}function um(i,e){return e().catch(t=>dd(i,t,e))}function wc(i){return nf.apply(this,arguments)}function nf(){return nf=(0,oe.Z)(function*(i){const e=G(i),t=Gl(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;lm(e);)try{const u=yield qg(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,cm(e,u)}catch(u){yield dd(e,u)}wp(e)&&al(e)}),nf.apply(this,arguments)}function lm(i){return ku(i)&&i.du.length<10}function cm(i,e){i.du.push(e);const t=Gl(i);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function wp(i){return ku(i)&&!Gl(i).ko()&&i.du.length>0}function al(i){Gl(i).start()}function rf(i){return bp.apply(this,arguments)}function bp(){return bp=(0,oe.Z)(function*(i){Gl(i).nu()}),bp.apply(this,arguments)}function a_(i){return dm.apply(this,arguments)}function dm(){return dm=(0,oe.Z)(function*(i){const e=Gl(i);for(const t of i.du)e.Zo(t.mutations)}),dm.apply(this,arguments)}function Ip(i,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,oe.Z)(function*(i,e,t){const o=i.du.shift(),u=Qc.from(o,e,t);yield um(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield wc(i)}),sf.apply(this,arguments)}function Cp(i,e){return bc.apply(this,arguments)}function bc(){return bc=(0,oe.Z)(function*(i,e){var t;e&&Gl(i).Xo&&(yield(t=(0,oe.Z)(function*(o,u){if(Rn(h=u.code)&&h!==W.ABORTED){const v=o.du.shift();Gl(o).Fo(),yield um(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,u)),yield wc(o)}var h}),function(o,u){return t.apply(this,arguments)})(i,e)),wp(i)&&al(i)}),bc.apply(this,arguments)}function hm(i,e){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,oe.Z)(function*(i,e){const t=G(i);t.asyncQueue.verifyOperationInProgress(),St("RemoteStore","RemoteStore received new credentials");const o=ku(t);t.wu.add(3),yield jd(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Bd(t)}),Gd.apply(this,arguments)}function af(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,oe.Z)(function*(i,e){const t=G(i);e?(t.wu.delete(2),yield Bd(t)):e||(t.wu.add(2),yield jd(t),t.yu.set("Unknown"))}),uf.apply(this,arguments)}function Ic(i){return i.Iu||(i.Iu=function(e,t,o){const u=G(e);return u.iu(),new im(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:o_.bind(null,i),eo:Ep.bind(null,i),zo:qv.bind(null,i)}),i.mu.push(function(){var e=(0,oe.Z)(function*(t){t?(i.Iu.Fo(),vp(i)?_p(i):i.yu.set("Unknown")):(yield i.Iu.stop(),ef(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Gl(i){return i.Tu||(i.Tu=function(e,t,o){const u=G(e);return u.iu(),new sm(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:rf.bind(null,i),eo:Cp.bind(null,i),eu:a_.bind(null,i),tu:Ip.bind(null,i)}),i.mu.push(function(){var e=(0,oe.Z)(function*(t){t?(i.Tu.Fo(),yield wc(i)):(yield i.Tu.stop(),i.du.length>0&&(St("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class zd{constructor(e,t,o,u,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=h,this.deferred=new et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,u,h){const v=Date.now()+o,A=new zd(e,t,v,u,h);return A.start(o),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ne(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hd(i,e){if(jr("AsyncQueue",`${e}: ${i}`),nl(i))return new ne(W.UNAVAILABLE,`${e}: ${i}`);throw i}class fd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ft.comparator(t.key,o.key):(t,o)=>Ft.comparator(t.key,o.key),this.keyedMap=ms(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,h=o.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new fd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Dp{constructor(){this.Eu=new Xn(Ft.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):E():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Fu{constructor(e,t,o,u,h,v,A,H){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=h,this.fromCache=v,this.syncStateChanged=A,this.excludesMetadataChanges=H}static fromInitialDocuments(e,t,o,u){const h=[];return t.forEach(v=>{h.push({type:0,doc:v})}),new Fu(e,t,fd.emptySet(t),h,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class fm{constructor(){this.Ru=void 0,this.listeners=[]}}class u_{constructor(){this.queries=new ar(e=>gl(e),pl),this.onlineState="Unknown",this.bu=new Set}}function Tp(i,e){return zl.apply(this,arguments)}function zl(){return zl=(0,oe.Z)(function*(i,e){const t=G(i),o=e.query;let u=!1,h=t.queries.get(o);if(h||(u=!0,h=new fm),u)try{h.Ru=yield t.onListen(o)}catch(v){const A=hd(v,`Initialization of query '${So(e.query)}' failed`);return void e.onError(A)}t.queries.set(o,h),h.listeners.push(e),e.Pu(t.onlineState),h.Ru&&e.Vu(h.Ru)&&vu(t)}),zl.apply(this,arguments)}function Ap(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,oe.Z)(function*(i,e){const t=G(i),o=e.query;let u=!1;const h=t.queries.get(o);if(h){const v=h.listeners.indexOf(e);v>=0&&(h.listeners.splice(v,1),u=0===h.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Sp.apply(this,arguments)}function l_(i,e){const t=G(i);let o=!1;for(const u of e){const v=t.queries.get(u.query);if(v){for(const A of v.listeners)A.Vu(u)&&(o=!0);v.Ru=u}}o&&vu(t)}function c_(i,e,t){const o=G(i),u=o.queries.get(e);if(u)for(const h of u.listeners)h.onError(t);o.queries.delete(e)}function vu(i){i.bu.forEach(e=>{e.next()})}class Wd{constructor(e,t,o){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}Vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Fu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Mp{constructor(e){this.M=e}wi(e){return gu(this.M,e)}mi(e){return e.metadata.exists?Gc(this.M,e.document,!1):ae.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return li(e)}}class gm{constructor(e,t,o){this.Ou=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new Mp(this.M);for(const u of e)if(u.metadata.queries){const h=o.wi(u.metadata.name);for(const v of u.metadata.queries){const A=(t.get(v)||hr()).add(h);t.set(v,A)}}return t}complete(){var e=this;return(0,oe.Z)(function*(){const t=yield function ld(i,e,t,o){return ap.apply(this,arguments)}(e.localStore,new Mp(e.M),e.documents,e.Ou.id),o=e.$u(e.documents);for(const u of e.queries)yield Kg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class _m{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=hr(),this.mutatedKeys=hr(),this.Gu=uc(e),this.Qu=new fd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Dp,u=t?t.Qu:this.Qu;let h=t?t.mutatedKeys:this.mutatedKeys,v=u,A=!1;const H="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,K="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((he,xe)=>{const it=u.get(he),It=Xa(this.query,xe)?xe:null,At=!!it&&this.mutatedKeys.has(it.key),dn=!!It&&(It.hasLocalMutations||this.mutatedKeys.has(It.key)&&It.hasCommittedMutations);let Gn=!1;it&&It?it.data.isEqual(It.data)?At!==dn&&(o.track({type:3,doc:It}),Gn=!0):this.Hu(it,It)||(o.track({type:2,doc:It}),Gn=!0,(H&&this.Gu(It,H)>0||K&&this.Gu(It,K)<0)&&(A=!0)):!it&&It?(o.track({type:0,doc:It}),Gn=!0):it&&!It&&(o.track({type:1,doc:it}),Gn=!0,(H||K)&&(A=!0)),Gn&&(It?(v=v.add(It),h=dn?h.add(he):h.delete(he)):(v=v.delete(he),h=h.delete(he)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const he="F"===this.query.limitType?v.last():v.first();v=v.delete(he.key),h=h.delete(he.key),o.track({type:1,doc:he})}return{Qu:v,zu:o,ii:A,mutatedKeys:h}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const h=e.zu.Au();h.sort((K,he)=>function(xe,it){const It=At=>{switch(At){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return E()}};return It(xe)-It(it)}(K.type,he.type)||this.Gu(K.doc,he.doc)),this.Ju(o);const v=t?this.Yu():[],A=0===this.Ku.size&&this.current?1:0,H=A!==this.qu;return this.qu=A,0!==h.length||H?{snapshot:new Fu(this.query,e.Qu,u,h,e.mutatedKeys,0===A,H,!1),Xu:v}:{Xu:v}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Dp,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=hr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new ym(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}ta(e){this.Uu=e._i,this.Ku=hr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Fu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class d_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class vm{constructor(e){this.key=e,this.na=!1}}class Kv{constructor(e,t,o,u,h,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=v,this.sa={},this.ia=new ar(A=>gl(A),pl),this.ra=new Map,this.oa=new Set,this.ua=new Xn(Ft.comparator),this.aa=new Map,this.ca=new Wh,this.ha={},this.la=new Map,this.fa=El.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Em(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,oe.Z)(function*(i,e){const t=Yl(i);let o,u;const h=t.ia.get(e);if(h)o=h.targetId,t.sharedClientState.addLocalQueryTarget(o),u=h.view.ea();else{const v=yield od(t.localStore,ya(e));t.isPrimaryClient&&Jh(t.remoteStore,v);const A=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield Op(t,e,o,"current"===A)}return u}),Rp.apply(this,arguments)}function Op(i,e,t,o){return wm.apply(this,arguments)}function wm(){return wm=(0,oe.Z)(function*(i,e,t,o){i._a=(he,xe,it)=>{return(It=(0,oe.Z)(function*(At,dn,Gn,Ki){let Ds=dn.view.Wu(Gn);Ds.ii&&(Ds=yield wl(At.localStore,dn.query,!1).then(({documents:Zi})=>dn.view.Wu(Zi,Ds)));const ei=Ki&&Ki.targetChanges.get(dn.targetId),Qs=dn.view.applyChanges(Ds,At.isPrimaryClient,ei);return Fp(At,dn.targetId,Qs.Xu),Qs.snapshot}),function(At,dn,Gn,Ki){return It.apply(this,arguments)})(i,he,xe,it);var It};const u=yield wl(i.localStore,e,!0),h=new _m(e,u._i),v=h.Wu(u.documents),A=fu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),H=h.applyChanges(v,i.isPrimaryClient,A);Fp(i,t,H.Xu);const K=new d_(e,t,h);return i.ia.set(e,K),i.ra.has(t)?i.ra.get(t).push(e):i.ra.set(t,[e]),H.snapshot}),wm.apply(this,arguments)}function Zv(i,e){return qd.apply(this,arguments)}function qd(){return qd=(0,oe.Z)(function*(i,e){const t=G(i),o=t.ia.get(e),u=t.ra.get(o.targetId);if(u.length>1)return t.ra.set(o.targetId,u.filter(h=>!pl(h,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ad(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Hd(t.remoteStore,o.targetId),Wl(t,o.targetId)}).catch(_c))):(Wl(t,o.targetId),yield ad(t.localStore,o.targetId,!0))}),qd.apply(this,arguments)}function lf(){return lf=(0,oe.Z)(function*(i,e,t){const o=Ql(i);try{const u=yield function(h,v){const A=G(h),H=Ar.now(),K=v.reduce((xe,it)=>xe.add(it.key),hr());let he;return A.persistence.runTransaction("Locally write mutations","readwrite",xe=>A.fi.Ks(xe,K).next(it=>{he=it;const It=[];for(const At of v){const dn=b(At,he.get(At.key));null!=dn&&It.push(new se(At.key,dn,Y(dn.value.mapValue),gs.exists(!0)))}return A.Bs.addMutationBatch(xe,H,It,v)})).then(xe=>(xe.applyToLocalDocumentSet(he),{batchId:xe.batchId,changes:he}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(h,v,A){let H=h.ha[h.currentUser.toKey()];H||(H=new Xn(Vn)),H=H.insert(v,A),h.ha[h.currentUser.toKey()]=H}(o,u.batchId,t),yield bl(o,u.changes),yield wc(o.remoteStore)}catch(u){const h=hd(u,"Failed to persist write");t.reject(h)}}),lf.apply(this,arguments)}function Np(i,e){return bm.apply(this,arguments)}function bm(){return bm=(0,oe.Z)(function*(i,e){const t=G(i);try{const o=yield op(t.localStore,e);e.targetChanges.forEach((u,h)=>{const v=t.aa.get(h);v&&(M(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.na=!0:u.modifiedDocuments.size>0?M(v.na):u.removedDocuments.size>0&&(M(v.na),v.na=!1))}),yield bl(t,o,e)}catch(o){yield _c(o)}}),bm.apply(this,arguments)}function Eu(i,e,t){const o=G(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ia.forEach((h,v)=>{const A=v.view.Pu(e);A.snapshot&&u.push(A.snapshot)}),function(h,v){const A=G(h);A.onlineState=v;let H=!1;A.queries.forEach((K,he)=>{for(const xe of he.listeners)xe.Pu(v)&&(H=!0)}),H&&vu(A)}(o.eventManager,e),u.length&&o.sa.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Yv(i,e,t){return Im.apply(this,arguments)}function Im(){return Im=(0,oe.Z)(function*(i,e,t){const o=G(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.aa.get(e),h=u&&u.key;if(h){let v=new Xn(Ft.comparator);v=v.insert(h,ae.newNoDocument(h,Tn.min()));const A=hr().add(h),H=new $o(Tn.min(),new Map,new dr(Vn),v,A);yield Np(o,H),o.ua=o.ua.remove(h),o.aa.delete(e),Lp(o)}else yield ad(o.localStore,e,!1).then(()=>Wl(o,e,t)).catch(_c)}),Im.apply(this,arguments)}function Cm(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,oe.Z)(function*(i,e){const t=G(i),o=e.batch.batchId;try{const u=yield Gg(t.localStore,e);kp(t,o,null),Kd(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield bl(t,u)}catch(u){yield _c(u)}}),cf.apply(this,arguments)}function Dm(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,oe.Z)(function*(i,e,t){const o=G(i);try{const u=yield function(h,v){const A=G(h);return A.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let K;return A.Bs.lookupMutationBatch(H,v).next(he=>(M(null!==he),K=he.keys(),A.Bs.removeMutationBatch(H,he))).next(()=>A.Bs.performConsistencyCheck(H)).next(()=>A.fi.Ks(H,K))})}(o.localStore,e);kp(o,e,t),Kd(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield bl(o,u)}catch(u){yield _c(u)}}),Pp.apply(this,arguments)}function df(){return df=(0,oe.Z)(function*(i,e){const t=G(i);ku(t.remoteStore)||St("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(h){const v=G(h);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>v.Bs.getHighestUnacknowledgedBatchId(A))}(t.localStore);if(-1===o)return void e.resolve();const u=t.la.get(o)||[];u.push(e),t.la.set(o,u)}catch(o){const u=hd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),df.apply(this,arguments)}function Kd(i,e){(i.la.get(e)||[]).forEach(t=>{t.resolve()}),i.la.delete(e)}function kp(i,e,t){const o=G(i);let u=o.ha[o.currentUser.toKey()];if(u){const h=u.get(e);h&&(t?h.reject(t):h.resolve(),u=u.remove(e)),o.ha[o.currentUser.toKey()]=u}}function Wl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ra.get(e))i.ia.delete(o),t&&i.sa.wa(o,t);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(o=>{i.ca.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.oa.delete(e.path.canonicalString());const t=i.ua.get(e);null!==t&&(Hd(i.remoteStore,t),i.ua=i.ua.remove(e),i.aa.delete(t),Lp(i))}function Fp(i,e,t){for(const o of t)o instanceof mm?(i.ca.addReference(o.key,e),f_(i,o)):o instanceof ym?(St("SyncEngine","Document no longer in limbo: "+o.key),i.ca.removeReference(o.key,e),i.ca.containsKey(o.key)||Tm(i,o.key)):E()}function f_(i,e){const t=e.key,o=t.path.canonicalString();i.ua.get(t)||i.oa.has(o)||(St("SyncEngine","New document in limbo: "+t),i.oa.add(o),Lp(i))}function Lp(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const t=new Ft(Pn.fromString(e)),o=i.fa.next();i.aa.set(o,new vm(t)),i.ua=i.ua.insert(t,o),Jh(i.remoteStore,new rl(ya(hu(t.path)),o,2,Yr.A))}}function bl(i,e,t){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,oe.Z)(function*(i,e,t){const o=G(i),u=[],h=[],v=[];var A;o.ia.isEmpty()||(o.ia.forEach((A,H)=>{v.push(o._a(H,e,t).then(K=>{if(K){o.isPrimaryClient&&o.sharedClientState.updateQueryState(H.targetId,K.fromCache?"not-current":"current"),u.push(K);const he=jh.Ys(H.targetId,K);h.push(he)}}))}),yield Promise.all(v),o.sa.zo(u),yield(A=(0,oe.Z)(function*(H,K){const he=G(H);try{yield he.persistence.runTransaction("notifyLocalViewChanges","readwrite",xe=>dt.forEach(K,it=>dt.forEach(it.Hs,It=>he.persistence.referenceDelegate.addReference(xe,it.targetId,It)).next(()=>dt.forEach(it.Js,It=>he.persistence.referenceDelegate.removeReference(xe,it.targetId,It)))))}catch(xe){if(!nl(xe))throw xe;St("LocalStore","Failed to update sequence numbers: "+xe)}for(const xe of K){const it=xe.targetId;if(!xe.fromCache){const It=he.ui.get(it),dn=It.withLastLimboFreeSnapshotVersion(It.snapshotVersion);he.ui=he.ui.insert(it,dn)}}}),function(H,K){return A.apply(this,arguments)})(o.localStore,h))}),Vp.apply(this,arguments)}function hf(i,e){return ql.apply(this,arguments)}function ql(){return ql=(0,oe.Z)(function*(i,e){const t=G(i);if(!t.currentUser.isEqual(e)){St("SyncEngine","User change. New user:",e.toKey());const o=yield $g(t.localStore,e);t.currentUser=e,(u=t).la.forEach(v=>{v.forEach(A=>{A.reject(new ne(W.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.la.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield bl(t,o.di)}var u}),ql.apply(this,arguments)}function p_(i,e){const t=G(i),o=t.aa.get(e);if(o&&o.na)return hr().add(o.key);{let u=hr();const h=t.ra.get(e);if(!h)return u;for(const v of h){const A=t.ia.get(v);u=u.unionWith(A.view.ju)}return u}}function Zd(i,e){return Up.apply(this,arguments)}function Up(){return Up=(0,oe.Z)(function*(i,e){const t=G(i),o=yield wl(t.localStore,e.query,!0),u=e.view.ta(o);return t.isPrimaryClient&&Fp(t,e.targetId,u.Xu),u}),Up.apply(this,arguments)}function g_(i,e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,oe.Z)(function*(i,e){const t=G(i);return Ec(t.localStore,e).then(o=>bl(t,o))}),Yd.apply(this,arguments)}function ul(i,e,t,o){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,oe.Z)(function*(i,e,t,o){const u=G(i),h=yield function(v,A){const H=G(v),K=G(H.Bs);return H.persistence.runTransaction("Lookup mutation documents","readonly",he=>K.fn(he,A).next(xe=>xe?H.fi.Ks(he,xe):dt.resolve(null)))}(u.localStore,e);var A;null!==h?("pending"===t?yield wc(u.remoteStore):"acknowledged"===t||"rejected"===t?(kp(u,e,o||null),Kd(u,e),A=e,G(G(u.localStore).Bs)._n(A)):E(),yield bl(u,h)):St("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cc.apply(this,arguments)}function Il(){return Il=(0,oe.Z)(function*(i,e){const t=G(i);if(Yl(t),Ql(t),!0===e&&!0!==t.da){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Qd(t,o.toArray());t.da=!0,yield af(t.remoteStore,!0);for(const h of u)Jh(t.remoteStore,h)}else if(!1===e&&!1!==t.da){const o=[];let u=Promise.resolve();t.ra.forEach((h,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(Wl(t,v),ad(t.localStore,v,!0))),Hd(t.remoteStore,v)}),yield u,yield Qd(t,o),function(h){const v=G(h);v.aa.forEach((A,H)=>{Hd(v.remoteStore,H)}),v.ca.Si(),v.aa=new Map,v.ua=new Xn(Ft.comparator)}(t),t.da=!1,yield af(t.remoteStore,!1)}}),Il.apply(this,arguments)}function Qd(i,e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,oe.Z)(function*(i,e,t){const o=G(i),u=[],h=[];for(const v of e){let A;const H=o.ra.get(v);if(H&&0!==H.length){A=yield od(o.localStore,ya(H[0]));for(const K of H){const he=o.ia.get(K),xe=yield Zd(o,he);xe.snapshot&&h.push(xe.snapshot)}}else{const K=yield Gh(o.localStore,v);A=yield od(o.localStore,K),yield Op(o,ff(K),v,!1)}u.push(A)}return o.sa.zo(h),u}),Oa.apply(this,arguments)}function ff(i){return Ou(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function pd(i){const e=G(i);return G(G(e.localStore).persistence).Fs()}function gd(i,e,t,o){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,oe.Z)(function*(i,e,t,o){const u=G(i);if(u.da)return void St("SyncEngine","Ignoring unexpected query state notification.");const h=u.ra.get(e);if(h&&h.length>0)switch(t){case"current":case"not-current":{const v=yield Ec(u.localStore,Bo(h[0])),A=$o.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield bl(u,v,A);break}case"rejected":yield ad(u.localStore,e,!0),Wl(u,e,o);break;default:E()}}),Kl.apply(this,arguments)}function md(i,e,t){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,oe.Z)(function*(i,e,t){const o=Yl(i);if(o.da){for(const u of e){if(o.ra.has(u)){St("SyncEngine","Adding an already active target "+u);continue}const h=yield Gh(o.localStore,u),v=yield od(o.localStore,h);yield Op(o,ff(h),v.targetId,!1),Jh(o.remoteStore,v)}for(const u of t)o.ra.has(u)&&(yield ad(o.localStore,u,!1).then(()=>{Hd(o.remoteStore,u),Wl(o,u)}).catch(_c))}}),Zl.apply(this,arguments)}function Yl(i){const e=G(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Np.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yv.bind(null,e),e.sa.zo=l_.bind(null,e.eventManager),e.sa.wa=c_.bind(null,e.eventManager),e}function Ql(i){const e=G(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}class Dc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,oe.Z)(function*(){t.M=cd(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return $h(this.persistence,new Hh,e.initialUser,this.M)}ya(e){return new Qg(qh.Yi,this.M)}ga(e){return new nm}terminate(){var e=this;return(0,oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends Dc{constructor(e,t,o){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,oe.Z)(function*(){yield t().call(o,e),yield o.Ta.initialize(o,e),yield Ql(o.Ta.syncEngine),yield wc(o.Ta.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ia(e){return $h(this.persistence,new Hh,e.initialUser,this.M)}pa(e){return new $v(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Vd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ta.withCacheSize(this.cacheSizeBytes):ta.DEFAULT;return new jg(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,fp(),Yh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new nm}}class Am extends Bp{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,oe.Z)(function*(){yield t().call(o,e);const u=o.Ta.syncEngine;o.sharedClientState instanceof tm&&(o.sharedClientState.syncEngine={$r:ul.bind(null,u),Br:gd.bind(null,u),Lr:md.bind(null,u),Fs:pd.bind(null,u),Fr:g_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var h=(0,oe.Z)(function*(v){yield function na(i,e){return Il.apply(this,arguments)}(o.Ta.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):v||o.gcScheduler.stop())});return function(v){return h.apply(this,arguments)}}())})()}ga(e){const t=fp();if(!tm.vt(t))throw new ne(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Vd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class pf{initialize(e,t){var o=this;return(0,oe.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Eu(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=hf.bind(null,o.syncEngine),yield af(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new u_}createDatastore(e){const t=cd(e.databaseInfo.databaseId),o=new i_(e.databaseInfo);return new s_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,h=A=>Eu(this.syncEngine,A,0),v=hp.vt()?new hp:new dp,new gp(t,o,u,h,v);var t,o,u,h,v}createSyncEngine(e,t){return function(o,u,h,v,A,H,K){const he=new Kv(o,u,h,v,A,H);return K&&(he.da=!0),he}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,oe.Z)(function*(t){const o=G(t);St("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield jd(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jp(i,e=10240){let t=0;return{read:()=>(0,oe.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Sm{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new et,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(o=>{o&&o.Mu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,oe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,oe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const o=e.ba.decode(t),u=Number(o);isNaN(u)&&e.va(`length string (${o}) is not valid number`);const h=yield e.Sa(u);return new pm(JSON.parse(h),t.length+u)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,oe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Sa(e){var t=this;return(0,oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const o=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Mm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ne(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,oe.Z)(function*(h,v){const A=G(h),H=Ll(A.M)+"/documents",K={documents:v.map(It=>Ra(A.M,It))},he=yield A._o("BatchGetDocuments",H,K),xe=new Map;he.forEach(It=>{const At=function Gf(i,e){return"found"in e?function(t,o){M(!!o.found);const u=gu(t,o.found.name),h=li(o.found.updateTime),v=new F({mapValue:{fields:o.found.fields}});return ae.newFoundDocument(u,h,v)}(i,e):"missing"in e?function(t,o){M(!!o.missing),M(!!o.readTime);const u=gu(t,o.missing),h=li(o.readTime);return ae.newNoDocument(u,h)}(i,e):E()}(A.M,It);xe.set(At.key.toString(),At)});const it=[];return v.forEach(It=>{const At=xe.get(It.toString());M(!!At),it.push(At)}),it}),function(h,v){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lt(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const h=Ft.fromPath(u);e.mutations.push(new tn(h,e.precondition(h)))}),yield(o=(0,oe.Z)(function*(u,h){const v=G(u),A=Ll(v.M)+"/documents",H={writes:h.map(K=>Nu(v.M,K))};yield v.co("Commit",A,H)}),function(u,h){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw E();t=Tn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new ne(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gs.updateTime(t):gs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tn.min()))throw new ne(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(t)}return gs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xm{constructor(e,t,o,u,h){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=h,this.xa=o.maxAttempts,this.No=new pp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,oe.Z)(function*(){const t=new Mm(e.datastore),o=e.ka(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.Ma(h)}))}).catch(u=>{e.Ma(u)})}))}ka(e){try{const t=this.updateFunction(e);return!Is(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Rn(t)}return!1}}class Rm{constructor(e,t,o,u){var h=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Li.UNAUTHENTICATED,this.clientId=Qo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,oe.Z)(function*(A){St("FirestoreClient","Received user=",A.uid),yield h.authCredentialListener(A),h.user=A});return function(A){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(St("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=hd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Om(i,e){return gf.apply(this,arguments)}function gf(){return gf=(0,oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),St("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,oe.Z)(function*(h){o.isEqual(h)||(yield $g(e.localStore,h),o=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),gf.apply(this,arguments)}function Nm(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield mf(i);St("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>hm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,h)=>hm(e.remoteStore,h)),i.onlineComponents=e}),Hp.apply(this,arguments)}function mf(i){return $p.apply(this,arguments)}function $p(){return $p=(0,oe.Z)(function*(i){return i.offlineComponents||(St("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new Dc)),i.offlineComponents}),$p.apply(this,arguments)}function yf(i){return _f.apply(this,arguments)}function _f(){return _f=(0,oe.Z)(function*(i){return i.onlineComponents||(St("FirestoreClient","Using default OnlineComponentProvider"),yield Nm(i,new pf)),i.onlineComponents}),_f.apply(this,arguments)}function Pm(i){return mf(i).then(e=>e.persistence)}function vf(i){return mf(i).then(e=>e.localStore)}function km(i){return yf(i).then(e=>e.remoteStore)}function Gp(i){return yf(i).then(e=>e.syncEngine)}function Xd(i){return zp.apply(this,arguments)}function zp(){return zp=(0,oe.Z)(function*(i){const e=yield yf(i),t=e.eventManager;return t.onListen=Em.bind(null,e.syncEngine),t.onUnlisten=Zv.bind(null,e.syncEngine),t}),zp.apply(this,arguments)}function y_(i,e,t={}){const o=new et;return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(u,h,v,A,H){const K=new Jd({next:xe=>{h.enqueueAndForget(()=>Ap(u,he));const it=xe.docs.has(v);!it&&xe.fromCache?H.reject(new ne(W.UNAVAILABLE,"Failed to get document because the client is offline.")):it&&xe.fromCache&&A&&"server"===A.source?H.reject(new ne(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(xe)},error:xe=>H.reject(xe)}),he=new Wd(hu(v.path),K,{includeMetadataChanges:!0,ku:!0});return Tp(u,he)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}function __(i,e,t={}){const o=new et;return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(u,h,v,A,H){const K=new Jd({next:xe=>{h.enqueueAndForget(()=>Ap(u,he)),xe.fromCache&&"server"===A.source?H.reject(new ne(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(xe)},error:xe=>H.reject(xe)}),he=new Wd(v,K,{includeMetadataChanges:!0,ku:!0});return Tp(u,he)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}const Tc=new Map;function Kp(i,e,t){if(!t)throw new ne(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Zp(i,e,t,o){if(!0===e&&!0===o)throw new ne(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Lm(i){if(!Ft.isDocumentKey(i))throw new ne(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Yp(i){if(Ft.isDocumentKey(i))throw new ne(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ac(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":E()}function Hr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ne(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ac(i);throw new ne(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Qp(i,e){if(e<=0)throw new ne(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Vm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ne(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ne(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1,e instanceof Ei?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ei(u.options.projectId)}(e))}get app(){if(!this._app)throw new ne(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ne(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Bn;switch(t.type){case"gapi":const o=t.client;return M(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Tr(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ne(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Tc.get(e);t&&(St("ComponentProvider","Removing Datastore"),Tc.delete(e),t.terminate())}(this),Promise.resolve()}}class Wi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wi(this.firestore,e,this._key)}}class ra{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ra(this.firestore,e,this._query)}}class Lu extends ra{constructor(e,t,o){super(e,t,hu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wi(this.firestore,null,new Ft(e))}withConverter(e){return new Lu(this.firestore,e,this._path)}}function Um(i,e,...t){if(i=(0,st.m9)(i),Kp("collection","path",e),i instanceof eh){const o=Pn.fromString(e,...t);return Yp(o),new Lu(i,null,o)}{if(!(i instanceof Wi||i instanceof Lu))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Pn.fromString(e,...t));return Yp(o),new Lu(i.firestore,null,o)}}function th(i,e,...t){if(i=(0,st.m9)(i),1===arguments.length&&(e=Qo.R()),Kp("doc","path",e),i instanceof eh){const o=Pn.fromString(e,...t);return Lm(o),new Wi(i,null,new Ft(o))}{if(!(i instanceof Wi||i instanceof Lu))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Pn.fromString(e,...t));return Lm(o),new Wi(i.firestore,i instanceof Lu?i.converter:null,new Ft(o))}}function Ef(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),(i instanceof Wi||i instanceof Lu)&&(e instanceof Wi||e instanceof Lu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function b_(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),i instanceof ra&&e instanceof ra&&i.firestore===e.firestore&&pl(i._query,e._query)&&i.converter===e.converter}class Jp{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new pp(this,"async_queue_retry"),this.Qa=()=>{const t=Yh();t&&St("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Yh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Yh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new et;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,oe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!nl(t))throw t;St("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(o=>{throw this.Ua=o,this.qa=!1,jr("INTERNAL UNHANDLED ERROR: ",function(h){let v=h.message||"";return h.stack&&(v=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),v}(o)),o}).then(o=>(this.qa=!1,o))));return this.Fa=t,t}enqueueAfterDelay(e,t,o){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const u=zd.createAndSchedule(this,e,t,o,h=>this.Ha(h));return this.La.push(u),u}ja(){this.Ua&&E()}verifyOperationInProgress(){}Ja(){var e=this;return(0,oe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Xp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class e0{constructor(){this._progressObserver={},this._taskCompletionResolver=new et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qi extends eh{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Jp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rh(this),this._firestoreClient.terminate()}}function Zs(i){return i._firestoreClient||rh(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function rh(i){var e;const t=i._freezeSettings(),o=(h=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new lo(i._databaseId,h,i._persistenceKey,(A=t).host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,A.useFetchStreams));var h,A;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function I_(i,e,t){const o=new et;return i.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield Om(i,t),yield Nm(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(h=u).name?h.code===W.FAILED_PRECONDITION||h.code===W.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var h})).then(()=>o.promise)}function ng(i){if(i._initialized||i._terminated)throw new ne(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ne(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(Vi.fromBase64String(e))}catch(t){throw new ne(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jl{constructor(e){this._methodName=e}}class ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}}const rg=/^__.*__$/;class zm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new se(e,this.data,this.fieldMask,t,this.fieldTransforms):new te(e,this.data,t,this.fieldTransforms)}}class Wm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new se(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ig(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw E()}}class sh{constructor(e,t,o,u,h,v){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===h&&this.tc(),this.fieldTransforms=h||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new sh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.rc(e),u}oc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.tc(),u}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return ah(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(ig(this.ec)&&rg.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class qm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||cd(e)}lc(e,t,o,u=!1){return new sh({ec:e,methodName:t,hc:o,path:us.emptyPath(),ic:!1,cc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cl(i){const e=i._freezeSettings(),t=cd(i._databaseId);return new qm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function oh(i,e,t,o,u,h={}){const v=i.lc(h.merge||h.mergeFields?2:0,e,t,u);Us("Data must be an object, but it was:",v,o);const A=og(o,v);let H,K;if(h.merge)H=new fa(v.fieldMask),K=v.fieldTransforms;else if(h.mergeFields){const he=[];for(const xe of h.mergeFields){const it=Tf(e,xe,t);if(!v.contains(it))throw new ne(W.INVALID_ARGUMENT,`Field '${it}' is specified in your field mask but missing from your input data.`);ey(he,it)||he.push(it)}H=new fa(he),K=v.fieldTransforms.filter(xe=>H.covers(xe.field))}else H=null,K=v.fieldTransforms;return new zm(new F(A),H,K)}class _d extends Jl{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function sg(i,e,t){return new sh({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Cf extends Jl{_toFieldTransform(e){return new yl(e.path,new Qu)}isEqual(e){return e instanceof Cf}}class Km extends Jl{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=sg(this,e,!0),o=this.fc.map(h=>Sc(h,t)),u=new Ju(o);return new yl(e.path,u)}isEqual(e){return this===e}}class Zm extends Jl{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=sg(this,e,!0),o=this.fc.map(h=>Sc(h,t)),u=new va(o);return new yl(e.path,u)}isEqual(e){return this===e}}class Ym extends Jl{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Fs(e.M,Vc(e.M,this.dc));return new yl(e.path,t)}isEqual(e){return this===e}}function Df(i,e,t,o){const u=i.lc(1,e,t);Us("Data must be an object, but it was:",u,o);const h=[],v=F.empty();iu(o,(H,K)=>{const he=Af(e,H,t);K=(0,st.m9)(K);const xe=u.oc(he);if(K instanceof _d)h.push(he);else{const it=Sc(K,xe);null!=it&&(h.push(he),v.set(he,it))}});const A=new fa(h);return new Wm(v,A,u.fieldTransforms)}function Qm(i,e,t,o,u,h){const v=i.lc(1,e,t),A=[Tf(e,o,t)],H=[u];if(h.length%2!=0)throw new ne(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let it=0;it<h.length;it+=2)A.push(Tf(e,h[it])),H.push(h[it+1]);const K=[],he=F.empty();for(let it=A.length-1;it>=0;--it)if(!ey(K,A[it])){const It=A[it];let At=H[it];At=(0,st.m9)(At);const dn=v.oc(It);if(At instanceof _d)K.push(It);else{const Gn=Sc(At,dn);null!=Gn&&(K.push(It),he.set(It,Gn))}}const xe=new fa(K);return new Wm(he,xe,v.fieldTransforms)}function Jm(i,e,t,o=!1){return Sc(t,i.lc(o?4:3,e))}function Sc(i,e){if(Xm(i=(0,st.m9)(i)))return Us("Unsupported field value:",e,i),og(i,e);if(i instanceof Jl)return function(t,o){if(!ig(o.ec))throw o.ac(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ac(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,o){const u=[];let h=0;for(const v of t){let A=Sc(v,o.uc(h));null==A&&(A={nullValue:"NULL_VALUE"}),u.push(A),h++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,st.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vc(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Ar.fromDate(t);return{timestampValue:eu(o.M,u)}}if(t instanceof Ar){const u=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eu(o.M,u)}}if(t instanceof ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:Fl(o.M,t._byteString)};if(t instanceof Wi){const u=o.databaseId,h=t.firestore._databaseId;if(!h.isEqual(u))throw o.ac(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xa(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ac(`Unsupported field value: ${Ac(t)}`)}(i,e)}function og(i,e){const t={};return rc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(i,(o,u)=>{const h=Sc(u,e.sc(o));null!=h&&(t[o]=h)}),{mapValue:{fields:t}}}function Xm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ar||i instanceof ih||i instanceof ll||i instanceof Wi||i instanceof Jl)}function Us(i,e,t){if(!Xm(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Ac(t);throw e.ac("an object"===o?i+" a custom object":i+" "+o)}var o}function Tf(i,e,t){if((e=(0,st.m9)(e))instanceof Vu)return e._internalPath;if("string"==typeof e)return Af(i,e);throw ah("Field path arguments must be of type string or ",i,!1,void 0,t)}const A_=new RegExp("[~\\*/\\[\\]]");function Af(i,e,t){if(e.search(A_)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Vu(...e.split("."))._internalPath}catch(o){throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ah(i,e,t,o,u){const h=o&&!o.isEmpty(),v=void 0!==u;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let H="";return(h||v)&&(H+=" (found",h&&(H+=` in field ${o}`),v&&(H+=` in document ${u}`),H+=")"),new ne(W.INVALID_ARGUMENT,A+i+H)}function ey(i,e){return i.some(t=>t.isEqual(e))}class vd{constructor(e,t,o,u,h){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Wi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ty extends vd{data(){return super.data()}}function Dl(i,e){return"string"==typeof e?Af(i,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}class Mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tl extends vd{constructor(e,t,o,u,h,v){super(e,t,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Dl("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Ed extends Tl{data(e={}){return super.data(e)}}class Xl{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Mc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Ed(this._firestore,this._userDataWriter,o.key,o,new Mc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new Ed(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Mc(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:h++}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>u||3!==v.type).map(v=>{const A=new Ed(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Mc(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let H=-1,K=-1;return 0!==v.type&&(H=h.indexOf(v.doc.key),h=h.delete(v.doc.key)),1!==v.type&&(h=h.add(v.doc),K=h.indexOf(v.doc.key)),{type:ny(v.type),doc:A,oldIndex:H,newIndex:K}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ny(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return E()}}function S_(i,e){return i instanceof Tl&&e instanceof Tl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Xl&&e instanceof Xl&&i._firestore===e._firestore&&b_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Sf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ne(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xc{}function zo(i,...e){for(const t of e)i=t._apply(i);return i}class M_ extends xc{constructor(e,t,o){super(),this._c=e,this.wc=t,this.mc=o,this.type="where"}_apply(e){const t=Cl(e.firestore),o=function(u,h,v,A,H,K,he){let xe;if(H.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){ly(he,K);const It=[];for(const At of he)It.push(ug(A,u,At));xe={arrayValue:{values:It}}}else xe=ug(A,u,he)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||ly(he,K),xe=Jm(v,"where",he,"in"===K||"not-in"===K);const it=Gi.create(H,K,xe);return function(It,At){if(At.S()){const Gn=ac(It);if(null!==Gn&&!Gn.isEqual(At.field))throw new ne(W.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gn.toString()}' and '${At.field.toString()}'`);const Ki=Pl(It);null!==Ki&&lg(0,At.field,Ki)}const dn=function(Gn,Ki){for(const Ds of Gn.filters)if(Ki.indexOf(Ds.op)>=0)return Ds.op;return null}(It,function(Gn){switch(Gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(At.op));if(null!==dn)throw new ne(W.INVALID_ARGUMENT,dn===At.op?`Invalid query. You cannot use more than one '${At.op.toString()}' filter.`:`Invalid query. You cannot use '${At.op.toString()}' filters with '${dn.toString()}' filters.`)}(u,it),it}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ra(e.firestore,e.converter,function(u,h){const v=u.filters.concat([h]);return new du(u.path,u.collectionGroup,u.explicitOrderBy.slice(),v,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class cl extends xc{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(o,u,h){if(null!==o.startAt)throw new ne(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new ne(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new cu(u,h);return function(A,H){if(null===Pl(A)){const K=ac(A);null!==K&&lg(0,K,H.field)}}(o,v),v}(e._query,this._c,this.gc);return new ra(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new du(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class wu extends xc{constructor(e,t,o){super(),this.type=e,this.yc=t,this.Ic=o}_apply(e){return new ra(e.firestore,e.converter,Fc(e._query,this.yc,this.Ic))}}class oy extends xc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=uy(e,this.type,this.Tc,this.Ec);return new ra(e.firestore,e.converter,(u=t,new du((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class ay extends xc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=uy(e,this.type,this.Tc,this.Ec);return new ra(e.firestore,e.converter,(u=t,new du((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function uy(i,e,t,o){if(t[0]=(0,st.m9)(t[0]),t[0]instanceof vd)return function(u,h,v,A,H){if(!A)throw new ne(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const K=[];for(const he of Zu(u))if(he.field.isKeyField())K.push(Xo(h,A.key));else{const xe=A.data.field(he.field);if(zu(xe))throw new ne(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+he.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===xe){const it=he.field.canonicalString();throw new ne(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${it}' (used as the orderBy) does not exist.`)}K.push(xe)}return new Sa(K,H)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Cl(i.firestore);return function(h,v,A,H,K,he){const xe=h.explicitOrderBy;if(K.length>xe.length)throw new ne(W.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const it=[];for(let It=0;It<K.length;It++){const At=K[It];if(xe[It].field.isKeyField()){if("string"!=typeof At)throw new ne(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof At}`);if(!Ja(h)&&-1!==At.indexOf("/"))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${At}' contains a slash.`);const dn=h.path.child(Pn.fromString(At));if(!Ft.isDocumentKey(dn))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${dn}' is not because it contains an odd number of segments.`);const Gn=new Ft(dn);it.push(Xo(v,Gn))}else{const dn=Jm(A,H,At);it.push(dn)}}return new Sa(it,he)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ug(i,e,t){if("string"==typeof(t=(0,st.m9)(t))){if(""===t)throw new ne(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ja(e)&&-1!==t.indexOf("/"))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Pn.fromString(t));if(!Ft.isDocumentKey(o))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Xo(i,new Ft(o))}if(t instanceof Wi)return Xo(i,t._key);throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(t)}.`)}function ly(i,e){if(!Array.isArray(i)||0===i.length)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lg(i,e,t){if(!t.isEqual(e))throw new ne(W.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cy={maxAttempts:5};class wd{convertValue(e,t="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw E()}}convertObject(e,t){const o={};return iu(e.fields,(u,h)=>{o[u]=this.convertValue(h,t)}),o}convertGeoPoint(e){return new ih(Qr(e.latitude),Qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=bs(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(ps(e));default:return null}}convertTimestamp(e){const t=To(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Pn.fromString(e);M(Pe(o));const u=new Ei(o.get(1),o.get(3)),h=new Ft(o.popFirst(5));return u.isEqual(t)||jr(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}function Mf(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class dy extends wd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wi(this.firestore,null,t)}}class cg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cl(e)}set(e,t,o){this._verifyNotCommitted();const u=Al(e,this._firestore),h=Mf(u.converter,t,o),v=oh(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,gs.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const h=Al(e,this._firestore);let v;return v="string"==typeof(t=(0,st.m9)(t))||t instanceof Vu?Qm(this._dataReader,"WriteBatch.update",h._key,t,o,u):Df(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(v.toMutation(h._key,gs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Al(e,this._firestore);return this._mutations=this._mutations.concat(new Lt(t._key,gs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Al(i,e){if((i=(0,st.m9)(i)).firestore!==e)throw new ne(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ec extends wd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wi(this.firestore,null,t)}}function dg(i,e,t){i=Hr(i,Wi);const o=Hr(i.firestore,qi),u=Mf(i.converter,e,t);return bd(o,[oh(Cl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,gs.none())])}function hg(i,e,t,...o){i=Hr(i,Wi);const u=Hr(i.firestore,qi),h=Cl(u);let v;return v="string"==typeof(e=(0,st.m9)(e))||e instanceof Vu?Qm(h,"updateDoc",i._key,e,t,o):Df(h,"updateDoc",i._key,e),bd(u,[v.toMutation(i._key,gs.exists(!0))])}function yy(i,...e){var t,o,u;i=(0,st.m9)(i);let h={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Xp(e[v])||(h=e[v],v++);const A={includeMetadataChanges:h.includeMetadataChanges};if(Xp(e[v])){const xe=e[v];e[v]=null===(t=xe.next)||void 0===t?void 0:t.bind(xe),e[v+1]=null===(o=xe.error)||void 0===o?void 0:o.bind(xe),e[v+2]=null===(u=xe.complete)||void 0===u?void 0:u.bind(xe)}let H,K,he;if(i instanceof Wi)K=Hr(i.firestore,qi),he=hu(i._key.path),H={next:xe=>{e[v]&&e[v](fg(K,i,xe))},error:e[v+1],complete:e[v+2]};else{const xe=Hr(i,ra);K=Hr(xe.firestore,qi),he=xe._query;const it=new ec(K);H={next:It=>{e[v]&&e[v](new Xl(K,it,xe,It))},error:e[v+1],complete:e[v+2]},Sf(i._query)}return function(xe,it,It,At){const dn=new Jd(At),Gn=new Wd(it,dn,It);return xe.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return Tp(yield Xd(xe),Gn)})),()=>{dn.Aa(),xe.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return Ap(yield Xd(xe),Gn)}))}}(Zs(K),he,A,H)}function bd(i,e){return function(t,o){const u=new et;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function h_(i,e,t){return lf.apply(this,arguments)}(yield Gp(t),o,u)})),u.promise}(Zs(i),e)}function fg(i,e,t){const o=t.docs.get(e._key),u=new ec(i);return new Tl(i,u,e._key,o,new Mc(t.hasPendingWrites,t.fromCache),e.converter)}class k_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cl(e)}get(e){const t=Al(e,this._firestore),o=new dy(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return E();const h=u[0];if(h.isFoundDocument())return new vd(this._firestore,o,h.key,h,t.converter);if(h.isNoDocument())return new vd(this._firestore,o,t._key,null,t.converter);throw E()})}set(e,t,o){const u=Al(e,this._firestore),h=Mf(u.converter,t,o),v=oh(this._dataReader,"Transaction.set",u._key,h,null!==u.converter,o);return this._transaction.set(u._key,v),this}update(e,t,o,...u){const h=Al(e,this._firestore);let v;return v="string"==typeof(t=(0,st.m9)(t))||t instanceof Vu?Qm(this._dataReader,"Transaction.update",h._key,t,o,u):Df(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,v),this}delete(e){const t=Al(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Al(e,this._firestore),o=new ec(this._firestore);return super.get(e).then(u=>new Tl(this._firestore,o,t._key,u._document,new Mc(!1,!1),t.converter))}}function Rf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ne("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function pg(){if("undefined"==typeof Uint8Array)throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function gg(){if(!function Mu(){return"undefined"!=typeof atob}())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Fo=le.SDK_VERSION,(0,le._registerComponent)(new $e.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),h=new qi(u,new gr(t.getProvider("auth-internal")),new Vo(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC")),(0,le.registerVersion)(Au,"3.4.9",i),(0,le.registerVersion)(Au,"3.4.9","esm2017")}();class Id{constructor(e){this._delegate=e}static fromBase64String(e){return gg(),new Id(ll.fromBase64String(e))}static fromUint8Array(e){return pg(),new Id(ll.fromUint8Array(e))}toBase64(){return gg(),this._delegate.toBase64()}toUint8Array(){return pg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Of(i){return function vy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Ey{enableIndexedDbPersistence(e,t){return function wf(i,e){ng(i=Hr(i,qi));const t=Zs(i),o=i._freezeSettings(),u=new pf;return I_(t,u,new Bp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eg(i){ng(i=Hr(i,qi));const e=Zs(i),t=i._freezeSettings(),o=new pf;return I_(e,o,new Am(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C_(i){if(i._initialized&&!i._terminated)throw new ne(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new et;return i._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(t=(0,oe.Z)(function*(o){if(!yu.vt())return Promise.resolve();const u=o+"main";yield yu.delete(u)}),function(o){return t.apply(this,arguments)})(Vd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ei||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&T("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function w_(i,e,t,o={}){var u;const h=(i=Hr(i,eh))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==e&&T("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,A;if("string"==typeof o.mockUserToken)v=o.mockUserToken,A=Li.MOCK_USER;else{v=(0,st.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const H=o.mockUserToken.sub||o.mockUserToken.user_id;if(!H)throw new ne(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Li(H)}i._authCredentials=new ln(new qt(v,A))}}(this._delegate,e,t,o)}enableNetwork(){return function If(i){return function Wp(i){return i.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield Pm(i),t=yield km(i);return e.setNetworkEnabled(!0),function(o){const u=G(o);return u.wu.delete(0),Bd(u)}(t)}))}(Zs(i=Hr(i,qi)))}(this._delegate)}disableNetwork(){return function $m(i){return function qp(i){return i.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield Pm(i),t=yield km(i);return e.setNetworkEnabled(!1),(o=(0,oe.Z)(function*(u){const h=G(u);h.wu.add(0),yield jd(h),h.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Zs(i=Hr(i,qi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Zp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bf(i){return function(e){const t=new et;return e.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function Qv(i,e){return df.apply(this,arguments)}(yield Gp(e),t)})),t.promise}(Zs(i=Hr(i,qi)))}(this._delegate)}onSnapshotsInSync(e){return function P_(i,e){return function v_(i,e){const t=new Jd(e);return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return o=yield Xd(i),u=t,G(o).bu.add(u),void u.next();var o,u})),()=>{t.Aa(),i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return o=yield Xd(i),u=t,void G(o).bu.delete(u);var o,u}))}}(Zs(i=Hr(i,qi)),Xp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dd(this,Um(this._delegate,e))}catch(t){throw Ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new bu(this,th(this._delegate,e))}catch(t){throw Ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ia(this,function Bm(i,e){if(i=Hr(i,eh),Kp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ra(i,null,(t=e,new du(Pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e,t){i=Hr(i,qi);const o=Object.assign(Object.assign({},cy),t);return function(u){if(u.maxAttempts<1)throw new ne(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Fm(i,e,t){const o=new et;return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const u=yield(h=i,yf(h).then(v=>v.datastore));var h;new xm(i.asyncQueue,u,t,e,o).run()})),o.promise}(Zs(i),u=>e(new k_(i,u)),o)}(this._delegate,t=>e(new Nf(this,t)))}batch(){return Zs(this._delegate),new tc(new cg(this._delegate,e=>bd(this._delegate,e)))}loadBundle(e){return function tg(i,e){const t=Zs(i=Hr(i,qi)),o=new e0;return function Xv(i,e,t,o){const u=function(h,v){let A;return A="string"==typeof h?(new TextEncoder).encode(h):h,H=function(H,K){if(H instanceof Uint8Array)return jp(H,K);if(H instanceof ArrayBuffer)return jp(new Uint8Array(H),K);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),new Sm(H,v);var H}(t,cd(e));i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function yd(i,e,t){const o=G(i);var u;(u=(0,oe.Z)(function*(h,v,A){try{const H=yield v.getMetadata();if(yield function(it,It){const At=G(it),dn=li(It.createTime);return At.persistence.runTransaction("hasNewerBundle","readonly",Gn=>At._s.getBundleMetadata(Gn,It.id)).then(Gn=>!!Gn&&Gn.createTime.compareTo(dn)>=0)}(h.localStore,H))return yield v.close(),A._completeWith({taskState:"Success",documentsLoaded:(it=H).totalDocuments,bytesLoaded:it.totalBytes,totalDocuments:it.totalDocuments,totalBytes:it.totalBytes}),Promise.resolve(new Set);A._updateProgress(xp(H));const K=new gm(H,h.localStore,v.M);let he=yield v.ma();for(;he;){const it=yield K.Fu(he);it&&A._updateProgress(it),he=yield v.ma()}const xe=yield K.complete();return yield bl(h,xe.Lu,void 0),yield function(it,It){const At=G(it);return At.persistence.runTransaction("Save bundle","readwrite",dn=>At._s.saveBundleMetadata(dn,It))}(h.localStore,H),A._completeWith(xe.progress),Promise.resolve(xe.Bu)}catch(H){return T("SyncEngine",`Loading bundle failed with ${H}`),A._failWith(H),Promise.resolve(new Set)}var it}),function(h,v,A){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Gp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Gm(i,e){return function E_(i,e){return i.asyncQueue.enqueue((0,oe.Z)(function*(){return function(t,o){const u=G(t);return u.persistence.runTransaction("Get named query","readonly",h=>u._s.getNamedQuery(h,o))}(yield vf(i),e)}))}(Zs(i=Hr(i,qi)),e).then(t=>t?new ra(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ia(this,t):null)}}class lh extends wd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bu.forKey(t,this.firestore,null)}}class Nf{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lh(e)}get(e){const t=Oc(e);return this._delegate.get(t).then(o=>new kf(this._firestore,new Tl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Oc(e);return o?(Rf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const h=Oc(e);return 2===arguments.length?this._delegate.update(h,t):this._delegate.update(h,t,o,...u),this}delete(e){const t=Oc(e);return this._delegate.delete(t),this}}class tc{constructor(e){this._delegate=e}set(e,t,o){const u=Oc(e);return o?(Rf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const h=Oc(e);return 2===arguments.length?this._delegate.update(h,t):this._delegate.update(h,t,o,...u),this}delete(e){const t=Oc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Ed(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cd(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Rc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let h=u.get(t);return h||(h=new Rc(e,new lh(e),t),u.set(t,h)),h}}Rc.INSTANCES=new WeakMap;class bu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lh(e)}static forPath(e,t,o){if(e.length%2!=0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bu(t,new Wi(t._delegate,o,new Ft(e)))}static forKey(e,t,o){return new bu(t,new Wi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Dd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dd(this.firestore,Um(this._delegate,e))}catch(t){throw Ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,st.m9)(e))instanceof Wi&&Ef(this._delegate,e)}set(e,t){t=Rf("DocumentReference.set",t);try{return t?dg(this._delegate,e,t):dg(this._delegate,e)}catch(o){throw Ys(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?hg(this._delegate,e):hg(this._delegate,e,t,...o)}catch(u){throw Ys(u,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return bd(Hr(i.firestore,qi),[new Lt(i._key,gs.none())])}(this._delegate)}onSnapshot(...e){const t=G_(e),o=Pf(e,u=>new kf(this.firestore,new Tl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return yy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function hy(i){i=Hr(i,Wi);const e=Hr(i.firestore,qi),t=Zs(e),o=new ec(e);return function m_(i,e){const t=new et;return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(o=(0,oe.Z)(function*(u,h,v){try{const A=yield function(H,K){const he=G(H);return he.persistence.runTransaction("read document","readonly",xe=>he.fi.Ls(xe,K))}(u,h);A.isFoundDocument()?v.resolve(A):A.isNoDocument()?v.resolve(null):v.reject(new ne(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(A){const H=hd(A,`Failed to get document '${h} from cache`);v.reject(H)}}),function(u,h,v){return o.apply(this,arguments)})(yield vf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Tl(e,o,i._key,u,new Mc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function fy(i){i=Hr(i,Wi);const e=Hr(i.firestore,qi);return y_(Zs(e),i._key,{source:"server"}).then(t=>fg(e,i,t))}(this._delegate):function xf(i){i=Hr(i,Wi);const e=Hr(i.firestore,qi);return y_(Zs(e),i._key).then(t=>fg(e,i,t))}(this._delegate),t.then(o=>new kf(this.firestore,new Tl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new bu(this.firestore,this._delegate.withConverter(e?Rc.getInstance(this.firestore,e):null))}}function Ys(i,e,t){return i.message=i.message.replace(e,t),i}function G_(i){for(const e of i)if("object"==typeof e&&!Of(e))return e;return{}}function Pf(i,e){var t,o;let u;return u=Of(i[0])?i[0]:Of(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class kf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return S_(this._delegate,e._delegate)}}class Cd extends kf{data(e){const t=this._delegate.data(e);return function V(i,e){i||E()}(void 0!==t),t}}class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lh(e)}where(e,t,o){try{return new ia(this.firestore,zo(this._delegate,function ry(i,e,t){const o=e,u=Dl("where",i);return new M_(u,o,t)}(e,t,o)))}catch(u){throw Ys(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ia(this.firestore,zo(this._delegate,function Uu(i,e="asc"){const t=e,o=Dl("orderBy",i);return new cl(o,t)}(e,t)))}catch(o){throw Ys(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ia(this.firestore,zo(this._delegate,function iy(i){return Qp("limit",i),new wu("limit",i,"F")}(e)))}catch(t){throw Ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ia(this.firestore,zo(this._delegate,function sy(i){return Qp("limitToLast",i),new wu("limitToLast",i,"L")}(e)))}catch(t){throw Ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ia(this.firestore,zo(this._delegate,function x_(...i){return new oy("startAt",i,!0)}(...e)))}catch(t){throw Ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ia(this.firestore,zo(this._delegate,function R_(...i){return new oy("startAfter",i,!1)}(...e)))}catch(t){throw Ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ia(this.firestore,zo(this._delegate,function ag(...i){return new ay("endBefore",i,!1)}(...e)))}catch(t){throw Ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ia(this.firestore,zo(this._delegate,function uh(...i){return new ay("endAt",i,!0)}(...e)))}catch(t){throw Ys(t,"endAt()","Query.endAt()")}}isEqual(e){return b_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gy(i){i=Hr(i,ra);const e=Hr(i.firestore,qi),t=Zs(e),o=new ec(e);return function Jv(i,e){const t=new et;return i.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(o=(0,oe.Z)(function*(u,h,v){try{const A=yield wl(u,h,!0),H=new _m(h,A._i),K=H.Wu(A.documents),he=H.applyChanges(K,!1);v.resolve(he.snapshot)}catch(A){const H=hd(A,`Failed to execute query '${h} against cache`);v.reject(H)}}),function(u,h,v){return o.apply(this,arguments)})(yield vf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Xl(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function my(i){i=Hr(i,ra);const e=Hr(i.firestore,qi),t=Zs(e),o=new ec(e);return __(t,i._query,{source:"server"}).then(u=>new Xl(e,o,i,u))}(this._delegate):function py(i){i=Hr(i,ra);const e=Hr(i.firestore,qi),t=Zs(e),o=new ec(e);return Sf(i._query),__(t,i._query).then(u=>new Xl(e,o,i,u))}(this._delegate),t.then(o=>new kn(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=G_(e),o=Pf(e,u=>new kn(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return yy(this._delegate,t,o)}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?Rc.getInstance(this.firestore,e):null))}}class r0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kn{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ia(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new r0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Cd(this._firestore,o))})}isEqual(e){return S_(this._delegate,e._delegate)}}class Dd extends ia{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bu(this.firestore,e):null}doc(e){try{return new bu(this.firestore,void 0===e?th(this._delegate):th(this._delegate,e))}catch(t){throw Ys(t,"doc()","CollectionReference.doc()")}}add(e){return function N_(i,e){const t=Hr(i.firestore,qi),o=th(i),u=Mf(i.converter,e);return bd(t,[oh(Cl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,gs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new bu(this.firestore,t))}isEqual(e){return Ef(this._delegate,e._delegate)}withConverter(e){return new Dd(this.firestore,this._delegate.withConverter(e?Rc.getInstance(this.firestore,e):null))}}function Oc(i){return Hr(i,Wi)}class yg{constructor(...e){this._delegate=new Vu(...e)}static documentId(){return new yg(us.keyField().canonicalString())}isEqual(e){return(e=(0,st.m9)(e))instanceof Vu&&this._delegate._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new Cf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dl(e)}static delete(){const e=function L_(){return new _d("deleteField")}();return e._methodName="FieldValue.delete",new dl(e)}static arrayUnion(...e){const t=function U_(...i){return new Km("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new dl(t)}static arrayRemove(...e){const t=function B_(...i){return new Zm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new dl(t)}static increment(e){const t=function j_(i){return new Ym("increment",i)}(e);return t._methodName="FieldValue.increment",new dl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const z_={Firestore:mg,GeoPoint:ih,Timestamp:Ar,Blob:Id,Transaction:Nf,WriteBatch:tc,DocumentReference:bu,DocumentSnapshot:kf,Query:ia,QueryDocumentSnapshot:Cd,QuerySnapshot:kn,CollectionReference:Dd,FieldPath:yg,FieldValue:dl,setLogLevel:function wy(i){!function Do(i){Lo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Lf(i){(function Ff(i,e){i.INTERNAL.registerComponent(new $e.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},z_)))})(i,(e,t)=>new mg(e,t,new Ey)),i.registerVersion("@firebase/firestore-compat","0.1.18")}(Rt.Z);var wi=U(1205),s0=U(440),by=U(127);function Iy(i,e){return function W_(i,e=z.z){return new ee.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Vf(i,e){return Iy(i,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function ch(i,e){return Vf(i,e).pipe((0,at.O)(void 0),je(),(0,Je.U)(([t,o])=>{const u=o.payload.docChanges(),h=u.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,A)=>{const H=u.find(he=>he.doc.ref.isEqual(v.ref)),K=null==t?void 0:t.payload.docs.find(he=>he.ref.isEqual(v.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(v.metadata)||!H&&K&&JSON.stringify(K.metadata)===JSON.stringify(v.metadata)||h.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:v}})}),h}))}function _g(i,e,t){return ch(i,t).pipe((0,ut.R)((o,u)=>function q_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function K_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return vg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(h=>h.payload),e),[]),function fe(i,e=pe.y){return i=null!=i?i:De,(0,He.e)((t,o)=>{let u,h=!0;t.subscribe((0,Fe.x)(o,v=>{const A=e(v);(h||!i(u,A))&&(h=!1,u=A,o.next(v))}))})}(),(0,Je.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function vg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Td(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Dy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=ch(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,at.O)(void 0),je(),(0,wt.h)(([o,u])=>u.length>0||!o),(0,Je.U)(([o,u])=>u),Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ut.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Td(e);return _g(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return Vf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ne.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(Ne.iC)}add(e){return this.ref.add(e)}doc(e){return new Ty(this.ref.doc(e),this.afs)}}class Ty{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:h}=My(o,t);return new Dy(u,h,this.afs)}snapshotChanges(){return function Cy(i,e){return Iy(i,e).pipe((0,at.O)(void 0),je(),(0,Je.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ce.D)(this.ref.get(e)).pipe(Ne.iC)}}class Z_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ch(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,wt.h)(t=>t.length>0),Ne.iC):ch(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ut.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Td(e);return _g(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return Vf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ne.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(Ne.iC)}}const dh=new g.OlP("angularfire2.enableFirestorePersistence"),Eg=new g.OlP("angularfire2.firestore.persistenceSettings"),Ay=new g.OlP("angularfire2.firestore.settings"),Sy=new g.OlP("angularfire2.firestore.use-emulator");function My(i,e=(t=>t)){return{query:e(i),ref:i}}let Ad=(()=>{class i{constructor(t,o,u,h,v,A,H,K,he,xe,it,It,At,dn,Gn,Ki,Ds){this.schedulers=H;const ei=(0,Ye.on)(t,A,o),Qs=he;xe&&(0,wi.nw)(ei,A,it,At,dn,Gn,It,Ki),[this.firestore,this.persistenceEnabled$]=(0,Ye.cc)(`${ei.name}.firestore`,"AngularFirestore",ei.name,()=>{const Zi=A.runOutsideAngular(()=>ei.firestore());if(h&&Zi.settings(h),Qs&&Zi.useEmulator(...Qs),u&&!(0,lt.PM)(v)){const _s=()=>{try{return(0,Ce.D)(Zi.enablePersistence(K||void 0).then(()=>!0,()=>!1))}catch(sa){return"undefined"!=typeof console&&console.warn(sa),(0,Me.of)(!1)}};return[Zi,A.runOutsideAngular(_s)]}return[Zi,(0,Me.of)(!1)]},[h,Qs,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:h,query:v}=My(u,o),A=this.schedulers.ngZone.run(()=>h);return new Dy(A,v,this)}collectionGroup(t,o){const u=o||(v=>v),h=this.firestore.collectionGroup(t);return new Z_(u(h),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Ty(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ye.Dh),g.LFG(Ye.xv,8),g.LFG(dh,8),g.LFG(Ay,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ne.HU),g.LFG(Eg,8),g.LFG(Sy,8),g.LFG(wi.zQ,8),g.LFG(wi.Qv,8),g.LFG(wi.L6,8),g.LFG(wi._Q,8),g.LFG(wi.rT,8),g.LFG(wi.lh,8),g.LFG(wi.f7,8),g.LFG(s0.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),hh=(()=>{class i{constructor(){by.Z.registerVersion("angularfire",Ne.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:dh,useValue:!0},{provide:Eg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[Ad]}),i})()},2011:(kt,We,U)=>{U.d(We,{Dh:()=>Fe,GT:()=>Ne,cc:()=>Je,hO:()=>at,on:()=>pe,pX:()=>Me,xv:()=>je});var g=U(5e3),z=U(127),ee=U(5813);kt=U.hmd(kt);const Ce=["ngOnDestroy"],Me=(lt,xt,Rt,oe={})=>new Proxy(lt,{get:(le,$e)=>Rt.runOutsideAngular(()=>{var ct;if(lt[$e])return(null===(ct=null==oe?void 0:oe.spy)||void 0===ct?void 0:ct.get)&&oe.spy.get($e,lt[$e]),lt[$e];if(Ce.indexOf($e)>-1)return()=>{};const st=xt.toPromise().then(me=>{const ke=me&&me[$e];return"function"==typeof ke?ke.bind(me):ke&&ke.then?ke.then(re=>Rt.run(()=>re)):Rt.run(()=>ke)});return new Proxy(()=>{},{get:(me,ke)=>st[ke],apply:(me,ke,re)=>st.then(ce=>{var de;const Be=ce&&ce(...re);return(null===(de=null==oe?void 0:oe.spy)||void 0===de?void 0:de.apply)&&oe.spy.apply($e,re,Be),Be})})})}),Ne=(lt,xt)=>{xt.forEach(Rt=>{Object.getOwnPropertyNames(Rt.prototype||Rt).forEach(oe=>{Object.defineProperty(lt.prototype,oe,Object.getOwnPropertyDescriptor(Rt.prototype||Rt,oe))})})};class He{constructor(xt){return xt}}const Fe=new g.OlP("angularfire2.app.options"),je=new g.OlP("angularfire2.app.name");function pe(lt,xt,Rt){const le="object"==typeof Rt&&Rt||{};le.name=le.name||"string"==typeof Rt&&Rt||"[DEFAULT]";const ct=z.Z.apps.filter(st=>st&&st.name===le.name)[0]||xt.runOutsideAngular(()=>z.Z.initializeApp(lt,le));try{JSON.stringify(lt)!==JSON.stringify(ct.options)&&fe("error",`${ct.name} Firebase App already initialized with different options${kt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(st){}return new He(ct)}const fe=(lt,...xt)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[lt](...xt)},De={provide:He,useFactory:pe,deps:[Fe,g.R0b,[new g.FiY,je]]};let at=(()=>{class lt{constructor(Rt){z.Z.registerVersion("angularfire",ee.q4.full,"core"),z.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),z.Z.registerVersion("angular",g.q4F.full,Rt.toString())}static initializeApp(Rt,oe){return{ngModule:lt,providers:[{provide:Fe,useValue:Rt},{provide:je,useValue:oe}]}}}return lt.\u0275fac=function(Rt){return new(Rt||lt)(g.LFG(g.Lbi))},lt.\u0275mod=g.oAB({type:lt}),lt.\u0275inj=g.cJS({providers:[De]}),lt})();function Je(lt,xt,Rt,oe,le){const[,$e,ct]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===lt)||[];if($e)return function ut(lt,xt){try{return lt.toString()===xt.toString()}catch(Rt){return lt===xt}}(le,ct)||(Ye("error",`${xt} was already initialized on the ${Rt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:le,was:ct})),$e;{const st=oe();return globalThis.\u0275AngularfireInstanceCache.push([lt,st,le]),st}}const wt=!!kt.hot,Ye=(lt,...xt)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[lt](...xt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(kt,We,U)=>{U.d(We,{q4:()=>lo,iC:()=>Ml,fc:()=>Uo,HU:()=>ou,vb:()=>ic,JM:()=>ho});var g=U(5e3),z=U(5867),ee=U(5861),Ce=U(9681),Me=U(2090),Ne=U(4859),He=U(1877),Fe=U(8766);const je="@firebase/installations",De="w:0.5.9",at="FIS_v2",xt=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Rt(x){return x instanceof Me.ZR&&x.code.includes("request-failed")}function oe({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function le(x){return{token:x.token,requestStatus:2,expiresIn:ce(x.expiresIn),creationTime:Date.now()}}function $e(x,F){return ct.apply(this,arguments)}function ct(){return(ct=(0,ee.Z)(function*(x,F){const ae=(yield F.json()).error;return xt.create("request-failed",{requestName:x,serverCode:ae.code,serverMessage:ae.message,serverStatus:ae.status})})).apply(this,arguments)}function st({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function me(x,{refreshToken:F}){const Y=st(x);return Y.append("Authorization",function de(x){return`${at} ${x}`}(F)),Y}function ke(x){return re.apply(this,arguments)}function re(){return(re=(0,ee.Z)(function*(x){const F=yield x();return F.status>=500&&F.status<600?x():F})).apply(this,arguments)}function ce(x){return Number(x.replace("s","000"))}function Be(x,F){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,ee.Z)(function*({appConfig:x,heartbeatServiceProvider:F},{fid:Y}){const ae=oe(x),Ue=st(x),Xe=F.getImmediate({optional:!0});if(Xe){const xn=yield Xe.getHeartbeatsHeader();xn&&Ue.append("x-firebase-client",xn)}const un={method:"POST",headers:Ue,body:JSON.stringify({fid:Y,authVersion:at,appId:x.appId,sdkVersion:De})},hn=yield ke(()=>fetch(ae,un));if(hn.ok){const xn=yield hn.json();return{fid:xn.fid||Y,registrationStatus:2,refreshToken:xn.refreshToken,authToken:le(xn.authToken)}}throw yield $e("Create Installation",hn)})).apply(this,arguments)}function _t(x){return new Promise(F=>{setTimeout(F,x)})}const Kt=/^[cdef][\w-]{21}$/;function ft(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const Y=function pn(x){return function Mt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return Kt.test(Y)?Y:""}catch(x){return""}}function on(x){return`${x.appName}!${x.appId}`}const tt=new Map;function Qe(x,F){const Y=on(x);vt(Y,F),function an(x,F){const Y=function Kn(){return!Nn&&"BroadcastChannel"in self&&(Nn=new BroadcastChannel("[Firebase] FID Change"),Nn.onmessage=x=>{vt(x.data.key,x.data.fid)}),Nn}();Y&&Y.postMessage({key:x,fid:F}),function Wn(){0===tt.size&&Nn&&(Nn.close(),Nn=null)}()}(Y,F)}function vt(x,F){const Y=tt.get(x);if(Y)for(const ae of Y)ae(F)}let Nn=null;const lr="firebase-installations-store";let Hn=null;function Wt(){return Hn||(Hn=(0,Fe.X3)("firebase-installations-database",1,{upgrade:(x,F)=>{0===F&&x.createObjectStore(lr)}})),Hn}function fn(x,F){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ee.Z)(function*(x,F){const Y=on(x),Ue=(yield Wt()).transaction(lr,"readwrite"),Xe=Ue.objectStore(lr),Dt=yield Xe.get(Y);return yield Xe.put(F,Y),yield Ue.done,(!Dt||Dt.fid!==F.fid)&&Qe(x,F.fid),F})).apply(this,arguments)}function mn(x){return ci.apply(this,arguments)}function ci(){return(ci=(0,ee.Z)(function*(x){const F=on(x),ae=(yield Wt()).transaction(lr,"readwrite");yield ae.objectStore(lr).delete(F),yield ae.done})).apply(this,arguments)}function fr(x,F){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,ee.Z)(function*(x,F){const Y=on(x),Ue=(yield Wt()).transaction(lr,"readwrite"),Xe=Ue.objectStore(lr),Dt=yield Xe.get(Y),un=F(Dt);return void 0===un?yield Xe.delete(Y):yield Xe.put(un,Y),yield Ue.done,un&&(!Dt||Dt.fid!==un.fid)&&Qe(x,un.fid),un})).apply(this,arguments)}function br(x){return ti.apply(this,arguments)}function ti(){return(ti=(0,ee.Z)(function*(x){let F;const Y=yield fr(x.appConfig,ae=>{const Ue=Gr(ae),Xe=Vt(x,Ue);return F=Xe.registrationPromise,Xe.installationEntry});return""===Y.fid?{installationEntry:yield F}:{installationEntry:Y,registrationPromise:F}})).apply(this,arguments)}function Gr(x){return Yi(x||{fid:ft(),registrationStatus:0})}function Vt(x,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(xt.create("app-offline"))};const Y={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},ae=function Yt(x,F){return en.apply(this,arguments)}(x,Y);return{installationEntry:Y,registrationPromise:ae}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:rr(x)}:{installationEntry:F}}function en(){return(en=(0,ee.Z)(function*(x,F){try{const Y=yield Be(x,F);return fn(x.appConfig,Y)}catch(Y){throw Rt(Y)&&409===Y.customData.serverCode?yield mn(x.appConfig):yield fn(x.appConfig,{fid:F.fid,registrationStatus:0}),Y}})).apply(this,arguments)}function rr(x){return zr.apply(this,arguments)}function zr(){return(zr=(0,ee.Z)(function*(x){let F=yield Un(x.appConfig);for(;1===F.registrationStatus;)yield _t(100),F=yield Un(x.appConfig);if(0===F.registrationStatus){const{installationEntry:Y,registrationPromise:ae}=yield br(x);return ae||Y}return F})).apply(this,arguments)}function Un(x){return fr(x,F=>{if(!F)throw xt.create("installation-not-found");return Yi(F)})}function Yi(x){return function Fr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function cr(x,F){return ge.apply(this,arguments)}function ge(){return(ge=(0,ee.Z)(function*({appConfig:x,heartbeatServiceProvider:F},Y){const ae=we(x,Y),Ue=me(x,Y),Xe=F.getImmediate({optional:!0});if(Xe){const xn=yield Xe.getHeartbeatsHeader();xn&&Ue.append("x-firebase-client",xn)}const un={method:"POST",headers:Ue,body:JSON.stringify({installation:{sdkVersion:De,appId:x.appId}})},hn=yield ke(()=>fetch(ae,un));if(hn.ok)return le(yield hn.json());throw yield $e("Generate Auth Token",hn)})).apply(this,arguments)}function we(x,{fid:F}){return`${oe(x)}/${F}/authTokens:generate`}function Ae(x){return pt.apply(this,arguments)}function pt(){return(pt=(0,ee.Z)(function*(x,F=!1){let Y;const ae=yield fr(x.appConfig,Xe=>{if(!nn(Xe))throw xt.create("not-registered");const Dt=Xe.authToken;if(!F&&ir(Dt))return Xe;if(1===Dt.requestStatus)return Y=ye(x,F),Xe;{if(!navigator.onLine)throw xt.create("app-offline");const un=tr(Xe);return Y=Ut(x,un),un}});return Y?yield Y:ae.authToken})).apply(this,arguments)}function ye(x,F){return Le.apply(this,arguments)}function Le(){return(Le=(0,ee.Z)(function*(x,F){let Y=yield yt(x.appConfig);for(;1===Y.authToken.requestStatus;)yield _t(100),Y=yield yt(x.appConfig);const ae=Y.authToken;return 0===ae.requestStatus?Ae(x,F):ae})).apply(this,arguments)}function yt(x){return fr(x,F=>{if(!nn(F))throw xt.create("not-registered");return function Lr(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Ut(x,F){return jt.apply(this,arguments)}function jt(){return(jt=(0,ee.Z)(function*(x,F){try{const Y=yield cr(x,F),ae=Object.assign(Object.assign({},F),{authToken:Y});return yield fn(x.appConfig,ae),Y}catch(Y){if(!Rt(Y)||401!==Y.customData.serverCode&&404!==Y.customData.serverCode){const ae=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield fn(x.appConfig,ae)}else yield mn(x.appConfig);throw Y}})).apply(this,arguments)}function nn(x){return void 0!==x&&2===x.registrationStatus}function ir(x){return 2===x.requestStatus&&!function rn(x){const F=Date.now();return F<x.creationTime||x.creationTime+x.expiresIn<F+36e5}(x)}function tr(x){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:F})}function ze(){return(ze=(0,ee.Z)(function*(x){const F=x,{installationEntry:Y,registrationPromise:ae}=yield br(F);return ae?ae.catch(console.error):Ae(F).catch(console.error),Y.fid})).apply(this,arguments)}function ie(){return(ie=(0,ee.Z)(function*(x,F=!1){const Y=x;return yield Re(Y),(yield Ae(Y,F)).token})).apply(this,arguments)}function Re(x){return gt.apply(this,arguments)}function gt(){return(gt=(0,ee.Z)(function*(x){const{registrationPromise:F}=yield br(x);F&&(yield F)})).apply(this,arguments)}function mi(x){return xt.create("missing-app-config-values",{valueName:x})}const ri="installations",Bt=x=>{const F=x.getProvider("app").getImmediate(),Y=function Ir(x){if(!x||!x.options)throw mi("App Configuration");if(!x.name)throw mi("App Name");const F=["projectId","apiKey","appId"];for(const Y of F)if(!x.options[Y])throw mi(Y);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(F);return{app:F,appConfig:Y,heartbeatServiceProvider:(0,Ce._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},yn=x=>{const F=x.getProvider("app").getImmediate(),Y=(0,Ce._getProvider)(F,ri).getImmediate();return{getId:()=>function gi(x){return ze.apply(this,arguments)}(Y),getToken:Ue=>function be(x){return ie.apply(this,arguments)}(Y,Ue)}};(function xr(){(0,Ce._registerComponent)(new Ne.wA(ri,Bt,"PUBLIC")),(0,Ce._registerComponent)(new Ne.wA("installations-internal",yn,"PRIVATE"))})(),(0,Ce.registerVersion)(je,"0.5.9"),(0,Ce.registerVersion)(je,"0.5.9","esm2017");const mr="@firebase/remote-config",Rr=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xs{constructor(F,Y,ae,Ue){this.client=F,this.storage=Y,this.storageCache=ae,this.logger=Ue}isCachedDataFresh(F,Y){if(!Y)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-Y,Ue=ae<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Ue}.`),Ue}fetch(F){var Y=this;return(0,ee.Z)(function*(){const[ae,Ue]=yield Promise.all([Y.storage.getLastSuccessfulFetchTimestampMillis(),Y.storage.getLastSuccessfulFetchResponse()]);if(Ue&&Y.isCachedDataFresh(F.cacheMaxAgeMillis,ae))return Ue;F.eTag=Ue&&Ue.eTag;const Xe=yield Y.client.fetch(F),Dt=[Y.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&Dt.push(Y.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(Dt),Xe})()}}function oa(x=navigator){return x.languages&&x.languages[0]||x.language}class Zn{constructor(F,Y,ae,Ue,Xe,Dt){this.firebaseInstallations=F,this.sdkVersion=Y,this.namespace=ae,this.projectId=Ue,this.apiKey=Xe,this.appId=Dt}fetch(F){var Y=this;return(0,ee.Z)(function*(){const[ae,Ue]=yield Promise.all([Y.firebaseInstallations.getId(),Y.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Y.projectId}/namespaces/${Y.namespace}:fetch?key=${Y.apiKey}`,un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},hn={sdk_version:Y.sdkVersion,app_instance_id:ae,app_instance_id_token:Ue,app_id:Y.appId,language_code:oa()},xn={method:"POST",headers:un,body:JSON.stringify(hn)},Jn=fetch(Dt,xn),Dn=new Promise((Ks,Cs)=>{F.signal.addEventListener(()=>{const Ya=new Error("The operation was aborted.");Ya.name="AbortError",Cs(Ya)})});let $i;try{yield Promise.race([Jn,Dn]),$i=yield Jn}catch(Ks){let Cs="fetch-client-network";throw"AbortError"===Ks.name&&(Cs="fetch-timeout"),Rr.create(Cs,{originalErrorMessage:Ks.message})}let Xn=$i.status;const ma=$i.headers.get("ETag")||void 0;let Ci,dr;if(200===$i.status){let Ks;try{Ks=yield $i.json()}catch(Cs){throw Rr.create("fetch-client-parse",{originalErrorMessage:Cs.message})}Ci=Ks.entries,dr=Ks.state}if("INSTANCE_STATE_UNSPECIFIED"===dr?Xn=500:"NO_CHANGE"===dr?Xn=304:("NO_TEMPLATE"===dr||"EMPTY_CONFIG"===dr)&&(Ci={}),304!==Xn&&200!==Xn)throw Rr.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:ma,config:Ci}})()}}class Oe{constructor(F,Y){this.client=F,this.storage=Y}fetch(F){var Y=this;return(0,ee.Z)(function*(){const ae=(yield Y.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Y.attemptFetch(F,ae)})()}attemptFetch(F,{throttleEndTimeMillis:Y,backoffCount:ae}){var Ue=this;return(0,ee.Z)(function*(){yield function Ni(x,F){return new Promise((Y,ae)=>{const Ue=Math.max(F-Date.now(),0),Xe=setTimeout(Y,Ue);x.addEventListener(()=>{clearTimeout(Xe),ae(Rr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,Y);try{const Xe=yield Ue.client.fetch(F);return yield Ue.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function js(x){if(!(x instanceof Me.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Xe))throw Xe;const Dt={throttleEndTimeMillis:Date.now()+(0,Me.$s)(ae),backoffCount:ae+1};return yield Ue.storage.setThrottleMetadata(Dt),Ue.attemptFetch(F,Dt)}})()}}class ht{constructor(F,Y,ae,Ue,Xe){this.app=F,this._client=Y,this._storageCache=ae,this._storage=Ue,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ot(x,F){const Y=x.target.error||void 0;return Rr.create(F,{originalErrorMessage:Y&&Y.message})}const zt="app_namespace_store";class es{constructor(F,Y,ae,Ue=function $n(){return new Promise((x,F)=>{try{const Y=indexedDB.open("firebase_remote_config",1);Y.onerror=ae=>{F(Ot(ae,"storage-open"))},Y.onsuccess=ae=>{x(ae.target.result)},Y.onupgradeneeded=ae=>{0===ae.oldVersion&&ae.target.result.createObjectStore(zt,{keyPath:"compositeKey"})}}catch(Y){F(Rr.create("storage-open",{originalErrorMessage:Y}))}})}()){this.appId=F,this.appName=Y,this.namespace=ae,this.openDbPromise=Ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var Y=this;return(0,ee.Z)(function*(){const ae=yield Y.openDbPromise;return new Promise((Ue,Xe)=>{const un=ae.transaction([zt],"readonly").objectStore(zt),hn=Y.createCompositeKey(F);try{const xn=un.get(hn);xn.onerror=Jn=>{Xe(Ot(Jn,"storage-get"))},xn.onsuccess=Jn=>{const Dn=Jn.target.result;Ue(Dn?Dn.value:void 0)}}catch(xn){Xe(Rr.create("storage-get",{originalErrorMessage:xn&&xn.message}))}})})()}set(F,Y){var ae=this;return(0,ee.Z)(function*(){const Ue=yield ae.openDbPromise;return new Promise((Xe,Dt)=>{const hn=Ue.transaction([zt],"readwrite").objectStore(zt),xn=ae.createCompositeKey(F);try{const Jn=hn.put({compositeKey:xn,value:Y});Jn.onerror=Dn=>{Dt(Ot(Dn,"storage-set"))},Jn.onsuccess=()=>{Xe()}}catch(Jn){Dt(Rr.create("storage-set",{originalErrorMessage:Jn&&Jn.message}))}})})()}delete(F){var Y=this;return(0,ee.Z)(function*(){const ae=yield Y.openDbPromise;return new Promise((Ue,Xe)=>{const un=ae.transaction([zt],"readwrite").objectStore(zt),hn=Y.createCompositeKey(F);try{const xn=un.delete(hn);xn.onerror=Jn=>{Xe(Ot(Jn,"storage-delete"))},xn.onsuccess=()=>{Ue()}}catch(xn){Xe(Rr.create("storage-delete",{originalErrorMessage:xn&&xn.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Ss{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,ee.Z)(function*(){const Y=F.storage.getLastFetchStatus(),ae=F.storage.getLastSuccessfulFetchTimestampMillis(),Ue=F.storage.getActiveConfig(),Xe=yield Y;Xe&&(F.lastFetchStatus=Xe);const Dt=yield ae;Dt&&(F.lastSuccessfulFetchTimestampMillis=Dt);const un=yield Ue;un&&(F.activeConfig=un)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function to(){return xs.apply(this,arguments)}function xs(){return(xs=(0,ee.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(x){return!1}})).apply(this,arguments)}!function si(){(0,Ce._registerComponent)(new Ne.wA("remote-config",function x(F,{instanceIdentifier:Y}){const ae=F.getProvider("app").getImmediate(),Ue=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rr.create("registration-window");if(!(0,Me.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:Xe,apiKey:Dt,appId:un}=ae.options;if(!Xe)throw Rr.create("registration-project-id");if(!Dt)throw Rr.create("registration-api-key");if(!un)throw Rr.create("registration-app-id");const hn=new es(un,ae.name,Y=Y||"firebase"),xn=new Ss(hn),Jn=new He.Yd(mr);Jn.logLevel=He.in.ERROR;const Dn=new Zn(Ue,Ce.SDK_VERSION,Y,Xe,Dt,un),$i=new Oe(Dn,hn),Xn=new Xs($i,hn,xn,Jn),ma=new ht(ae,Xn,xn,hn,Jn);return function sr(x){const F=(0,Me.m9)(x);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(mr,"0.3.8"),(0,Ce.registerVersion)(mr,"0.3.8","esm2017")}();const yo="/firebase-messaging-sw.js",oi="/firebase-cloud-messaging-push-scope",Hs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cs="google.c.a.c_id",$s="google.c.a.c_l",ds="google.c.a.ts",aa="google.c.a.e";var _o=(()=>{return(x=_o||(_o={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",_o;var x})();function hi(x){const F=new Uint8Array(x);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wo(x){const Y=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(Y),Ue=new Uint8Array(ae.length);for(let Xe=0;Xe<ae.length;++Xe)Ue[Xe]=ae.charCodeAt(Xe);return Ue}const fi="fcm_token_details_db",Or="fcm_token_object_Store";function vo(x){return no.apply(this,arguments)}function no(){return no=(0,ee.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(fi))return null;let F=null;return(yield(0,Fe.X3)(fi,5,{upgrade:(ae=(0,ee.Z)(function*(Ue,Xe,Dt,un){var hn;if(Xe<2||!Ue.objectStoreNames.contains(Or))return;const xn=un.objectStore(Or),Jn=yield xn.index("fcmSenderId").get(x);if(yield xn.clear(),Jn)if(2===Xe){const Dn=Jn;if(!Dn.auth||!Dn.p256dh||!Dn.endpoint)return;F={token:Dn.fcmToken,createTime:null!==(hn=Dn.createTime)&&void 0!==hn?hn:Date.now(),subscriptionOptions:{auth:Dn.auth,p256dh:Dn.p256dh,endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:"string"==typeof Dn.vapidKey?Dn.vapidKey:hi(Dn.vapidKey)}}}else if(3===Xe){const Dn=Jn;F={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:hi(Dn.auth),p256dh:hi(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:hi(Dn.vapidKey)}}}else if(4===Xe){const Dn=Jn;F={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:hi(Dn.auth),p256dh:hi(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:hi(Dn.vapidKey)}}}}),function(Xe,Dt,un,hn){return ae.apply(this,arguments)})})).close(),yield(0,Fe.Lj)(fi),yield(0,Fe.Lj)("fcm_vapid_details_db"),yield(0,Fe.Lj)("undefined"),Rs(F)?F:null;var ae}),no.apply(this,arguments)}function Rs(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:F}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const _i="firebase-messaging-store";let ua=null;function _r(){return ua||(ua=(0,Fe.X3)("firebase-messaging-database",1,{upgrade:(x,F)=>{0===F&&x.createObjectStore(_i)}})),ua}function k(x){return q.apply(this,arguments)}function q(){return(q=(0,ee.Z)(function*(x){const F=ot(x),ae=yield(yield _r()).transaction(_i).objectStore(_i).get(F);if(ae)return ae;{const Ue=yield vo(x.appConfig.senderId);if(Ue)return yield P(x,Ue),Ue}})).apply(this,arguments)}function P(x,F){return Q.apply(this,arguments)}function Q(){return(Q=(0,ee.Z)(function*(x,F){const Y=ot(x),Ue=(yield _r()).transaction(_i,"readwrite");return yield Ue.objectStore(_i).put(F,Y),yield Ue.done,F})).apply(this,arguments)}function Ee(x){return rt.apply(this,arguments)}function rt(){return(rt=(0,ee.Z)(function*(x){const F=ot(x),ae=(yield _r()).transaction(_i,"readwrite");yield ae.objectStore(_i).delete(F),yield ae.done})).apply(this,arguments)}function ot({appConfig:x}){return x.appId}const Mn=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nr(x,F){return In.apply(this,arguments)}function In(){return(In=(0,ee.Z)(function*(x,F){const Y=yield vi(x),ae=Pi(F),Ue={method:"POST",headers:Y,body:JSON.stringify(ae)};let Xe;try{Xe=yield(yield fetch(Pr(x.appConfig),Ue)).json()}catch(Dt){throw Mn.create("token-subscribe-failed",{errorInfo:Dt})}if(Xe.error)throw Mn.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Mn.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function Ln(x,F){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,ee.Z)(function*(x,F){const Y=yield vi(x),ae=Pi(F.subscriptionOptions),Ue={method:"PATCH",headers:Y,body:JSON.stringify(ae)};let Xe;try{Xe=yield(yield fetch(`${Pr(x.appConfig)}/${F.token}`,Ue)).json()}catch(Dt){throw Mn.create("token-update-failed",{errorInfo:Dt})}if(Xe.error)throw Mn.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Mn.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function or(x,F){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,ee.Z)(function*(x,F){const ae={method:"DELETE",headers:yield vi(x)};try{const Xe=yield(yield fetch(`${Pr(x.appConfig)}/${F}`,ae)).json();if(Xe.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(Ue){throw Mn.create("token-unsubscribe-failed",{errorInfo:Ue})}})).apply(this,arguments)}function Pr({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function vi(x){return vn.apply(this,arguments)}function vn(){return(vn=(0,ee.Z)(function*({appConfig:x,installations:F}){const Y=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function Pi({p256dh:x,auth:F,endpoint:Y,vapidKey:ae}){const Ue={web:{endpoint:Y,auth:F,p256dh:x}};return ae!==Hs&&(Ue.web.applicationPubKey=ae),Ue}const vs=6048e5;function Eo(x){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,ee.Z)(function*(x){const F=yield pr(x.swRegistration,x.vapidKey),Y={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:F.endpoint,auth:hi(F.getKey("auth")),p256dh:hi(F.getKey("p256dh"))},ae=yield k(x.firebaseDependencies);if(ae){if(ki(ae.subscriptionOptions,Y))return Date.now()>=ae.createTime+vs?R(x,{token:ae.token,createTime:Date.now(),subscriptionOptions:Y}):ae.token;try{yield or(x.firebaseDependencies,ae.token)}catch(Ue){console.warn(Ue)}return ve(x.firebaseDependencies,Y)}return ve(x.firebaseDependencies,Y)})).apply(this,arguments)}function L(x){return N.apply(this,arguments)}function N(){return(N=(0,ee.Z)(function*(x){const F=yield k(x.firebaseDependencies);F&&(yield or(x.firebaseDependencies,F.token),yield Ee(x.firebaseDependencies));const Y=yield x.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()})).apply(this,arguments)}function R(x,F){return J.apply(this,arguments)}function J(){return(J=(0,ee.Z)(function*(x,F){try{const Y=yield Ln(x.firebaseDependencies,F),ae=Object.assign(Object.assign({},F),{token:Y,createTime:Date.now()});return yield P(x.firebaseDependencies,ae),Y}catch(Y){throw yield L(x),Y}})).apply(this,arguments)}function ve(x,F){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,ee.Z)(function*(x,F){const ae={token:yield nr(x,F),createTime:Date.now(),subscriptionOptions:F};return yield P(x,ae),ae.token})).apply(this,arguments)}function pr(x,F){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,ee.Z)(function*(x,F){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wo(F)})})).apply(this,arguments)}function ki(x,F){return F.vapidKey===x.vapidKey&&F.endpoint===x.endpoint&&F.auth===x.auth&&F.p256dh===x.p256dh}function hs(x){const F={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Fi(x,F){if(!F.notification)return;x.notification={};const Y=F.notification.title;Y&&(x.notification.title=Y);const ae=F.notification.body;ae&&(x.notification.body=ae);const Ue=F.notification.image;Ue&&(x.notification.image=Ue)}(F,x),function Os(x,F){!F.data||(x.data=F.data)}(F,x),function wo(x,F){if(!F.fcmOptions)return;x.fcmOptions={};const Y=F.fcmOptions.link;Y&&(x.fcmOptions.link=Y);const ae=F.fcmOptions.analytics_label;ae&&(x.fcmOptions.analyticsLabel=ae)}(F,x),F}function Iu(x){return"object"==typeof x&&!!x&&cs in x}function ju(x,F){const Y=[];for(let ae=0;ae<x.length;ae++)Y.push(x.charAt(ae)),ae<F.length&&Y.push(F.charAt(ae));return Y.join("")}function ro(x){return Mn.create("missing-app-config-values",{valueName:x})}ju("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ju("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Si{constructor(F,Y,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ue=function hl(x){if(!x||!x.options)throw ro("App Configuration Object");if(!x.name)throw ro("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:Y}=x;for(const ae of F)if(!Y[ae])throw ro(ae);return{appName:x.name,projectId:Y.projectId,apiKey:Y.apiKey,appId:Y.appId,senderId:Y.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Ue,installations:Y,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function fs(x){return ba.apply(this,arguments)}function ba(){return(ba=(0,ee.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(yo,{scope:oi}),x.swRegistration.update().catch(()=>{})}catch(F){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:F.message})}})).apply(this,arguments)}function xo(x,F){return ss.apply(this,arguments)}function ss(){return(ss=(0,ee.Z)(function*(x,F){if(!F&&!x.swRegistration&&(yield fs(x)),F||!x.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");x.swRegistration=F}})).apply(this,arguments)}function qo(x,F){return Na.apply(this,arguments)}function Na(){return(Na=(0,ee.Z)(function*(x,F){F?x.vapidKey=F:x.vapidKey||(x.vapidKey=Hs)})).apply(this,arguments)}function nu(){return(nu=(0,ee.Z)(function*(x,F){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield qo(x,null==F?void 0:F.vapidKey),yield xo(x,null==F?void 0:F.serviceWorkerRegistration),Eo(x)})).apply(this,arguments)}function Pa(x,F,Y){return ka.apply(this,arguments)}function ka(){return(ka=(0,ee.Z)(function*(x,F,Y){const ae=Cu(F);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:Y[cs],message_name:Y[$s],message_time:Y[ds],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cu(x){switch(x){case _o.NOTIFICATION_CLICKED:return"notification_open";case _o.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fa(){return(Fa=(0,ee.Z)(function*(x,F){const Y=F.data;if(!Y.isFirebaseMessaging)return;x.onMessageHandler&&Y.messageType===_o.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(hs(Y)):x.onMessageHandler.next(hs(Y)));const ae=Y.data;Iu(ae)&&"1"===ae[aa]&&(yield Pa(x,Y.messageType,ae))})).apply(this,arguments)}const Ia="@firebase/messaging",La=x=>{const F=new Si(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Y=>function Ko(x,F){return Fa.apply(this,arguments)}(F,Y)),F},Ro=x=>{const F=x.getProvider("messaging").getImmediate();return{getToken:ae=>function Jr(x,F){return nu.apply(this,arguments)}(F,ae)}};function ru(){return la.apply(this,arguments)}function la(){return(la=(0,ee.Z)(function*(){try{yield(0,Me.eu)()}catch(x){return!1}return"undefined"!=typeof window&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Es(){(0,Ce._registerComponent)(new Ne.wA("messaging",La,"PUBLIC")),(0,Ce._registerComponent)(new Ne.wA("messaging-internal",Ro,"PRIVATE")),(0,Ce.registerVersion)(Ia,"0.9.13"),(0,Ce.registerVersion)(Ia,"0.9.13","esm2017")}();const Gs="analytics",Hu="firebase_id",io="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ko="https://www.googletagmanager.com/gtag/js",En=new He.Yd("@firebase/analytics");function Ca(x){return Promise.all(x.map(F=>F.catch(Y=>Y)))}function ca(x,F){const Y=document.createElement("script");Y.src=`${ko}?l=${x}&id=${F}`,Y.async=!0,document.head.appendChild(Y)}function oo(x,F,Y,ae,Ue,Xe){return as.apply(this,arguments)}function as(){return(as=(0,ee.Z)(function*(x,F,Y,ae,Ue,Xe){const Dt=ae[Ue];try{if(Dt)yield F[Dt];else{const hn=(yield Ca(Y)).find(xn=>xn.measurementId===Ue);hn&&(yield F[hn.appId])}}catch(un){En.error(un)}x("config",Ue,Xe)})).apply(this,arguments)}function $u(x,F,Y,ae,Ue){return ao.apply(this,arguments)}function ao(){return(ao=(0,ee.Z)(function*(x,F,Y,ae,Ue){try{let Xe=[];if(Ue&&Ue.send_to){let Dt=Ue.send_to;Array.isArray(Dt)||(Dt=[Dt]);const un=yield Ca(Y);for(const hn of Dt){const xn=un.find(Dn=>Dn.measurementId===hn),Jn=xn&&F[xn.appId];if(!Jn){Xe=[];break}Xe.push(Jn)}}0===Xe.length&&(Xe=Object.values(F)),yield Promise.all(Xe),x("event",ae,Ue||{})}catch(Xe){En.error(Xe)}})).apply(this,arguments)}function Ha(){const x=window.document.getElementsByTagName("script");for(const F of Object.values(x))if(F.src&&F.src.includes(ko))return F;return null}const ws=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Io=new class uo{constructor(F={},Y=1e3){this.throttleMetadata=F,this.intervalMillis=Y}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,Y){this.throttleMetadata[F]=Y}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function $a(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function da(x){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,ee.Z)(function*(x){var F;const{appId:Y,apiKey:ae}=x,Ue={method:"GET",headers:$a(ae)},Xe=io.replace("{app-id}",Y),Dt=yield fetch(Xe,Ue);if(200!==Dt.status&&304!==Dt.status){let un="";try{const hn=yield Dt.json();(null===(F=hn.error)||void 0===F?void 0:F.message)&&(un=hn.error.message)}catch(hn){}throw ws.create("config-fetch-failed",{httpStatus:Dt.status,responseMessage:un})}return Dt.json()})).apply(this,arguments)}function Xr(x){return ai.apply(this,arguments)}function ai(){return(ai=(0,ee.Z)(function*(x,F=Io,Y){const{appId:ae,apiKey:Ue,measurementId:Xe}=x.options;if(!ae)throw ws.create("no-app-id");if(!Ue){if(Xe)return{measurementId:Xe,appId:ae};throw ws.create("no-api-key")}const Dt=F.getThrottleMetadata(ae)||{backoffCount:0,throttleEndTimeMillis:Date.now()},un=new Fo;return setTimeout((0,ee.Z)(function*(){un.abort()}),void 0!==Y?Y:6e4),Co({appId:ae,apiKey:Ue,measurementId:Xe},Dt,un,F)})).apply(this,arguments)}function Co(x,F,Y){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,ee.Z)(function*(x,{throttleEndTimeMillis:F,backoffCount:Y},ae,Ue=Io){const{appId:Xe,measurementId:Dt}=x;try{yield Au(ae,F)}catch(un){if(Dt)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:Xe,measurementId:Dt};throw un}try{const un=yield da(x);return Ue.deleteThrottleMetadata(Xe),un}catch(un){if(!Li(un)){if(Ue.deleteThrottleMetadata(Xe),Dt)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:Xe,measurementId:Dt};throw un}const hn=503===Number(un.customData.httpStatus)?(0,Me.$s)(Y,Ue.intervalMillis,30):(0,Me.$s)(Y,Ue.intervalMillis),xn={throttleEndTimeMillis:Date.now()+hn,backoffCount:Y+1};return Ue.setThrottleMetadata(Xe,xn),En.debug(`Calling attemptFetch again in ${hn} millis`),Co(x,xn,ae,Ue)}})).apply(this,arguments)}function Au(x,F){return new Promise((Y,ae)=>{const Ue=Math.max(F-Date.now(),0),Xe=setTimeout(Y,Ue);x.addEventListener(()=>{clearTimeout(Xe),ae(ws.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Li(x){if(!(x instanceof Me.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}class Fo{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function Lo(){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,ee.Z)(function*(){if(!(0,Me.hl)())return En.warn(ws.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch(x){return En.warn(ws.create("indexeddb-unavailable",{errorInfo:x}).message),!1}return!0})).apply(this,arguments)}function St(){return(St=(0,ee.Z)(function*(x,F,Y,ae,Ue,Xe,Dt){var un;const hn=Xr(x);hn.then(Xn=>{Y[Xn.measurementId]=Xn.appId,x.options.measurementId&&Xn.measurementId!==x.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>En.error(Xn)),F.push(hn);const xn=Lo().then(Xn=>{if(Xn)return ae.getId()}),[Jn,Dn]=yield Promise.all([hn,xn]);Ha()||ca(Xe,Jn.measurementId),Ue("js",new Date);const $i=null!==(un=null==Dt?void 0:Dt.config)&&void 0!==un?un:{};return $i.origin="firebase",$i.update=!0,null!=Dn&&($i[Hu]=Dn),Ue("config",Jn.measurementId,$i),Jn.measurementId})).apply(this,arguments)}class jr{constructor(F){this.app=F}_delete(){return delete T[this.app.options.appId],Promise.resolve()}}let T={},C=[];const E={};let G,W,M="dataLayer",ne=!1;function Bn(x,F,Y){!function qt(){const x=[];if((0,Me.ru)()&&x.push("This is a browser extension environment."),(0,Me.zI)()||x.push("Cookies are not available."),x.length>0){const F=x.map((ae,Ue)=>`(${Ue+1}) ${ae}`).join(" "),Y=ws.create("invalid-analytics-context",{errorInfo:F});En.warn(Y.message)}}();const ae=x.options.appId;if(!ae)throw ws.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw ws.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=T[ae])throw ws.create("already-exists",{id:ae});if(!ne){!function so(x){let F=[];Array.isArray(window[x])?F=window[x]:window[x]=F}(M);const{wrappedGtag:Xe,gtagCore:Dt}=function Tu(x,F,Y,ae,Ue){let Xe=function(...Dt){window[ae].push(arguments)};return window[Ue]&&"function"==typeof window[Ue]&&(Xe=window[Ue]),window[Ue]=function Da(x,F,Y,ae){function Xe(){return(Xe=(0,ee.Z)(function*(Dt,un,hn){try{"event"===Dt?yield $u(x,F,Y,un,hn):"config"===Dt?yield oo(x,F,Y,ae,un,hn):x("set",un)}catch(xn){En.error(xn)}})).apply(this,arguments)}return function Ue(Dt,un,hn){return Xe.apply(this,arguments)}}(Xe,x,F,Y),{gtagCore:Xe,wrappedGtag:window[Ue]}}(T,C,E,M,"gtag");W=Xe,G=Dt,ne=!0}return T[ae]=function Do(x,F,Y,ae,Ue,Xe,Dt){return St.apply(this,arguments)}(x,C,E,F,G,M,Y),new jr(x)}function gr(){return(gr=(0,ee.Z)(function*(x,F,Y,ae,Ue){if(Ue&&Ue.global)x("event",Y,ae);else{const Xe=yield F;x("event",Y,Object.assign(Object.assign({},ae),{send_to:Xe}))}})).apply(this,arguments)}function za(){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,ee.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(x){return!1}})).apply(this,arguments)}const Pn="@firebase/analytics";!function us(){(0,Ce._registerComponent)(new Ne.wA(Gs,(F,{options:Y})=>Bn(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),Y),"PUBLIC")),(0,Ce._registerComponent)(new Ne.wA("analytics-internal",function x(F){try{const Y=F.getProvider(Gs).getImmediate();return{logEvent:(ae,Ue,Xe)=>function Gu(x,F,Y,ae){x=(0,Me.m9)(x),function ln(x,F,Y,ae,Ue){return gr.apply(this,arguments)}(W,T[x.app.options.appId],F,Y,ae).catch(Ue=>En.error(Ue))}(Y,ae,Ue,Xe)}}catch(Y){throw ws.create("interop-component-reg-failed",{reason:Y})}},"PRIVATE")),(0,Ce.registerVersion)(Pn,"0.7.9"),(0,Ce.registerVersion)(Pn,"0.7.9","esm2017")}();var fa=U(4408),Vi=U(7565);const To=new class Ui extends Vi.v{}(class Mu extends fa.o{constructor(F,Y){super(F,Y),this.scheduler=F,this.work=Y}schedule(F,Y=0){return Y>0?super.schedule(F,Y):(this.delay=Y,this.state=F,this.scheduler.flush(this),this)}execute(F,Y){return Y>0||this.closed?super.execute(F,Y):this._execute(F,Y)}requestAsyncId(F,Y,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(F,Y,ae):F.flush(this)}});var pa=U(4986),zu=U(8505),bs=U(5363),ps=U(9468);const lo=new g.GfV("7.3.0"),Ei="__angularfire_symbol__analyticsIsSupportedValue",Is="__angularfire_symbol__analyticsIsSupported",Ao="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",Ft="__angularfire_symbol__messagingIsSupportedValue",co="__angularfire_symbol__messagingIsSupported";function ho(x,F,Y){if(F){if(1===F.length)return F[0];const Xe=F.filter(Dt=>Dt.app===Y);if(1===Xe.length)return Xe[0]}return Y.container.getProvider(x).getImmediate({optional:!0})}globalThis[Is]||(globalThis[Is]=za().then(x=>globalThis[Ei]=x).catch(()=>globalThis[Ei]=!1)),globalThis[co]||(globalThis[co]=ru().then(x=>globalThis[Ft]=x).catch(()=>globalThis[Ft]=!1)),globalThis[Jo]||(globalThis[Jo]=to().then(x=>globalThis[Ao]=x).catch(()=>globalThis[Ao]=!1));const ic=(x,F)=>{const Y=F?[F]:(0,z.C6)(),ae=[];return Y.forEach(Ue=>{Ue.container.getProvider(x).instances.forEach(Dt=>{ae.includes(Dt)||ae.push(Dt)})}),ae};function qs(){}class xu{constructor(F,Y=To){this.zone=F,this.delegate=Y}now(){return this.delegate.now()}schedule(F,Y,ae){const Ue=this.zone;return this.delegate.schedule(function(Dt){Ue.runGuarded(()=>{F.apply(this,[Dt])})},Y,ae)}}class Xo{constructor(F){this.zone=F,this.task=null}call(F,Y){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qs,{},qs,qs)),Y.pipe((0,zu.b)({next:ae,complete:ae,error:ae})).subscribe(F).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ou=(()=>{class x{constructor(Y){this.ngZone=Y,this.outsideAngular=Y.runOutsideAngular(()=>new xu(Zone.current)),this.insideAngular=Y.run(()=>new xu(Zone.current,pa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(Y){return new(Y||x)(g.LFG(g.R0b))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ks(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Uo(x){return x.pipe((0,bs.Q)(ks().outsideAngular))}function Ml(x){return ks(),function Mi(x){return function(Y){return(Y=Y.lift(new Xo(x.ngZone))).pipe((0,ps.R)(x.outsideAngular),(0,bs.Q)(x.insideAngular))}}(ks())(x)}},2090:(kt,We,U)=>{U.d(We,{$s:()=>Un,BH:()=>at,G6:()=>st,L:()=>Fe,LL:()=>Ge,Mn:()=>$e,Sg:()=>Je,UG:()=>Ye,US:()=>Ne,ZB:()=>fe,ZR:()=>Be,b$:()=>Rt,d:()=>oe,eu:()=>ke,hl:()=>me,jU:()=>lt,m9:()=>cr,ne:()=>Hn,pd:()=>ur,r3:()=>Te,ru:()=>xt,tV:()=>je,uI:()=>wt,vZ:()=>Nn,w1:()=>le,xO:()=>Wn,xb:()=>vt,z$:()=>ut,zI:()=>re,zd:()=>wr});const Ce=function(ge){const we=[];let Ae=0;for(let pt=0;pt<ge.length;pt++){let ye=ge.charCodeAt(pt);ye<128?we[Ae++]=ye:ye<2048?(we[Ae++]=ye>>6|192,we[Ae++]=63&ye|128):55296==(64512&ye)&&pt+1<ge.length&&56320==(64512&ge.charCodeAt(pt+1))?(ye=65536+((1023&ye)<<10)+(1023&ge.charCodeAt(++pt)),we[Ae++]=ye>>18|240,we[Ae++]=ye>>12&63|128,we[Ae++]=ye>>6&63|128,we[Ae++]=63&ye|128):(we[Ae++]=ye>>12|224,we[Ae++]=ye>>6&63|128,we[Ae++]=63&ye|128)}return we},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,we){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ae=we?this.byteToCharMapWebSafe_:this.byteToCharMap_,pt=[];for(let ye=0;ye<ge.length;ye+=3){const Le=ge[ye],yt=ye+1<ge.length,Ut=yt?ge[ye+1]:0,jt=ye+2<ge.length,nn=jt?ge[ye+2]:0;let tr=(15&Ut)<<2|nn>>6,Lr=63&nn;jt||(Lr=64,yt||(tr=64)),pt.push(Ae[Le>>2],Ae[(3&Le)<<4|Ut>>4],Ae[tr],Ae[Lr])}return pt.join("")},encodeString(ge,we){return this.HAS_NATIVE_SUPPORT&&!we?btoa(ge):this.encodeByteArray(Ce(ge),we)},decodeString(ge,we){return this.HAS_NATIVE_SUPPORT&&!we?atob(ge):function(ge){const we=[];let Ae=0,pt=0;for(;Ae<ge.length;){const ye=ge[Ae++];if(ye<128)we[pt++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const Le=ge[Ae++];we[pt++]=String.fromCharCode((31&ye)<<6|63&Le)}else if(ye>239&&ye<365){const jt=((7&ye)<<18|(63&ge[Ae++])<<12|(63&ge[Ae++])<<6|63&ge[Ae++])-65536;we[pt++]=String.fromCharCode(55296+(jt>>10)),we[pt++]=String.fromCharCode(56320+(1023&jt))}else{const Le=ge[Ae++],yt=ge[Ae++];we[pt++]=String.fromCharCode((15&ye)<<12|(63&Le)<<6|63&yt)}}return we.join("")}(this.decodeStringToByteArray(ge,we))},decodeStringToByteArray(ge,we){this.init_();const Ae=we?this.charToByteMapWebSafe_:this.charToByteMap_,pt=[];for(let ye=0;ye<ge.length;){const Le=Ae[ge.charAt(ye++)],Ut=ye<ge.length?Ae[ge.charAt(ye)]:0;++ye;const nn=ye<ge.length?Ae[ge.charAt(ye)]:64;++ye;const rn=ye<ge.length?Ae[ge.charAt(ye)]:64;if(++ye,null==Le||null==Ut||null==nn||null==rn)throw Error();pt.push(Le<<2|Ut>>4),64!==nn&&(pt.push(Ut<<4&240|nn>>2),64!==rn&&pt.push(nn<<6&192|rn))}return pt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},Fe=function(ge){return function(ge){const we=Ce(ge);return Ne.encodeByteArray(we,!0)}(ge).replace(/\./g,"")},je=function(ge){try{return Ne.decodeString(ge,!0)}catch(we){console.error("base64Decode failed: ",we)}return null};function fe(ge,we){if(!(we instanceof Object))return we;switch(we.constructor){case Date:return new Date(we.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return we}for(const Ae in we)!we.hasOwnProperty(Ae)||!De(Ae)||(ge[Ae]=fe(ge[Ae],we[Ae]));return ge}function De(ge){return"__proto__"!==ge}class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((we,Ae)=>{this.resolve=we,this.reject=Ae})}wrapCallback(we){return(Ae,pt)=>{Ae?this.reject(Ae):this.resolve(pt),"function"==typeof we&&(this.promise.catch(()=>{}),1===we.length?we(Ae):we(Ae,pt))}}}function Je(ge,we){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pt=we||"demo-project",ye=ge.iat||0,Le=ge.sub||ge.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${pt}`,aud:pt,iat:ye,exp:ye+3600,auth_time:ye,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(yt)),""].join(".")}function ut(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ge){return!1}}function lt(){return"object"==typeof self&&self.self===self}function xt(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oe(){return ut().indexOf("Electron/")>=0}function le(){const ge=ut();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function $e(){return ut().indexOf("MSAppHost/")>=0}function st(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}function ke(){return new Promise((ge,we)=>{try{let Ae=!0;const pt="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(pt);ye.onsuccess=()=>{ye.result.close(),Ae||self.indexedDB.deleteDatabase(pt),ge(!0)},ye.onupgradeneeded=()=>{Ae=!1},ye.onerror=()=>{var Le;we((null===(Le=ye.error)||void 0===Le?void 0:Le.message)||"")}}catch(Ae){we(Ae)}})}function re(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Be extends Error{constructor(we,Ae,pt){super(Ae),this.code=we,this.customData=pt,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(we,Ae,pt){this.service=we,this.serviceName=Ae,this.errors=pt}create(we,...Ae){const pt=Ae[0]||{},ye=`${this.service}/${we}`,Le=this.errors[we],yt=Le?function _t(ge,we){return ge.replace(Mt,(Ae,pt)=>{const ye=we[pt];return null!=ye?String(ye):`<${pt}?>`})}(Le,pt):"Error";return new Be(ye,`${this.serviceName}: ${yt} (${ye}).`,pt)}}const Mt=/\{\$([^}]+)}/g;function Te(ge,we){return Object.prototype.hasOwnProperty.call(ge,we)}function vt(ge){for(const we in ge)if(Object.prototype.hasOwnProperty.call(ge,we))return!1;return!0}function Nn(ge,we){if(ge===we)return!0;const Ae=Object.keys(ge),pt=Object.keys(we);for(const ye of Ae){if(!pt.includes(ye))return!1;const Le=ge[ye],yt=we[ye];if(Kn(Le)&&Kn(yt)){if(!Nn(Le,yt))return!1}else if(Le!==yt)return!1}for(const ye of pt)if(!Ae.includes(ye))return!1;return!0}function Kn(ge){return null!==ge&&"object"==typeof ge}function Wn(ge){const we=[];for(const[Ae,pt]of Object.entries(ge))Array.isArray(pt)?pt.forEach(ye=>{we.push(encodeURIComponent(Ae)+"="+encodeURIComponent(ye))}):we.push(encodeURIComponent(Ae)+"="+encodeURIComponent(pt));return we.length?"&"+we.join("&"):""}function wr(ge){const we={};return ge.replace(/^\?/,"").split("&").forEach(pt=>{if(pt){const[ye,Le]=pt.split("=");we[decodeURIComponent(ye)]=decodeURIComponent(Le)}}),we}function ur(ge){const we=ge.indexOf("?");if(!we)return"";const Ae=ge.indexOf("#",we);return ge.substring(we,Ae>0?Ae:void 0)}function Hn(ge,we){const Ae=new Wt(ge,we);return Ae.subscribe.bind(Ae)}class Wt{constructor(we,Ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ae,this.task.then(()=>{we(this)}).catch(pt=>{this.error(pt)})}next(we){this.forEachObserver(Ae=>{Ae.next(we)})}error(we){this.forEachObserver(Ae=>{Ae.error(we)}),this.close(we)}complete(){this.forEachObserver(we=>{we.complete()}),this.close()}subscribe(we,Ae,pt){let ye;if(void 0===we&&void 0===Ae&&void 0===pt)throw new Error("Missing Observer.");ye=function Cn(ge,we){if("object"!=typeof ge||null===ge)return!1;for(const Ae of we)if(Ae in ge&&"function"==typeof ge[Ae])return!0;return!1}(we,["next","error","complete"])?we:{next:we,error:Ae,complete:pt},void 0===ye.next&&(ye.next=mn),void 0===ye.error&&(ye.error=mn),void 0===ye.complete&&(ye.complete=mn);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch(yt){}}),this.observers.push(ye),Le}unsubscribeOne(we){void 0===this.observers||void 0===this.observers[we]||(delete this.observers[we],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(we){if(!this.finalized)for(let Ae=0;Ae<this.observers.length;Ae++)this.sendOne(Ae,we)}sendOne(we,Ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[we])try{Ae(this.observers[we])}catch(pt){"undefined"!=typeof console&&console.error&&console.error(pt)}})}close(we){this.finalized||(this.finalized=!0,void 0!==we&&(this.finalError=we),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}function Un(ge,we=1e3,Ae=2){const pt=we*Math.pow(Ae,ge),ye=Math.round(.5*pt*(Math.random()-.5)*2);return Math.min(144e5,pt+ye)}function cr(ge){return ge&&ge._delegate?ge._delegate:ge}},5278:(kt,We,U)=>{var g=U(2313),z=U(5e3),ee=U(441),Ce=U(7562);const He=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",component:(()=>{class _{constructor(m){this.spinner=m}ngOnInit(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},2e3)}}return _.\u0275fac=function(m){return new(m||_)(z.Y36(Ce.t2))},_.\u0275cmp=z.Xpm({type:_,selectors:[["app-bienvenida"]],decls:3,vars:0,consts:[["bdColor","rgba(255, 255, 255, 1)","template","<img height='30px' src='../../assets/Heart beat.gif' />"]],template:function(m,b){1&m&&(z.TgZ(0,"p"),z._uU(1,"bienvenida works!"),z.qZA(),z._UZ(2,"ngx-spinner",0))},directives:[Ce.Ro],styles:[""]}),_})()},{path:"error",component:(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275cmp=z.Xpm({type:_,selectors:[["app-error"]],decls:2,vars:0,template:function(m,b){1&m&&(z.TgZ(0,"p"),z._uU(1,"error works!"),z.qZA())},styles:[""]}),_})()},{path:"autenticacion",loadChildren:()=>U.e(515).then(U.bind(U,5515)).then(_=>_.AutenticacionModule)}];let Fe=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_}),_.\u0275inj=z.cJS({imports:[[ee.Bz.forRoot(He)],ee.Bz]}),_})(),je=(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275cmp=z.Xpm({type:_,selectors:[["app-nav-bar"]],decls:15,vars:0,consts:[[1,"navbar"],[1,"logo"],[1,"nav-links"],[1,"menu"],["href","/"],["routerLink","autenticacion"]],template:function(m,b){1&m&&(z.TgZ(0,"body")(1,"nav",0)(2,"div",1),z._uU(3,"Clinica Archilla Ezequiel"),z.qZA(),z.TgZ(4,"ul",2)(5,"div",3)(6,"li")(7,"a",4),z._uU(8,"Home"),z.qZA()(),z.TgZ(9,"li")(10,"a",4),z._uU(11,"About"),z.qZA()(),z.TgZ(12,"li")(13,"a",5),z._uU(14,"Ingreso"),z.qZA()()()()()())},directives:[ee.yS],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}a[_ngcontent-%COMP%]{text-decoration:none}li[_ngcontent-%COMP%]{list-style:none}.navbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;background-color:teal;color:#fff}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.logo[_ngcontent-%COMP%]{font-size:32px}.menu[_ngcontent-%COMP%]{display:flex;gap:1em;font-size:18px}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#4c9e9e;border-radius:5px;transition:.3s ease}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 14px}.services[_ngcontent-%COMP%]{position:relative}.dropdown[_ngcontent-%COMP%]{background-color:#018b8b;padding:1em 0;position:absolute;display:none;border-radius:8px;top:35px}.dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:10px}.dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5em 1em;width:8em;text-align:center}.dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#4c9e9e}.services[_ngcontent-%COMP%]:hover   .dropdown[_ngcontent-%COMP%]{display:block}"]}),_})(),pe=(()=>{class _{constructor(){this.title="ClinicaOnline2022",this.spinner=!1,setTimeout(()=>{this.spinner=!0},2e3)}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275cmp=z.Xpm({type:_,selectors:[["app-root"]],decls:2,vars:0,template:function(m,b){1&m&&z._UZ(0,"app-nav-bar")(1,"router-outlet")},directives:[je,ee.lC],styles:[""]}),_})();var fe=U(2290),De=U(1777);const at=!1;function ut(_){return new z.vHH(3e3,at)}function lr(){return"undefined"!=typeof window&&void 0!==window.document}function Hn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Wt(_){switch(_.length){case 0:return new De.ZN;case 1:return _[0];default:return new De.ZE(_)}}function fn(_,c,m,b,O={},$={}){const te=[],se=[];let _e=-1,qe=null;if(b.forEach(Et=>{const Lt=Et.offset,tn=Lt==_e,wn=tn&&qe||{};Object.keys(Et).forEach(Nt=>{let bt=Nt,Rn=Et[Nt];if("offset"!==Nt)switch(bt=c.normalizePropertyName(bt,te),Rn){case De.k1:Rn=O[Nt];break;case De.l3:Rn=$[Nt];break;default:Rn=c.normalizeStyleValue(Nt,bt,Rn,te)}wn[bt]=Rn}),tn||se.push(wn),qe=wn,_e=Lt}),te.length)throw function on(_){return new z.vHH(3502,at)}();return se}function Cn(_,c,m,b){switch(c){case"start":_.onStart(()=>b(m&&mn(m,"start",_)));break;case"done":_.onDone(()=>b(m&&mn(m,"done",_)));break;case"destroy":_.onDestroy(()=>b(m&&mn(m,"destroy",_)))}}function mn(_,c,m){const b=m.totalTime,$=ci(_.element,_.triggerName,_.fromState,_.toState,c||_.phaseName,null==b?_.totalTime:b,!!m.disabled),te=_._data;return null!=te&&($._data=te),$}function ci(_,c,m,b,O="",$=0,te){return{element:_,triggerName:c,fromState:m,toState:b,phaseName:O,totalTime:$,disabled:!!te}}function fr(_,c,m){let b;return _ instanceof Map?(b=_.get(c),b||_.set(c,b=m)):(b=_[c],b||(b=_[c]=m)),b}function Kr(_){const c=_.indexOf(":");return[_.substring(1,c),_.substr(c+1)]}let br=(_,c)=>!1,ti=(_,c,m)=>[],Gr=null;function Vt(_){const c=_.parentNode||_.host;return c===Gr?null:c}(Hn()||"undefined"!=typeof Element)&&(lr()?(Gr=(()=>document.documentElement)(),br=(_,c)=>{for(;c;){if(c===_)return!0;c=Vt(c)}return!1}):br=(_,c)=>_.contains(c),ti=(_,c,m)=>{if(m)return Array.from(_.querySelectorAll(c));const b=_.querySelector(c);return b?[b]:[]});let rr=null,zr=!1;function Un(_){rr||(rr=function Yi(){return"undefined"!=typeof document?document.body:null}()||{},zr=!!rr.style&&"WebkitAppearance"in rr.style);let c=!0;return rr.style&&!function en(_){return"ebkit"==_.substring(1,6)}(_)&&(c=_ in rr.style,!c&&zr&&(c="Webkit"+_.charAt(0).toUpperCase()+_.substr(1)in rr.style)),c}const Fr=br,cr=ti;let we=(()=>{class _{validateStyleProperty(m){return Un(m)}matchesElement(m,b){return!1}containsElement(m,b){return Fr(m,b)}getParentElement(m){return Vt(m)}query(m,b,O){return cr(m,b,O)}computeStyle(m,b,O){return O||""}animate(m,b,O,$,te,se=[],_e){return new De.ZN(O,$)}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275prov=z.Yz7({token:_,factory:_.\u0275fac}),_})(),Ae=(()=>{class _{}return _.NOOP=new we,_})();const yt="ng-enter",Ut="ng-leave",jt="ng-trigger",nn=".ng-trigger",ir="ng-animating",rn=".ng-animating";function tr(_){if("number"==typeof _)return _;const c=_.match(/^(-?[\.\d]+)(m?s)/);return!c||c.length<2?0:Lr(parseFloat(c[1]),c[2])}function Lr(_,c){return"s"===c?1e3*_:_}function gi(_,c,m){return _.hasOwnProperty("duration")?_:function ze(_,c,m){let O,$=0,te="";if("string"==typeof _){const se=_.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===se)return c.push(ut()),{duration:0,delay:0,easing:""};O=Lr(parseFloat(se[1]),se[2]);const _e=se[3];null!=_e&&($=Lr(parseFloat(_e),se[4]));const qe=se[5];qe&&(te=qe)}else O=_;if(!m){let se=!1,_e=c.length;O<0&&(c.push(function wt(){return new z.vHH(3100,at)}()),se=!0),$<0&&(c.push(function Ye(){return new z.vHH(3101,at)}()),se=!0),se&&c.splice(_e,0,ut())}return{duration:O,delay:$,easing:te}}(_,c,m)}function be(_,c={}){return Object.keys(_).forEach(m=>{c[m]=_[m]}),c}function Re(_,c,m={}){if(c)for(let b in _)m[b]=_[b];else be(_,m);return m}function gt(_,c,m){return m?c+":"+m+";":""}function Xt(_){let c="";for(let m=0;m<_.style.length;m++){const b=_.style.item(m);c+=gt(0,b,_.style.getPropertyValue(b))}for(const m in _.style)_.style.hasOwnProperty(m)&&!m.startsWith("_")&&(c+=gt(0,Bt(m),_.style[m]));_.setAttribute("style",c)}function sn(_,c,m){_.style&&(Object.keys(c).forEach(b=>{const O=Pt(b);m&&!m.hasOwnProperty(b)&&(m[b]=_.style[O]),_.style[O]=c[b]}),Hn()&&Xt(_))}function zn(_,c){_.style&&(Object.keys(c).forEach(m=>{const b=Pt(m);_.style[b]=""}),Hn()&&Xt(_))}function Mr(_){return Array.isArray(_)?1==_.length?_[0]:(0,De.vP)(_):_}const di=new RegExp("{{\\s*(.+?)\\s*}}","g");function ni(_){let c=[];if("string"==typeof _){let m;for(;m=di.exec(_);)c.push(m[1]);di.lastIndex=0}return c}function Ir(_,c,m){const b=_.toString(),O=b.replace(di,($,te)=>{let se=c[te];return c.hasOwnProperty(te)||(m.push(function xt(_){return new z.vHH(3003,at)}()),se=""),se.toString()});return O==b?_:O}function mi(_){const c=[];let m=_.next();for(;!m.done;)c.push(m.value),m=_.next();return c}const ri=/-+([a-z0-9])/g;function Pt(_){return _.replace(ri,(...c)=>c[1].toUpperCase())}function Bt(_){return _.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function mr(_,c,m){switch(c.type){case 7:return _.visitTrigger(c,m);case 0:return _.visitState(c,m);case 1:return _.visitTransition(c,m);case 2:return _.visitSequence(c,m);case 3:return _.visitGroup(c,m);case 4:return _.visitAnimate(c,m);case 5:return _.visitKeyframes(c,m);case 6:return _.visitStyle(c,m);case 8:return _.visitReference(c,m);case 9:return _.visitAnimateChild(c,m);case 10:return _.visitAnimateRef(c,m);case 11:return _.visitQuery(c,m);case 12:return _.visitStagger(c,m);default:throw function Rt(_){return new z.vHH(3004,at)}()}}function Cr(_,c){return window.getComputedStyle(_)[c]}function Ai(_,c){const m=[];return"string"==typeof _?_.split(/\s*,\s*/).forEach(b=>function Wr(_,c,m){if(":"==_[0]){const _e=function Vr(_,c){switch(_){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,b)=>parseFloat(b)>parseFloat(m);case":decrement":return(m,b)=>parseFloat(b)<parseFloat(m);default:return c.push(function Kt(_){return new z.vHH(3016,at)}()),"* => *"}}(_,m);if("function"==typeof _e)return void c.push(_e);_=_e}const b=_.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==b||b.length<4)return m.push(function Mt(_){return new z.vHH(3015,at)}()),c;const O=b[1],$=b[2],te=b[3];c.push(sr(O,te));"<"==$[0]&&!("*"==O&&"*"==te)&&c.push(sr(te,O))}(b,m,c)):m.push(_),m}const Ur=new Set(["true","1"]),yr=new Set(["false","0"]);function sr(_,c){const m=Ur.has(_)||yr.has(_),b=Ur.has(c)||yr.has(c);return(O,$)=>{let te="*"==_||_==O,se="*"==c||c==$;return!te&&m&&"boolean"==typeof O&&(te=O?Ur.has(_):yr.has(_)),!se&&b&&"boolean"==typeof $&&(se=$?Ur.has(c):yr.has(c)),te&&se}}const ii=new RegExp("s*:selfs*,?","g");function Zr(_,c,m,b){return new As(_).build(c,m,b)}class As{constructor(c){this._driver=c}build(c,m,b){const O=new ls(m);this._resetContextStyleTimingState(O);const $=mr(this,Mr(c),O);return O.unsupportedCSSPropertiesFound.size&&O.unsupportedCSSPropertiesFound.keys(),$}_resetContextStyleTimingState(c){c.currentQuerySelector="",c.collectedStyles={},c.collectedStyles[""]={},c.currentTime=0}visitTrigger(c,m){let b=m.queryCount=0,O=m.depCount=0;const $=[],te=[];return"@"==c.name.charAt(0)&&m.errors.push(function le(){return new z.vHH(3006,at)}()),c.definitions.forEach(se=>{if(this._resetContextStyleTimingState(m),0==se.type){const _e=se,qe=_e.name;qe.toString().split(/\s*,\s*/).forEach(Et=>{_e.name=Et,$.push(this.visitState(_e,m))}),_e.name=qe}else if(1==se.type){const _e=this.visitTransition(se,m);b+=_e.queryCount,O+=_e.depCount,te.push(_e)}else m.errors.push(function $e(){return new z.vHH(3007,at)}())}),{type:7,name:c.name,states:$,transitions:te,queryCount:b,depCount:O,options:null}}visitState(c,m){const b=this.visitStyle(c.styles,m),O=c.options&&c.options.params||null;if(b.containsDynamicStyles){const $=new Set,te=O||{};b.styles.forEach(se=>{if(Xs(se)){const _e=se;Object.keys(_e).forEach(qe=>{ni(_e[qe]).forEach(Et=>{te.hasOwnProperty(Et)||$.add(Et)})})}}),$.size&&(mi($.values()),m.errors.push(function ct(_,c){return new z.vHH(3008,at)}()))}return{type:0,name:c.name,style:b,options:O?{params:O}:null}}visitTransition(c,m){m.queryCount=0,m.depCount=0;const b=mr(this,Mr(c.animation),m);return{type:1,matchers:Ai(c.expr,m.errors),animation:b,queryCount:m.queryCount,depCount:m.depCount,options:Zn(c.options)}}visitSequence(c,m){return{type:2,steps:c.steps.map(b=>mr(this,b,m)),options:Zn(c.options)}}visitGroup(c,m){const b=m.currentTime;let O=0;const $=c.steps.map(te=>{m.currentTime=b;const se=mr(this,te,m);return O=Math.max(O,m.currentTime),se});return m.currentTime=O,{type:3,steps:$,options:Zn(c.options)}}visitAnimate(c,m){const b=function oa(_,c){if(_.hasOwnProperty("duration"))return _;if("number"==typeof _)return Ni(gi(_,c).duration,0,"");const m=_;if(m.split(/\s+/).some($=>"{"==$.charAt(0)&&"{"==$.charAt(1))){const $=Ni(0,0,"");return $.dynamic=!0,$.strValue=m,$}const O=gi(m,c);return Ni(O.duration,O.delay,O.easing)}(c.timings,m.errors);m.currentAnimateTimings=b;let O,$=c.styles?c.styles:(0,De.oB)({});if(5==$.type)O=this.visitKeyframes($,m);else{let te=c.styles,se=!1;if(!te){se=!0;const qe={};b.easing&&(qe.easing=b.easing),te=(0,De.oB)(qe)}m.currentTime+=b.duration+b.delay;const _e=this.visitStyle(te,m);_e.isEmptyStep=se,O=_e}return m.currentAnimateTimings=null,{type:4,timings:b,style:O,options:null}}visitStyle(c,m){const b=this._makeStyleAst(c,m);return this._validateStyleAst(b,m),b}_makeStyleAst(c,m){const b=[];Array.isArray(c.styles)?c.styles.forEach(te=>{"string"==typeof te?te==De.l3?b.push(te):m.errors.push(function st(_){return new z.vHH(3002,at)}()):b.push(te)}):b.push(c.styles);let O=!1,$=null;return b.forEach(te=>{if(Xs(te)){const se=te,_e=se.easing;if(_e&&($=_e,delete se.easing),!O)for(let qe in se)if(se[qe].toString().indexOf("{{")>=0){O=!0;break}}}),{type:6,styles:b,easing:$,offset:c.offset,containsDynamicStyles:O,options:null}}_validateStyleAst(c,m){const b=m.currentAnimateTimings;let O=m.currentTime,$=m.currentTime;b&&$>0&&($-=b.duration+b.delay),c.styles.forEach(te=>{"string"!=typeof te&&Object.keys(te).forEach(se=>{if(!this._driver.validateStyleProperty(se))return delete te[se],void m.unsupportedCSSPropertiesFound.add(se);const _e=m.collectedStyles[m.currentQuerySelector],qe=_e[se];let Et=!0;qe&&($!=O&&$>=qe.startTime&&O<=qe.endTime&&(m.errors.push(function ke(_,c,m,b,O){return new z.vHH(3010,at)}()),Et=!1),$=qe.startTime),Et&&(_e[se]={startTime:$,endTime:O}),m.options&&function ji(_,c,m){const b=c.params||{},O=ni(_);O.length&&O.forEach($=>{b.hasOwnProperty($)||m.push(function lt(_){return new z.vHH(3001,at)}())})}(te[se],m.options,m.errors)})})}visitKeyframes(c,m){const b={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function re(){return new z.vHH(3011,at)}()),b;let $=0;const te=[];let se=!1,_e=!1,qe=0;const Et=c.steps.map(qr=>{const ar=this._makeStyleAst(qr,m);let Sr=null!=ar.offset?ar.offset:function Xi(_){if("string"==typeof _)return null;let c=null;if(Array.isArray(_))_.forEach(m=>{if(Xs(m)&&m.hasOwnProperty("offset")){const b=m;c=parseFloat(b.offset),delete b.offset}});else if(Xs(_)&&_.hasOwnProperty("offset")){const m=_;c=parseFloat(m.offset),delete m.offset}return c}(ar.styles),jn=0;return null!=Sr&&($++,jn=ar.offset=Sr),_e=_e||jn<0||jn>1,se=se||jn<qe,qe=jn,te.push(jn),ar});_e&&m.errors.push(function ce(){return new z.vHH(3012,at)}()),se&&m.errors.push(function de(){return new z.vHH(3200,at)}());const Lt=c.steps.length;let tn=0;$>0&&$<Lt?m.errors.push(function Be(){return new z.vHH(3202,at)}()):0==$&&(tn=1/(Lt-1));const wn=Lt-1,Nt=m.currentTime,bt=m.currentAnimateTimings,Rn=bt.duration;return Et.forEach((qr,ar)=>{const Sr=tn>0?ar==wn?1:tn*ar:te[ar],jn=Sr*Rn;m.currentTime=Nt+bt.delay+jn,bt.duration=jn,this._validateStyleAst(qr,m),qr.offset=Sr,b.styles.push(qr)}),b}visitReference(c,m){return{type:8,animation:mr(this,Mr(c.animation),m),options:Zn(c.options)}}visitAnimateChild(c,m){return m.depCount++,{type:9,options:Zn(c.options)}}visitAnimateRef(c,m){return{type:10,animation:this.visitReference(c.animation,m),options:Zn(c.options)}}visitQuery(c,m){const b=m.currentQuerySelector,O=c.options||{};m.queryCount++,m.currentQuery=c;const[$,te]=function Js(_){const c=!!_.split(/\s*,\s*/).find(m=>":self"==m);return c&&(_=_.replace(ii,"")),_=_.replace(/@\*/g,nn).replace(/@\w+/g,m=>nn+"-"+m.substr(1)).replace(/:animating/g,rn),[_,c]}(c.selector);m.currentQuerySelector=b.length?b+" "+$:$,fr(m.collectedStyles,m.currentQuerySelector,{});const se=mr(this,Mr(c.animation),m);return m.currentQuery=null,m.currentQuerySelector=b,{type:11,selector:$,limit:O.limit||0,optional:!!O.optional,includeSelf:te,animation:se,originalSelector:c.selector,options:Zn(c.options)}}visitStagger(c,m){m.currentQuery||m.errors.push(function Ge(){return new z.vHH(3013,at)}());const b="full"===c.timings?{duration:0,delay:0,easing:"full"}:gi(c.timings,m.errors,!0);return{type:12,animation:mr(this,Mr(c.animation),m),timings:b,options:null}}}class ls{constructor(c){this.errors=c,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xs(_){return!Array.isArray(_)&&"object"==typeof _}function Zn(_){return _?(_=be(_)).params&&(_.params=function Ji(_){return _?be(_):null}(_.params)):_={},_}function Ni(_,c,m){return{duration:_,delay:c,easing:m}}function js(_,c,m,b,O,$,te=null,se=!1){return{type:1,element:_,keyframes:c,preStyleProps:m,postStyleProps:b,duration:O,delay:$,totalTime:O+$,easing:te,subTimeline:se}}class Oe{constructor(){this._map=new Map}get(c){return this._map.get(c)||[]}append(c,m){let b=this._map.get(c);b||this._map.set(c,b=[]),b.push(...m)}has(c){return this._map.has(c)}clear(){this._map.clear()}}const ht=new RegExp(":enter","g"),zt=new RegExp(":leave","g");function Yn(_,c,m,b,O,$={},te={},se,_e,qe=[]){return(new Br).buildKeyframes(_,c,m,b,O,$,te,se,_e,qe)}class Br{buildKeyframes(c,m,b,O,$,te,se,_e,qe,Et=[]){qe=qe||new Oe;const Lt=new es(c,m,qe,O,$,Et,[]);Lt.options=_e,Lt.currentTimeline.setStyles([te],null,Lt.errors,_e),mr(this,b,Lt);const tn=Lt.timelines.filter(wn=>wn.containsAnimation());if(Object.keys(se).length){let wn;for(let Nt=tn.length-1;Nt>=0;Nt--){const bt=tn[Nt];if(bt.element===m){wn=bt;break}}wn&&!wn.allowOnlyTimelineStyles()&&wn.setStyles([se],null,Lt.errors,_e)}return tn.length?tn.map(wn=>wn.buildKeyframes()):[js(m,[],[],[],0,0,"",!1)]}visitTrigger(c,m){}visitState(c,m){}visitTransition(c,m){}visitAnimateChild(c,m){const b=m.subInstructions.get(m.element);if(b){const O=m.createSubContext(c.options),$=m.currentTimeline.currentTime,te=this._visitSubInstructions(b,O,O.options);$!=te&&m.transformIntoNewTimeline(te)}m.previousNode=c}visitAnimateRef(c,m){const b=m.createSubContext(c.options);b.transformIntoNewTimeline(),this.visitReference(c.animation,b),m.transformIntoNewTimeline(b.currentTimeline.currentTime),m.previousNode=c}_visitSubInstructions(c,m,b){let $=m.currentTimeline.currentTime;const te=null!=b.duration?tr(b.duration):null,se=null!=b.delay?tr(b.delay):null;return 0!==te&&c.forEach(_e=>{const qe=m.appendInstructionToTimeline(_e,te,se);$=Math.max($,qe.duration+qe.delay)}),$}visitReference(c,m){m.updateOptions(c.options,!0),mr(this,c.animation,m),m.previousNode=c}visitSequence(c,m){const b=m.subContextCount;let O=m;const $=c.options;if($&&($.params||$.delay)&&(O=m.createSubContext($),O.transformIntoNewTimeline(),null!=$.delay)){6==O.previousNode.type&&(O.currentTimeline.snapshotCurrentStyles(),O.previousNode=$n);const te=tr($.delay);O.delayNextStep(te)}c.steps.length&&(c.steps.forEach(te=>mr(this,te,O)),O.currentTimeline.applyStylesToKeyframe(),O.subContextCount>b&&O.transformIntoNewTimeline()),m.previousNode=c}visitGroup(c,m){const b=[];let O=m.currentTimeline.currentTime;const $=c.options&&c.options.delay?tr(c.options.delay):0;c.steps.forEach(te=>{const se=m.createSubContext(c.options);$&&se.delayNextStep($),mr(this,te,se),O=Math.max(O,se.currentTimeline.currentTime),b.push(se.currentTimeline)}),b.forEach(te=>m.currentTimeline.mergeTimelineCollectedStyles(te)),m.transformIntoNewTimeline(O),m.previousNode=c}_visitTiming(c,m){if(c.dynamic){const b=c.strValue;return gi(m.params?Ir(b,m.params,m.errors):b,m.errors)}return{duration:c.duration,delay:c.delay,easing:c.easing}}visitAnimate(c,m){const b=m.currentAnimateTimings=this._visitTiming(c.timings,m),O=m.currentTimeline;b.delay&&(m.incrementTime(b.delay),O.snapshotCurrentStyles());const $=c.style;5==$.type?this.visitKeyframes($,m):(m.incrementTime(b.duration),this.visitStyle($,m),O.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=c}visitStyle(c,m){const b=m.currentTimeline,O=m.currentAnimateTimings;!O&&b.getCurrentStyleProperties().length&&b.forwardFrame();const $=O&&O.easing||c.easing;c.isEmptyStep?b.applyEmptyStep($):b.setStyles(c.styles,$,m.errors,m.options),m.previousNode=c}visitKeyframes(c,m){const b=m.currentAnimateTimings,O=m.currentTimeline.duration,$=b.duration,se=m.createSubContext().currentTimeline;se.easing=b.easing,c.styles.forEach(_e=>{se.forwardTime((_e.offset||0)*$),se.setStyles(_e.styles,_e.easing,m.errors,m.options),se.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(se),m.transformIntoNewTimeline(O+$),m.previousNode=c}visitQuery(c,m){const b=m.currentTimeline.currentTime,O=c.options||{},$=O.delay?tr(O.delay):0;$&&(6===m.previousNode.type||0==b&&m.currentTimeline.getCurrentStyleProperties().length)&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=$n);let te=b;const se=m.invokeQuery(c.selector,c.originalSelector,c.limit,c.includeSelf,!!O.optional,m.errors);m.currentQueryTotal=se.length;let _e=null;se.forEach((qe,Et)=>{m.currentQueryIndex=Et;const Lt=m.createSubContext(c.options,qe);$&&Lt.delayNextStep($),qe===m.element&&(_e=Lt.currentTimeline),mr(this,c.animation,Lt),Lt.currentTimeline.applyStylesToKeyframe(),te=Math.max(te,Lt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(te),_e&&(m.currentTimeline.mergeTimelineCollectedStyles(_e),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=c}visitStagger(c,m){const b=m.parentContext,O=m.currentTimeline,$=c.timings,te=Math.abs($.duration),se=te*(m.currentQueryTotal-1);let _e=te*m.currentQueryIndex;switch($.duration<0?"reverse":$.easing){case"reverse":_e=se-_e;break;case"full":_e=b.currentStaggerTime}const Et=m.currentTimeline;_e&&Et.delayNextStep(_e);const Lt=Et.currentTime;mr(this,c.animation,m),m.previousNode=c,b.currentStaggerTime=O.currentTime-Lt+(O.startTime-b.currentTimeline.startTime)}}const $n={};class es{constructor(c,m,b,O,$,te,se,_e){this._driver=c,this.element=m,this.subInstructions=b,this._enterClassName=O,this._leaveClassName=$,this.errors=te,this.timelines=se,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$n,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_e||new Ss(this._driver,m,0),se.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(c,m){if(!c)return;const b=c;let O=this.options;null!=b.duration&&(O.duration=tr(b.duration)),null!=b.delay&&(O.delay=tr(b.delay));const $=b.params;if($){let te=O.params;te||(te=this.options.params={}),Object.keys($).forEach(se=>{(!m||!te.hasOwnProperty(se))&&(te[se]=Ir($[se],te,this.errors))})}}_copyOptions(){const c={};if(this.options){const m=this.options.params;if(m){const b=c.params={};Object.keys(m).forEach(O=>{b[O]=m[O]})}}return c}createSubContext(c=null,m,b){const O=m||this.element,$=new es(this._driver,O,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(O,b||0));return $.previousNode=this.previousNode,$.currentAnimateTimings=this.currentAnimateTimings,$.options=this._copyOptions(),$.updateOptions(c),$.currentQueryIndex=this.currentQueryIndex,$.currentQueryTotal=this.currentQueryTotal,$.parentContext=this,this.subContextCount++,$}transformIntoNewTimeline(c){return this.previousNode=$n,this.currentTimeline=this.currentTimeline.fork(this.element,c),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(c,m,b){const O={duration:null!=m?m:c.duration,delay:this.currentTimeline.currentTime+(null!=b?b:0)+c.delay,easing:""},$=new si(this._driver,c.element,c.keyframes,c.preStyleProps,c.postStyleProps,O,c.stretchStartingKeyframe);return this.timelines.push($),O}incrementTime(c){this.currentTimeline.forwardTime(this.currentTimeline.duration+c)}delayNextStep(c){c>0&&this.currentTimeline.delayNextStep(c)}invokeQuery(c,m,b,O,$,te){let se=[];if(O&&se.push(this.element),c.length>0){c=(c=c.replace(ht,"."+this._enterClassName)).replace(zt,"."+this._leaveClassName);let qe=this._driver.query(this.element,c,1!=b);0!==b&&(qe=b<0?qe.slice(qe.length+b,qe.length):qe.slice(0,b)),se.push(...qe)}return!$&&0==se.length&&te.push(function _t(_){return new z.vHH(3014,at)}()),se}}class Ss{constructor(c,m,b,O){this._driver=c,this.element=m,this.startTime=b,this._elementTimelineStylesLookup=O,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(c){const m=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||m?(this.forwardTime(this.currentTime+c),m&&this.snapshotCurrentStyles()):this.startTime+=c}fork(c,m){return this.applyStylesToKeyframe(),new Ss(this._driver,c,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(c){this.applyStylesToKeyframe(),this.duration=c,this._loadKeyframe()}_updateStyle(c,m){this._localTimelineStyles[c]=m,this._globalTimelineStyles[c]=m,this._styleSummary[c]={time:this.currentTime,value:m}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(c){c&&(this._previousKeyframe.easing=c),Object.keys(this._globalTimelineStyles).forEach(m=>{this._backFill[m]=this._globalTimelineStyles[m]||De.l3,this._currentKeyframe[m]=De.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(c,m,b,O){m&&(this._previousKeyframe.easing=m);const $=O&&O.params||{},te=function Ms(_,c){const m={};let b;return _.forEach(O=>{"*"===O?(b=b||Object.keys(c),b.forEach($=>{m[$]=De.l3})):Re(O,!1,m)}),m}(c,this._globalTimelineStyles);Object.keys(te).forEach(se=>{const _e=Ir(te[se],$,b);this._pendingStyles[se]=_e,this._localTimelineStyles.hasOwnProperty(se)||(this._backFill[se]=this._globalTimelineStyles.hasOwnProperty(se)?this._globalTimelineStyles[se]:De.l3),this._updateStyle(se,_e)})}applyStylesToKeyframe(){const c=this._pendingStyles,m=Object.keys(c);0!=m.length&&(this._pendingStyles={},m.forEach(b=>{this._currentKeyframe[b]=c[b]}),Object.keys(this._localTimelineStyles).forEach(b=>{this._currentKeyframe.hasOwnProperty(b)||(this._currentKeyframe[b]=this._localTimelineStyles[b])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(c=>{const m=this._localTimelineStyles[c];this._pendingStyles[c]=m,this._updateStyle(c,m)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const c=[];for(let m in this._currentKeyframe)c.push(m);return c}mergeTimelineCollectedStyles(c){Object.keys(c._styleSummary).forEach(m=>{const b=this._styleSummary[m],O=c._styleSummary[m];(!b||O.time>b.time)&&this._updateStyle(m,O.value)})}buildKeyframes(){this.applyStylesToKeyframe();const c=new Set,m=new Set,b=1===this._keyframes.size&&0===this.duration;let O=[];this._keyframes.forEach((se,_e)=>{const qe=Re(se,!0);Object.keys(qe).forEach(Et=>{const Lt=qe[Et];Lt==De.k1?c.add(Et):Lt==De.l3&&m.add(Et)}),b||(qe.offset=_e/this.duration),O.push(qe)});const $=c.size?mi(c.values()):[],te=m.size?mi(m.values()):[];if(b){const se=O[0],_e=be(se);se.offset=0,_e.offset=1,O=[se,_e]}return js(this.element,O,$,te,this.duration,this.startTime,this.easing,!1)}}class si extends Ss{constructor(c,m,b,O,$,te,se=!1){super(c,m,te.delay),this.keyframes=b,this.preStyleProps=O,this.postStyleProps=$,this._stretchStartingKeyframe=se,this.timings={duration:te.duration,delay:te.delay,easing:te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let c=this.keyframes,{delay:m,duration:b,easing:O}=this.timings;if(this._stretchStartingKeyframe&&m){const $=[],te=b+m,se=m/te,_e=Re(c[0],!1);_e.offset=0,$.push(_e);const qe=Re(c[0],!1);qe.offset=eo(se),$.push(qe);const Et=c.length-1;for(let Lt=1;Lt<=Et;Lt++){let tn=Re(c[Lt],!1);tn.offset=eo((m+tn.offset*b)/te),$.push(tn)}b=te,m=0,O="",c=$}return js(this.element,c,this.preStyleProps,this.postStyleProps,b,m,O,!0)}}function eo(_,c=3){const m=Math.pow(10,c-1);return Math.round(_*m)/m}class xs{}class oi extends xs{normalizePropertyName(c,m){return Pt(c)}normalizeStyleValue(c,m,b,O){let $="";const te=b.toString().trim();if(Hs[m]&&0!==b&&"0"!==b)if("number"==typeof b)$="px";else{const se=b.match(/^[+-]?[\d\.]+([a-z]*)$/);se&&0==se[1].length&&O.push(function oe(_,c){return new z.vHH(3005,at)}())}return te+$}}const Hs=(()=>function ts(_){const c={};return _.forEach(m=>c[m]=!0),c}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cs(_,c,m,b,O,$,te,se,_e,qe,Et,Lt,tn){return{type:0,element:_,triggerName:c,isRemovalTransition:O,fromState:m,fromStyles:$,toState:b,toStyles:te,timelines:se,queriedElements:_e,preStyleProps:qe,postStyleProps:Et,totalTime:Lt,errors:tn}}const $s={};class ds{constructor(c,m,b){this._triggerName=c,this.ast=m,this._stateStyles=b}match(c,m,b,O){return function aa(_,c,m,b,O){return _.some($=>$(c,m,b,O))}(this.ast.matchers,c,m,b,O)}buildStyles(c,m,b){const O=this._stateStyles["*"],$=this._stateStyles[c],te=O?O.buildStyles(m,b):{};return $?$.buildStyles(m,b):te}build(c,m,b,O,$,te,se,_e,qe,Et){const Lt=[],tn=this.ast.options&&this.ast.options.params||$s,Nt=this.buildStyles(b,se&&se.params||$s,Lt),bt=_e&&_e.params||$s,Rn=this.buildStyles(O,bt,Lt),qr=new Set,ar=new Map,Sr=new Map,jn="void"===O,jo={params:Object.assign(Object.assign({},tn),bt)},ms=Et?[]:Yn(c,m,this.ast.animation,$,te,Nt,Rn,jo,qe,Lt);let ui=0;if(ms.forEach(Ho=>{ui=Math.max(Ho.duration+Ho.delay,ui)}),Lt.length)return cs(m,this._triggerName,b,O,jn,Nt,Rn,[],[],ar,Sr,ui,Lt);ms.forEach(Ho=>{const hr=Ho.element,el=fr(ar,hr,{});Ho.preStyleProps.forEach($o=>el[$o]=!0);const Bi=fr(Sr,hr,{});Ho.postStyleProps.forEach($o=>Bi[$o]=!0),hr!==m&&qr.add(hr)});const fo=mi(qr.values());return cs(m,this._triggerName,b,O,jn,Nt,Rn,ms,fo,ar,Sr,ui)}}class bi{constructor(c,m,b){this.styles=c,this.defaultParams=m,this.normalizer=b}buildStyles(c,m){const b={},O=be(this.defaultParams);return Object.keys(c).forEach($=>{const te=c[$];null!=te&&(O[$]=te)}),this.styles.styles.forEach($=>{if("string"!=typeof $){const te=$;Object.keys(te).forEach(se=>{let _e=te[se];_e.length>1&&(_e=Ir(_e,O,m));const qe=this.normalizer.normalizePropertyName(se,m);_e=this.normalizer.normalizeStyleValue(se,qe,_e,m),b[qe]=_e})}}),b}}class hi{constructor(c,m,b){this.name=c,this.ast=m,this._normalizer=b,this.transitionFactories=[],this.states={},m.states.forEach(O=>{this.states[O.name]=new bi(O.style,O.options&&O.options.params||{},b)}),fi(this.states,"true","1"),fi(this.states,"false","0"),m.transitions.forEach(O=>{this.transitionFactories.push(new ds(c,O,this.states))}),this.fallbackTransition=function Wo(_,c,m){return new ds(_,{type:1,animation:{type:2,steps:[],options:null},matchers:[(te,se)=>!0],options:null,queryCount:0,depCount:0},c)}(c,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(c,m,b,O){return this.transitionFactories.find(te=>te.match(c,m,b,O))||null}matchStyles(c,m,b){return this.fallbackTransition.buildStyles(c,m,b)}}function fi(_,c,m){_.hasOwnProperty(c)?_.hasOwnProperty(m)||(_[m]=_[c]):_.hasOwnProperty(m)&&(_[c]=_[m])}const ns=new Oe;class Or{constructor(c,m,b){this.bodyNode=c,this._driver=m,this._normalizer=b,this._animations={},this._playersById={},this.players=[]}register(c,m){const b=[],$=Zr(this._driver,m,b,[]);if(b.length)throw function tt(_){return new z.vHH(3503,at)}();this._animations[c]=$}_buildPlayer(c,m,b){const O=c.element,$=fn(0,this._normalizer,0,c.keyframes,m,b);return this._driver.animate(O,$,c.duration,c.delay,c.easing,[],!0)}create(c,m,b={}){const O=[],$=this._animations[c];let te;const se=new Map;if($?(te=Yn(this._driver,m,$,yt,Ut,{},{},b,ns,O),te.forEach(Et=>{const Lt=fr(se,Et.element,{});Et.postStyleProps.forEach(tn=>Lt[tn]=null)})):(O.push(function Qe(){return new z.vHH(3300,at)}()),te=[]),O.length)throw function Te(_){return new z.vHH(3504,at)}();se.forEach((Et,Lt)=>{Object.keys(Et).forEach(tn=>{Et[tn]=this._driver.computeStyle(Lt,tn,De.l3)})});const qe=Wt(te.map(Et=>{const Lt=se.get(Et.element);return this._buildPlayer(Et,{},Lt)}));return this._playersById[c]=qe,qe.onDestroy(()=>this.destroy(c)),this.players.push(qe),qe}destroy(c){const m=this._getPlayer(c);m.destroy(),delete this._playersById[c];const b=this.players.indexOf(m);b>=0&&this.players.splice(b,1)}_getPlayer(c){const m=this._playersById[c];if(!m)throw function Ve(_){return new z.vHH(3301,at)}();return m}listen(c,m,b,O){const $=ci(m,"","","");return Cn(this._getPlayer(c),b,$,O),()=>{}}command(c,m,b,O){if("register"==b)return void this.register(c,O[0]);if("create"==b)return void this.create(c,m,O[0]||{});const $=this._getPlayer(c);switch(b){case"play":$.play();break;case"pause":$.pause();break;case"reset":$.reset();break;case"restart":$.restart();break;case"finish":$.finish();break;case"init":$.init();break;case"setPosition":$.setPosition(parseFloat(O[0]));break;case"destroy":this.destroy(c)}}}const vo="ng-animate-queued",Rs="ng-animate-disabled",ua=[],_r={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},k={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},q="__ng_removed";class P{constructor(c,m=""){this.namespaceId=m;const b=c&&c.hasOwnProperty("value");if(this.value=function nr(_){return null!=_?_:null}(b?c.value:c),b){const $=be(c);delete $.value,this.options=$}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(c){const m=c.params;if(m){const b=this.options.params;Object.keys(m).forEach(O=>{null==b[O]&&(b[O]=m[O])})}}}const Q="void",Ee=new P(Q);class rt{constructor(c,m,b){this.id=c,this.hostElement=m,this._engine=b,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+c,Pr(m,this._hostClassName)}listen(c,m,b,O){if(!this._triggers.hasOwnProperty(m))throw function vt(_,c){return new z.vHH(3302,at)}();if(null==b||0==b.length)throw function an(_){return new z.vHH(3303,at)}();if(!function Ln(_){return"start"==_||"done"==_}(b))throw function Nn(_,c){return new z.vHH(3400,at)}();const $=fr(this._elementListeners,c,[]),te={name:m,phase:b,callback:O};$.push(te);const se=fr(this._engine.statesByElement,c,{});return se.hasOwnProperty(m)||(Pr(c,jt),Pr(c,jt+"-"+m),se[m]=Ee),()=>{this._engine.afterFlush(()=>{const _e=$.indexOf(te);_e>=0&&$.splice(_e,1),this._triggers[m]||delete se[m]})}}register(c,m){return!this._triggers[c]&&(this._triggers[c]=m,!0)}_getTrigger(c){const m=this._triggers[c];if(!m)throw function Kn(_){return new z.vHH(3401,at)}();return m}trigger(c,m,b,O=!0){const $=this._getTrigger(m),te=new Qt(this.id,m,c);let se=this._engine.statesByElement.get(c);se||(Pr(c,jt),Pr(c,jt+"-"+m),this._engine.statesByElement.set(c,se={}));let _e=se[m];const qe=new P(b,this.id);if(!(b&&b.hasOwnProperty("value"))&&_e&&qe.absorbOptions(_e.options),se[m]=qe,_e||(_e=Ee),qe.value!==Q&&_e.value===qe.value){if(!function Eo(_,c){const m=Object.keys(_),b=Object.keys(c);if(m.length!=b.length)return!1;for(let O=0;O<m.length;O++){const $=m[O];if(!c.hasOwnProperty($)||_[$]!==c[$])return!1}return!0}(_e.params,qe.params)){const bt=[],Rn=$.matchStyles(_e.value,_e.params,bt),qr=$.matchStyles(qe.value,qe.params,bt);bt.length?this._engine.reportError(bt):this._engine.afterFlush(()=>{zn(c,Rn),sn(c,qr)})}return}const tn=fr(this._engine.playersByElement,c,[]);tn.forEach(bt=>{bt.namespaceId==this.id&&bt.triggerName==m&&bt.queued&&bt.destroy()});let wn=$.matchTransition(_e.value,qe.value,c,qe.params),Nt=!1;if(!wn){if(!O)return;wn=$.fallbackTransition,Nt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:m,transition:wn,fromState:_e,toState:qe,player:te,isFallbackTransition:Nt}),Nt||(Pr(c,vo),te.onStart(()=>{vi(c,vo)})),te.onDone(()=>{let bt=this.players.indexOf(te);bt>=0&&this.players.splice(bt,1);const Rn=this._engine.playersByElement.get(c);if(Rn){let qr=Rn.indexOf(te);qr>=0&&Rn.splice(qr,1)}}),this.players.push(te),tn.push(te),te}deregister(c){delete this._triggers[c],this._engine.statesByElement.forEach((m,b)=>{delete m[c]}),this._elementListeners.forEach((m,b)=>{this._elementListeners.set(b,m.filter(O=>O.name!=c))})}clearElementCache(c){this._engine.statesByElement.delete(c),this._elementListeners.delete(c);const m=this._engine.playersByElement.get(c);m&&(m.forEach(b=>b.destroy()),this._engine.playersByElement.delete(c))}_signalRemovalForInnerTriggers(c,m){const b=this._engine.driver.query(c,nn,!0);b.forEach(O=>{if(O[q])return;const $=this._engine.fetchNamespacesByElement(O);$.size?$.forEach(te=>te.triggerLeaveAnimation(O,m,!1,!0)):this.clearElementCache(O)}),this._engine.afterFlushAnimationsDone(()=>b.forEach(O=>this.clearElementCache(O)))}triggerLeaveAnimation(c,m,b,O){const $=this._engine.statesByElement.get(c),te=new Map;if($){const se=[];if(Object.keys($).forEach(_e=>{if(te.set(_e,$[_e].value),this._triggers[_e]){const qe=this.trigger(c,_e,Q,O);qe&&se.push(qe)}}),se.length)return this._engine.markElementAsRemoved(this.id,c,!0,m,te),b&&Wt(se).onDone(()=>this._engine.processLeaveNode(c)),!0}return!1}prepareLeaveAnimationListeners(c){const m=this._elementListeners.get(c),b=this._engine.statesByElement.get(c);if(m&&b){const O=new Set;m.forEach($=>{const te=$.name;if(O.has(te))return;O.add(te);const _e=this._triggers[te].fallbackTransition,qe=b[te]||Ee,Et=new P(Q),Lt=new Qt(this.id,te,c);this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:te,transition:_e,fromState:qe,toState:Et,player:Lt,isFallbackTransition:!0})})}}removeNode(c,m){const b=this._engine;if(c.childElementCount&&this._signalRemovalForInnerTriggers(c,m),this.triggerLeaveAnimation(c,m,!0))return;let O=!1;if(b.totalAnimations){const $=b.players.length?b.playersByQueriedElement.get(c):[];if($&&$.length)O=!0;else{let te=c;for(;te=te.parentNode;)if(b.statesByElement.get(te)){O=!0;break}}}if(this.prepareLeaveAnimationListeners(c),O)b.markElementAsRemoved(this.id,c,!1,m);else{const $=c[q];(!$||$===_r)&&(b.afterFlush(()=>this.clearElementCache(c)),b.destroyInnerAnimations(c),b._onRemovalComplete(c,m))}}insertNode(c,m){Pr(c,this._hostClassName)}drainQueuedTransitions(c){const m=[];return this._queue.forEach(b=>{const O=b.player;if(O.destroyed)return;const $=b.element,te=this._elementListeners.get($);te&&te.forEach(se=>{if(se.name==b.triggerName){const _e=ci($,b.triggerName,b.fromState.value,b.toState.value);_e._data=c,Cn(b.player,se.phase,_e,se.callback)}}),O.markedForDestroy?this._engine.afterFlush(()=>{O.destroy()}):m.push(b)}),this._queue=[],m.sort((b,O)=>{const $=b.transition.ast.depCount,te=O.transition.ast.depCount;return 0==$||0==te?$-te:this._engine.driver.containsElement(b.element,O.element)?1:-1})}destroy(c){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,c)}elementContainsData(c){let m=!1;return this._elementListeners.has(c)&&(m=!0),m=!!this._queue.find(b=>b.element===c)||m,m}}class ot{constructor(c,m,b){this.bodyNode=c,this.driver=m,this._normalizer=b,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(O,$)=>{}}_onRemovalComplete(c,m){this.onRemovalComplete(c,m)}get queuedPlayers(){const c=[];return this._namespaceList.forEach(m=>{m.players.forEach(b=>{b.queued&&c.push(b)})}),c}createNamespace(c,m){const b=new rt(c,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(b,m):(this.newHostElements.set(m,b),this.collectEnterElement(m)),this._namespaceLookup[c]=b}_balanceNamespaceList(c,m){const b=this._namespaceList,O=this.namespacesByHostElement,$=b.length-1;if($>=0){let te=!1;if(void 0!==this.driver.getParentElement){let se=this.driver.getParentElement(m);for(;se;){const _e=O.get(se);if(_e){const qe=b.indexOf(_e);b.splice(qe+1,0,c),te=!0;break}se=this.driver.getParentElement(se)}}else for(let se=$;se>=0;se--)if(this.driver.containsElement(b[se].hostElement,m)){b.splice(se+1,0,c),te=!0;break}te||b.unshift(c)}else b.push(c);return O.set(m,c),c}register(c,m){let b=this._namespaceLookup[c];return b||(b=this.createNamespace(c,m)),b}registerTrigger(c,m,b){let O=this._namespaceLookup[c];O&&O.register(m,b)&&this.totalAnimations++}destroy(c,m){if(!c)return;const b=this._fetchNamespace(c);this.afterFlush(()=>{this.namespacesByHostElement.delete(b.hostElement),delete this._namespaceLookup[c];const O=this._namespaceList.indexOf(b);O>=0&&this._namespaceList.splice(O,1)}),this.afterFlushAnimationsDone(()=>b.destroy(m))}_fetchNamespace(c){return this._namespaceLookup[c]}fetchNamespacesByElement(c){const m=new Set,b=this.statesByElement.get(c);if(b){const O=Object.keys(b);for(let $=0;$<O.length;$++){const te=b[O[$]].namespaceId;if(te){const se=this._fetchNamespace(te);se&&m.add(se)}}}return m}trigger(c,m,b,O){if(In(m)){const $=this._fetchNamespace(c);if($)return $.trigger(m,b,O),!0}return!1}insertNode(c,m,b,O){if(!In(m))return;const $=m[q];if($&&$.setForRemoval){$.setForRemoval=!1,$.setForMove=!0;const te=this.collectedLeaveElements.indexOf(m);te>=0&&this.collectedLeaveElements.splice(te,1)}if(c){const te=this._fetchNamespace(c);te&&te.insertNode(m,b)}O&&this.collectEnterElement(m)}collectEnterElement(c){this.collectedEnterElements.push(c)}markElementAsDisabled(c,m){m?this.disabledNodes.has(c)||(this.disabledNodes.add(c),Pr(c,Rs)):this.disabledNodes.has(c)&&(this.disabledNodes.delete(c),vi(c,Rs))}removeNode(c,m,b,O){if(In(m)){const $=c?this._fetchNamespace(c):null;if($?$.removeNode(m,O):this.markElementAsRemoved(c,m,!1,O),b){const te=this.namespacesByHostElement.get(m);te&&te.id!==c&&te.removeNode(m,O)}}else this._onRemovalComplete(m,O)}markElementAsRemoved(c,m,b,O,$){this.collectedLeaveElements.push(m),m[q]={namespaceId:c,setForRemoval:O,hasAnimation:b,removedBeforeQueried:!1,previousTriggersValues:$}}listen(c,m,b,O,$){return In(m)?this._fetchNamespace(c).listen(m,b,O,$):()=>{}}_buildInstruction(c,m,b,O,$){return c.transition.build(this.driver,c.element,c.fromState.value,c.toState.value,b,O,c.fromState.options,c.toState.options,m,$)}destroyInnerAnimations(c){let m=this.driver.query(c,nn,!0);m.forEach(b=>this.destroyActiveAnimationsForElement(b)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(c,rn,!0),m.forEach(b=>this.finishActiveQueriedAnimationOnElement(b)))}destroyActiveAnimationsForElement(c){const m=this.playersByElement.get(c);m&&m.forEach(b=>{b.queued?b.markedForDestroy=!0:b.destroy()})}finishActiveQueriedAnimationOnElement(c){const m=this.playersByQueriedElement.get(c);m&&m.forEach(b=>b.finish())}whenRenderingDone(){return new Promise(c=>{if(this.players.length)return Wt(this.players).onDone(()=>c());c()})}processLeaveNode(c){var m;const b=c[q];if(b&&b.setForRemoval){if(c[q]=_r,b.namespaceId){this.destroyInnerAnimations(c);const O=this._fetchNamespace(b.namespaceId);O&&O.clearElementCache(c)}this._onRemovalComplete(c,b.setForRemoval)}(null===(m=c.classList)||void 0===m?void 0:m.contains(Rs))&&this.markElementAsDisabled(c,!1),this.driver.query(c,".ng-animate-disabled",!0).forEach(O=>{this.markElementAsDisabled(O,!1)})}flush(c=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((b,O)=>this._balanceNamespaceList(b,O)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let b=0;b<this.collectedEnterElements.length;b++)Pr(this.collectedEnterElements[b],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const b=[];try{m=this._flushAnimations(b,c)}finally{for(let O=0;O<b.length;O++)b[O]()}}else for(let b=0;b<this.collectedLeaveElements.length;b++)this.processLeaveNode(this.collectedLeaveElements[b]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(b=>b()),this._flushFns=[],this._whenQuietFns.length){const b=this._whenQuietFns;this._whenQuietFns=[],m.length?Wt(m).onDone(()=>{b.forEach(O=>O())}):b.forEach(O=>O())}}reportError(c){throw function Wn(_){return new z.vHH(3402,at)}()}_flushAnimations(c,m){const b=new Oe,O=[],$=new Map,te=[],se=new Map,_e=new Map,qe=new Map,Et=new Set;this.disabledNodes.forEach(Gt=>{Et.add(Gt);const bn=this.driver.query(Gt,".ng-animate-queued",!0);for(let On=0;On<bn.length;On++)Et.add(bn[On])});const Lt=this.bodyNode,tn=Array.from(this.statesByElement.keys()),wn=Dr(tn,this.collectedEnterElements),Nt=new Map;let bt=0;wn.forEach((Gt,bn)=>{const On=yt+bt++;Nt.set(bn,On),Gt.forEach(Er=>Pr(Er,On))});const Rn=[],qr=new Set,ar=new Set;for(let Gt=0;Gt<this.collectedLeaveElements.length;Gt++){const bn=this.collectedLeaveElements[Gt],On=bn[q];On&&On.setForRemoval&&(Rn.push(bn),qr.add(bn),On.hasAnimation?this.driver.query(bn,".ng-star-inserted",!0).forEach(Er=>qr.add(Er)):ar.add(bn))}const Sr=new Map,jn=Dr(tn,Array.from(qr));jn.forEach((Gt,bn)=>{const On=Ut+bt++;Sr.set(bn,On),Gt.forEach(Er=>Pr(Er,On))}),c.push(()=>{wn.forEach((Gt,bn)=>{const On=Nt.get(bn);Gt.forEach(Er=>vi(Er,On))}),jn.forEach((Gt,bn)=>{const On=Sr.get(bn);Gt.forEach(Er=>vi(Er,On))}),Rn.forEach(Gt=>{this.processLeaveNode(Gt)})});const jo=[],ms=[];for(let Gt=this._namespaceList.length-1;Gt>=0;Gt--)this._namespaceList[Gt].drainQueuedTransitions(m).forEach(On=>{const Er=On.player,ys=On.element;if(jo.push(Er),this.collectedEnterElements.length){const po=ys[q];if(po&&po.setForMove){if(po.previousTriggersValues&&po.previousTriggersValues.has(On.triggerName)){const li=po.previousTriggersValues.get(On.triggerName),xa=this.statesByElement.get(On.element);xa&&xa[On.triggerName]&&(xa[On.triggerName].value=li)}return void Er.destroy()}}const Di=!Lt||!this.driver.containsElement(Lt,ys),Ls=Sr.get(ys),Ma=Nt.get(ys),xi=this._buildInstruction(On,b,Ma,Ls,Di);if(xi.errors&&xi.errors.length)return void ms.push(xi);if(Di)return Er.onStart(()=>zn(ys,xi.fromStyles)),Er.onDestroy(()=>sn(ys,xi.toStyles)),void O.push(Er);if(On.isFallbackTransition)return Er.onStart(()=>zn(ys,xi.fromStyles)),Er.onDestroy(()=>sn(ys,xi.toStyles)),void O.push(Er);const eu=[];xi.timelines.forEach(po=>{po.stretchStartingKeyframe=!0,this.disabledNodes.has(po.element)||eu.push(po)}),xi.timelines=eu,b.append(ys,xi.timelines),te.push({instruction:xi,player:Er,element:ys}),xi.queriedElements.forEach(po=>fr(se,po,[]).push(Er)),xi.preStyleProps.forEach((po,li)=>{const xa=Object.keys(po);if(xa.length){let go=_e.get(li);go||_e.set(li,go=new Set),xa.forEach(Ra=>go.add(Ra))}}),xi.postStyleProps.forEach((po,li)=>{const xa=Object.keys(po);let go=qe.get(li);go||qe.set(li,go=new Set),xa.forEach(Ra=>go.add(Ra))})});if(ms.length){const Gt=[];ms.forEach(bn=>{Gt.push(function ur(_,c){return new z.vHH(3505,at)}())}),jo.forEach(bn=>bn.destroy()),this.reportError(Gt)}const ui=new Map,fo=new Map;te.forEach(Gt=>{const bn=Gt.element;b.has(bn)&&(fo.set(bn,bn),this._beforeAnimationBuild(Gt.player.namespaceId,Gt.instruction,ui))}),O.forEach(Gt=>{const bn=Gt.element;this._getPreviousPlayers(bn,!1,Gt.namespaceId,Gt.triggerName,null).forEach(Er=>{fr(ui,bn,[]).push(Er),Er.destroy()})});const Ho=Rn.filter(Gt=>Mo(Gt,_e,qe)),hr=new Map;or(hr,this.driver,ar,qe,De.l3).forEach(Gt=>{Mo(Gt,_e,qe)&&Ho.push(Gt)});const Bi=new Map;wn.forEach((Gt,bn)=>{or(Bi,this.driver,new Set(Gt),_e,De.k1)}),Ho.forEach(Gt=>{const bn=hr.get(Gt),On=Bi.get(Gt);hr.set(Gt,Object.assign(Object.assign({},bn),On))});const $o=[],fu=[],pu={};te.forEach(Gt=>{const{element:bn,player:On,instruction:Er}=Gt;if(b.has(bn)){if(Et.has(bn))return On.onDestroy(()=>sn(bn,Er.toStyles)),On.disabled=!0,On.overrideTotalTime(Er.totalTime),void O.push(On);let ys=pu;if(fo.size>1){let Ls=bn;const Ma=[];for(;Ls=Ls.parentNode;){const xi=fo.get(Ls);if(xi){ys=xi;break}Ma.push(Ls)}Ma.forEach(xi=>fo.set(xi,ys))}const Di=this._buildAnimation(On.namespaceId,Er,ui,$,Bi,hr);if(On.setRealPlayer(Di),ys===pu)$o.push(On);else{const Ls=this.playersByElement.get(ys);Ls&&Ls.length&&(On.parentPlayer=Wt(Ls)),O.push(On)}}else zn(bn,Er.fromStyles),On.onDestroy(()=>sn(bn,Er.toStyles)),fu.push(On),Et.has(bn)&&O.push(On)}),fu.forEach(Gt=>{const bn=$.get(Gt.element);if(bn&&bn.length){const On=Wt(bn);Gt.setRealPlayer(On)}}),O.forEach(Gt=>{Gt.parentPlayer?Gt.syncPlayerEvents(Gt.parentPlayer):Gt.destroy()});for(let Gt=0;Gt<Rn.length;Gt++){const bn=Rn[Gt],On=bn[q];if(vi(bn,Ut),On&&On.hasAnimation)continue;let Er=[];if(se.size){let Di=se.get(bn);Di&&Di.length&&Er.push(...Di);let Ls=this.driver.query(bn,rn,!0);for(let Ma=0;Ma<Ls.length;Ma++){let xi=se.get(Ls[Ma]);xi&&xi.length&&Er.push(...xi)}}const ys=Er.filter(Di=>!Di.destroyed);ys.length?vn(this,bn,ys):this.processLeaveNode(bn)}return Rn.length=0,$o.forEach(Gt=>{this.players.push(Gt),Gt.onDone(()=>{Gt.destroy();const bn=this.players.indexOf(Gt);this.players.splice(bn,1)}),Gt.play()}),$o}elementContainsData(c,m){let b=!1;const O=m[q];return O&&O.setForRemoval&&(b=!0),this.playersByElement.has(m)&&(b=!0),this.playersByQueriedElement.has(m)&&(b=!0),this.statesByElement.has(m)&&(b=!0),this._fetchNamespace(c).elementContainsData(m)||b}afterFlush(c){this._flushFns.push(c)}afterFlushAnimationsDone(c){this._whenQuietFns.push(c)}_getPreviousPlayers(c,m,b,O,$){let te=[];if(m){const se=this.playersByQueriedElement.get(c);se&&(te=se)}else{const se=this.playersByElement.get(c);if(se){const _e=!$||$==Q;se.forEach(qe=>{qe.queued||!_e&&qe.triggerName!=O||te.push(qe)})}}return(b||O)&&(te=te.filter(se=>!(b&&b!=se.namespaceId||O&&O!=se.triggerName))),te}_beforeAnimationBuild(c,m,b){const $=m.element,te=m.isRemovalTransition?void 0:c,se=m.isRemovalTransition?void 0:m.triggerName;for(const _e of m.timelines){const qe=_e.element,Et=qe!==$,Lt=fr(b,qe,[]);this._getPreviousPlayers(qe,Et,te,se,m.toState).forEach(wn=>{const Nt=wn.getRealPlayer();Nt.beforeDestroy&&Nt.beforeDestroy(),wn.destroy(),Lt.push(wn)})}zn($,m.fromStyles)}_buildAnimation(c,m,b,O,$,te){const se=m.triggerName,_e=m.element,qe=[],Et=new Set,Lt=new Set,tn=m.timelines.map(Nt=>{const bt=Nt.element;Et.add(bt);const Rn=bt[q];if(Rn&&Rn.removedBeforeQueried)return new De.ZN(Nt.duration,Nt.delay);const qr=bt!==_e,ar=function Pi(_){const c=[];return vs(_,c),c}((b.get(bt)||ua).map(ui=>ui.getRealPlayer())).filter(ui=>!!ui.element&&ui.element===bt),Sr=$.get(bt),jn=te.get(bt),jo=fn(0,this._normalizer,0,Nt.keyframes,Sr,jn),ms=this._buildPlayer(Nt,jo,ar);if(Nt.subTimeline&&O&&Lt.add(bt),qr){const ui=new Qt(c,se,bt);ui.setRealPlayer(ms),qe.push(ui)}return ms});qe.forEach(Nt=>{fr(this.playersByQueriedElement,Nt.element,[]).push(Nt),Nt.onDone(()=>function Mn(_,c,m){let b;if(_ instanceof Map){if(b=_.get(c),b){if(b.length){const O=b.indexOf(m);b.splice(O,1)}0==b.length&&_.delete(c)}}else if(b=_[c],b){if(b.length){const O=b.indexOf(m);b.splice(O,1)}0==b.length&&delete _[c]}return b}(this.playersByQueriedElement,Nt.element,Nt))}),Et.forEach(Nt=>Pr(Nt,ir));const wn=Wt(tn);return wn.onDestroy(()=>{Et.forEach(Nt=>vi(Nt,ir)),sn(_e,m.toStyles)}),Lt.forEach(Nt=>{fr(O,Nt,[]).push(wn)}),wn}_buildPlayer(c,m,b){return m.length>0?this.driver.animate(c.element,m,c.duration,c.delay,c.easing,b):new De.ZN(c.duration,c.delay)}}class Qt{constructor(c,m,b){this.namespaceId=c,this.triggerName=m,this.element=b,this._player=new De.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(c){this._containsRealPlayer||(this._player=c,Object.keys(this._queuedCallbacks).forEach(m=>{this._queuedCallbacks[m].forEach(b=>Cn(c,m,void 0,b))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(c.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(c){this.totalTime=c}syncPlayerEvents(c){const m=this._player;m.triggerCallback&&c.onStart(()=>m.triggerCallback("start")),c.onDone(()=>this.finish()),c.onDestroy(()=>this.destroy())}_queueEvent(c,m){fr(this._queuedCallbacks,c,[]).push(m)}onDone(c){this.queued&&this._queueEvent("done",c),this._player.onDone(c)}onStart(c){this.queued&&this._queueEvent("start",c),this._player.onStart(c)}onDestroy(c){this.queued&&this._queueEvent("destroy",c),this._player.onDestroy(c)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(c){this.queued||this._player.setPosition(c)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(c){const m=this._player;m.triggerCallback&&m.triggerCallback(c)}}function In(_){return _&&1===_.nodeType}function Nr(_,c){const m=_.style.display;return _.style.display=null!=c?c:"none",m}function or(_,c,m,b,O){const $=[];m.forEach(_e=>$.push(Nr(_e)));const te=[];b.forEach((_e,qe)=>{const Et={};_e.forEach(Lt=>{const tn=Et[Lt]=c.computeStyle(qe,Lt,O);(!tn||0==tn.length)&&(qe[q]=k,te.push(qe))}),_.set(qe,Et)});let se=0;return m.forEach(_e=>Nr(_e,$[se++])),te}function Dr(_,c){const m=new Map;if(_.forEach(se=>m.set(se,[])),0==c.length)return m;const O=new Set(c),$=new Map;function te(se){if(!se)return 1;let _e=$.get(se);if(_e)return _e;const qe=se.parentNode;return _e=m.has(qe)?qe:O.has(qe)?1:te(qe),$.set(se,_e),_e}return c.forEach(se=>{const _e=te(se);1!==_e&&m.get(_e).push(se)}),m}function Pr(_,c){var m;null===(m=_.classList)||void 0===m||m.add(c)}function vi(_,c){var m;null===(m=_.classList)||void 0===m||m.remove(c)}function vn(_,c,m){Wt(m).onDone(()=>_.processLeaveNode(c))}function vs(_,c){for(let m=0;m<_.length;m++){const b=_[m];b instanceof De.ZE?vs(b.players,c):c.push(b)}}function Mo(_,c,m){const b=m.get(_);if(!b)return!1;let O=c.get(_);return O?b.forEach($=>O.add($)):c.set(_,b),m.delete(_),!0}class L{constructor(c,m,b){this.bodyNode=c,this._driver=m,this._normalizer=b,this._triggerCache={},this.onRemovalComplete=(O,$)=>{},this._transitionEngine=new ot(c,m,b),this._timelineEngine=new Or(c,m,b),this._transitionEngine.onRemovalComplete=(O,$)=>this.onRemovalComplete(O,$)}registerTrigger(c,m,b,O,$){const te=c+"-"+O;let se=this._triggerCache[te];if(!se){const _e=[],Et=Zr(this._driver,$,_e,[]);if(_e.length)throw function pn(_,c){return new z.vHH(3404,at)}();se=function _o(_,c,m){return new hi(_,c,m)}(O,Et,this._normalizer),this._triggerCache[te]=se}this._transitionEngine.registerTrigger(m,O,se)}register(c,m){this._transitionEngine.register(c,m)}destroy(c,m){this._transitionEngine.destroy(c,m)}onInsert(c,m,b,O){this._transitionEngine.insertNode(c,m,b,O)}onRemove(c,m,b,O){this._transitionEngine.removeNode(c,m,O||!1,b)}disableAnimations(c,m){this._transitionEngine.markElementAsDisabled(c,m)}process(c,m,b,O){if("@"==b.charAt(0)){const[$,te]=Kr(b);this._timelineEngine.command($,m,te,O)}else this._transitionEngine.trigger(c,m,b,O)}listen(c,m,b,O,$){if("@"==b.charAt(0)){const[te,se]=Kr(b);return this._timelineEngine.listen(te,m,se,$)}return this._transitionEngine.listen(c,m,b,O,$)}flush(c=-1){this._transitionEngine.flush(c)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let R=(()=>{class _{constructor(m,b,O){this._element=m,this._startStyles=b,this._endStyles=O,this._state=0;let $=_.initialStylesByElement.get(m);$||_.initialStylesByElement.set(m,$={}),this._initialStyles=$}start(){this._state<1&&(this._startStyles&&sn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sn(this._element,this._initialStyles),this._endStyles&&(sn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(_.initialStylesByElement.delete(this._element),this._startStyles&&(zn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zn(this._element,this._endStyles),this._endStyles=null),sn(this._element,this._initialStyles),this._state=3)}}return _.initialStylesByElement=new WeakMap,_})();function J(_){let c=null;const m=Object.keys(_);for(let b=0;b<m.length;b++){const O=m[b];ve(O)&&(c=c||{},c[O]=_[O])}return c}function ve(_){return"display"===_||"position"===_}class Tt{constructor(c,m,b,O){this.element=c,this.keyframes=m,this.options=b,this._specialStyles=O,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=b.duration,this._delay=b.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(c=>c()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const c=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,c,this.options),this._finalKeyframe=c.length?c[c.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(c,m,b){return c.animate(m,b)}onStart(c){this._onStartFns.push(c)}onDone(c){this._onDoneFns.push(c)}onDestroy(c){this._onDestroyFns.push(c)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(c=>c()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(c=>c()),this._onDestroyFns=[])}setPosition(c){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=c*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const c={};if(this.hasStarted()){const m=this._finalKeyframe;Object.keys(m).forEach(b=>{"offset"!=b&&(c[b]=this._finished?m[b]:Cr(this.element,b))})}this.currentSnapshot=c}triggerCallback(c){const m="start"==c?this._onStartFns:this._onDoneFns;m.forEach(b=>b()),m.length=0}}class pr{validateStyleProperty(c){return Un(c)}matchesElement(c,m){return!1}containsElement(c,m){return Fr(c,m)}getParentElement(c){return Vt(c)}query(c,m,b){return cr(c,m,b)}computeStyle(c,m,b){return window.getComputedStyle(c)[m]}animate(c,m,b,O,$,te=[]){const _e={duration:b,delay:O,fill:0==O?"both":"forwards"};$&&(_e.easing=$);const qe={},Et=te.filter(tn=>tn instanceof Tt);(function yn(_,c){return 0===_||0===c})(b,O)&&Et.forEach(tn=>{let wn=tn.currentSnapshot;Object.keys(wn).forEach(Nt=>qe[Nt]=wn[Nt])}),m=function xr(_,c,m){const b=Object.keys(m);if(b.length&&c.length){let $=c[0],te=[];if(b.forEach(se=>{$.hasOwnProperty(se)||te.push(se),$[se]=m[se]}),te.length)for(var O=1;O<c.length;O++){let se=c[O];te.forEach(function(_e){se[_e]=Cr(_,_e)})}}return c}(c,m=m.map(tn=>Re(tn,!1)),qe);const Lt=function N(_,c){let m=null,b=null;return Array.isArray(c)&&c.length?(m=J(c[0]),c.length>1&&(b=J(c[c.length-1]))):c&&(m=J(c)),m||b?new R(_,m,b):null}(c,m);return new Tt(c,m,_e,Lt)}}var Qn=U(9808);let ki=(()=>{class _ extends De._j{constructor(m,b){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(b.body,{id:"0",encapsulation:z.ifc.None,styles:[],data:{animation:[]}})}build(m){const b=this._nextAnimationId.toString();this._nextAnimationId++;const O=Array.isArray(m)?(0,De.vP)(m):m;return Os(this._renderer,null,b,"register",[O]),new hs(b,this._renderer)}}return _.\u0275fac=function(m){return new(m||_)(z.LFG(z.FYo),z.LFG(Qn.K0))},_.\u0275prov=z.Yz7({token:_,factory:_.\u0275fac}),_})();class hs extends De.LC{constructor(c,m){super(),this._id=c,this._renderer=m}create(c,m){return new Fi(this._id,c,m||{},this._renderer)}}class Fi{constructor(c,m,b,O){this.id=c,this.element=m,this._renderer=O,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",b)}_listen(c,m){return this._renderer.listen(this.element,`@@${this.id}:${c}`,m)}_command(c,...m){return Os(this._renderer,this.element,this.id,c,m)}onDone(c){this._listen("done",c)}onStart(c){this._listen("start",c)}onDestroy(c){this._listen("destroy",c)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(c){this._command("setPosition",c)}getPosition(){var c,m;return null!==(m=null===(c=this._renderer.engine.players[+this.id])||void 0===c?void 0:c.getPosition())&&void 0!==m?m:0}}function Os(_,c,m,b,O){return _.setProperty(c,`@@${m}:${b}`,O)}const Iu="@.disabled";let ju=(()=>{class _{constructor(m,b,O){this.delegate=m,this.engine=b,this._zone=O,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),b.onRemovalComplete=($,te)=>{const se=null==te?void 0:te.parentNode($);se&&te.removeChild(se,$)}}createRenderer(m,b){const $=this.delegate.createRenderer(m,b);if(!(m&&b&&b.data&&b.data.animation)){let Et=this._rendererCache.get($);return Et||(Et=new hl("",$,this.engine),this._rendererCache.set($,Et)),Et}const te=b.id,se=b.id+"-"+this._currentId;this._currentId++,this.engine.register(se,m);const _e=Et=>{Array.isArray(Et)?Et.forEach(_e):this.engine.registerTrigger(te,se,m,Et.name,Et)};return b.data.animation.forEach(_e),new ro(this,se,$,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(m,b,O){m>=0&&m<this._microtaskId?this._zone.run(()=>b(O)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach($=>{const[te,se]=$;te(se)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([b,O]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return _.\u0275fac=function(m){return new(m||_)(z.LFG(z.FYo),z.LFG(L),z.LFG(z.R0b))},_.\u0275prov=z.Yz7({token:_,factory:_.\u0275fac}),_})();class hl{constructor(c,m,b){this.namespaceId=c,this.delegate=m,this.engine=b,this.destroyNode=this.delegate.destroyNode?O=>m.destroyNode(O):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(c,m){return this.delegate.createElement(c,m)}createComment(c){return this.delegate.createComment(c)}createText(c){return this.delegate.createText(c)}appendChild(c,m){this.delegate.appendChild(c,m),this.engine.onInsert(this.namespaceId,m,c,!1)}insertBefore(c,m,b,O=!0){this.delegate.insertBefore(c,m,b),this.engine.onInsert(this.namespaceId,m,c,O)}removeChild(c,m,b){this.engine.onRemove(this.namespaceId,m,this.delegate,b)}selectRootElement(c,m){return this.delegate.selectRootElement(c,m)}parentNode(c){return this.delegate.parentNode(c)}nextSibling(c){return this.delegate.nextSibling(c)}setAttribute(c,m,b,O){this.delegate.setAttribute(c,m,b,O)}removeAttribute(c,m,b){this.delegate.removeAttribute(c,m,b)}addClass(c,m){this.delegate.addClass(c,m)}removeClass(c,m){this.delegate.removeClass(c,m)}setStyle(c,m,b,O){this.delegate.setStyle(c,m,b,O)}removeStyle(c,m,b){this.delegate.removeStyle(c,m,b)}setProperty(c,m,b){"@"==m.charAt(0)&&m==Iu?this.disableAnimations(c,!!b):this.delegate.setProperty(c,m,b)}setValue(c,m){this.delegate.setValue(c,m)}listen(c,m,b){return this.delegate.listen(c,m,b)}disableAnimations(c,m){this.engine.disableAnimations(c,m)}}class ro extends hl{constructor(c,m,b,O){super(m,b,O),this.factory=c,this.namespaceId=m}setProperty(c,m,b){"@"==m.charAt(0)?"."==m.charAt(1)&&m==Iu?this.disableAnimations(c,b=void 0===b||!!b):this.engine.process(this.namespaceId,c,m.substr(1),b):this.delegate.setProperty(c,m,b)}listen(c,m,b){if("@"==m.charAt(0)){const O=function Si(_){switch(_){case"body":return document.body;case"document":return document;case"window":return window;default:return _}}(c);let $=m.substr(1),te="";return"@"!=$.charAt(0)&&([$,te]=function fs(_){const c=_.indexOf(".");return[_.substring(0,c),_.substr(c+1)]}($)),this.engine.listen(this.namespaceId,O,$,te,se=>{this.factory.scheduleListenerCallback(se._data||-1,b,se)})}return this.delegate.listen(c,m,b)}}let ba=(()=>{class _ extends L{constructor(m,b,O){super(m.body,b,O)}ngOnDestroy(){this.flush()}}return _.\u0275fac=function(m){return new(m||_)(z.LFG(Qn.K0),z.LFG(Ae),z.LFG(xs))},_.\u0275prov=z.Yz7({token:_,factory:_.\u0275fac}),_})();const qo=new z.OlP("AnimationModuleType"),Na=[{provide:De._j,useClass:ki},{provide:xs,useFactory:function xo(){return new oi}},{provide:L,useClass:ba},{provide:z.FYo,useFactory:function ss(_,c,m){return new ju(_,c,m)},deps:[g.se,L,z.R0b]}],Jr=[{provide:Ae,useFactory:()=>new pr},{provide:qo,useValue:"BrowserAnimations"},...Na],nu=[{provide:Ae,useClass:we},{provide:qo,useValue:"NoopAnimations"},...Na];let Pa=(()=>{class _{static withConfig(m){return{ngModule:_,providers:m.disableAnimations?nu:Jr}}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_}),_.\u0275inj=z.cJS({providers:Jr,imports:[g.b2]}),_})();var Cu=U(2382),Ko=U(2011),Fa=U(7566),Ia=U(1205);const bo_firebaseConfig={apiKey:"AIzaSyAYJUt_Yu9v1f2tyepgIAgzPL0vwToCVos",authDomain:"clinicaonlinearchillaezequiel.firebaseapp.com",projectId:"clinicaonlinearchillaezequiel",storageBucket:"clinicaonlinearchillaezequiel.appspot.com",messagingSenderId:"293380705955",appId:"1:293380705955:web:af409a28aeabf38b09f916"};var La=U(8306),Ro=U(9646),Es=U(8996),ru=U(4986),la=U(4482),Du=U(5403),os=U(4004),No=U(3900),kr=U(5813),Va=U(3942),Ua=U(5861),Ba=U(9681),Gs=U(2090),Hu=U(4859);const ja="firebasestorage.googleapis.com",Po="storageBucket";class En extends Gs.ZR{constructor(c,m){super(Ca(c),`Firebase Storage: ${m} (${Ca(c)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,En.prototype)}_codeEquals(c){return Ca(c)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(c){this.customData.serverResponse=c,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ca(_){return"storage/"+_}function ca(){return new En("unknown","An unknown error occurred, please check the error payload for server response.")}function Tu(){return new En("canceled","User canceled the upload/download.")}function Zo(){return new En("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Io(_){return new En("invalid-argument",_)}function $a(){return new En("app-deleted","The Firebase app was deleted.")}function da(_){return new En("invalid-root-operation","The operation '"+_+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ws(_,c){return new En("invalid-format","String does not match format '"+_+"': "+c)}function Xr(_){throw new En("internal-error","Internal error: "+_)}class ai{constructor(c,m){this.bucket=c,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const c=encodeURIComponent;return"/b/"+c(this.bucket)+"/o/"+c(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(c,m){let b;try{b=ai.makeFromUrl(c,m)}catch(O){return new ai(c,"")}if(""===b.path)return b;throw function Ns(_){return new En("invalid-default-bucket","Invalid default bucket '"+_+"'.")}(c)}static makeFromUrl(c,m){let b=null;const O="([A-Za-z0-9.\\-_]+)",se=new RegExp("^gs://"+O+"(/(.*))?$","i");function qe(jn){jn.path_=decodeURIComponent(jn.path)}const Lt=m.replace(/[.]/g,"\\."),Sr=[{regex:se,indices:{bucket:1,path:3},postModify:function $(jn){"/"===jn.path.charAt(jn.path.length-1)&&(jn.path_=jn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Lt}/v[A-Za-z0-9_]+/b/${O}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:qe},{regex:new RegExp(`^https?://${m===ja?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${O}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:qe}];for(let jn=0;jn<Sr.length;jn++){const jo=Sr[jn],ms=jo.regex.exec(c);if(ms){let fo=ms[jo.indices.path];fo||(fo=""),b=new ai(ms[jo.indices.bucket],fo),jo.postModify(b);break}}if(null==b)throw function Ha(_){return new En("invalid-url","Invalid URL '"+_+"'.")}(c);return b}}class Co{constructor(c){this.promise_=Promise.reject(c)}getPromise(){return this.promise_}cancel(c=!1){}}function Yo(_){return"string"==typeof _||_ instanceof String}function Do(_){return St()&&_ instanceof Blob}function St(){return"undefined"!=typeof Blob}function jr(_,c,m,b){if(b<c)throw Io(`Invalid value for '${_}'. Expected ${c} or greater.`);if(b>m)throw Io(`Invalid value for '${_}'. Expected ${m} or less.`)}function T(_,c,m){let b=c;return null==m&&(b=`https://${c}`),`${m}://${b}/v0${_}`}function C(_){const c=encodeURIComponent;let m="?";for(const b in _)_.hasOwnProperty(b)&&(m=m+(c(b)+"=")+c(_[b])+"&");return m=m.slice(0,-1),m}var E=(()=>{return(_=E||(E={}))[_.NO_ERROR=0]="NO_ERROR",_[_.NETWORK_ERROR=1]="NETWORK_ERROR",_[_.ABORT=2]="ABORT",E;var _})();class M{constructor(c,m,b,O,$,te,se,_e,qe,Et,Lt){this.url_=c,this.method_=m,this.headers_=b,this.body_=O,this.successCodes_=$,this.additionalRetryCodes_=te,this.callback_=se,this.errorCallback_=_e,this.timeout_=qe,this.progressCallback_=Et,this.connectionFactory_=Lt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((tn,wn)=>{this.resolve_=tn,this.reject_=wn,this.start_()})}start_(){const m=(b,O)=>{const $=this.resolve_,te=this.reject_,se=O.connection;if(O.wasSuccessCode)try{const _e=this.callback_(se,se.getResponse());!function Li(_){return void 0!==_}(_e)?$():$(_e)}catch(_e){te(_e)}else if(null!==se){const _e=ca();_e.serverResponse=se.getErrorText(),te(this.errorCallback_?this.errorCallback_(se,_e):_e)}else te(O.canceled?this.appDelete_?$a():Tu():function Da(){return new En("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?m(0,new V(!1,null,!0)):this.backoffId_=function Ta(_,c,m){let b=1,O=null,$=null,te=!1,se=0;function _e(){return 2===se}let qe=!1;function Et(...Rn){qe||(qe=!0,c.apply(null,Rn))}function Lt(Rn){O=setTimeout(()=>{O=null,_(wn,_e())},Rn)}function tn(){$&&clearTimeout($)}function wn(Rn,...qr){if(qe)return void tn();if(Rn)return tn(),void Et.call(null,Rn,...qr);if(_e()||te)return tn(),void Et.call(null,Rn,...qr);let Sr;b<64&&(b*=2),1===se?(se=2,Sr=0):Sr=1e3*(b+Math.random()),Lt(Sr)}let Nt=!1;function bt(Rn){Nt||(Nt=!0,tn(),!qe&&(null!==O?(Rn||(se=2),clearTimeout(O),Lt(0)):Rn||(se=1)))}return Lt(0),$=setTimeout(()=>{te=!0,bt(!0)},m),bt}((b,O)=>{if(O)return void b(!1,new V(!1,null,!0));const $=this.connectionFactory_();this.pendingConnection_=$;const te=se=>{null!==this.progressCallback_&&this.progressCallback_(se.loaded,se.lengthComputable?se.total:-1)};null!==this.progressCallback_&&$.addUploadProgressListener(te),$.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&$.removeUploadProgressListener(te),this.pendingConnection_=null;const se=$.getErrorCode()===E.NO_ERROR,_e=$.getStatus();if(!se||this.isRetryStatusCode_(_e)){const Et=$.getErrorCode()===E.ABORT;return void b(!1,new V(!1,null,Et))}const qe=-1!==this.successCodes_.indexOf(_e);b(!0,new V(qe,$))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(c){this.canceled_=!0,this.appDelete_=c||!1,null!==this.backoffId_&&function Au(_){_(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(c){const m=c>=500&&c<600,O=-1!==[408,429].indexOf(c),$=-1!==this.additionalRetryCodes_.indexOf(c);return m||O||$}}class V{constructor(c,m,b){this.wasSuccessCode=c,this.connection=m,this.canceled=!!b}}function ln(..._){const c=function Bn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==c){const m=new c;for(let b=0;b<_.length;b++)m.append(_[b]);return m.getBlob()}if(St())return new Blob(_);throw new En("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ps{constructor(c,m){this.data=c,this.contentType=m||null}}function Vo(_,c){switch(_){case Tr.RAW:return new Ps(Ga(c));case Tr.BASE64:case Tr.BASE64URL:return new Ps(ha(_,c));case Tr.DATA_URL:return new Ps(function Vn(_){const c=new Qo(_);return c.base64?ha(Tr.BASE64,c.rest):function Yr(_){let c;try{c=decodeURIComponent(_)}catch(m){throw Ws(Tr.DATA_URL,"Malformed data URL.")}return Ga(c)}(c.rest)}(c),function Aa(_){return new Qo(_).contentType}(c))}throw ca()}function Ga(_){const c=[];for(let m=0;m<_.length;m++){let b=_.charCodeAt(m);b<=127?c.push(b):b<=2047?c.push(192|b>>6,128|63&b):55296==(64512&b)?m<_.length-1&&56320==(64512&_.charCodeAt(m+1))?(b=65536|(1023&b)<<10|1023&_.charCodeAt(++m),c.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|63&b)):c.push(239,191,189):56320==(64512&b)?c.push(239,191,189):c.push(224|b>>12,128|b>>6&63,128|63&b)}return new Uint8Array(c)}function ha(_,c){switch(_){case Tr.BASE64:{const O=-1!==c.indexOf("-"),$=-1!==c.indexOf("_");if(O||$)throw Ws(_,"Invalid character '"+(O?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const O=-1!==c.indexOf("+"),$=-1!==c.indexOf("/");if(O||$)throw Ws(_,"Invalid character '"+(O?"+":"/")+"' found: is it base64 encoded?");c=c.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function vr(_){return atob(_)}(c)}catch(O){throw Ws(_,"Invalid character found")}const b=new Uint8Array(m.length);for(let O=0;O<m.length;O++)b[O]=m.charCodeAt(O);return b}class Qo{constructor(c){this.base64=!1,this.contentType=null;const m=c.match(/^data:([^,]+)?,/);if(null===m)throw Ws(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const b=m[1]||null;null!=b&&(this.base64=function za(_,c){return _.length>=c.length&&_.substring(_.length-c.length)===c}(b,";base64"),this.contentType=this.base64?b.substring(0,b.length-7):b),this.rest=c.substring(c.indexOf(",")+1)}}class Ar{constructor(c,m){let b=0,O="";Do(c)?(this.data_=c,b=c.size,O=c.type):c instanceof ArrayBuffer?(m?this.data_=new Uint8Array(c):(this.data_=new Uint8Array(c.byteLength),this.data_.set(new Uint8Array(c))),b=this.data_.length):c instanceof Uint8Array&&(m?this.data_=c:(this.data_=new Uint8Array(c.length),this.data_.set(c)),b=c.length),this.size_=b,this.type_=O}size(){return this.size_}type(){return this.type_}slice(c,m){if(Do(this.data_)){const O=function gr(_,c,m){return _.webkitSlice?_.webkitSlice(c,m):_.mozSlice?_.mozSlice(c,m):_.slice?_.slice(c,m):null}(this.data_,c,m);return null===O?null:new Ar(O)}{const b=new Uint8Array(this.data_.buffer,c,m-c);return new Ar(b,!0)}}static getBlob(...c){if(St()){const m=c.map(b=>b instanceof Ar?b.data_:b);return new Ar(ln.apply(null,m))}{const m=c.map(te=>Yo(te)?Vo(Tr.RAW,te).data:te.data_);let b=0;m.forEach(te=>{b+=te.byteLength});const O=new Uint8Array(b);let $=0;return m.forEach(te=>{for(let se=0;se<te.length;se++)O[$++]=te[se]}),new Ar(O,!0)}}uploadData(){return this.data_}}function Tn(_){let c;try{c=JSON.parse(_)}catch(m){return null}return function Lo(_){return"object"==typeof _&&!Array.isArray(_)}(c)?c:null}function rc(_){const c=_.lastIndexOf("/",_.length-2);return-1===c?_:_.slice(c+1)}function Gu(_,c){return c}class Pn{constructor(c,m,b,O){this.server=c,this.local=m||c,this.writable=!!b,this.xform=O||Gu}}let Su=null;function fa(){if(Su)return Su;const _=[];_.push(new Pn("bucket")),_.push(new Pn("generation")),_.push(new Pn("metageneration")),_.push(new Pn("name","fullPath",!0));const m=new Pn("name");m.xform=function c($,te){return function us(_){return!Yo(_)||_.length<2?_:rc(_)}(te)},_.push(m);const O=new Pn("size");return O.xform=function b($,te){return void 0!==te?Number(te):te},_.push(O),_.push(new Pn("timeCreated")),_.push(new Pn("updated")),_.push(new Pn("md5Hash",null,!0)),_.push(new Pn("cacheControl",null,!0)),_.push(new Pn("contentDisposition",null,!0)),_.push(new Pn("contentEncoding",null,!0)),_.push(new Pn("contentLanguage",null,!0)),_.push(new Pn("contentType",null,!0)),_.push(new Pn("metadata","customMetadata",!0)),Su=_,Su}function Ui(_,c,m){const b=Tn(c);return null===b?null:function Vi(_,c,m){const b={type:"file"},O=m.length;for(let $=0;$<O;$++){const te=m[$];b[te.local]=te.xform(b,c[te.server])}return function Mu(_,c){Object.defineProperty(_,"ref",{get:function m(){const $=new ai(_.bucket,_.fullPath);return c._makeStorageReference($)}})}(b,_),b}(_,b,m)}function Qr(_,c){const m={},b=c.length;for(let O=0;O<b;O++){const $=c[O];$.writable&&(m[$.server]=_[$.local])}return JSON.stringify(m)}const pa="prefixes";class lo{constructor(c,m,b,O){this.url=c,this.method=m,this.handler=b,this.timeout=O,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ei(_){if(!_)throw ca()}function Is(_,c){return function m(b,O){const $=Ui(_,O,c);return Ei(null!==$),$}}function Ft(_){return function c(m,b){let O;return O=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function $u(){return new En("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function as(){return new En("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function oo(_){return new En("quota-exceeded","Quota for bucket '"+_+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(_.bucket):403===m.getStatus()?function ao(_){return new En("unauthorized","User does not have permission to access '"+_+"'.")}(_.path):b,O.serverResponse=b.serverResponse,O}}function co(_){const c=Ft(_);return function m(b,O){let $=c(b,O);return 404===b.getStatus()&&($=function so(_){return new En("object-not-found","Object '"+_+"' does not exist.")}(_.path)),$.serverResponse=O.serverResponse,$}}function su(_,c,m){const O=T(c.fullServerUrl(),_.host,_._protocol),te=_.maxOperationRetryTime,se=new lo(O,"GET",Is(_,m),te);return se.errorHandler=co(c),se}function Wa(_,c,m,b,O){const $={};$.prefix=c.isRoot?"":c.path+"/",m&&m.length>0&&($.delimiter=m),b&&($.pageToken=b),O&&($.maxResults=O);const se=T(c.bucketOnlyServerUrl(),_.host,_._protocol),qe=_.maxOperationRetryTime,Et=new lo(se,"GET",function Ao(_,c){return function m(b,O){const $=function ps(_,c,m){const b=Tn(m);return null===b?null:function bs(_,c,m){const b={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[pa])for(const O of m[pa]){const $=O.replace(/\/$/,""),te=_._makeStorageReference(new ai(c,$));b.prefixes.push(te)}if(m.items)for(const O of m.items){const $=_._makeStorageReference(new ai(c,O.name));b.items.push($)}return b}(_,c,b)}(_,c,O);return Ei(null!==$),$}}(_,c.bucket),qe);return Et.urlParams=$,Et.errorHandler=Ft(c),Et}function xu(_,c,m){const b=Object.assign({},m);return b.fullPath=_.path,b.size=c.size(),b.contentType||(b.contentType=function qs(_,c){return _&&_.contentType||c&&c.type()||"application/octet-stream"}(null,c)),b}class ou{constructor(c,m,b,O){this.current=c,this.total=m,this.finalized=!!b,this.metadata=O||null}}function ks(_,c){let m=null;try{m=_.getResponseHeader("X-Goog-Upload-Status")}catch(O){Ei(!1)}return Ei(!!m&&-1!==(c||["active"]).indexOf(m)),m}const Ml={STATE_CHANGED:"state_changed"},Mi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Za(_){switch(_){case"running":case"pausing":case"canceling":return Mi.RUNNING;case"paused":return Mi.PAUSED;case"success":return Mi.SUCCESS;case"canceled":return Mi.CANCELED;default:return Mi.ERROR}}class au{constructor(c,m,b){if(function Fo(_){return"function"==typeof _}(c)||null!=m||null!=b)this.next=c,this.error=null!=m?m:void 0,this.complete=null!=b?b:void 0;else{const $=c;this.next=$.next,this.error=$.error,this.complete=$.complete}}}function x(_){return(...c)=>{Promise.resolve().then(()=>_(...c))}}class ae extends class Y{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=E.NO_ERROR,this.sendPromise_=new Promise(c=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=E.ABORT,c()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=E.NETWORK_ERROR,c()}),this.xhr_.addEventListener("load",()=>{c()})})}send(c,m,b,O){if(this.sent_)throw Xr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,c,!0),void 0!==O)for(const $ in O)O.hasOwnProperty($)&&this.xhr_.setRequestHeader($,O[$].toString());return void 0!==b?this.xhr_.send(b):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(c){return-1}}getResponse(){if(!this.sent_)throw Xr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(c){return this.xhr_.getResponseHeader(c)}addUploadProgressListener(c){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",c)}removeUploadProgressListener(c){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",c)}}{initXhr(){this.xhr_.responseType="text"}}function Ue(){return new ae}class xn{constructor(c,m,b=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=c,this._blob=m,this._metadata=b,this._mappings=fa(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=O=>{this._request=void 0,this._chunkMultiplier=1,O._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=O,this._transition("error"))},this._metadataErrorHandler=O=>{this._request=void 0,O._codeEquals("canceled")?this.completeTransitions_():(this._error=O,this._transition("error"))},this._promise=new Promise((O,$)=>{this._resolve=O,this._reject=$,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const c=this._transferred;return m=>this._updateProgress(c+m)}_shouldDoResumable(c){return c.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(c){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,b])=>{switch(this._state){case"running":c(m,b);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((c,m)=>{const b=function Wu(_,c,m,b,O){const $=c.bucketOnlyServerUrl(),te=xu(c,b,O),se={name:te.fullPath},_e=T($,_.host,_._protocol),Et={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b.size()}`,"X-Goog-Upload-Header-Content-Type":te.contentType,"Content-Type":"application/json; charset=utf-8"},Lt=Qr(te,m),Nt=new lo(_e,"POST",function wn(bt){let Rn;ks(bt);try{Rn=bt.getResponseHeader("X-Goog-Upload-URL")}catch(qr){Ei(!1)}return Ei(Yo(Rn)),Rn},_.maxUploadRetryTime);return Nt.urlParams=se,Nt.headers=Et,Nt.body=Lt,Nt.errorHandler=Ft(c),Nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,Ue,c,m);this._request=O,O.getPromise().then($=>{this._request=void 0,this._uploadUrl=$,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const c=this._uploadUrl;this._resolveToken((m,b)=>{const O=function ga(_,c,m,b){const _e=new lo(m,"POST",function $(qe){const Et=ks(qe,["active","final"]);let Lt=null;try{Lt=qe.getResponseHeader("X-Goog-Upload-Size-Received")}catch(wn){Ei(!1)}Lt||Ei(!1);const tn=Number(Lt);return Ei(!isNaN(tn)),new ou(tn,b.size(),"final"===Et)},_.maxUploadRetryTime);return _e.headers={"X-Goog-Upload-Command":"query"},_e.errorHandler=Ft(c),_e}(this._ref.storage,this._ref._location,c,this._blob),$=this._ref.storage._makeRequest(O,Ue,m,b);this._request=$,$.getPromise().then(te=>{te=te,this._request=void 0,this._updateProgress(te.current),this._needToFetchStatus=!1,te.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const c=262144*this._chunkMultiplier,m=new ou(this._transferred,this._blob.size()),b=this._uploadUrl;this._resolveToken((O,$)=>{let te;try{te=function Ka(_,c,m,b,O,$,te,se){const _e=new ou(0,0);if(te?(_e.current=te.current,_e.total=te.total):(_e.current=0,_e.total=b.size()),b.size()!==_e.total)throw function zs(){return new En("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const qe=_e.total-_e.current;let Et=qe;O>0&&(Et=Math.min(Et,O));const Lt=_e.current,Nt={"X-Goog-Upload-Command":Et===qe?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_e.current}`},bt=b.slice(Lt,Lt+Et);if(null===bt)throw Zo();const Sr=new lo(m,"POST",function Rn(jn,jo){const ms=ks(jn,["active","final"]),ui=_e.current+Et,fo=b.size();let Ho;return Ho="final"===ms?Is(c,$)(jn,jo):null,new ou(ui,fo,"final"===ms,Ho)},c.maxUploadRetryTime);return Sr.headers=Nt,Sr.body=bt.uploadData(),Sr.progressCallback=se||null,Sr.errorHandler=Ft(_),Sr}(this._ref._location,this._ref.storage,b,this._blob,c,this._mappings,m,this._makeProgressCallback())}catch(_e){return this._error=_e,void this._transition("error")}const se=this._ref.storage._makeRequest(te,Ue,O,$);this._request=se,se.getPromise().then(_e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_e.current),_e.finalized?(this._metadata=_e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((c,m)=>{const b=su(this._ref.storage,this._ref._location,this._mappings),O=this._ref.storage._makeRequest(b,Ue,c,m);this._request=O,O.getPromise().then($=>{this._request=void 0,this._metadata=$,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((c,m)=>{const b=function Xo(_,c,m,b,O){const $=c.bucketOnlyServerUrl(),te={"X-Goog-Upload-Protocol":"multipart"},_e=function se(){let Sr="";for(let jn=0;jn<2;jn++)Sr+=Math.random().toString().slice(2);return Sr}();te["Content-Type"]="multipart/related; boundary="+_e;const qe=xu(c,b,O),Et=Qr(qe,m),wn=Ar.getBlob("--"+_e+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Et+"\r\n--"+_e+"\r\nContent-Type: "+qe.contentType+"\r\n\r\n",b,"\r\n--"+_e+"--");if(null===wn)throw Zo();const Nt={name:qe.fullPath},bt=T($,_.host,_._protocol),qr=_.maxUploadRetryTime,ar=new lo(bt,"POST",Is(_,m),qr);return ar.urlParams=Nt,ar.headers=te,ar.body=wn.uploadData(),ar.errorHandler=Ft(c),ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,Ue,c,m);this._request=O,O.getPromise().then($=>{this._request=void 0,this._metadata=$,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(c){const m=this._transferred;this._transferred=c,this._transferred!==m&&this._notifyObservers()}_transition(c){if(this._state!==c)switch(c){case"canceling":case"pausing":this._state=c,void 0!==this._request&&this._request.cancel();break;case"running":const m="paused"===this._state;this._state=c,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=c,this._notifyObservers();break;case"canceled":this._error=Tu(),this._state=c,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const c=Za(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:c,metadata:this._metadata,task:this,ref:this._ref}}on(c,m,b,O){const $=new au(m||void 0,b||void 0,O||void 0);return this._addObserver($),()=>{this._removeObserver($)}}then(c,m){return this._promise.then(c,m)}catch(c){return this.then(null,c)}_addObserver(c){this._observers.push(c),this._notifyObserver(c)}_removeObserver(c){const m=this._observers.indexOf(c);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let c=!0;switch(Za(this._state)){case Mi.SUCCESS:x(this._resolve.bind(null,this.snapshot))();break;case Mi.CANCELED:case Mi.ERROR:x(this._reject.bind(null,this._error))();break;default:c=!1}c&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(c){switch(Za(this._state)){case Mi.RUNNING:case Mi.PAUSED:c.next&&x(c.next.bind(c,this.snapshot))();break;case Mi.SUCCESS:c.complete&&x(c.complete.bind(c))();break;default:c.error&&x(c.error.bind(c,this._error))()}}resume(){const c="paused"===this._state||"pausing"===this._state;return c&&this._transition("running"),c}pause(){const c="running"===this._state;return c&&this._transition("pausing"),c}cancel(){const c="running"===this._state||"pausing"===this._state;return c&&this._transition("canceling"),c}}class Jn{constructor(c,m){this._service=c,this._location=m instanceof ai?m:ai.makeFromUrl(m,c.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(c,m){return new Jn(c,m)}get root(){const c=new ai(this._location.bucket,"");return this._newRef(this._service,c)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rc(this._location.path)}get storage(){return this._service}get parent(){const c=function Ii(_){if(0===_.length)return null;const c=_.lastIndexOf("/");return-1===c?"":_.slice(0,c)}(this._location.path);if(null===c)return null;const m=new ai(this._location.bucket,c);return new Jn(this._service,m)}_throwIfRoot(c){if(""===this._location.path)throw da(c)}}function Ks(_,c,m){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,Ua.Z)(function*(_,c,m){const O=yield Ya(_,{pageToken:m});c.prefixes.push(...O.prefixes),c.items.push(...O.items),null!=O.nextPageToken&&(yield Ks(_,c,O.nextPageToken))})).apply(this,arguments)}function Ya(_,c){null!=c&&"number"==typeof c.maxResults&&jr("options.maxResults",1,1e3,c.maxResults);const m=c||{},b=Wa(_.storage,_._location,"/",m.pageToken,m.maxResults);return _.storage.makeRequestWithTokens(b,Ue)}function xl(_){_._throwIfRoot("getDownloadURL");const c=function qa(_,c,m){const O=T(c.fullServerUrl(),_.host,_._protocol),te=_.maxOperationRetryTime,se=new lo(O,"GET",function Jo(_,c){return function m(b,O){const $=Ui(_,O,c);return Ei(null!==$),function To(_,c,m,b){const O=Tn(c);if(null===O||!Yo(O.downloadTokens))return null;const $=O.downloadTokens;if(0===$.length)return null;const te=encodeURIComponent;return $.split(",").map(qe=>{const Lt=_.fullPath;return T("/b/"+te(_.bucket)+"/o/"+te(Lt),m,b)+C({alt:"media",token:qe})})[0]}($,O,_.host,_._protocol)}}(_,m),te);return se.errorHandler=co(c),se}(_.storage,_._location,fa());return _.storage.makeRequestWithTokens(c,Ue).then(m=>{if(null===m)throw function uo(){return new En("no-download-url","The given file does not have any download URLs.")}();return m})}function Ru(_,c){const m=function iu(_,c){const m=c.split("/").filter(b=>b.length>0).join("/");return 0===_.length?m:_+"/"+m}(_._location.path,c),b=new ai(_._location.bucket,m);return new Jn(_.storage,b)}function lu(_,c){if(_ instanceof Ol){const m=_;if(null==m._bucket)throw function ws(){return new En("no-default-bucket","No default bucket found. Did you set the '"+Po+"' property when initializing the app?")}();const b=new Jn(m,m._bucket);return null!=c?lu(b,c):b}return void 0!==c?Ru(_,c):_}function Gi(_,c){if(c&&function qu(_){return/^[A-Za-z]+:\/\//.test(_)}(c)){if(_ instanceof Ol)return function Nc(_,c){return new Jn(_,c)}(_,c);throw Io("To use ref(service, url), the first argument must be a Storage instance.")}return lu(_,c)}function Rl(_,c){const m=null==c?void 0:c[Po];return null==m?null:ai.makeFromBucketSpec(m,_)}class Ol{constructor(c,m,b,O,$){this.app=c,this._authProvider=m,this._appCheckProvider=b,this._url=O,this._firebaseVersion=$,this._bucket=null,this._host=ja,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=O?ai.makeFromBucketSpec(O,this._host):Rl(this._host,this.app.options)}get host(){return this._host}set host(c){this._host=c,this._bucket=null!=this._url?ai.makeFromBucketSpec(this._url,c):Rl(c,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(c){jr("time",0,Number.POSITIVE_INFINITY,c),this._maxUploadRetryTime=c}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(c){jr("time",0,Number.POSITIVE_INFINITY,c),this._maxOperationRetryTime=c}_getAuthToken(){var c=this;return(0,Ua.Z)(function*(){if(c._overrideAuthToken)return c._overrideAuthToken;const m=c._authProvider.getImmediate({optional:!0});if(m){const b=yield m.getToken();if(null!==b)return b.accessToken}return null})()}_getAppCheckToken(){var c=this;return(0,Ua.Z)(function*(){const m=c._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(c=>c.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(c){return new Jn(this,c)}_makeRequest(c,m,b,O){if(this._deleted)return new Co($a());{const $=function qt(_,c,m,b,O,$){const te=C(_.urlParams),se=_.url+te,_e=Object.assign({},_.headers);return function ne(_,c){c&&(_["X-Firebase-GMPID"]=c)}(_e,c),function G(_,c){null!==c&&c.length>0&&(_.Authorization="Firebase "+c)}(_e,m),function W(_,c){_["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager")}(_e,$),function et(_,c){null!==c&&(_["X-Firebase-AppCheck"]=c)}(_e,b),new M(se,_.method,_e,_.body,_.successCodes,_.additionalRetryCodes,_.handler,_.errorHandler,_.timeout,_.progressCallback,O)}(c,this._appId,b,O,m,this._firebaseVersion);return this._requests.add($),$.getPromise().then(()=>this._requests.delete($),()=>this._requests.delete($)),$}}makeRequestWithTokens(c,m){var b=this;return(0,Ua.Z)(function*(){const[O,$]=yield Promise.all([b._getAuthToken(),b._getAppCheckToken()]);return b._makeRequest(c,m,O,$).getPromise()})()}}const Nl="@firebase/storage";function oc(_,c){return Gi(_=(0,Gs.m9)(_),c)}function Fc(_,{instanceIdentifier:c}){const m=_.getProvider("app").getImmediate(),b=_.getProvider("auth-internal"),O=_.getProvider("app-check-internal");return new Ol(m,b,O,c,Ba.SDK_VERSION)}!function pl(){(0,Ba._registerComponent)(new Hu.wA("storage",Fc,"PUBLIC").setMultipleInstances(!0)),(0,Ba.registerVersion)(Nl,"0.9.6",""),(0,Ba.registerVersion)(Nl,"0.9.6","esm2017")}();class gl{constructor(c,m,b){this._delegate=c,this.task=m,this.ref=b}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class So{constructor(c,m){this._delegate=c,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gl(this._delegate.snapshot,this,this._ref)}then(c,m){return this._delegate.then(b=>{if(c)return c(new gl(b,this,this._ref))},m)}on(c,m,b,O){let $;return m&&($="function"==typeof m?te=>m(new gl(te,this,this._ref)):{next:m.next?te=>m.next(new gl(te,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(c,$,b||void 0,O||void 0)}}class Xa{constructor(c,m){this._delegate=c,this._service=m}get prefixes(){return this._delegate.prefixes.map(c=>new Bo(c,this._service))}get items(){return this._delegate.items.map(c=>new Bo(c,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bo{constructor(c,m){this._delegate=c,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(c){const m=function Pl(_,c){return Ru(_,c)}(this._delegate,c);return new Bo(m,this.storage)}get root(){return new Bo(this._delegate.root,this.storage)}get parent(){const c=this._delegate.parent;return null==c?null:new Bo(c,this.storage)}put(c,m){return this._throwIfRoot("put"),new So(function cu(_,c,m){return function ma(_,c,m){return _._throwIfRoot("uploadBytesResumable"),new xn(_,new Ar(c),m)}(_=(0,Gs.m9)(_),c,m)}(this._delegate,c,m),this)}putString(c,m=Tr.RAW,b){this._throwIfRoot("putString");const O=Vo(m,c),$=Object.assign({},b);return null==$.contentType&&null!=O.contentType&&($.contentType=O.contentType),new So(new xn(this._delegate,new Ar(O.data,!0),$),this)}listAll(){return function du(_){return function dr(_){const c={prefixes:[],items:[]};return Ks(_,c).then(()=>c)}(_=(0,Gs.m9)(_))}(this._delegate).then(c=>new Xa(c,this.storage))}list(c){return function kc(_,c){return Ya(_=(0,Gs.m9)(_),c)}(this._delegate,c||void 0).then(m=>new Xa(m,this.storage))}getMetadata(){return function Ku(_){return function sc(_){_._throwIfRoot("getMetadata");const c=su(_.storage,_._location,fa());return _.storage.makeRequestWithTokens(c,Ue)}(_=(0,Gs.m9)(_))}(this._delegate)}updateMetadata(c){return function Pc(_,c){return function Qa(_,c){_._throwIfRoot("updateMetadata");const m=function ho(_,c,m,b){const $=T(c.fullServerUrl(),_.host,_._protocol),se=Qr(m,b),qe=_.maxOperationRetryTime,Et=new lo($,"PATCH",Is(_,b),qe);return Et.headers={"Content-Type":"application/json; charset=utf-8"},Et.body=se,Et.errorHandler=co(c),Et}(_.storage,_._location,c,fa());return _.storage.makeRequestWithTokens(m,Ue)}(_=(0,Gs.m9)(_),c)}(this._delegate,c)}getDownloadURL(){return function Ou(_){return xl(_=(0,Gs.m9)(_))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function hu(_){return function uu(_){_._throwIfRoot("deleteObject");const c=function ic(_,c){const b=T(c.fullServerUrl(),_.host,_._protocol),se=new lo(b,"DELETE",function te(_e,qe){},_.maxOperationRetryTime);return se.successCodes=[200,204],se.errorHandler=co(c),se}(_.storage,_._location);return _.storage.makeRequestWithTokens(c,Ue)}(_=(0,Gs.m9)(_))}(this._delegate)}_throwIfRoot(c){if(""===this._delegate._location.path)throw da(c)}}class uc{constructor(c,m){this.app=c,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(c){if(lc(c))throw Io("ref() expected a child path but got a URL, use refFromURL instead.");return new Bo(oc(this._delegate,c),this)}refFromURL(c){if(!lc(c))throw Io("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ai.makeFromUrl(c,this._delegate.host)}catch(m){throw Io("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bo(oc(this._delegate,c),this)}setMaxUploadRetryTime(c){this._delegate.maxUploadRetryTime=c}setMaxOperationRetryTime(c){this._delegate.maxOperationRetryTime=c}useEmulator(c,m,b={}){!function Ja(_,c,m,b={}){!function yh(_,c,m,b={}){_.host=`${c}:${m}`,_._protocol="http";const{mockUserToken:O}=b;O&&(_._overrideAuthToken="string"==typeof O?O:(0,Gs.Sg)(O,_.app.options.projectId))}(_,c,m,b)}(this._delegate,c,m,b)}}function lc(_){return/^[A-Za-z]+:\/\//.test(_)}function Yu(_,{instanceIdentifier:c}){const m=_.getProvider("app-compat").getImmediate(),b=_.getProvider("storage").getImmediate({identifier:c});return new uc(m,b)}!function Uc(_){const c={TaskState:Mi,TaskEvent:Ml,StringFormat:Tr,Storage:uc,Reference:Bo};_.INTERNAL.registerComponent(new Hu.wA("storage-compat",Yu,"PUBLIC").setServiceProps(c).setMultipleInstances(!0)),_.registerVersion("@firebase/storage-compat","0.1.14")}(Va.Z);var Md=U(440),Bc=U(127);function Ju(_){const c=function Qu(_){return new La.y(c=>{const m=te=>c.next(te);m(_.snapshot);const $=_.on("state_changed",m);return _.then(te=>{m(te),c.complete()},te=>{m(_.snapshot),(te=>{c.error(te)})(te)}),function(){$()}}).pipe(function Oo(_,c=ru.z){return(0,la.e)((m,b)=>{let O=null,$=null,te=null;const se=()=>{if(O){O.unsubscribe(),O=null;const qe=$;$=null,b.next(qe)}};function _e(){const qe=te+_,Et=c.now();if(Et<qe)return O=this.schedule(void 0,qe-Et),void b.add(O);se()}m.subscribe((0,Du.x)(b,qe=>{$=qe,te=c.now(),O||(O=c.schedule(_e,_),b.add(O))},()=>{se(),b.complete()},void 0,()=>{$=O=null}))})}(0))}(_);return{task:_,then:_.then.bind(_),catch:_.catch.bind(_),pause:_.pause.bind(_),cancel:_.cancel.bind(_),resume:_.resume.bind(_),snapshotChanges:()=>c,percentageChanges:()=>c.pipe((0,os.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function _a(_){return{getDownloadURL:()=>(0,Ro.of)(void 0).pipe(kr.fc,(0,No.w)(()=>_.getDownloadURL()),kr.iC),getMetadata:()=>(0,Ro.of)(void 0).pipe(kr.fc,(0,No.w)(()=>_.getMetadata()),kr.iC),delete:()=>(0,Es.D)(_.delete()),child:c=>_a(_.child(c)),updateMetadata:c=>(0,Es.D)(_.updateMetadata(c)),put:(c,m)=>Ju(_.put(c,m)),putString:(c,m,b)=>Ju(_.putString(c,m,b)),list:c=>(0,Es.D)(_.list(c)),listAll:()=>(0,Es.D)(_.listAll())}}const va=new z.OlP("angularfire2.storageBucket"),cc=new z.OlP("angularfire2.storage.maxUploadRetryTime"),Fs=new z.OlP("angularfire2.storage.maxOperationRetryTime"),Xu=new z.OlP("angularfire2.storage.use-emulator");let ml=(()=>{class _{constructor(m,b,O,$,te,se,_e,qe,Et,Lt){const tn=(0,Ko.on)(m,te,b);this.storage=(0,Ko.cc)(`${tn.name}.storage.${O}`,"AngularFireStorage",tn.name,()=>{const wn=te.runOutsideAngular(()=>tn.storage(O||void 0)),Nt=Et;return Nt&&wn.useEmulator(...Nt),_e&&wn.setMaxUploadRetryTime(_e),qe&&wn.setMaxOperationRetryTime(qe),wn},[_e,qe])}ref(m){return _a(this.storage.ref(m))}refFromURL(m){return _a(this.storage.refFromURL(m))}upload(m,b,O){return _a(this.storage.ref(m)).put(b,O)}}return _.\u0275fac=function(m){return new(m||_)(z.LFG(Ko.Dh),z.LFG(Ko.xv,8),z.LFG(va,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(kr.HU),z.LFG(cc,8),z.LFG(Fs,8),z.LFG(Xu,8),z.LFG(Md.nm,8))},_.\u0275prov=z.Yz7({token:_,factory:_.\u0275fac,providedIn:"any"}),_})(),jc=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_}),_.\u0275inj=z.cJS({}),_})(),Hc=(()=>{class _{constructor(){Bc.Z.registerVersion("angularfire",kr.q4.full,"gcs-compat")}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_}),_.\u0275inj=z.cJS({providers:[ml],imports:[jc]}),_})(),gs=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_}),_.\u0275inj=z.cJS({imports:[[Ko.hO.initializeApp(bo_firebaseConfig),Ia.ww,Fa.yb,Hc]]}),_})(),dc=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275mod=z.oAB({type:_,bootstrap:[pe]}),_.\u0275inj=z.cJS({providers:[],imports:[[g.b2,Pa,Fe,fe.Rh.forRoot(),Ce.ef,Cu.u5,gs]]}),_})();(0,z.G48)(),g.q6().bootstrapModule(dc).catch(_=>console.error(_))},5867:(kt,We,U)=>{U.d(We,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=U(9681);(0,g.registerVersion)("firebase","9.8.2","app")},127:(kt,We,U)=>{U.d(We,{Z:()=>g.Z});var g=U(3942);g.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(kt,We,U)=>{U.r(We);var g=U(5861),z=U(3942),ee=U(2090),Ce=U(9681),Me=U(655),Ne=U(1877),He=U(4859);const ut=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wt=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ye=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xt=new Ne.Yd("@firebase/auth");function Rt(y,...d){xt.logLevel<=Ne.in.ERROR&&xt.error(`Auth (${Ce.SDK_VERSION}): ${y}`,...d)}function oe(y,...d){throw st(y,...d)}function le(y,...d){return st(y,...d)}function $e(y,d,f){const I=Object.assign(Object.assign({},wt()),{[d]:f});return new ee.LL("auth","Firebase",I).create(d,{appName:y.name})}function ct(y,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&oe(y,"argument-error"),$e(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(y,...d){if("string"!=typeof y){const f=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(f,...I)}return Ye.create(y,...d)}function me(y,d,...f){if(!y)throw st(d,...f)}function ke(y){const d="INTERNAL ASSERTION FAILED: "+y;throw Rt(d),new Error(d)}function re(y,d){y||ke(d)}const ce=new Map;function de(y){re(y instanceof Function,"Expected a class definition");let d=ce.get(y);return d?(re(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,ce.set(y,d),d)}function _t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class pn{constructor(d,f){this.shortDelay=d,this.longDelay=f,re(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function Zt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mt()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,d){re(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class tt{static initialize(d,f,I){this.fetchImpl=d,f&&(this.headersImpl=f),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Te=new pn(3e4,6e4);function Ve(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function vt(y,d,f,I){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(y,d,f,I,B={}){return Nn(y,B,(0,g.Z)(function*(){let X={},Pe={};I&&("GET"===d?Pe=I:X={body:JSON.stringify(I)});const nt=(0,ee.xO)(Object.assign({key:y.config.apiKey},Pe)).slice(1),$t=yield y._getAdditionalHeaders();return $t["Content-Type"]="application/json",y.languageCode&&($t["X-Firebase-Locale"]=y.languageCode),tt.fetch()(ur(y,y.config.apiHost,f,nt),Object.assign({method:d,headers:$t,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Nn(y,d,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(y,d,f){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},Qe),d);try{const B=new lr(y),X=yield Promise.race([f(),B.promise]);B.clearNetworkTimeout();const Pe=yield X.json();if("needConfirmation"in Pe)throw Hn(y,"account-exists-with-different-credential",Pe);if(X.ok&&!("errorMessage"in Pe))return Pe;{const nt=X.ok?Pe.errorMessage:Pe.error.message,[$t,cn]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$t)throw Hn(y,"credential-already-in-use",Pe);if("EMAIL_EXISTS"===$t)throw Hn(y,"email-already-in-use",Pe);if("USER_DISABLED"===$t)throw Hn(y,"user-disabled",Pe);const gn=I[$t]||$t.toLowerCase().replace(/[_\s]+/g,"-");if(cn)throw $e(y,gn,cn);oe(y,gn)}}catch(B){if(B instanceof ee.ZR)throw B;oe(y,"network-request-failed")}})).apply(this,arguments)}function Wn(y,d,f,I){return wr.apply(this,arguments)}function wr(){return(wr=(0,g.Z)(function*(y,d,f,I,B={}){const X=yield vt(y,d,f,I,B);return"mfaPendingCredential"in X&&oe(y,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function ur(y,d,f,I){const B=`${d}${f}?${I}`;return y.config.emulator?on(y.config,B):`${y.config.apiScheme}://${B}`}class lr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,I)=>{this.timer=setTimeout(()=>I(le(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(y,d,f){const I={appName:y.name};f.email&&(I.email=f.email),f.phoneNumber&&(I.phoneNumber=f.phoneNumber);const B=le(y,d,I);return B.customData._tokenResponse=f,B}function fn(){return(fn=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Cn(y,d){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ci(y,d){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Kr(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Gr(){return(Gr=(0,g.Z)(function*(y,d=!1){const f=(0,ee.m9)(y),I=yield f.getIdToken(d),B=Yt(I);me(B&&B.exp&&B.auth_time&&B.iat,f.auth,"internal-error");const X="object"==typeof B.firebase?B.firebase:void 0,Pe=null==X?void 0:X.sign_in_provider;return{claims:B,token:I,authTime:Kr(Vt(B.auth_time)),issuedAtTime:Kr(Vt(B.iat)),expirationTime:Kr(Vt(B.exp)),signInProvider:Pe||null,signInSecondFactor:(null==X?void 0:X.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function Yt(y){const[d,f,I]=y.split(".");if(void 0===d||void 0===f||void 0===I)return Rt("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,ee.tV)(f);return B?JSON.parse(B):(Rt("Failed to decode base64 JWT payload"),null)}catch(B){return Rt("Caught error parsing JWT payload as JSON",B),null}}function rr(y,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(y,d,f=!1){if(f)return d;try{return yield d}catch(I){throw I instanceof ee.ZR&&Un(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}function Un({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Yi{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const B=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),I)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class Fr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(y){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(y){var d;const f=y.auth,I=yield y.getIdToken(),B=yield rr(y,ci(f,{idToken:I}));me(null==B?void 0:B.users.length,f,"internal-error");const X=B.users[0];y._notifyReloadListener(X);const Pe=(null===(d=X.providerUserInfo)||void 0===d?void 0:d.length)?ye(X.providerUserInfo):[],nt=pt(y.providerData,Pe),gn=!!y.isAnonymous&&!(y.email&&X.passwordHash||(null==nt?void 0:nt.length)),An={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:nt,metadata:new Fr(X.createdAt,X.lastLoginAt),isAnonymous:gn};Object.assign(y,An)})).apply(this,arguments)}function Ae(){return(Ae=(0,g.Z)(function*(y){const d=(0,ee.m9)(y);yield cr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function pt(y,d){return[...y.filter(I=>!d.some(B=>B.providerId===I.providerId)),...d]}function ye(y){return y.map(d=>{var{providerId:f}=d,I=(0,Me._T)(d,["providerId"]);return{providerId:f,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function yt(){return(yt=(0,g.Z)(function*(y,d){const f=yield Nn(y,{},(0,g.Z)(function*(){const I=(0,ee.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:B,apiKey:X}=y.config,Pe=ur(y,B,"/v1/token",`key=${X}`),nt=yield y._getAdditionalHeaders();return nt["Content-Type"]="application/x-www-form-urlencoded",tt.fetch()(Pe,{method:"POST",headers:nt,body:I})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){me(d.idToken,"internal-error"),me(void 0!==d.idToken,"internal-error"),me(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function en(y){const d=Yt(y);return me(d,"internal-error"),me(void 0!==d.exp,"internal-error"),me(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var I=this;return(0,g.Z)(function*(){return me(!I.accessToken||I.refreshToken,d,"user-token-expired"),f||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var I=this;return(0,g.Z)(function*(){const{accessToken:B,refreshToken:X,expiresIn:Pe}=yield function Le(y,d){return yt.apply(this,arguments)}(d,f);I.updateTokensAndExpiration(B,X,Number(Pe))})()}updateTokensAndExpiration(d,f,I){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,f){const{refreshToken:I,accessToken:B,expirationTime:X}=f,Pe=new Ut;return I&&(me("string"==typeof I,"internal-error",{appName:d}),Pe.refreshToken=I),B&&(me("string"==typeof B,"internal-error",{appName:d}),Pe.accessToken=B),X&&(me("number"==typeof X,"internal-error",{appName:d}),Pe.expirationTime=X),Pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return ke("not implemented")}}function jt(y,d){me("string"==typeof y||void 0===y,"internal-error",{appName:d})}class nn{constructor(d){var{uid:f,auth:I,stsTokenManager:B}=d,X=(0,Me._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=I,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new Fr(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,g.Z)(function*(){const I=yield rr(f,f.stsTokenManager.getToken(f.auth,d));return me(I,f.auth,"internal-error"),f.accessToken!==I&&(f.accessToken=I,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),I})()}getIdTokenResult(d){return function ti(y){return Gr.apply(this,arguments)}(this,d)}reload(){return function we(y){return Ae.apply(this,arguments)}(this)}_assign(d){this!==d&&(me(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new nn(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var I=this;return(0,g.Z)(function*(){let B=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),B=!0),f&&(yield cr(I)),yield I.auth._persistUserIfCurrent(I),B&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,g.Z)(function*(){const f=yield d.getIdToken();return yield rr(d,function Wt(y,d){return fn.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var I,B,X,Pe,nt,$t,cn,gn;const An=null!==(I=f.displayName)&&void 0!==I?I:void 0,zi=null!==(B=f.email)&&void 0!==B?B:void 0,ea=null!==(X=f.phoneNumber)&&void 0!==X?X:void 0,Ul=null!==(Pe=f.photoURL)&&void 0!==Pe?Pe:void 0,Rd=null!==(nt=f.tenantId)&&void 0!==nt?nt:void 0,Dh=null!==($t=f._redirectEventId)&&void 0!==$t?$t:void 0,_l=null!==(cn=f.createdAt)&&void 0!==cn?cn:void 0,qc=null!==(gn=f.lastLoginAt)&&void 0!==gn?gn:void 0,{uid:Kc,emailVerified:Th,isAnonymous:Zc,providerData:Od,stsTokenManager:Ah}=f;me(Kc&&Ah,d,"internal-error");const zf=Ut.fromJSON(this.name,Ah);me("string"==typeof Kc,d,"internal-error"),jt(An,d.name),jt(zi,d.name),me("boolean"==typeof Th,d,"internal-error"),me("boolean"==typeof Zc,d,"internal-error"),jt(ea,d.name),jt(Ul,d.name),jt(Rd,d.name),jt(Dh,d.name),jt(_l,d.name),jt(qc,d.name);const Nd=new nn({uid:Kc,auth:d,email:zi,emailVerified:Th,displayName:An,isAnonymous:Zc,photoURL:Ul,phoneNumber:ea,tenantId:Rd,stsTokenManager:zf,createdAt:_l,lastLoginAt:qc});return Od&&Array.isArray(Od)&&(Nd.providerData=Od.map(Wf=>Object.assign({},Wf))),Dh&&(Nd._redirectEventId=Dh),Nd}static _fromIdTokenResponse(d,f,I=!1){return(0,g.Z)(function*(){const B=new Ut;B.updateFromServerResponse(f);const X=new nn({uid:f.localId,auth:d,stsTokenManager:B,isAnonymous:I});return yield cr(X),X})()}}const rn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,I){var B=this;return(0,g.Z)(function*(){B.storage[f]=I})()}_get(f){var I=this;return(0,g.Z)(function*(){const B=I.storage[f];return void 0===B?null:B})()}_remove(f){var I=this;return(0,g.Z)(function*(){delete I.storage[f]})()}_addListener(f,I){}_removeListener(f,I){}}return y.type="NONE",y})();function tr(y,d,f){return`firebase:${y}:${d}:${f}`}class Lr{constructor(d,f,I){this.persistence=d,this.auth=f,this.userKey=I;const{config:B,name:X}=this.auth;this.fullUserKey=tr(this.userKey,B.apiKey,X),this.fullPersistenceKey=tr("persistence",B.apiKey,X),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?nn._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,g.Z)(function*(){if(f.persistence===d)return;const I=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,I?f.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,I="authUser"){return(0,g.Z)(function*(){if(!f.length)return new Lr(de(rn),d,I);const B=(yield Promise.all(f.map(function(){var cn=(0,g.Z)(function*(gn){if(yield gn._isAvailable())return gn});return function(gn){return cn.apply(this,arguments)}}()))).filter(cn=>cn);let X=B[0]||de(rn);const Pe=tr(I,d.config.apiKey,d.name);let nt=null;for(const cn of f)try{const gn=yield cn._get(Pe);if(gn){const An=nn._fromJSON(d,gn);cn!==X&&(nt=An),X=cn;break}}catch(gn){}const $t=B.filter(cn=>cn._shouldAllowMigration);return X._shouldAllowMigration&&$t.length?(X=$t[0],nt&&(yield X._set(Pe,nt.toJSON())),yield Promise.all(f.map(function(){var cn=(0,g.Z)(function*(gn){if(gn!==X)try{yield gn._remove(Pe)}catch(An){}});return function(gn){return cn.apply(this,arguments)}}())),new Lr(X,d,I)):new Lr(X,d,I)})()}}function gi(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Re(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ze(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Xt(d))return"Blackberry";if(sn(d))return"Webos";if(be(d))return"Safari";if((d.includes("chrome/")||ie(d))&&!d.includes("edge/"))return"Chrome";if(gt(d))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function ze(y=(0,ee.z$)()){return/firefox\//i.test(y)}function be(y=(0,ee.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ie(y=(0,ee.z$)()){return/crios\//i.test(y)}function Re(y=(0,ee.z$)()){return/iemobile/i.test(y)}function gt(y=(0,ee.z$)()){return/android/i.test(y)}function Xt(y=(0,ee.z$)()){return/blackberry/i.test(y)}function sn(y=(0,ee.z$)()){return/webos/i.test(y)}function zn(y=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(y)}function ni(y=(0,ee.z$)()){return zn(y)||gt(y)||sn(y)||Xt(y)||/windows phone/i.test(y)||Re(y)}function mi(y,d=[]){let f;switch(y){case"Browser":f=gi((0,ee.z$)());break;case"Worker":f=`${gi((0,ee.z$)())}-${y}`;break;default:f=y}const I=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${Ce.SDK_VERSION}/${I}`}class ri{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const I=X=>new Promise((Pe,nt)=>{try{Pe(d(X))}catch($t){nt($t)}});I.onAbort=f,this.queue.push(I);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,g.Z)(function*(){if(f.auth.currentUser===d)return;const I=[];try{for(const B of f.queue)yield B(d),B.onAbort&&I.push(B.onAbort)}catch(B){I.reverse();for(const X of I)try{X()}catch(Pe){}throw f.auth._errorFactory.create("login-blocked",{originalMessage:B.message})}})()}}class Pt{constructor(d,f,I){this.app=d,this.heartbeatServiceProvider=f,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yn(this),this.idTokenSubscription=new yn(this),this.beforeStateQueue=new ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(d,f){var I=this;return f&&(this._popupRedirectResolver=de(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var B,X;if(!I._deleted&&(I.persistenceManager=yield Lr.create(I,d),!I._deleted)){if(null===(B=I._popupRedirectResolver)||void 0===B?void 0:B._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(Pe){}yield I.initializeCurrentUser(f),I.lastNotifiedUid=(null===(X=I.currentUser)||void 0===X?void 0:X.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,g.Z)(function*(){var I;const B=yield f.assertedPersistence.getCurrentUser();let X=B,Pe=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const nt=null===(I=f.redirectUser)||void 0===I?void 0:I._redirectEventId,$t=null==X?void 0:X._redirectEventId,cn=yield f.tryRedirectSignIn(d);(!nt||nt===$t)&&(null==cn?void 0:cn.user)&&(X=cn.user,Pe=!0)}if(!X)return f.directlySetCurrentUser(null);if(!X._redirectEventId){if(Pe)try{yield f.beforeStateQueue.runMiddleware(X)}catch(nt){X=B,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(nt))}return X?f.reloadAndSetCurrentUserOrClear(X):f.directlySetCurrentUser(null)}return me(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===X._redirectEventId?f.directlySetCurrentUser(X):f.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(d){var f=this;return(0,g.Z)(function*(){let I=null;try{I=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(B){yield f._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,g.Z)(function*(){try{yield cr(d)}catch(I){if("auth/network-request-failed"!==I.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ft(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,g.Z)(function*(){const I=d?(0,ee.m9)(d):null;return I&&me(I.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(I&&I._clone(f))})()}_updateCurrentUser(d,f=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return d&&me(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),f||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(de(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ee.LL("auth","Firebase",d())}onAuthStateChanged(d,f,I){return this.registerStateListener(this.authStateSubscription,d,f,I)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,I){return this.registerStateListener(this.idTokenSubscription,d,f,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var I=this;return(0,g.Z)(function*(){const B=yield I.getOrInitRedirectPersistenceManager(f);return null===d?B.removeCurrentUser():B.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const I=d&&de(d)||f._popupRedirectResolver;me(I,f,"argument-error"),f.redirectPersistenceManager=yield Lr.create(f,[de(I._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,g.Z)(function*(){var I,B;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(I=f._currentUser)||void 0===I?void 0:I._redirectEventId)===d?f._currentUser:(null===(B=f.redirectUser)||void 0===B?void 0:B._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,g.Z)(function*(){if(d===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,I,B){if(this._deleted)return()=>{};const X="function"==typeof f?f:f.next.bind(f),Pe=this._isInitialized?Promise.resolve():this._initializationPromise;return me(Pe,this,"internal-error"),Pe.then(()=>X(this.currentUser)),"function"==typeof f?d.addObserver(f,I,B):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var f;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const B=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return B&&(I["X-Firebase-Client"]=B),I})()}}function Bt(y){return(0,ee.m9)(y)}class yn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ee.ne)(f=>this.observer=f)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mr(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function yi(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class Ri{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return ke("not implemented")}_getIdTokenResponse(d){return ke("not implemented")}_linkToIdToken(d,f){return ke("not implemented")}_getReauthenticationResolver(d){return ke("not implemented")}}function Rr(y,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:resetPassword",Ve(y,d))})).apply(this,arguments)}function Qi(y,d){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Hi(y,d){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:update",Ve(y,d))})).apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithPassword",Ve(y,d))})).apply(this,arguments)}function Ur(y,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:sendOobCode",Ve(y,d))})).apply(this,arguments)}function sr(y,d){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,d){return Ur(y,d)})).apply(this,arguments)}function ii(y,d){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,d){return Ur(y,d)})).apply(this,arguments)}function Oi(y,d){return As.apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,d){return Ur(y,d)})).apply(this,arguments)}function Js(y,d){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(y,d){return Ur(y,d)})).apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithEmailLink",Ve(y,d))})).apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithEmailLink",Ve(y,d))})).apply(this,arguments)}class Zn extends Ri{constructor(d,f,I,B=null){super("password",I),this._email=d,this._password=f,this._tenantId=B}static _fromEmailAndPassword(d,f){return new Zn(d,f,"password")}static _fromEmailAndCode(d,f,I=null){return new Zn(d,f,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function Wr(y,d){return Vr.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ls(y,d){return Xi.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:oe(d,"internal-error")}})()}_linkToIdToken(d,f){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return Qi(d,{idToken:f,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Xs(y,d){return oa.apply(this,arguments)}(d,{idToken:f,email:I._email,oobCode:I._password});default:oe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ni(y,d){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithIdp",Ve(y,d))})).apply(this,arguments)}class Ie extends Ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Ie(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):oe("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:B}=f,X=(0,Me._T)(f,["providerId","signInMethod"]);if(!I||!B)return null;const Pe=new Ie(I,B);return Pe.idToken=X.idToken||void 0,Pe.accessToken=X.accessToken||void 0,Pe.secret=X.secret,Pe.nonce=X.nonce,Pe.pendingToken=X.pendingToken||null,Pe}_getIdTokenResponse(d){return Ni(d,this.buildRequest())}_linkToIdToken(d,f){const I=this.buildRequest();return I.idToken=f,Ni(d,I)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ni(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,ee.xO)(f)}return d}}function Ze(y,d){return ht.apply(this,arguments)}function ht(){return(ht=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:sendVerificationCode",Ve(y,d))})).apply(this,arguments)}function zt(){return(zt=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ve(y,d))})).apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,d){const f=yield Wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ve(y,d));if(f.temporaryProof)throw Hn(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const $n={USER_NOT_FOUND:"user-not-found"};function Ss(){return(Ss=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ve(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),$n)})).apply(this,arguments)}class si extends Ri{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new si({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new si({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function Ot(y,d){return zt.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Yn(y,d){return Br.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function es(y,d){return Ss.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:I,verificationCode:B}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:I,code:B}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:I,phoneNumber:B,temporaryProof:X}=d;return I||f||B||X?new si({verificationId:f,verificationCode:I,phoneNumber:B,temporaryProof:X}):null}}class to{constructor(d){var f,I,B,X,Pe,nt;const $t=(0,ee.zd)((0,ee.pd)(d)),cn=null!==(f=$t.apiKey)&&void 0!==f?f:null,gn=null!==(I=$t.oobCode)&&void 0!==I?I:null,An=function eo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=$t.mode)&&void 0!==B?B:null);me(cn&&gn&&An,"argument-error"),this.apiKey=cn,this.operation=An,this.code=gn,this.continueUrl=null!==(X=$t.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(Pe=$t.languageCode)&&void 0!==Pe?Pe:null,this.tenantId=null!==(nt=$t.tenantId)&&void 0!==nt?nt:null}static parseLink(d){const f=function Ms(y){const d=(0,ee.zd)((0,ee.pd)(y)).link,f=d?(0,ee.zd)((0,ee.pd)(d)).deep_link_id:null,I=(0,ee.zd)((0,ee.pd)(y)).deep_link_id;return(I?(0,ee.zd)((0,ee.pd)(I)).link:null)||I||f||d||y}(d);try{return new to(f)}catch(I){return null}}}let yo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,I){return Zn._fromEmailAndPassword(f,I)}static credentialWithLink(f,I){const B=to.parseLink(I);return me(B,"argument-error"),Zn._fromEmailAndCode(f,B.code,B.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class oi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Hs extends oi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ts extends Hs{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return me("providerId"in f&&"signInMethod"in f,"argument-error"),Ie._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return me(d.idToken||d.accessToken,"argument-error"),Ie._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ts.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ts.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:I,oauthTokenSecret:B,pendingToken:X,nonce:Pe,providerId:nt}=d;if(!I&&!B&&!f&&!X||!nt)return null;try{return new ts(nt)._credential({idToken:f,accessToken:I,nonce:Pe,pendingToken:X})}catch($t){return null}}}let cs=(()=>{class y extends Hs{constructor(){super("facebook.com")}static credential(f){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(I){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),$s=(()=>{class y extends Hs{constructor(){super("google.com"),this.addScope("profile")}static credential(f,I){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:I,oauthAccessToken:B}=f;if(!I&&!B)return null;try{return y.credential(I,B)}catch(X){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ds=(()=>{class y extends Hs{constructor(){super("github.com")}static credential(f){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(I){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class bi extends Ri{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Ni(d,this.buildRequest())}_linkToIdToken(d,f){const I=this.buildRequest();return I.idToken=f,Ni(d,I)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Ni(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:B,pendingToken:X}=f;return I&&B&&X&&I===B?new bi(I,X):null}static _create(d,f){return new bi(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hi extends oi{constructor(d){me(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return hi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return hi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=bi.fromJSON(d);return me(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:I}=d;if(!f||!I)return null;try{return bi._create(I,f)}catch(B){return null}}}let Wo=(()=>{class y extends Hs{constructor(){super("twitter.com")}static credential(f,I){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:I,oauthTokenSecret:B}=f;if(!I||!B)return null;try{return y.credential(I,B)}catch(X){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function fi(y,d){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signUp",Ve(y,d))})).apply(this,arguments)}class Or{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,I,B=!1){return(0,g.Z)(function*(){const X=yield nn._fromIdTokenResponse(d,I,B),Pe=vo(I);return new Or({user:X,providerId:Pe,_tokenResponse:I,operationType:f})})()}static _forOperation(d,f,I){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const B=vo(I);return new Or({user:d,providerId:B,_tokenResponse:I,operationType:f})})()}}function vo(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Rs(){return(Rs=(0,g.Z)(function*(y){var d;const f=Bt(y);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new Or({user:f.currentUser,providerId:null,operationType:"signIn"});const I=yield fi(f,{returnSecureToken:!0}),B=yield Or._fromIdTokenResponse(f,"signIn",I,!0);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class rs extends ee.ZR{constructor(d,f,I,B){var X;super(f.code,f.message),this.operationType=I,this.user=B,Object.setPrototypeOf(this,rs.prototype),this.customData={appName:d.name,tenantId:null!==(X=d.tenantId)&&void 0!==X?X:void 0,_serverResponse:f.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,f,I,B){return new rs(d,f,I,B)}}function is(y,d,f,I){return("reauthenticate"===d?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?rs._fromErrorAndOperation(y,X,d,I):X})}function _i(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function _r(){return(_r=(0,g.Z)(function*(y,d){const f=(0,ee.m9)(y);yield P(!0,f,d);const{providerUserInfo:I}=yield Cn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),B=_i(I||[]);return f.providerData=f.providerData.filter(X=>B.has(X.providerId)),B.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function k(y,d){return q.apply(this,arguments)}function q(){return(q=(0,g.Z)(function*(y,d,f=!1){const I=yield rr(y,d._linkToIdToken(y.auth,yield y.getIdToken()),f);return Or._forOperation(y,"link",I)})).apply(this,arguments)}function P(y,d,f){return Q.apply(this,arguments)}function Q(){return(Q=(0,g.Z)(function*(y,d,f){yield cr(d);const B=!1===y?"provider-already-linked":"no-such-provider";me(_i(d.providerData).has(f)===y,d.auth,B)})).apply(this,arguments)}function Ee(y,d){return rt.apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(y,d,f=!1){const{auth:I}=y,B="reauthenticate";try{const X=yield rr(y,is(I,B,d,y),f);me(X.idToken,I,"internal-error");const Pe=Yt(X.idToken);me(Pe,I,"internal-error");const{sub:nt}=Pe;return me(y.uid===nt,I,"user-mismatch"),Or._forOperation(y,B,X)}catch(X){throw"auth/user-not-found"===(null==X?void 0:X.code)&&oe(I,"user-mismatch"),X}})).apply(this,arguments)}function ot(y,d){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(y,d,f=!1){const I="signIn",B=yield is(y,I,d),X=yield Or._fromIdTokenResponse(y,I,B);return f||(yield y._updateCurrentUser(X.user)),X})).apply(this,arguments)}function Mn(y,d){return nr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(y,d){return ot(Bt(y),d)})).apply(this,arguments)}function In(y,d){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,d){const f=(0,ee.m9)(y);return yield P(!1,f,d.providerId),k(f,d)})).apply(this,arguments)}function Nr(y,d){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(y,d){return Ee((0,ee.m9)(y),d)})).apply(this,arguments)}function Dr(y,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(y,d){return Wn(y,"POST","/v1/accounts:signInWithCustomToken",Ve(y,d))})).apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(y,d){const f=Bt(y),I=yield Dr(f,{token:d,returnSecureToken:!0}),B=yield Or._fromIdTokenResponse(f,"signIn",I);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class Pi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?vs._fromServerResponse(d,f):oe(d,"internal-error")}}class vs extends Pi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new vs(f)}}function Eo(y,d,f){var I;me((null===(I=f.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),me(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(me(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(me(f.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function L(){return(L=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y),B={requestType:"PASSWORD_RESET",email:d};f&&Eo(I,B,f),yield ii(I,B)})).apply(this,arguments)}function R(){return(R=(0,g.Z)(function*(y,d,f){yield Rr((0,ee.m9)(y),{oobCode:d,newPassword:f})})).apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(y,d){yield Hi((0,ee.m9)(y),{oobCode:d})})).apply(this,arguments)}function Tt(y,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(y,d){const f=(0,ee.m9)(y),I=yield Rr(f,{oobCode:d}),B=I.requestType;switch(me(B,f,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(I.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(I.mfaInfo,f,"internal-error");default:me(I.email,f,"internal-error")}let X=null;return I.mfaInfo&&(X=Pi._fromServerResponse(Bt(f),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:X},operation:B}})).apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(y,d){const{data:f}=yield Tt((0,ee.m9)(y),d);return f.email})).apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,d,f){const I=Bt(y),B=yield fi(I,{returnSecureToken:!0,email:d,password:f}),X=yield Or._fromIdTokenResponse(I,"signIn",B);return yield I._updateCurrentUser(X.user),X})).apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y),B={requestType:"EMAIL_SIGNIN",email:d};me(f.handleCodeInApp,I,"argument-error"),f&&Eo(I,B,f),yield Oi(I,B)})).apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y),B=yo.credentialWithLink(d,f||_t());return me(B._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Mn(I,B)})).apply(this,arguments)}function Si(y,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:createAuthUri",Ve(y,d))})).apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(y,d){const I={identifier:d,continueUri:Mt()?_t():"http://localhost"},{signinMethods:B}=yield Si((0,ee.m9)(y),I);return B||[]})).apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,d){const f=(0,ee.m9)(y),B={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&Eo(f.auth,B,d);const{email:X}=yield sr(f.auth,B);X!==y.email&&(yield y.reload())})).apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};f&&Eo(I.auth,X,f);const{email:Pe}=yield Js(I.auth,X);Pe!==y.email&&(yield y.reload())})).apply(this,arguments)}function nu(y,d){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,g.Z)(function*(y,d){return vt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(y,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const I=(0,ee.m9)(y),X={idToken:yield I.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},Pe=yield rr(I,nu(I.auth,X));I.displayName=Pe.displayName||null,I.photoURL=Pe.photoUrl||null;const nt=I.providerData.find(({providerId:$t})=>"password"===$t);nt&&(nt.displayName=I.displayName,nt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Pe)})).apply(this,arguments)}function Ia(y,d,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(y,d,f){const{auth:I}=y,X={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(X.email=d),f&&(X.password=f);const Pe=yield rr(y,Qi(I,X));yield y._updateTokensIfNecessary(Pe,!0)})).apply(this,arguments)}class Ro{constructor(d,f,I={}){this.isNewUser=d,this.providerId=f,this.profile=I}}class Es extends Ro{constructor(d,f,I,B){super(d,f,I),this.username=B}}class ru extends Ro{constructor(d,f){super(d,"facebook.com",f)}}class la extends Es{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Du extends Ro{constructor(d,f){super(d,"google.com",f)}}class Oo extends Es{constructor(d,f,I){super(d,"twitter.com",f,I)}}function os(y){const{user:d,_tokenResponse:f}=y;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function La(y){var d,f;if(!y)return null;const{providerId:I}=y,B=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},X=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&(null==y?void 0:y.idToken)){const Pe=null===(f=null===(d=Yt(y.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(Pe)return new Ro(X,"anonymous"!==Pe&&"custom"!==Pe?Pe:null)}if(!I)return null;switch(I){case"facebook.com":return new ru(X,B);case"github.com":return new la(X,B);case"google.com":return new Du(X,B);case"twitter.com":return new Oo(X,B,y.screenName||null);case"custom":case"anonymous":return new Ro(X,null);default:return new Ro(X,I,B)}}(f)}class io{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new io("enroll",d)}static _fromMfaPendingCredential(d){return new io("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,I;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return io._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(I=d.multiFactorSession)||void 0===I?void 0:I.idToken)return io._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ko{constructor(d,f,I){this.session=d,this.hints=f,this.signInResolver=I}static _fromError(d,f){const I=Bt(d),B=f.customData._serverResponse,X=(B.mfaInfo||[]).map(nt=>Pi._fromServerResponse(I,nt));me(B.mfaPendingCredential,I,"internal-error");const Pe=io._fromMfaPendingCredential(B.mfaPendingCredential);return new ko(Pe,X,function(){var nt=(0,g.Z)(function*($t){const cn=yield $t._process(I,Pe);delete B.mfaInfo,delete B.mfaPendingCredential;const gn=Object.assign(Object.assign({},B),{idToken:cn.idToken,refreshToken:cn.refreshToken});switch(f.operationType){case"signIn":const An=yield Or._fromIdTokenResponse(I,f.operationType,gn);return yield I._updateCurrentUser(An.user),An;case"reauthenticate":return me(f.user,I,"internal-error"),Or._forOperation(f.user,f.operationType,gn);default:oe(I,"internal-error")}});return function($t){return nt.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,g.Z)(function*(){return f.signInResolver(d)})()}}function Ca(y,d){return vt(y,"POST","/v2/accounts/mfaEnrollment:start",Ve(y,d))}class oo{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(I=>Pi._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new oo(d)}getSession(){var d=this;return(0,g.Z)(function*(){return io._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var I=this;return(0,g.Z)(function*(){const B=d,X=yield I.getSession(),Pe=yield rr(I.user,B._process(I.user.auth,X,f));return yield I.user._updateTokensIfNecessary(Pe),I.user.reload()})()}unenroll(d){var f=this;return(0,g.Z)(function*(){const I="string"==typeof d?d:d.uid,B=yield f.user.getIdToken(),X=yield rr(f.user,function so(y,d){return vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ve(y,d))}(f.user.auth,{idToken:B,mfaEnrollmentId:I}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Pe})=>Pe!==I),yield f.user._updateTokensIfNecessary(X);try{yield f.user.reload()}catch(Pe){if("auth/user-token-expired"!==Pe.code)throw Pe}})()}}const as=new WeakMap,ao="__sak";class Da{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zo=(()=>{class y extends Da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,I)=>this.onStorageEvent(f,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Tu(){const y=(0,ee.z$)();return be(y)||zn(y)}()&&function Ir(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ni(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const I of Object.keys(this.listeners)){const B=this.storage.getItem(I),X=this.localCache[I];B!==X&&f(I,X,B)}}onStorageEvent(f,I=!1){if(!f.key)return void this.forAllChangedKeys((nt,$t,cn)=>{this.notifyListeners(nt,cn)});const B=f.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem(B);if(f.newValue!==nt)null!==f.newValue?this.storage.setItem(B,f.newValue):this.storage.removeItem(B);else if(this.localCache[B]===f.newValue&&!I)return}const X=()=>{const nt=this.storage.getItem(B);!I&&this.localCache[B]===nt||this.notifyListeners(B,nt)},Pe=this.storage.getItem(B);!function di(){return(0,ee.w1)()&&10===document.documentMode}()||Pe===f.newValue||f.newValue===f.oldValue?X():setTimeout(X,10)}notifyListeners(f,I){this.localCache[f]=I;const B=this.listeners[f];if(B)for(const X of Array.from(B))X(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,I,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:I,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,I){var B=()=>super._set,X=this;return(0,g.Z)(function*(){yield B().call(X,f,I),X.localCache[f]=JSON.stringify(I)})()}_get(f){var I=()=>super._get,B=this;return(0,g.Z)(function*(){const X=yield I().call(B,f);return B.localCache[f]=JSON.stringify(X),X})()}_remove(f){var I=()=>super._remove,B=this;return(0,g.Z)(function*(){yield I().call(B,f),delete B.localCache[f]})()}}return y.type="LOCAL",y})(),uo=(()=>{class y extends Da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,I){}_removeListener(f,I){}}return y.type="SESSION",y})();let $a=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const I=this.receivers.find(X=>X.isListeningto(f));if(I)return I;const B=new y(f);return this.receivers.push(B),B}isListeningto(f){return this.eventTarget===f}handleEvent(f){var I=this;return(0,g.Z)(function*(){const B=f,{eventId:X,eventType:Pe,data:nt}=B.data,$t=I.handlersMap[Pe];if(!(null==$t?void 0:$t.size))return;B.ports[0].postMessage({status:"ack",eventId:X,eventType:Pe});const cn=Array.from($t).map(function(){var An=(0,g.Z)(function*(zi){return zi(B.origin,nt)});return function(zi){return An.apply(this,arguments)}}()),gn=yield function Io(y){return Promise.all(y.map(function(){var d=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(I){return{fulfilled:!1,reason:I}}});return function(f){return d.apply(this,arguments)}}()))}(cn);B.ports[0].postMessage({status:"done",eventId:X,eventType:Pe,response:gn})})()}_subscribe(f,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(I)}_unsubscribe(f,I){this.handlersMap[f]&&I&&this.handlersMap[f].delete(I),(!I||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function da(y="",d=10){let f="";for(let I=0;I<d;I++)f+=Math.floor(10*Math.random());return y+f}class Ws{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,I=50){var B=this;return(0,g.Z)(function*(){const X="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let Pe,nt;return new Promise(($t,cn)=>{const gn=da("",20);X.port1.start();const An=setTimeout(()=>{cn(new Error("unsupported_event"))},I);nt={messageChannel:X,onMessage(zi){const ea=zi;if(ea.data.eventId===gn)switch(ea.data.status){case"ack":clearTimeout(An),Pe=setTimeout(()=>{cn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Pe),$t(ea.data.response);break;default:clearTimeout(An),clearTimeout(Pe),cn(new Error("invalid_response"))}}},B.handlers.add(nt),X.port1.addEventListener("message",nt.onMessage),B.target.postMessage({eventType:d,eventId:gn,data:f},[X.port2])}).finally(()=>{nt&&B.removeMessageHandler(nt)})})()}}function Xr(){return window}function Co(){return void 0!==Xr().WorkerGlobalScope&&"function"==typeof Xr().importScripts}function Au(){return(Au=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Lo="firebaseLocalStorageDb",Do="firebaseLocalStorage",St="fbase_key";class jr{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function T(y,d){return y.transaction([Do],d?"readwrite":"readonly").objectStore(Do)}function E(){const y=indexedDB.open(Lo,1);return new Promise((d,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(Do,{keyPath:St})}catch(B){f(B)}}),y.addEventListener("success",(0,g.Z)(function*(){const I=y.result;I.objectStoreNames.contains(Do)?d(I):(I.close(),yield function C(){const y=indexedDB.deleteDatabase(Lo);return new jr(y).toPromise()}(),d(yield E()))}))})}function M(y,d,f){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(y,d,f){const I=T(y,!0).put({[St]:d,value:f});return new jr(I).toPromise()})).apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(y,d){const f=T(y,!1).get(d),I=yield new jr(f).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ne(y,d){const f=T(y,!0).delete(d);return new jr(f).toPromise()}const ln=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield E()),f.db})()}_withRetries(f){var I=this;return(0,g.Z)(function*(){let B=0;for(;;)try{const X=yield I._openDb();return yield f(X)}catch(X){if(B++>3)throw X;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return Co()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=$a._getInstance(function Fo(){return Co()?self:null}()),f.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(B,X){return{keyProcessed:(yield f._poll()).includes(X.key)}});return function(B,X){return I.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(B,X){return["keyChanged"]});return function(B,X){return I.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var I,B;if(f.activeServiceWorker=yield function Ta(){return Au.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ws(f.activeServiceWorker);const X=yield f.sender._send("ping",{},800);!X||(null===(I=X[0])||void 0===I?void 0:I.fulfilled)&&(null===(B=X[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Li(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:f},I.serviceWorkerReceiverAvailable?800:50)}catch(B){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield E();return yield M(f,ao,"1"),yield ne(f,ao),!0}catch(f){}return!1})()}_withPendingWrite(f){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield f()}finally{I.pendingWrites--}})()}_set(f,I){var B=this;return(0,g.Z)(function*(){return B._withPendingWrite((0,g.Z)(function*(){return yield B._withRetries(X=>M(X,f,I)),B.localCache[f]=I,B.notifyServiceWorker(f)}))})()}_get(f){var I=this;return(0,g.Z)(function*(){const B=yield I._withRetries(X=>function G(y,d){return W.apply(this,arguments)}(X,f));return I.localCache[f]=B,B})()}_remove(f){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(B=>ne(B,f)),delete I.localCache[f],I.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const I=yield f._withRetries(Pe=>{const nt=T(Pe,!1).getAll();return new jr(nt).toPromise()});if(!I)return[];if(0!==f.pendingWrites)return[];const B=[],X=new Set;for(const{fbase_key:Pe,value:nt}of I)X.add(Pe),JSON.stringify(f.localCache[Pe])!==JSON.stringify(nt)&&(f.notifyListeners(Pe,nt),B.push(Pe));for(const Pe of Object.keys(f.localCache))f.localCache[Pe]&&!X.has(Pe)&&(f.notifyListeners(Pe,null),B.push(Pe));return B})()}notifyListeners(f,I){this.localCache[f]=I;const B=this.listeners[f];if(B)for(const X of Array.from(B))X(I)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function gr(y,d){return vt(y,"POST","/v2/accounts/mfaSignIn:start",Ve(y,d))}function Ps(){return(Ps=(0,g.Z)(function*(y){return(yield vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ga(y){return new Promise((d,f)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=d,I.onerror=B=>{const X=le("internal-error");X.customData=B,f(X)},I.type="text/javascript",I.charset="UTF-8",function Vo(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(I)})}function Yr(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Vn=1e12;class Aa{constructor(d){this.auth=d,this.counter=Vn,this._widgets=new Map}render(d,f){const I=this.counter;return this._widgets.set(I,new za(d,this.auth.name,f||{})),this.counter++,I}reset(d){var f;const I=d||Vn;null===(f=this._widgets.get(I))||void 0===f||f.delete(),this._widgets.delete(I)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Vn))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,g.Z)(function*(){var I;return null===(I=f._widgets.get(d||Vn))||void 0===I||I.execute(),""})()}}class za{constructor(d,f,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof d?document.getElementById(d):d;me(B,"argument-error",{appName:f}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ar(y){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Tn=Yr("rcb"),Ii=new pn(3e4,6e4);class rc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xr().grecaptcha}load(d,f=""){return me(function Gu(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Xr().grecaptcha):new Promise((I,B)=>{const X=Xr().setTimeout(()=>{B(le(d,"network-request-failed"))},Ii.get());Xr()[Tn]=()=>{Xr().clearTimeout(X),delete Xr()[Tn];const nt=Xr().grecaptcha;if(!nt)return void B(le(d,"internal-error"));const $t=nt.render;nt.render=(cn,gn)=>{const An=$t(cn,gn);return this.counter++,An},this.hostLanguage=f,I(nt)},Ga(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Tn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(X),B(le(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Xr().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pn{load(d){return(0,g.Z)(function*(){return new Aa(d)})()}clearedOneInstance(){}}const Su="recaptcha",us={theme:"light",type:"image"};class fa{constructor(d,f=Object.assign({},us),I){this.parameters=f,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(I),this.isInvisible="invisible"===this.parameters.size,me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof d?document.getElementById(d):d;me(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pn:new rc,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(f)||new Promise(X=>{const Pe=nt=>{!nt||(d.tokenChangeListeners.delete(Pe),X(nt))};d.tokenChangeListeners.add(Pe),d.isInvisible&&I.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(I=>I(f)),"function"==typeof d)d(f);else if("string"==typeof d){const I=Xr()[d];"function"==typeof I&&I(f)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const I=document.createElement("div");f.appendChild(I),f=I}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){me(Mt()&&!Co(),d.auth,"internal-error"),yield function Mu(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Tr(y){return Ps.apply(this,arguments)}(d.auth);me(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vi{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=si._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function To(){return(To=(0,g.Z)(function*(y,d,f){const I=Bt(y),B=yield ps(I,d,(0,ee.m9)(f));return new Vi(B,X=>Mn(I,X))})).apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y);yield P(!1,I,"phone");const B=yield ps(I.auth,d,(0,ee.m9)(f));return new Vi(B,X=>In(I,X))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y),B=yield ps(I.auth,d,(0,ee.m9)(f));return new Vi(B,X=>Nr(I,X))})).apply(this,arguments)}function ps(y,d,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,g.Z)(function*(y,d,f){var I;const B=yield f.verify();try{let X;if(me("string"==typeof B,y,"argument-error"),me(f.type===Su,y,"argument-error"),X="string"==typeof d?{phoneNumber:d}:d,"session"in X){const Pe=X.session;if("phoneNumber"in X)return me("enroll"===Pe.type,y,"internal-error"),(yield Ca(y,{idToken:Pe.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{me("signin"===Pe.type,y,"internal-error");const nt=(null===(I=X.multiFactorHint)||void 0===I?void 0:I.uid)||X.multiFactorUid;return me(nt,y,"missing-multi-factor-info"),(yield gr(y,{mfaPendingCredential:Pe.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Pe}=yield Ze(y,{phoneNumber:X.phoneNumber,recaptchaToken:B});return Pe}}finally{f._reset()}})).apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(y,d){yield k((0,ee.m9)(y),d)})).apply(this,arguments)}let Ao=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=Bt(f)}verifyPhoneNumber(f,I){return ps(this.auth,f,(0,ee.m9)(I))}static credential(f,I){return si._fromVerification(f,I)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:I,temporaryProof:B}=f;return I&&B?si._fromTokenResponse(I,B):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Jo(y,d){return d?de(d):(me(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ft extends Ri{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ni(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Ni(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Ni(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function co(y){return ot(y.auth,new Ft(y),y.bypassAuthState)}function su(y){const{auth:d,user:f}=y;return me(f,d,"internal-error"),Ee(f,new Ft(y),y.bypassAuthState)}function Wa(y){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(y){const{auth:d,user:f}=y;return me(f,d,"internal-error"),k(f,new Ft(y),y.bypassAuthState)})).apply(this,arguments)}class qa{constructor(d,f,I,B,X=!1){this.auth=d,this.resolver=I,this.user=B,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,g.Z)(function*(I,B){d.pendingPromise={resolve:I,reject:B};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(X){d.reject(X)}});return function(I,B){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:B,postBody:X,tenantId:Pe,error:nt,type:$t}=d;if(nt)return void f.reject(nt);const cn={auth:f.auth,requestUri:I,sessionId:B,tenantId:Pe||void 0,postBody:X||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask($t)(cn))}catch(gn){f.reject(gn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return co;case"linkViaPopup":case"linkViaRedirect":return Wa;case"reauthViaPopup":case"reauthViaRedirect":return su;default:oe(this.auth,"internal-error")}}resolve(d){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ho=new pn(2e3,1e4);function qs(){return(qs=(0,g.Z)(function*(y,d,f){const I=Bt(y);ct(y,d,oi);const B=Jo(I,f);return new Wu(I,"signInViaPopup",d,B).executeNotNull()})).apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y);ct(I.auth,d,oi);const B=Jo(I.auth,f);return new Wu(I.auth,"reauthViaPopup",d,B,I).executeNotNull()})).apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y);ct(I.auth,d,oi);const B=Jo(I.auth,f);return new Wu(I.auth,"linkViaPopup",d,B,I).executeNotNull()})).apply(this,arguments)}let Wu=(()=>{class y extends qa{constructor(f,I,B,X,Pe){super(f,I,X,Pe),this.provider=B,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const I=yield f.execute();return me(I,f.auth,"internal-error"),I})()}onExecution(){var f=this;return(0,g.Z)(function*(){re(1===f.filter.length,"Popup operations only handle one event");const I=da();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],I),f.authWindow.associatedEvent=I,f.resolver._originValidation(f.auth).catch(B=>{f.reject(B)}),f.resolver._isIframeWebStorageSupported(f.auth,B=>{B||f.reject(le(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var I,B;this.pollId=(null===(B=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===B?void 0:B.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,ho.get())};f()}}return y.currentPopupAction=null,y})();const Uo=new Map;class Ka extends qa{constructor(d,f,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,g.Z)(function*(){let I=Uo.get(f.auth._key());if(!I){try{const X=(yield function Ml(y,d){return Mi.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;I=()=>Promise.resolve(X)}catch(B){I=()=>Promise.reject(B)}Uo.set(f.auth._key(),I)}return f.bypassAuthState||Uo.set(f.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(I,d);if("unknown"!==d.type){if(d.eventId){const B=yield I.auth._redirectUserForId(d.eventId);if(B)return I.user=B,f().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Mi(){return(Mi=(0,g.Z)(function*(y,d){const f=ae(d),I=Y(y);if(!(yield I._isAvailable()))return!1;const B="true"===(yield I._get(f));return yield I._remove(f),B})).apply(this,arguments)}function Za(y,d){return au.apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(y,d){return Y(y)._set(ae(d),"true")})).apply(this,arguments)}function F(y,d){Uo.set(y._key(),d)}function Y(y){return de(y._redirectPersistence)}function ae(y){return tr("pendingRedirect",y.config.apiKey,y.name)}function Dt(){return(Dt=(0,g.Z)(function*(y,d,f){const I=Bt(y);ct(y,d,oi);const B=Jo(I,f);return yield Za(B,I),B._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y);ct(I.auth,d,oi);const B=Jo(I.auth,f);yield Za(B,I.auth);const X=yield Ks(I);return B._openRedirect(I.auth,d,"reauthViaRedirect",X)})).apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,d,f){const I=(0,ee.m9)(y);ct(I.auth,d,oi);const B=Jo(I.auth,f);yield P(!1,I,d.providerId),yield Za(B,I.auth);const X=yield Ks(I);return B._openRedirect(I.auth,d,"linkViaRedirect",X)})).apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,d){return yield Bt(y)._initializationPromise,Ci(y,d,!1)})).apply(this,arguments)}function Ci(y,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(y,d,f=!1){const I=Bt(y),B=Jo(I,d),Pe=yield new Ka(I,B,f).execute();return Pe&&!f&&(delete Pe.user._redirectEventId,yield I._persistUserIfCurrent(Pe.user),yield I._setRedirectUser(null,d)),Pe})).apply(this,arguments)}function Ks(y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y){const d=da(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class sc{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(f=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function uu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xl(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var I;if(d.error&&!xl(d)){const B=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";f.onError(le(this.auth,B))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const I=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qa(d))}saveEventToCache(d){this.cachedEventUids.add(Qa(d)),this.lastProcessedEventTime=Date.now()}}function Qa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function xl({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Ru(y){return qu.apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(y,d={}){return vt(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Nc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lu=/^https?/;function Rl(){return(Rl=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Ru(y);for(const f of d)try{if(yh(f))return}catch(I){}oe(y,"unauthorized-domain")})).apply(this,arguments)}function yh(y){const d=_t(),{protocol:f,hostname:I}=new URL(d);if(y.startsWith("chrome-extension://")){const Pe=new URL(y);return""===Pe.hostname&&""===I?"chrome-extension:"===f&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&Pe.hostname===I}if(!lu.test(f))return!1;if(Nc.test(y))return I===y;const B=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(I)}const Ol=new pn(3e4,6e4);function Nl(){const y=Xr().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let fl=null;function _h(y){return fl=fl||function Sd(y){return new Promise((d,f)=>{var I,B,X;function Pe(){Nl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Nl(),f(le(y,"network-request-failed"))},timeout:Ol.get()})}if(null===(B=null===(I=Xr().gapi)||void 0===I?void 0:I.iframes)||void 0===B?void 0:B.Iframe)d(gapi.iframes.getContext());else{if(!(null===(X=Xr().gapi)||void 0===X?void 0:X.load)){const nt=Yr("iframefcb");return Xr()[nt]=()=>{gapi.load?Pe():f(le(y,"network-request-failed"))},Ga(`https://apis.google.com/js/api.js?onload=${nt}`).catch($t=>f($t))}Pe()}}).catch(d=>{throw fl=null,d})}(y),fl}const vh=new pn(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kc(y){const d=y.config;me(d.authDomain,y,"auth-domain-config-required");const f=d.emulator?on(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:y.name,v:Ce.SDK_VERSION},B=Pc.get(y.config.apiHost);B&&(I.eid=B);const X=y._getFrameworks();return X.length&&(I.fw=X.join(",")),`${f}?${(0,ee.xO)(I).slice(1)}`}function Ou(){return Ou=(0,g.Z)(function*(y){const d=yield _h(y),f=Xr().gapi;return me(f,y,"internal-error"),d.open({where:document.body,url:kc(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},I=>new Promise(function(){var B=(0,g.Z)(function*(X,Pe){yield I.restyle({setHideOnLeave:!1});const nt=le(y,"network-request-failed"),$t=Xr().setTimeout(()=>{Pe(nt)},vh.get());function cn(){Xr().clearTimeout($t),X(I)}I.ping(cn).then(cn,()=>{Pe(nt)})});return function(X,Pe){return B.apply(this,arguments)}}()))}),Ou.apply(this,arguments)}const hu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function So(y,d,f,I,B,X){me(y.config.authDomain,y,"auth-domain-config-required"),me(y.config.apiKey,y,"invalid-api-key");const Pe={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:I,v:Ce.SDK_VERSION,eventId:B};if(d instanceof oi){d.setDefaultLanguage(y.languageCode),Pe.providerId=d.providerId||"",(0,ee.xb)(d.getCustomParameters())||(Pe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[$t,cn]of Object.entries(X||{}))Pe[$t]=cn}if(d instanceof Hs){const $t=d.getScopes().filter(cn=>""!==cn);$t.length>0&&(Pe.scopes=$t.join(","))}y.tenantId&&(Pe.tid=y.tenantId);const nt=Pe;for(const $t of Object.keys(nt))void 0===nt[$t]&&delete nt[$t];return`${function Xa({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,ee.xO)(nt).slice(1)}`}const Bo="webStorageSupport";class kl extends class Lc{constructor(d){this.factorId=d}_process(d,f,I){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,I);case"signin":return this._finalizeSignIn(d,f.credential);default:return ke("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new kl(d)}_finalizeEnroll(d,f,I){return function ca(y,d){return vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ve(y,d))}(d,{idToken:f,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function vr(y,d){return vt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ve(y,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vc=(()=>{class y{constructor(){}static assertion(f){return kl._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var Yu="@firebase/auth";class Md{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(I=>{var B;d((null===(B=I)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _a(){return window}function Fs(){return(Fs=(0,g.Z)(function*(y,d,f){var I;const{BuildInfo:B}=_a();re(d.sessionId,"AuthEvent did not contain a session ID");const X=yield dc(d.sessionId),Pe={};return zn()?Pe.ibi=B.packageName:gt()?Pe.apn=B.packageName:oe(y,"operation-not-supported-in-this-environment"),B.displayName&&(Pe.appDisplayName=B.displayName),Pe.sessionId=X,So(y,f,d.type,void 0,null!==(I=d.eventId)&&void 0!==I?I:void 0,Pe)})).apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(y){const{BuildInfo:d}=_a(),f={};zn()?f.iosBundleId=d.packageName:gt()?f.androidPackageName=d.packageName:oe(y,"operation-not-supported-in-this-environment"),yield Ru(y,f)})).apply(this,arguments)}function Hc(){return(Hc=(0,g.Z)(function*(y,d,f){const{cordova:I}=_a();let B=()=>{};try{yield new Promise((X,Pe)=>{let nt=null;function $t(){var An;X();const zi=null===(An=I.plugins.browsertab)||void 0===An?void 0:An.close;"function"==typeof zi&&zi(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function cn(){nt||(nt=window.setTimeout(()=>{Pe(le(y,"redirect-cancelled-by-user"))},2e3))}function gn(){"visible"===(null==document?void 0:document.visibilityState)&&cn()}d.addPassiveListener($t),document.addEventListener("resume",cn,!1),gt()&&document.addEventListener("visibilitychange",gn,!1),B=()=>{d.removePassiveListener($t),document.removeEventListener("resume",cn,!1),document.removeEventListener("visibilitychange",gn,!1),nt&&window.clearTimeout(nt)}})}finally{B()}})).apply(this,arguments)}function dc(y){return _.apply(this,arguments)}function _(){return(_=(0,g.Z)(function*(y){const d=c(y),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function c(y){if(re(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),f=new Uint8Array(d);for(let I=0;I<y.length;I++)f[I]=y.charCodeAt(I);return f}!function Qu(y){(0,Ce._registerComponent)(new He.wA("auth",(d,{options:f})=>{const I=d.getProvider("app").getImmediate(),B=d.getProvider("heartbeat"),{apiKey:X,authDomain:Pe}=I.options;return((nt,$t)=>{me(X&&!X.includes(":"),"invalid-api-key",{appName:nt.name}),me(!(null==Pe?void 0:Pe.includes(":")),"argument-error",{appName:nt.name});const cn={apiKey:X,authDomain:Pe,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mi(y)},gn=new Pt(nt,$t,cn);return function Ge(y,d){const f=(null==d?void 0:d.persistence)||[],I=(Array.isArray(f)?f:[f]).map(de);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(I,null==d?void 0:d.popupRedirectResolver)}(gn,f),gn})(I,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,I)=>{d.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new He.wA("auth-internal",d=>{const f=Bt(d.getProvider("auth").getImmediate());return new Md(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Yu,"0.20.2",function Bc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Ce.registerVersion)(Yu,"0.20.2","esm2017")}("Browser");class b extends sc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function te(y){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(function*(y){const d=yield Et()._get(Lt(y));return d&&(yield Et()._remove(Lt(y))),d})).apply(this,arguments)}function qe(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const I=Math.floor(Math.random()*d.length);y.push(d.charAt(I))}return y.join("")}function Et(){return de(Zo)}function Lt(y){return tr("authEvent",y.config.apiKey,y.name)}function Nt(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...f]=y.split("?");return(0,ee.zd)(f.join("?"))}function ar(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:le("no-auth-event")}}function ui(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ho(y=(0,ee.z$)()){return!("file:"!==ui()&&"ionic:"!==ui()&&"capacitor:"!==ui()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function fu(){try{const y=self.localStorage,d=da();if(y)return y.setItem(d,"1"),y.removeItem(d),!function $o(y=(0,ee.z$)()){return function el(){return(0,ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Bi(y=(0,ee.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,ee.hl)()}catch(y){return pu()&&(0,ee.hl)()}return!1}function pu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gt(){return(function fo(){return"http:"===ui()||"https:"===ui()}()||(0,ee.ru)()||Ho())&&!function hr(){return(0,ee.b$)()||(0,ee.UG)()}()&&fu()&&!pu()}function bn(){return Ho()&&"undefined"!=typeof document}function Er(){return(Er=(0,g.Z)(function*(){return!!bn()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},Ls=me,Ma="persistence";function eu(y){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,g.Z)(function*(y){yield y._initializationPromise;const d=li(),f=tr(Ma,y.config.apiKey,y.name);d&&d.setItem(f,y._getPersistence())})).apply(this,arguments)}function li(){var y;try{return(null===(y=function ys(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(d){return null}}const xa=me;class go{constructor(){this.browserResolver=de(class uc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=Ci,this._overrideRedirectResult=F}_openPopup(d,f,I,B){var X=this;return(0,g.Z)(function*(){var Pe;re(null===(Pe=X.eventManagers[d._key()])||void 0===Pe?void 0:Pe.manager,"_initialize() not called before _openPopup()");const nt=So(d,f,I,_t(),B);return function ya(y,d,f,I=500,B=600){const X=Math.max((window.screen.availHeight-B)/2,0).toString(),Pe=Math.max((window.screen.availWidth-I)/2,0).toString();let nt="";const $t=Object.assign(Object.assign({},hu),{width:I.toString(),height:B.toString(),top:X,left:Pe}),cn=(0,ee.z$)().toLowerCase();f&&(nt=ie(cn)?"_blank":f),ze(cn)&&(d=d||"http://localhost",$t.scrollbars="yes");const gn=Object.entries($t).reduce((zi,[ea,Ul])=>`${zi}${ea}=${Ul},`,"");if(function ji(y=(0,ee.z$)()){var d;return zn(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(cn)&&"_self"!==nt)return function Fc(y,d){const f=document.createElement("a");f.href=y,f.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(I)}(d||"",nt),new Zu(null);const An=window.open(d||"",nt,gn);me(An,y,"popup-blocked");try{An.focus()}catch(zi){}return new Zu(An)}(d,nt,da())})()}_openRedirect(d,f,I,B){var X=this;return(0,g.Z)(function*(){return yield X._originValidation(d),function ai(y){Xr().location.href=y}(So(d,f,I,_t(),B)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:B,promise:X}=this.eventManagers[f];return B?Promise.resolve(B):(re(X,"If manager is not set, promise should be"),X)}const I=this.initAndGetManager(d);return this.eventManagers[f]={promise:I},I.catch(()=>{delete this.eventManagers[f]}),I}initAndGetManager(d){var f=this;return(0,g.Z)(function*(){const I=yield function du(y){return Ou.apply(this,arguments)}(d),B=new sc(d);return I.register("authEvent",X=>(me(null==X?void 0:X.authEvent,d,"invalid-auth-event"),{status:B.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:B},f.iframes[d._key()]=I,B})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(Bo,{type:Bo},B=>{var X;const Pe=null===(X=null==B?void 0:B[0])||void 0===X?void 0:X[Bo];void 0!==Pe&&f(!!Pe),oe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Gi(y){return Rl.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ni()||be()||zn()}}),this.cordovaResolver=de(class Rn{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ci,this._overrideRedirectResult=F}_initialize(d){var f=this;return(0,g.Z)(function*(){const I=d._key();let B=f.eventManagers.get(I);return B||(B=new b(d),f.eventManagers.set(I,B),f.attachCallbackListeners(d,B)),B})()}_openPopup(d){oe(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,I,B){var X=this;return(0,g.Z)(function*(){!function gs(y){var d,f,I,B,X,Pe,nt,$t,cn,gn;const An=_a();me("function"==typeof(null===(d=null==An?void 0:An.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(void 0!==(null===(f=null==An?void 0:An.BuildInfo)||void 0===f?void 0:f.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(X=null===(B=null===(I=null==An?void 0:An.cordova)||void 0===I?void 0:I.plugins)||void 0===B?void 0:B.browsertab)||void 0===X?void 0:X.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===($t=null===(nt=null===(Pe=null==An?void 0:An.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===$t?void 0:$t.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(gn=null===(cn=null==An?void 0:An.cordova)||void 0===cn?void 0:cn.InAppBrowser)||void 0===gn?void 0:gn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Pe=yield X._initialize(d);yield Pe.initialized(),Pe.resetRedirect(),function x(){Uo.clear()}(),yield X._originValidation(d);const nt=function O(y,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:qe(),postBody:null,tenantId:y.tenantId,error:le(y,"no-auth-event")}}(d,I,B);yield function $(y,d){return Et()._set(Lt(y),d)}(d,nt);const $t=yield function cc(y,d,f){return Fs.apply(this,arguments)}(d,nt,f),cn=yield function yl(y){const{cordova:d}=_a();return new Promise(f=>{d.plugins.browsertab.isAvailable(I=>{let B=null;I?d.plugins.browsertab.openUrl(y):B=d.InAppBrowser.open(y,function Mr(y=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(B)})})}($t);return function jc(y,d,f){return Hc.apply(this,arguments)}(d,Pe,cn)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Xu(y){return ml.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:I,handleOpenURL:B,BuildInfo:X}=_a(),Pe=setTimeout((0,g.Z)(function*(){yield te(d),f.onEvent(ar())}),500),nt=function(){var gn=(0,g.Z)(function*(An){clearTimeout(Pe);const zi=yield te(d);let ea=null;zi&&(null==An?void 0:An.url)&&(ea=function _e(y,d){var f,I;const B=function wn(y){const d=Nt(y),f=d.link?decodeURIComponent(d.link):void 0,I=Nt(f).link,B=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Nt(B).link||B||I||f||y}(d);if(B.includes("/__/auth/callback")){const X=Nt(B),Pe=X.firebaseError?function tn(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(X.firebaseError)):null,nt=null===(I=null===(f=null==Pe?void 0:Pe.code)||void 0===f?void 0:f.split("auth/"))||void 0===I?void 0:I[1],$t=nt?le(nt):null;return $t?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:B,postBody:null}}return null}(zi,An.url)),f.onEvent(ea||ar())});return function(zi){return gn.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,nt);const $t=B,cn=`${X.packageName.toLowerCase()}://`;_a().handleOpenURL=function(){var gn=(0,g.Z)(function*(An){if(An.toLowerCase().startsWith(cn)&&nt({url:An}),"function"==typeof $t)try{$t(An)}catch(zi){console.error(zi)}});return function(An){return gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=Ci,this._overrideRedirectResult=F}_initialize(d){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,I,B){var X=this;return(0,g.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(d,f,I,B)})()}_openRedirect(d,f,I,B){var X=this;return(0,g.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(d,f,I,B)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return bn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xa(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const f=yield function On(){return Er.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Ra(y){return y.unwrap()}function xd(y){return Ll(y)}function Ll(y){const{_tokenResponse:d}=y instanceof ee.ZR?y.customData:y;if(!d)return null;if(!(y instanceof ee.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Ao.credentialFromResult(y);const f=d.providerId;if(!f||"password"===f)return null;let I;switch(f){case"google.com":I=$s;break;case"facebook.com":I=cs;break;case"github.com":I=ds;break;case"twitter.com":I=Wo;break;default:const{oauthIdToken:B,oauthAccessToken:X,oauthTokenSecret:Pe,pendingToken:nt,nonce:$t}=d;return X||Pe||B||nt?nt?f.startsWith("saml.")?bi._create(f,nt):Ie._fromParams({providerId:f,signInMethod:f,pendingToken:nt,idToken:B,accessToken:X}):new ts(f).credential({idToken:B,accessToken:X,rawNonce:$t}):null}return y instanceof ee.ZR?I.credentialFromError(y):I.credentialFromResult(y)}function Go(y,d){return d.catch(f=>{throw f instanceof ee.ZR&&function hc(y,d){var f;const I=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new Gf(y,function En(y,d){var f;const I=(0,ee.m9)(y),B=d;return me(d.customData.operationType,I,"argument-error"),me(null===(f=B.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,I,"argument-error"),ko._fromError(I,B)}(y,d));else if(I){const B=Ll(d),X=d;B&&(X.credential=B,X.tenantId=I.tenantId||void 0,X.email=I.email||void 0,X.phoneNumber=I.phoneNumber||void 0)}}(y,f),f}).then(f=>{const B=f.user;return{operationType:f.operationType,credential:xd(f),additionalUserInfo:os(f),user:mu.getOrCreate(B)}})}function $c(y,d){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,g.Z)(function*(y,d){const f=yield d;return{verificationId:f.verificationId,confirm:I=>Go(y,f.confirm(I))}})).apply(this,arguments)}class Gf{constructor(d,f){this.resolver=f,this.auth=function gu(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Go(Ra(this.auth),this.resolver.resolveSignIn(d))}}class mu{constructor(d){this._delegate=d,this.multiFactor=function $u(y){const d=(0,ee.m9)(y);return as.has(d)||as.set(d,oo._fromUser(d)),as.get(d)}(d)}static getOrCreate(d){return mu.USER_MAP.has(d)||mu.USER_MAP.set(d,new mu(d)),mu.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,g.Z)(function*(){return Go(f.auth,In(f._delegate,d))})()}linkWithPhoneNumber(d,f){var I=this;return(0,g.Z)(function*(){return $c(I.auth,function Qr(y,d,f){return pa.apply(this,arguments)}(I._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,g.Z)(function*(){return Go(f.auth,function ou(y,d,f){return ks.apply(this,arguments)}(f._delegate,d,go))})()}linkWithRedirect(d){var f=this;return(0,g.Z)(function*(){return yield eu(Bt(f.auth)),function Jn(y,d,f){return function Dn(y,d,f){return $i.apply(this,arguments)}(y,d,f)}(f._delegate,d,go)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,g.Z)(function*(){return Go(f.auth,Nr(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return $c(this.auth,function zu(y,d,f){return bs.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Go(this.auth,function xu(y,d,f){return Xo.apply(this,arguments)}(this._delegate,d,go))}reauthenticateWithRedirect(d){var f=this;return(0,g.Z)(function*(){return yield eu(Bt(f.auth)),function un(y,d,f){return function hn(y,d,f){return xn.apply(this,arguments)}(y,d,f)}(f._delegate,d,go)})()}sendEmailVerification(d){return function ss(y,d){return qo.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,g.Z)(function*(){return yield function ua(y,d){return _r.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function Ko(y,d){return Ia((0,ee.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function Fa(y,d){return Ia((0,ee.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Ei(y,d){return Is.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ka(y,d){return Cu.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Na(y,d,f){return Jr.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mu.USER_MAP=new WeakMap;const Nu=me;let zc=(()=>{class y{constructor(f,I){if(this.app=f,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=f.options;Nu(B,"invalid-api-key",{appName:f.name}),Nu(B,"invalid-api-key",{appName:f.name});const X="undefined"!=typeof window?go:void 0;this._delegate=I.initialize({options:{persistence:wh(B,f.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(ut),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,I){!function xr(y,d,f){const I=Bt(y);me(I._canInitEmulator,I,"emulator-config-failed"),me(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const B=!!(null==f?void 0:f.disableWarnings),X=mr(d),{host:Pe,port:nt}=function Cr(y){const d=mr(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!f)return{host:"",port:null};const I=f[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(I);if(B){const X=B[1];return{host:X,port:yi(I.substr(X.length+1))}}{const[X,Pe]=I.split(":");return{host:X,port:yi(Pe)}}}(d);I.config.emulator={url:`${X}//${Pe}${null===nt?"":`:${nt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Pe,port:nt,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function qn(){function y(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,I)}applyActionCode(f){return function J(y,d){return ve.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Tt(this._delegate,f)}confirmPasswordReset(f,I){return function N(y,d,f){return R.apply(this,arguments)}(this._delegate,f,I)}createUserWithEmailAndPassword(f,I){var B=this;return(0,g.Z)(function*(){return Go(B._delegate,function hs(y,d,f){return Fi.apply(this,arguments)}(B._delegate,f,I))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ba(y,d){return xo.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function ju(y,d){const f=to.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){Nu(Gt(),f._delegate,"operation-not-supported-in-this-environment");const I=yield function Xn(y,d){return ma.apply(this,arguments)}(f._delegate,go);return I?Go(f._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Sr(y,d){Bt(y)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,I,B){const{next:X,error:Pe,complete:nt}=Eh(f,I,B);return this._delegate.onAuthStateChanged(X,Pe,nt)}onIdTokenChanged(f,I,B){const{next:X,error:Pe,complete:nt}=Eh(f,I,B);return this._delegate.onIdTokenChanged(X,Pe,nt)}sendSignInLinkToEmail(f,I){return function wo(y,d,f){return Iu.apply(this,arguments)}(this._delegate,f,I)}sendPasswordResetEmail(f,I){return function Mo(y,d,f){return L.apply(this,arguments)}(this._delegate,f,I||void 0)}setPersistence(f){var I=this;return(0,g.Z)(function*(){let B;switch(function xi(y,d){Ls(Object.values(Di).includes(d),y,"invalid-persistence-type"),(0,ee.b$)()?Ls(d!==Di.SESSION,y,"unsupported-persistence-type"):(0,ee.UG)()?Ls(d===Di.NONE,y,"unsupported-persistence-type"):pu()?Ls(d===Di.NONE||d===Di.LOCAL&&(0,ee.hl)(),y,"unsupported-persistence-type"):Ls(d===Di.NONE||fu(),y,"unsupported-persistence-type")}(I._delegate,f),f){case Di.SESSION:B=uo;break;case Di.LOCAL:B=(yield de(ln)._isAvailable())?ln:Zo;break;case Di.NONE:B=rn;break;default:return oe("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Go(this._delegate,function no(y){return Rs.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Go(this._delegate,Mn(this._delegate,f))}signInWithCustomToken(f){return Go(this._delegate,function vi(y,d){return vn.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,I){return Go(this._delegate,function Os(y,d,f){return Mn((0,ee.m9)(y),yo.credential(d,f))}(this._delegate,f,I))}signInWithEmailLink(f,I){return Go(this._delegate,function hl(y,d,f){return ro.apply(this,arguments)}(this._delegate,f,I))}signInWithPhoneNumber(f,I){return $c(this._delegate,function Ui(y,d,f){return To.apply(this,arguments)}(this._delegate,f,I))}signInWithPopup(f){var I=this;return(0,g.Z)(function*(){return Nu(Gt(),I._delegate,"operation-not-supported-in-this-environment"),Go(I._delegate,function ic(y,d,f){return qs.apply(this,arguments)}(I._delegate,f,go))})()}signInWithRedirect(f){var I=this;return(0,g.Z)(function*(){return Nu(Gt(),I._delegate,"operation-not-supported-in-this-environment"),yield eu(I._delegate),function Ue(y,d,f){return function Xe(y,d,f){return Dt.apply(this,arguments)}(y,d,f)}(I._delegate,f,go)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Qn(y,d){return ki.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Di,y})();function Eh(y,d,f){let I=y;"function"!=typeof y&&({next:I,error:d,complete:f}=y);const B=I;return{next:Pe=>B(Pe&&mu.getOrCreate(Pe)),error:d,complete:f}}function wh(y,d){const f=function po(y,d){const f=li();if(!f)return[];const I=tr(Ma,y,d);switch(f.getItem(I)){case Di.NONE:return[rn];case Di.LOCAL:return[ln,uo];case Di.SESSION:return[uo];default:return[]}}(y,d);if("undefined"!=typeof self&&!f.includes(ln)&&f.push(ln),"undefined"!=typeof window)for(const I of[Zo,uo])f.includes(I)||f.push(I);return f.includes(rn)||f.push(rn),f}class Wc{constructor(){this.providerId="phone",this._delegate=new Ao(Ra(z.Z.auth()))}static credential(d,f){return Ao.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Wc.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=Ao.PROVIDER_ID;const bh=me;class Ih{constructor(d,f,I=z.Z.app()){var B;bh(null===(B=I.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new fa(d,f,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vl(y){y.INTERNAL.registerComponent(new He.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),I=d.getProvider("auth");return new zc(f,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yo,FacebookAuthProvider:cs,GithubAuthProvider:ds,GoogleAuthProvider:$s,OAuthProvider:ts,SAMLAuthProvider:hi,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:Vc,RecaptchaVerifier:Ih,TwitterAuthProvider:Wo,Auth:zc,AuthCredential:Ri,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(z.Z)},1135:(kt,We,U)=>{U.d(We,{X:()=>z});var g=U(7579);class z extends g.x{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const Me=super._subscribe(Ce);return!Me.closed&&Ce.next(this._value),Me}getValue(){const{hasError:Ce,thrownError:Me,_value:Ne}=this;if(Ce)throw Me;return this._throwIfClosed(),Ne}next(Ce){super.next(this._value=Ce)}}},8306:(kt,We,U)=>{U.d(We,{y:()=>pe});var g=U(930),z=U(727),ee=U(8822),Ce=U(4671);var He=U(2416),Fe=U(576),je=U(2806);let pe=(()=>{class Je{constructor(wt){wt&&(this._subscribe=wt)}lift(wt){const Ye=new Je;return Ye.source=this,Ye.operator=wt,Ye}subscribe(wt,Ye,lt){const xt=function at(Je){return Je&&Je instanceof g.Lv||function De(Je){return Je&&(0,Fe.m)(Je.next)&&(0,Fe.m)(Je.error)&&(0,Fe.m)(Je.complete)}(Je)&&(0,z.Nn)(Je)}(wt)?wt:new g.Hp(wt,Ye,lt);return(0,je.x)(()=>{const{operator:Rt,source:oe}=this;xt.add(Rt?Rt.call(xt,oe):oe?this._subscribe(xt):this._trySubscribe(xt))}),xt}_trySubscribe(wt){try{return this._subscribe(wt)}catch(Ye){wt.error(Ye)}}forEach(wt,Ye){return new(Ye=fe(Ye))((lt,xt)=>{const Rt=new g.Hp({next:oe=>{try{wt(oe)}catch(le){xt(le),Rt.unsubscribe()}},error:xt,complete:lt});this.subscribe(Rt)})}_subscribe(wt){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(wt)}[ee.L](){return this}pipe(...wt){return function Ne(Je){return 0===Je.length?Ce.y:1===Je.length?Je[0]:function(wt){return Je.reduce((Ye,lt)=>lt(Ye),wt)}}(wt)(this)}toPromise(wt){return new(wt=fe(wt))((Ye,lt)=>{let xt;this.subscribe(Rt=>xt=Rt,Rt=>lt(Rt),()=>Ye(xt))})}}return Je.create=ut=>new Je(ut),Je})();function fe(Je){var ut;return null!==(ut=null!=Je?Je:He.v.Promise)&&void 0!==ut?ut:Promise}},7579:(kt,We,U)=>{U.d(We,{x:()=>He});var g=U(8306),z=U(727);const Ce=(0,U(3888).d)(je=>function(){je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=U(8737),Ne=U(2806);let He=(()=>{class je extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const De=new Fe(this,this);return De.operator=fe,De}_throwIfClosed(){if(this.closed)throw new Ce}next(fe){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(fe)}})}error(fe){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:De}=this;for(;De.length;)De.shift().error(fe)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:De,isStopped:at,observers:Je}=this;return De||at?z.Lc:(this.currentObservers=null,Je.push(fe),new z.w0(()=>{this.currentObservers=null,(0,Me.P)(Je,fe)}))}_checkFinalizedStatuses(fe){const{hasError:De,thrownError:at,isStopped:Je}=this;De?fe.error(at):Je&&fe.complete()}asObservable(){const fe=new g.y;return fe.source=this,fe}}return je.create=(pe,fe)=>new Fe(pe,fe),je})();class Fe extends He{constructor(pe,fe){super(),this.destination=pe,this.source=fe}next(pe){var fe,De;null===(De=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===De||De.call(fe,pe)}error(pe){var fe,De;null===(De=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===De||De.call(fe,pe)}complete(){var pe,fe;null===(fe=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===fe||fe.call(pe)}_subscribe(pe){var fe,De;return null!==(De=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(pe))&&void 0!==De?De:z.Lc}}},930:(kt,We,U)=>{U.d(We,{Hp:()=>wt,Lv:()=>De});var g=U(576),z=U(727),ee=U(2416),Ce=U(7849),Me=U(5032);const Ne=je("C",void 0,void 0);function je(oe,le,$e){return{kind:oe,value:le,error:$e}}var pe=U(3410),fe=U(2806);class De extends z.w0{constructor(le){super(),this.isStopped=!1,le?(this.destination=le,(0,z.Nn)(le)&&le.add(this)):this.destination=Rt}static create(le,$e,ct){return new wt(le,$e,ct)}next(le){this.isStopped?xt(function Fe(oe){return je("N",oe,void 0)}(le),this):this._next(le)}error(le){this.isStopped?xt(function He(oe){return je("E",void 0,oe)}(le),this):(this.isStopped=!0,this._error(le))}complete(){this.isStopped?xt(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(le){this.destination.next(le)}_error(le){try{this.destination.error(le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Je(oe,le){return at.call(oe,le)}class ut{constructor(le){this.partialObserver=le}next(le){const{partialObserver:$e}=this;if($e.next)try{$e.next(le)}catch(ct){Ye(ct)}}error(le){const{partialObserver:$e}=this;if($e.error)try{$e.error(le)}catch(ct){Ye(ct)}else Ye(le)}complete(){const{partialObserver:le}=this;if(le.complete)try{le.complete()}catch($e){Ye($e)}}}class wt extends De{constructor(le,$e,ct){let st;if(super(),(0,g.m)(le)||!le)st={next:null!=le?le:void 0,error:null!=$e?$e:void 0,complete:null!=ct?ct:void 0};else{let me;this&&ee.v.useDeprecatedNextContext?(me=Object.create(le),me.unsubscribe=()=>this.unsubscribe(),st={next:le.next&&Je(le.next,me),error:le.error&&Je(le.error,me),complete:le.complete&&Je(le.complete,me)}):st=le}this.destination=new ut(st)}}function Ye(oe){ee.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(oe):(0,Ce.h)(oe)}function xt(oe,le){const{onStoppedNotification:$e}=ee.v;$e&&pe.z.setTimeout(()=>$e(oe,le))}const Rt={closed:!0,next:Me.Z,error:function lt(oe){throw oe},complete:Me.Z}},727:(kt,We,U)=>{U.d(We,{Lc:()=>Ne,w0:()=>Me,Nn:()=>He});var g=U(576);const ee=(0,U(3888).d)(je=>function(fe){je(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((De,at)=>`${at+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var Ce=U(8737);class Me{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Je of fe)Je.remove(this);else fe.remove(this);const{initialTeardown:De}=this;if((0,g.m)(De))try{De()}catch(Je){pe=Je instanceof ee?Je.errors:[Je]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Je of at)try{Fe(Je)}catch(ut){pe=null!=pe?pe:[],ut instanceof ee?pe=[...pe,...ut.errors]:pe.push(ut)}}if(pe)throw new ee(pe)}}add(pe){var fe;if(pe&&pe!==this)if(this.closed)Fe(pe);else{if(pe instanceof Me){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(pe)}}_hasParent(pe){const{_parentage:fe}=this;return fe===pe||Array.isArray(fe)&&fe.includes(pe)}_addParent(pe){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(pe),fe):fe?[fe,pe]:pe}_removeParent(pe){const{_parentage:fe}=this;fe===pe?this._parentage=null:Array.isArray(fe)&&(0,Ce.P)(fe,pe)}remove(pe){const{_finalizers:fe}=this;fe&&(0,Ce.P)(fe,pe),pe instanceof Me&&pe._removeParent(this)}}Me.EMPTY=(()=>{const je=new Me;return je.closed=!0,je})();const Ne=Me.EMPTY;function He(je){return je instanceof Me||je&&"closed"in je&&(0,g.m)(je.remove)&&(0,g.m)(je.add)&&(0,g.m)(je.unsubscribe)}function Fe(je){(0,g.m)(je)?je():je.unsubscribe()}},2416:(kt,We,U)=>{U.d(We,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(kt,We,U)=>{U.d(We,{z:()=>Me});var g=U(8189),ee=U(7669),Ce=U(8996);function Me(...Ne){return function z(){return(0,g.J)(1)}()((0,Ce.D)(Ne,(0,ee.yG)(Ne)))}},515:(kt,We,U)=>{U.d(We,{E:()=>z});const z=new(U(8306).y)(Me=>Me.complete())},8996:(kt,We,U)=>{U.d(We,{D:()=>le});var g=U(8421),z=U(5363),ee=U(9468),Ne=U(8306),Fe=U(2202),je=U(576),pe=U(9672);function De($e,ct){if(!$e)throw new Error("Iterable cannot be null");return new Ne.y(st=>{(0,pe.f)(st,ct,()=>{const me=$e[Symbol.asyncIterator]();(0,pe.f)(st,ct,()=>{me.next().then(ke=>{ke.done?st.complete():st.next(ke.value)})},0,!0)})})}var at=U(3670),Je=U(8239),ut=U(1144),wt=U(6495),Ye=U(2206),lt=U(4532),xt=U(3260);function le($e,ct){return ct?function oe($e,ct){if(null!=$e){if((0,at.c)($e))return function Ce($e,ct){return(0,g.Xf)($e).pipe((0,ee.R)(ct),(0,z.Q)(ct))}($e,ct);if((0,ut.z)($e))return function He($e,ct){return new Ne.y(st=>{let me=0;return ct.schedule(function(){me===$e.length?st.complete():(st.next($e[me++]),st.closed||this.schedule())})})}($e,ct);if((0,Je.t)($e))return function Me($e,ct){return(0,g.Xf)($e).pipe((0,ee.R)(ct),(0,z.Q)(ct))}($e,ct);if((0,Ye.D)($e))return De($e,ct);if((0,wt.T)($e))return function fe($e,ct){return new Ne.y(st=>{let me;return(0,pe.f)(st,ct,()=>{me=$e[Fe.h](),(0,pe.f)(st,ct,()=>{let ke,re;try{({value:ke,done:re}=me.next())}catch(ce){return void st.error(ce)}re?st.complete():st.next(ke)},0,!0)}),()=>(0,je.m)(null==me?void 0:me.return)&&me.return()})}($e,ct);if((0,xt.L)($e))return function Rt($e,ct){return De((0,xt.Q)($e),ct)}($e,ct)}throw(0,lt.z)($e)}($e,ct):(0,g.Xf)($e)}},8421:(kt,We,U)=>{U.d(We,{Xf:()=>at});var g=U(655),z=U(1144),ee=U(8239),Ce=U(8306),Me=U(3670),Ne=U(2206),He=U(4532),Fe=U(6495),je=U(3260),pe=U(576),fe=U(7849),De=U(8822);function at(oe){if(oe instanceof Ce.y)return oe;if(null!=oe){if((0,Me.c)(oe))return function Je(oe){return new Ce.y(le=>{const $e=oe[De.L]();if((0,pe.m)($e.subscribe))return $e.subscribe(le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,z.z)(oe))return function ut(oe){return new Ce.y(le=>{for(let $e=0;$e<oe.length&&!le.closed;$e++)le.next(oe[$e]);le.complete()})}(oe);if((0,ee.t)(oe))return function wt(oe){return new Ce.y(le=>{oe.then($e=>{le.closed||(le.next($e),le.complete())},$e=>le.error($e)).then(null,fe.h)})}(oe);if((0,Ne.D)(oe))return lt(oe);if((0,Fe.T)(oe))return function Ye(oe){return new Ce.y(le=>{for(const $e of oe)if(le.next($e),le.closed)return;le.complete()})}(oe);if((0,je.L)(oe))return function xt(oe){return lt((0,je.Q)(oe))}(oe)}throw(0,He.z)(oe)}function lt(oe){return new Ce.y(le=>{(function Rt(oe,le){var $e,ct,st,me;return(0,g.mG)(this,void 0,void 0,function*(){try{for($e=(0,g.KL)(oe);!(ct=yield $e.next()).done;)if(le.next(ct.value),le.closed)return}catch(ke){st={error:ke}}finally{try{ct&&!ct.done&&(me=$e.return)&&(yield me.call($e))}finally{if(st)throw st.error}}le.complete()})})(oe,le).catch($e=>le.error($e))})}},6451:(kt,We,U)=>{U.d(We,{T:()=>Ne});var g=U(8189),z=U(8421),ee=U(515),Ce=U(7669),Me=U(8996);function Ne(...He){const Fe=(0,Ce.yG)(He),je=(0,Ce._6)(He,1/0),pe=He;return pe.length?1===pe.length?(0,z.Xf)(pe[0]):(0,g.J)(je)((0,Me.D)(pe,Fe)):ee.E}},9646:(kt,We,U)=>{U.d(We,{of:()=>ee});var g=U(7669),z=U(8996);function ee(...Ce){const Me=(0,g.yG)(Ce);return(0,z.D)(Ce,Me)}},5403:(kt,We,U)=>{U.d(We,{x:()=>z});var g=U(930);function z(Ce,Me,Ne,He,Fe){return new ee(Ce,Me,Ne,He,Fe)}class ee extends g.Lv{constructor(Me,Ne,He,Fe,je,pe){super(Me),this.onFinalize=je,this.shouldUnsubscribe=pe,this._next=Ne?function(fe){try{Ne(fe)}catch(De){Me.error(De)}}:super._next,this._error=Fe?function(fe){try{Fe(fe)}catch(De){Me.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=He?function(){try{He()}catch(fe){Me.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(Me=this.onFinalize)||void 0===Me||Me.call(this))}}}},6590:(kt,We,U)=>{U.d(We,{d:()=>ee});var g=U(4482),z=U(5403);function ee(Ce){return(0,g.e)((Me,Ne)=>{let He=!1;Me.subscribe((0,z.x)(Ne,Fe=>{He=!0,Ne.next(Fe)},()=>{He||Ne.next(Ce),Ne.complete()}))})}},9300:(kt,We,U)=>{U.d(We,{h:()=>ee});var g=U(4482),z=U(5403);function ee(Ce,Me){return(0,g.e)((Ne,He)=>{let Fe=0;Ne.subscribe((0,z.x)(He,je=>Ce.call(Me,je,Fe++)&&He.next(je)))})}},590:(kt,We,U)=>{U.d(We,{P:()=>He});var g=U(6805),z=U(9300),ee=U(5698),Ce=U(6590),Me=U(8068),Ne=U(4671);function He(Fe,je){const pe=arguments.length>=2;return fe=>fe.pipe(Fe?(0,z.h)((De,at)=>Fe(De,at,fe)):Ne.y,(0,ee.q)(1),pe?(0,Ce.d)(je):(0,Me.T)(()=>new g.K))}},4004:(kt,We,U)=>{U.d(We,{U:()=>ee});var g=U(4482),z=U(5403);function ee(Ce,Me){return(0,g.e)((Ne,He)=>{let Fe=0;Ne.subscribe((0,z.x)(He,je=>{He.next(Ce.call(Me,je,Fe++))}))})}},8189:(kt,We,U)=>{U.d(We,{J:()=>ee});var g=U(5577),z=U(4671);function ee(Ce=1/0){return(0,g.z)(z.y,Ce)}},5577:(kt,We,U)=>{U.d(We,{z:()=>Fe});var g=U(4004),z=U(8421),ee=U(4482),Ce=U(9672),Me=U(5403),He=U(576);function Fe(je,pe,fe=1/0){return(0,He.m)(pe)?Fe((De,at)=>(0,g.U)((Je,ut)=>pe(De,Je,at,ut))((0,z.Xf)(je(De,at))),fe):("number"==typeof pe&&(fe=pe),(0,ee.e)((De,at)=>function Ne(je,pe,fe,De,at,Je,ut,wt){const Ye=[];let lt=0,xt=0,Rt=!1;const oe=()=>{Rt&&!Ye.length&&!lt&&pe.complete()},le=ct=>lt<De?$e(ct):Ye.push(ct),$e=ct=>{Je&&pe.next(ct),lt++;let st=!1;(0,z.Xf)(fe(ct,xt++)).subscribe((0,Me.x)(pe,me=>{null==at||at(me),Je?le(me):pe.next(me)},()=>{st=!0},void 0,()=>{if(st)try{for(lt--;Ye.length&&lt<De;){const me=Ye.shift();ut?(0,Ce.f)(pe,ut,()=>$e(me)):$e(me)}oe()}catch(me){pe.error(me)}}))};return je.subscribe((0,Me.x)(pe,le,()=>{Rt=!0,oe()})),()=>{null==wt||wt()}}(De,at,je,fe)))}},5363:(kt,We,U)=>{U.d(We,{Q:()=>Ce});var g=U(9672),z=U(4482),ee=U(5403);function Ce(Me,Ne=0){return(0,z.e)((He,Fe)=>{He.subscribe((0,ee.x)(Fe,je=>(0,g.f)(Fe,Me,()=>Fe.next(je),Ne),()=>(0,g.f)(Fe,Me,()=>Fe.complete(),Ne),je=>(0,g.f)(Fe,Me,()=>Fe.error(je),Ne)))})}},5026:(kt,We,U)=>{U.d(We,{R:()=>Ce});var g=U(4482),z=U(5403);function ee(Me,Ne,He,Fe,je){return(pe,fe)=>{let De=He,at=Ne,Je=0;pe.subscribe((0,z.x)(fe,ut=>{const wt=Je++;at=De?Me(at,ut,wt):(De=!0,ut),Fe&&fe.next(at)},je&&(()=>{De&&fe.next(at),fe.complete()})))}}function Ce(Me,Ne){return(0,g.e)(ee(Me,Ne,arguments.length>=2,!0))}},3099:(kt,We,U)=>{U.d(We,{B:()=>Ne});var g=U(8996),z=U(5698),ee=U(7579),Ce=U(930),Me=U(4482);function Ne(Fe={}){const{connector:je=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:fe=!0,resetOnRefCountZero:De=!0}=Fe;return at=>{let Je=null,ut=null,wt=null,Ye=0,lt=!1,xt=!1;const Rt=()=>{null==ut||ut.unsubscribe(),ut=null},oe=()=>{Rt(),Je=wt=null,lt=xt=!1},le=()=>{const $e=Je;oe(),null==$e||$e.unsubscribe()};return(0,Me.e)(($e,ct)=>{Ye++,!xt&&!lt&&Rt();const st=wt=null!=wt?wt:je();ct.add(()=>{Ye--,0===Ye&&!xt&&!lt&&(ut=He(le,De))}),st.subscribe(ct),Je||(Je=new Ce.Hp({next:me=>st.next(me),error:me=>{xt=!0,Rt(),ut=He(oe,pe,me),st.error(me)},complete:()=>{lt=!0,Rt(),ut=He(oe,fe),st.complete()}}),(0,g.D)($e).subscribe(Je))})(at)}}function He(Fe,je,...pe){return!0===je?(Fe(),null):!1===je?null:je(...pe).pipe((0,z.q)(1)).subscribe(()=>Fe())}},8675:(kt,We,U)=>{U.d(We,{O:()=>Ce});var g=U(7272),z=U(7669),ee=U(4482);function Ce(...Me){const Ne=(0,z.yG)(Me);return(0,ee.e)((He,Fe)=>{(Ne?(0,g.z)(Me,He,Ne):(0,g.z)(Me,He)).subscribe(Fe)})}},9468:(kt,We,U)=>{U.d(We,{R:()=>z});var g=U(4482);function z(ee,Ce=0){return(0,g.e)((Me,Ne)=>{Ne.add(ee.schedule(()=>Me.subscribe(Ne),Ce))})}},3900:(kt,We,U)=>{U.d(We,{w:()=>Ce});var g=U(8421),z=U(4482),ee=U(5403);function Ce(Me,Ne){return(0,z.e)((He,Fe)=>{let je=null,pe=0,fe=!1;const De=()=>fe&&!je&&Fe.complete();He.subscribe((0,ee.x)(Fe,at=>{null==je||je.unsubscribe();let Je=0;const ut=pe++;(0,g.Xf)(Me(at,ut)).subscribe(je=(0,ee.x)(Fe,wt=>Fe.next(Ne?Ne(at,wt,ut,Je++):wt),()=>{je=null,De()}))},()=>{fe=!0,De()}))})}},5698:(kt,We,U)=>{U.d(We,{q:()=>Ce});var g=U(515),z=U(4482),ee=U(5403);function Ce(Me){return Me<=0?()=>g.E:(0,z.e)((Ne,He)=>{let Fe=0;Ne.subscribe((0,ee.x)(He,je=>{++Fe<=Me&&(He.next(je),Me<=Fe&&He.complete())}))})}},8505:(kt,We,U)=>{U.d(We,{b:()=>Me});var g=U(576),z=U(4482),ee=U(5403),Ce=U(4671);function Me(Ne,He,Fe){const je=(0,g.m)(Ne)||He||Fe?{next:Ne,error:He,complete:Fe}:Ne;return je?(0,z.e)((pe,fe)=>{var De;null===(De=je.subscribe)||void 0===De||De.call(je);let at=!0;pe.subscribe((0,ee.x)(fe,Je=>{var ut;null===(ut=je.next)||void 0===ut||ut.call(je,Je),fe.next(Je)},()=>{var Je;at=!1,null===(Je=je.complete)||void 0===Je||Je.call(je),fe.complete()},Je=>{var ut;at=!1,null===(ut=je.error)||void 0===ut||ut.call(je,Je),fe.error(Je)},()=>{var Je,ut;at&&(null===(Je=je.unsubscribe)||void 0===Je||Je.call(je)),null===(ut=je.finalize)||void 0===ut||ut.call(je)}))}):Ce.y}},8068:(kt,We,U)=>{U.d(We,{T:()=>Ce});var g=U(6805),z=U(4482),ee=U(5403);function Ce(Ne=Me){return(0,z.e)((He,Fe)=>{let je=!1;He.subscribe((0,ee.x)(Fe,pe=>{je=!0,Fe.next(pe)},()=>je?Fe.complete():Fe.error(Ne())))})}function Me(){return new g.K}},4408:(kt,We,U)=>{U.d(We,{o:()=>Me});var g=U(727);class z extends g.w0{constructor(He,Fe){super()}schedule(He,Fe=0){return this}}const ee={setInterval(Ne,He,...Fe){const{delegate:je}=ee;return(null==je?void 0:je.setInterval)?je.setInterval(Ne,He,...Fe):setInterval(Ne,He,...Fe)},clearInterval(Ne){const{delegate:He}=ee;return((null==He?void 0:He.clearInterval)||clearInterval)(Ne)},delegate:void 0};var Ce=U(8737);class Me extends z{constructor(He,Fe){super(He,Fe),this.scheduler=He,this.work=Fe,this.pending=!1}schedule(He,Fe=0){if(this.closed)return this;this.state=He;const je=this.id,pe=this.scheduler;return null!=je&&(this.id=this.recycleAsyncId(pe,je,Fe)),this.pending=!0,this.delay=Fe,this.id=this.id||this.requestAsyncId(pe,this.id,Fe),this}requestAsyncId(He,Fe,je=0){return ee.setInterval(He.flush.bind(He,this),je)}recycleAsyncId(He,Fe,je=0){if(null!=je&&this.delay===je&&!1===this.pending)return Fe;ee.clearInterval(Fe)}execute(He,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const je=this._execute(He,Fe);if(je)return je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(He,Fe){let pe,je=!1;try{this.work(He)}catch(fe){je=!0,pe=fe||new Error("Scheduled action threw falsy error")}if(je)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:He,scheduler:Fe}=this,{actions:je}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)(je,this),null!=He&&(this.id=this.recycleAsyncId(Fe,He,null)),this.delay=null,super.unsubscribe()}}}},7565:(kt,We,U)=>{U.d(We,{v:()=>ee});var g=U(6063);class z{constructor(Me,Ne=z.now){this.schedulerActionCtor=Me,this.now=Ne}schedule(Me,Ne=0,He){return new this.schedulerActionCtor(this,Me).schedule(He,Ne)}}z.now=g.l.now;class ee extends z{constructor(Me,Ne=z.now){super(Me,Ne),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Me){const{actions:Ne}=this;if(this._active)return void Ne.push(Me);let He;this._active=!0;do{if(He=Me.execute(Me.state,Me.delay))break}while(Me=Ne.shift());if(this._active=!1,He){for(;Me=Ne.shift();)Me.unsubscribe();throw He}}}},4986:(kt,We,U)=>{U.d(We,{z:()=>ee});var g=U(4408);const ee=new(U(7565).v)(g.o)},6063:(kt,We,U)=>{U.d(We,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(kt,We,U)=>{U.d(We,{z:()=>g});const g={setTimeout(z,ee,...Ce){const{delegate:Me}=g;return(null==Me?void 0:Me.setTimeout)?Me.setTimeout(z,ee,...Ce):setTimeout(z,ee,...Ce)},clearTimeout(z){const{delegate:ee}=g;return((null==ee?void 0:ee.clearTimeout)||clearTimeout)(z)},delegate:void 0}},2202:(kt,We,U)=>{U.d(We,{h:()=>z});const z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(kt,We,U)=>{U.d(We,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(kt,We,U)=>{U.d(We,{K:()=>z});const z=(0,U(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(kt,We,U)=>{U.d(We,{_6:()=>Ne,jO:()=>Ce,yG:()=>Me});var g=U(576);function ee(He){return He[He.length-1]}function Ce(He){return(0,g.m)(ee(He))?He.pop():void 0}function Me(He){return function z(He){return He&&(0,g.m)(He.schedule)}(ee(He))?He.pop():void 0}function Ne(He,Fe){return"number"==typeof ee(He)?He.pop():Fe}},4742:(kt,We,U)=>{U.d(We,{D:()=>Me});const{isArray:g}=Array,{getPrototypeOf:z,prototype:ee,keys:Ce}=Object;function Me(He){if(1===He.length){const Fe=He[0];if(g(Fe))return{args:Fe,keys:null};if(function Ne(He){return He&&"object"==typeof He&&z(He)===ee}(Fe)){const je=Ce(Fe);return{args:je.map(pe=>Fe[pe]),keys:je}}}return{args:He,keys:null}}},8737:(kt,We,U)=>{function g(z,ee){if(z){const Ce=z.indexOf(ee);0<=Ce&&z.splice(Ce,1)}}U.d(We,{P:()=>g})},3888:(kt,We,U)=>{function g(z){const Ce=z(Me=>{Error.call(Me),Me.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}U.d(We,{d:()=>g})},1810:(kt,We,U)=>{function g(z,ee){return z.reduce((Ce,Me,Ne)=>(Ce[Me]=ee[Ne],Ce),{})}U.d(We,{n:()=>g})},2806:(kt,We,U)=>{U.d(We,{O:()=>Ce,x:()=>ee});var g=U(2416);let z=null;function ee(Me){if(g.v.useDeprecatedSynchronousErrorHandling){const Ne=!z;if(Ne&&(z={errorThrown:!1,error:null}),Me(),Ne){const{errorThrown:He,error:Fe}=z;if(z=null,He)throw Fe}}else Me()}function Ce(Me){g.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=Me)}},9672:(kt,We,U)=>{function g(z,ee,Ce,Me=0,Ne=!1){const He=ee.schedule(function(){Ce(),Ne?z.add(this.schedule(null,Me)):this.unsubscribe()},Me);if(z.add(He),!Ne)return He}U.d(We,{f:()=>g})},4671:(kt,We,U)=>{function g(z){return z}U.d(We,{y:()=>g})},1144:(kt,We,U)=>{U.d(We,{z:()=>g});const g=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(kt,We,U)=>{U.d(We,{D:()=>z});var g=U(576);function z(ee){return Symbol.asyncIterator&&(0,g.m)(null==ee?void 0:ee[Symbol.asyncIterator])}},576:(kt,We,U)=>{function g(z){return"function"==typeof z}U.d(We,{m:()=>g})},3670:(kt,We,U)=>{U.d(We,{c:()=>ee});var g=U(8822),z=U(576);function ee(Ce){return(0,z.m)(Ce[g.L])}},6495:(kt,We,U)=>{U.d(We,{T:()=>ee});var g=U(2202),z=U(576);function ee(Ce){return(0,z.m)(null==Ce?void 0:Ce[g.h])}},8239:(kt,We,U)=>{U.d(We,{t:()=>z});var g=U(576);function z(ee){return(0,g.m)(null==ee?void 0:ee.then)}},3260:(kt,We,U)=>{U.d(We,{L:()=>Ce,Q:()=>ee});var g=U(655),z=U(576);function ee(Me){return(0,g.FC)(this,arguments,function*(){const He=Me.getReader();try{for(;;){const{value:Fe,done:je}=yield(0,g.qq)(He.read());if(je)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Fe)}}finally{He.releaseLock()}})}function Ce(Me){return(0,z.m)(null==Me?void 0:Me.getReader)}},4482:(kt,We,U)=>{U.d(We,{A:()=>z,e:()=>ee});var g=U(576);function z(Ce){return(0,g.m)(null==Ce?void 0:Ce.lift)}function ee(Ce){return Me=>{if(z(Me))return Me.lift(function(Ne){try{return Ce(Ne,this)}catch(He){this.error(He)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(kt,We,U)=>{U.d(We,{Z:()=>Ce});var g=U(4004);const{isArray:z}=Array;function Ce(Me){return(0,g.U)(Ne=>function ee(Me,Ne){return z(Ne)?Me(...Ne):Me(Ne)}(Me,Ne))}},5032:(kt,We,U)=>{function g(){}U.d(We,{Z:()=>g})},7849:(kt,We,U)=>{U.d(We,{h:()=>ee});var g=U(2416),z=U(3410);function ee(Ce){z.z.setTimeout(()=>{const{onUnhandledError:Me}=g.v;if(!Me)throw Ce;Me(Ce)})}},4532:(kt,We,U)=>{function g(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(We,{z:()=>g})},655:(kt,We,U)=>{function Ce(re,ce){var de={};for(var Be in re)Object.prototype.hasOwnProperty.call(re,Be)&&ce.indexOf(Be)<0&&(de[Be]=re[Be]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(Be=Object.getOwnPropertySymbols(re);Ge<Be.length;Ge++)ce.indexOf(Be[Ge])<0&&Object.prototype.propertyIsEnumerable.call(re,Be[Ge])&&(de[Be[Ge]]=re[Be[Ge]])}return de}function Fe(re,ce,de,Be){return new(de||(de=Promise))(function(_t,Mt){function Kt(pn){try{ft(Be.next(pn))}catch(on){Mt(on)}}function Zt(pn){try{ft(Be.throw(pn))}catch(on){Mt(on)}}function ft(pn){pn.done?_t(pn.value):function Ge(_t){return _t instanceof de?_t:new de(function(Mt){Mt(_t)})}(pn.value).then(Kt,Zt)}ft((Be=Be.apply(re,ce||[])).next())})}function Ye(re){return this instanceof Ye?(this.v=re,this):new Ye(re)}function lt(re,ce,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,Be=de.apply(re,ce||[]),_t=[];return Ge={},Mt("next"),Mt("throw"),Mt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Mt(tt){Be[tt]&&(Ge[tt]=function(Qe){return new Promise(function(Te,Ve){_t.push([tt,Qe,Te,Ve])>1||Kt(tt,Qe)})})}function Kt(tt,Qe){try{!function Zt(tt){tt.value instanceof Ye?Promise.resolve(tt.value.v).then(ft,pn):on(_t[0][2],tt)}(Be[tt](Qe))}catch(Te){on(_t[0][3],Te)}}function ft(tt){Kt("next",tt)}function pn(tt){Kt("throw",tt)}function on(tt,Qe){tt(Qe),_t.shift(),_t.length&&Kt(_t[0][0],_t[0][1])}}function Rt(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ce=re[Symbol.asyncIterator];return ce?ce.call(re):(re=function De(re){var ce="function"==typeof Symbol&&Symbol.iterator,de=ce&&re[ce],Be=0;if(de)return de.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Be>=re.length&&(re=void 0),{value:re&&re[Be++],done:!re}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),de={},Be("next"),Be("throw"),Be("return"),de[Symbol.asyncIterator]=function(){return this},de);function Be(_t){de[_t]=re[_t]&&function(Mt){return new Promise(function(Kt,Zt){!function Ge(_t,Mt,Kt,Zt){Promise.resolve(Zt).then(function(ft){_t({value:ft,done:Kt})},Mt)}(Kt,Zt,(Mt=re[_t](Mt)).done,Mt.value)})}}}U.d(We,{FC:()=>lt,KL:()=>Rt,_T:()=>Ce,mG:()=>Fe,qq:()=>Ye})},1777:(kt,We,U)=>{U.d(We,{LC:()=>z,SB:()=>je,X$:()=>Ce,ZE:()=>xt,ZN:()=>lt,_j:()=>g,eR:()=>fe,jt:()=>Me,k1:()=>Rt,l3:()=>ee,oB:()=>Fe,vP:()=>He});class g{}class z{}const ee="*";function Ce(oe,le){return{type:7,name:oe,definitions:le,options:{}}}function Me(oe,le=null){return{type:4,styles:le,timings:oe}}function He(oe,le=null){return{type:2,steps:oe,options:le}}function Fe(oe){return{type:6,styles:oe,offset:null}}function je(oe,le,$e){return{type:0,name:oe,styles:le,options:$e}}function fe(oe,le,$e=null){return{type:1,expr:oe,animation:le,options:$e}}function Ye(oe){Promise.resolve(null).then(oe)}class lt{constructor(le=0,$e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=le+$e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(le=>le()),this._onDoneFns=[])}onStart(le){this._onStartFns.push(le)}onDone(le){this._onDoneFns.push(le)}onDestroy(le){this._onDestroyFns.push(le)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ye(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(le=>le()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(le=>le()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(le){this._position=this.totalTime?le*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(le){const $e="start"==le?this._onStartFns:this._onDoneFns;$e.forEach(ct=>ct()),$e.length=0}}class xt{constructor(le){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=le;let $e=0,ct=0,st=0;const me=this.players.length;0==me?Ye(()=>this._onFinish()):this.players.forEach(ke=>{ke.onDone(()=>{++$e==me&&this._onFinish()}),ke.onDestroy(()=>{++ct==me&&this._onDestroy()}),ke.onStart(()=>{++st==me&&this._onStart()})}),this.totalTime=this.players.reduce((ke,re)=>Math.max(ke,re.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(le=>le()),this._onDoneFns=[])}init(){this.players.forEach(le=>le.init())}onStart(le){this._onStartFns.push(le)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(le=>le()),this._onStartFns=[])}onDone(le){this._onDoneFns.push(le)}onDestroy(le){this._onDestroyFns.push(le)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(le=>le.play())}pause(){this.players.forEach(le=>le.pause())}restart(){this.players.forEach(le=>le.restart())}finish(){this._onFinish(),this.players.forEach(le=>le.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(le=>le.destroy()),this._onDestroyFns.forEach(le=>le()),this._onDestroyFns=[])}reset(){this.players.forEach(le=>le.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(le){const $e=le*this.totalTime;this.players.forEach(ct=>{const st=ct.totalTime?Math.min(1,$e/ct.totalTime):1;ct.setPosition(st)})}getPosition(){const le=this.players.reduce(($e,ct)=>null===$e||ct.totalTime>$e.totalTime?ct:$e,null);return null!=le?le.getPosition():0}beforeDestroy(){this.players.forEach(le=>{le.beforeDestroy&&le.beforeDestroy()})}triggerCallback(le){const $e="start"==le?this._onStartFns:this._onDoneFns;$e.forEach(ct=>ct()),$e.length=0}}const Rt="!"},9808:(kt,We,U)=>{U.d(We,{Do:()=>oe,EM:()=>Rs,HT:()=>Me,JF:()=>_r,K0:()=>He,Mx:()=>Qi,O5:()=>yr,PM:()=>ns,S$:()=>Ye,V_:()=>pe,Ye:()=>le,b0:()=>Rt,bD:()=>bi,ez:()=>aa,lw:()=>Fe,mr:()=>xt,q:()=>ee,sg:()=>Wr,w_:()=>Ne});var g=U(5e3);let z=null;function ee(){return z}function Me(k){z||(z=k)}class Ne{}const He=new g.OlP("DocumentToken");let Fe=(()=>{class k{historyGo(P){throw new Error("Not implemented")}}return k.\u0275fac=function(P){return new(P||k)},k.\u0275prov=g.Yz7({token:k,factory:function(){return function je(){return(0,g.LFG)(fe)}()},providedIn:"platform"}),k})();const pe=new g.OlP("Location Initialized");let fe=(()=>{class k extends Fe{constructor(P){super(),this._doc=P,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(P){const Q=ee().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",P,!1),()=>Q.removeEventListener("popstate",P)}onHashChange(P){const Q=ee().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",P,!1),()=>Q.removeEventListener("hashchange",P)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(P){this.location.pathname=P}pushState(P,Q,Ee){De()?this._history.pushState(P,Q,Ee):this.location.hash=Ee}replaceState(P,Q,Ee){De()?this._history.replaceState(P,Q,Ee):this.location.hash=Ee}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return k.\u0275fac=function(P){return new(P||k)(g.LFG(He))},k.\u0275prov=g.Yz7({token:k,factory:function(){return function at(){return new fe((0,g.LFG)(He))}()},providedIn:"platform"}),k})();function De(){return!!window.history.pushState}function Je(k,q){if(0==k.length)return q;if(0==q.length)return k;let P=0;return k.endsWith("/")&&P++,q.startsWith("/")&&P++,2==P?k+q.substring(1):1==P?k+q:k+"/"+q}function ut(k){const q=k.match(/#|\?|$/),P=q&&q.index||k.length;return k.slice(0,P-("/"===k[P-1]?1:0))+k.slice(P)}function wt(k){return k&&"?"!==k[0]?"?"+k:k}let Ye=(()=>{class k{historyGo(P){throw new Error("Not implemented")}}return k.\u0275fac=function(P){return new(P||k)},k.\u0275prov=g.Yz7({token:k,factory:function(){return function lt(k){const q=(0,g.LFG)(He).location;return new Rt((0,g.LFG)(Fe),q&&q.origin||"")}()},providedIn:"root"}),k})();const xt=new g.OlP("appBaseHref");let Rt=(()=>{class k extends Ye{constructor(P,Q){if(super(),this._platformLocation=P,this._removeListenerFns=[],null==Q&&(Q=this._platformLocation.getBaseHrefFromDOM()),null==Q)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Q}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return Je(this._baseHref,P)}path(P=!1){const Q=this._platformLocation.pathname+wt(this._platformLocation.search),Ee=this._platformLocation.hash;return Ee&&P?`${Q}${Ee}`:Q}pushState(P,Q,Ee,rt){const ot=this.prepareExternalUrl(Ee+wt(rt));this._platformLocation.pushState(P,Q,ot)}replaceState(P,Q,Ee,rt){const ot=this.prepareExternalUrl(Ee+wt(rt));this._platformLocation.replaceState(P,Q,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var Q,Ee;null===(Ee=(Q=this._platformLocation).historyGo)||void 0===Ee||Ee.call(Q,P)}}return k.\u0275fac=function(P){return new(P||k)(g.LFG(Fe),g.LFG(xt,8))},k.\u0275prov=g.Yz7({token:k,factory:k.\u0275fac}),k})(),oe=(()=>{class k extends Ye{constructor(P,Q){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(P){const Q=Je(this._baseHref,P);return Q.length>0?"#"+Q:Q}pushState(P,Q,Ee,rt){let ot=this.prepareExternalUrl(Ee+wt(rt));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.pushState(P,Q,ot)}replaceState(P,Q,Ee,rt){let ot=this.prepareExternalUrl(Ee+wt(rt));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.replaceState(P,Q,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var Q,Ee;null===(Ee=(Q=this._platformLocation).historyGo)||void 0===Ee||Ee.call(Q,P)}}return k.\u0275fac=function(P){return new(P||k)(g.LFG(Fe),g.LFG(xt,8))},k.\u0275prov=g.Yz7({token:k,factory:k.\u0275fac}),k})(),le=(()=>{class k{constructor(P,Q){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=P;const Ee=this._platformStrategy.getBaseHref();this._platformLocation=Q,this._baseHref=ut(st(Ee)),this._platformStrategy.onPopState(rt=>{this._subject.emit({url:this.path(!0),pop:!0,state:rt.state,type:rt.type})})}path(P=!1){return this.normalize(this._platformStrategy.path(P))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(P,Q=""){return this.path()==this.normalize(P+wt(Q))}normalize(P){return k.stripTrailingSlash(function ct(k,q){return k&&q.startsWith(k)?q.substring(k.length):q}(this._baseHref,st(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._platformStrategy.prepareExternalUrl(P)}go(P,Q="",Ee=null){this._platformStrategy.pushState(Ee,"",P,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+wt(Q)),Ee)}replaceState(P,Q="",Ee=null){this._platformStrategy.replaceState(Ee,"",P,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+wt(Q)),Ee)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(P=0){var Q,Ee;null===(Ee=(Q=this._platformStrategy).historyGo)||void 0===Ee||Ee.call(Q,P)}onUrlChange(P){this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)}))}_notifyUrlChangeListeners(P="",Q){this._urlChangeListeners.forEach(Ee=>Ee(P,Q))}subscribe(P,Q,Ee){return this._subject.subscribe({next:P,error:Q,complete:Ee})}}return k.normalizeQueryParams=wt,k.joinWithSlash=Je,k.stripTrailingSlash=ut,k.\u0275fac=function(P){return new(P||k)(g.LFG(Ye),g.LFG(Fe))},k.\u0275prov=g.Yz7({token:k,factory:function(){return function $e(){return new le((0,g.LFG)(Ye),(0,g.LFG)(Fe))}()},providedIn:"root"}),k})();function st(k){return k.replace(/\/index.html$/,"")}function Qi(k,q){q=encodeURIComponent(q);for(const P of k.split(";")){const Q=P.indexOf("="),[Ee,rt]=-1==Q?[P,""]:[P.slice(0,Q),P.slice(Q+1)];if(Ee.trim()===q)return decodeURIComponent(rt)}return null}class Ai{constructor(q,P,Q,Ee){this.$implicit=q,this.ngForOf=P,this.index=Q,this.count=Ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wr=(()=>{class k{constructor(P,Q,Ee){this._viewContainer=P,this._template=Q,this._differs=Ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const Q=this._viewContainer;P.forEachOperation((Ee,rt,ot)=>{if(null==Ee.previousIndex)Q.createEmbeddedView(this._template,new Ai(Ee.item,this._ngForOf,-1,-1),null===ot?void 0:ot);else if(null==ot)Q.remove(null===rt?void 0:rt);else if(null!==rt){const Qt=Q.get(rt);Q.move(Qt,ot),Vr(Qt,Ee)}});for(let Ee=0,rt=Q.length;Ee<rt;Ee++){const Qt=Q.get(Ee).context;Qt.index=Ee,Qt.count=rt,Qt.ngForOf=this._ngForOf}P.forEachIdentityChange(Ee=>{Vr(Q.get(Ee.currentIndex),Ee)})}static ngTemplateContextGuard(P,Q){return!0}}return k.\u0275fac=function(P){return new(P||k)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},k.\u0275dir=g.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),k})();function Vr(k,q){k.context.$implicit=q.item}let yr=(()=>{class k{constructor(P,Q){this._viewContainer=P,this._context=new sr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){Ts("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){Ts("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,Q){return!0}}return k.\u0275fac=function(P){return new(P||k)(g.Y36(g.s_b),g.Y36(g.Rgc))},k.\u0275dir=g.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class sr{constructor(){this.$implicit=null,this.ngIf=null}}function Ts(k,q){if(q&&!q.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,g.AaK)(q)}'.`)}let aa=(()=>{class k{}return k.\u0275fac=function(P){return new(P||k)},k.\u0275mod=g.oAB({type:k}),k.\u0275inj=g.cJS({}),k})();const bi="browser";function ns(k){return"server"===k}let Rs=(()=>{class k{}return k.\u0275prov=(0,g.Yz7)({token:k,providedIn:"root",factory:()=>new rs((0,g.LFG)(He),window)}),k})();class rs{constructor(q,P){this.document=q,this.window=P,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const P=function _i(k,q){const P=k.getElementById(q)||k.getElementsByName(q)[0];if(P)return P;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const Q=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let Ee=Q.currentNode;for(;Ee;){const rt=Ee.shadowRoot;if(rt){const ot=rt.getElementById(q)||rt.querySelector(`[name="${q}"]`);if(ot)return ot}Ee=Q.nextNode()}}return null}(this.document,q);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=q)}}scrollToElement(q){const P=q.getBoundingClientRect(),Q=P.left+this.window.pageXOffset,Ee=P.top+this.window.pageYOffset,rt=this.offset();this.window.scrollTo(Q-rt[0],Ee-rt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=is(this.window.history)||is(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function is(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class _r{}},5e3:(kt,We,U)=>{U.d(We,{$8M:()=>Ga,$Z:()=>qi,AFp:()=>dE,ALo:()=>P0,AaK:()=>Fe,BQk:()=>If,CHM:()=>pr,CRH:()=>G0,CZH:()=>_v,CqO:()=>ng,EJc:()=>Cb,EiD:()=>tn,EpF:()=>D_,F$t:()=>ig,F4k:()=>Gm,FYo:()=>E0,FiY:()=>Ks,G48:()=>qb,Gf:()=>H0,GfV:()=>w0,Gpc:()=>fe,Hsn:()=>sh,JOm:()=>X,JVY:()=>uc,L6k:()=>lc,LAX:()=>kl,LFG:()=>hn,LSH:()=>ar,Lbi:()=>wb,NdJ:()=>Vu,OlP:()=>Ii,PXZ:()=>Ub,Q6J:()=>jm,QGY:()=>tg,Qsj:()=>yw,R0b:()=>Sl,RDi:()=>is,Rgc:()=>Dg,SBq:()=>wg,Sil:()=>Tb,Suo:()=>$0,TTD:()=>ts,TgZ:()=>rh,Tol:()=>ry,Udp:()=>Sf,VLi:()=>Fb,X6Q:()=>Wb,XFs:()=>Wt,Xpm:()=>jt,Y36:()=>nh,YKP:()=>D0,YNc:()=>gf,Yjl:()=>ie,Yz7:()=>Qe,ZZ4:()=>Ov,_Bn:()=>y0,_UZ:()=>eg,_Vd:()=>xy,_c5:()=>lI,_uU:()=>cg,aQg:()=>Nv,c2e:()=>bb,cJS:()=>Ve,cg1:()=>Pf,d8E:()=>Nf,dDg:()=>yE,deG:()=>iu,dqk:()=>Un,eBb:()=>Lc,eFA:()=>EE,ekj:()=>xc,evT:()=>Ih,g9A:()=>fE,h0i:()=>jf,hGG:()=>cI,hij:()=>xf,iGM:()=>j0,ifc:()=>Vt,ip1:()=>cE,kL8:()=>Cd,lG2:()=>be,lcZ:()=>k0,mCW:()=>va,n5z:()=>Ps,oAB:()=>Lr,oJD:()=>Rn,oxw:()=>zm,pB0:()=>Vc,q3G:()=>bt,q4F:()=>b0,qLn:()=>hc,qOj:()=>Kd,qZA:()=>wf,qzn:()=>Xa,sBO:()=>Kb,sIi:()=>Zd,s_b:()=>Ny,soG:()=>Ev,tBr:()=>dr,tb:()=>pE,tp0:()=>Ya,uIk:()=>ff,vHH:()=>ut,vpe:()=>nc,wAp:()=>kn,xp6:()=>Fg,yhl:()=>Bo,ynx:()=>bf,z2F:()=>Tv,z3N:()=>So,zSh:()=>Cp,zs3:()=>vu});var g=U(7579),z=U(727),ee=U(8306),Ce=U(6451),Me=U(3099);function Ne(n){for(let r in n)if(n[r]===Ne)return r;throw Error("Could not find renamed property on target object.")}function He(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Fe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Fe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function je(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const pe=Ne({__forward_ref__:Ne});function fe(n){return n.__forward_ref__=fe,n.toString=function(){return Fe(this())},n}function De(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(pe)&&n.__forward_ref__===fe}class ut extends Error{constructor(r,s){super(function wt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ye(n){return"string"==typeof n?n:null==n?"":String(n)}function lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ye(n)}function le(n,r){const s=r?` in ${r}`:"";throw new ut(-201,`No provider for ${lt(n)} found${s}`)}function Zt(n,r){null==n&&function ft(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ve(n){return{providers:n.providers||[],imports:n.imports||[]}}function vt(n){return an(n,wr)||an(n,lr)}function an(n,r){return n.hasOwnProperty(r)?n[r]:null}function Wn(n){return n&&(n.hasOwnProperty(ur)||n.hasOwnProperty(Hn))?n[ur]:null}const wr=Ne({\u0275prov:Ne}),ur=Ne({\u0275inj:Ne}),lr=Ne({ngInjectableDef:Ne}),Hn=Ne({ngInjectorDef:Ne});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let fn;function mn(n){const r=fn;return fn=n,r}function ci(n,r,s){const a=vt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Wt.Optional?null:void 0!==r?r:void le(Fe(n),"Injector")}function Kr(n){return{toString:n}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Vt=(()=>{return(n=Vt||(Vt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Vt;var n})();const Yt="undefined"!=typeof globalThis&&globalThis,en="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=Yt||"undefined"!=typeof global&&global||en||rr,cr={},ge=[],we=Ne({\u0275cmp:Ne}),Ae=Ne({\u0275dir:Ne}),pt=Ne({\u0275pipe:Ne}),ye=Ne({\u0275mod:Ne}),Le=Ne({\u0275fac:Ne}),yt=Ne({__NG_ELEMENT_ID__:Ne});let Ut=0;function jt(n){return Kr(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ge,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Vt.Emulated,id:"c",styles:n.styles||ge,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,p=n.features,w=n.pipes;return a.id+=Ut++,a.inputs=ze(n.inputs,s),a.outputs=ze(n.outputs),p&&p.forEach(D=>D(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ir):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(rn):null,a})}function ir(n){return Re(n)||function gt(n){return n[Ae]||null}(n)}function rn(n){return function Xt(n){return n[pt]||null}(n)}const tr={};function Lr(n){return Kr(()=>{const r={type:n.type,bootstrap:n.bootstrap||ge,declarations:n.declarations||ge,imports:n.imports||ge,exports:n.exports||ge,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(tr[n.id]=n.type),r})}function ze(n,r){if(null==n)return cr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),s[l]=a,r&&(r[l]=p)}return s}const be=jt;function ie(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Re(n){return n[we]||null}function sn(n,r){const s=n[ye]||null;if(!s&&!0===r)throw new Error(`Type ${Fe(n)} does not have '\u0275mod' property.`);return s}function Zr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Oi(n){return Array.isArray(n)&&!0===n[1]}function As(n){return 0!=(8&n.flags)}function Js(n){return 2==(2&n.flags)}function Ji(n){return 1==(1&n.flags)}function ls(n){return null!==n.template}function Xi(n){return 0!=(512&n[2])}function oi(n,r){return n.hasOwnProperty(Le)?n[Le]:null}class Hs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ts(){return cs}function cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=ds),$s}function $s(){const n=bi(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===cr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ds(n,r,s,a){const l=bi(n)||function _o(n,r){return n[aa]=r}(n,{previous:cr,current:null}),p=l.current||(l.current={}),w=l.previous,D=this.declaredInputs[s],S=w[D];p[D]=new Hs(S&&S.currentValue,r,w===cr),n[a]=r}ts.ngInherit=!0;const aa="__ngSimpleChanges__";function bi(n){return n[aa]||null}let rs;function is(n){rs=n}function _i(){return void 0!==rs?rs:"undefined"!=typeof document?document:void 0}function _r(n){return!!n.listen}const k={createRenderer:(n,r)=>_i()};function P(n){for(;Array.isArray(n);)n=n[0];return n}function rt(n,r){return P(r[n])}function ot(n,r){return P(r[n.index])}function Mn(n,r){return n.data[r]}function In(n,r){const s=r[n];return Zr(s)?s:s[0]}function Ln(n){return 4==(4&n[2])}function Nr(n){return 128==(128&n[2])}function Dr(n,r){return null==r?null:n[r]}function Pr(n){n[18]=0}function vi(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const vn={lFrame:Ro(null),bindingsEnabled:!0};function N(){return vn.bindingsEnabled}function ve(){return vn.lFrame.lView}function Tt(){return vn.lFrame.tView}function pr(n){return vn.lFrame.contextLView=n,n[8]}function Qn(){let n=ki();for(;null!==n&&64===n.type;)n=n.parent;return n}function ki(){return vn.lFrame.currentTNode}function Fi(n,r){const s=vn.lFrame;s.currentTNode=n,s.isParent=r}function Os(){return vn.lFrame.isParent}function wo(){vn.lFrame.isParent=!1}function xo(){return vn.lFrame.bindingIndex++}function ss(n){const r=vn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Jr(n,r){const s=vn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Pa(r)}function Pa(n){vn.lFrame.currentDirectiveIndex=n}function ka(n){const r=vn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Cu(){return vn.lFrame.currentQueryIndex}function Ko(n){vn.lFrame.currentQueryIndex=n}function Fa(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ia(n,r,s){if(s&Wt.SkipSelf){let l=r,p=n;for(;!(l=l.parent,null!==l||s&Wt.Host||(l=Fa(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;r=l,n=p}const a=vn.lFrame=La();return a.currentTNode=r,a.lView=n,!0}function bo(n){const r=La(),s=n[1];vn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function La(){const n=vn.lFrame,r=null===n?null:n.child;return null===r?Ro(n):r}function Ro(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Es(){const n=vn.lFrame;return vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ru=Es;function la(){const n=Es();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function os(){return vn.lFrame.selectedIndex}function No(n){vn.lFrame.selectedIndex=n}function kr(){const n=vn.lFrame;return Mn(n.tView,n.selectedIndex)}function Po(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const p=n.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:D,ngAfterViewInit:S,ngAfterViewChecked:j,ngOnDestroy:Z}=p;w&&(n.contentHooks||(n.contentHooks=[])).push(-s,w),D&&((n.contentHooks||(n.contentHooks=[])).push(s,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,D)),S&&(n.viewHooks||(n.viewHooks=[])).push(-s,S),j&&((n.viewHooks||(n.viewHooks=[])).push(s,j),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,j)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function io(n,r,s){Ca(n,r,3,s)}function ko(n,r,s,a){(3&n[2])===s&&Ca(n,r,s,a)}function En(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ca(n,r,s,a){const p=null!=a?a:-1,w=r.length-1;let D=0;for(let S=void 0!==a?65535&n[18]:0;S<w;S++)if("number"==typeof r[S+1]){if(D=r[S],null!=a&&D>=a)break}else r[S]<0&&(n[18]+=65536),(D<p||-1==p)&&(ca(n,s,r,S),n[18]=(4294901760&n[18])+S+2),S++}function ca(n,r,s,a){const l=s[a]<0,p=s[a+1],D=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{p.call(D)}finally{}}}else try{p.call(D)}finally{}}class oo{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Zo(n,r,s){const a=_r(n);let l=0;for(;l<s.length;){const p=s[l];if("number"==typeof p){if(0!==p)break;l++;const w=s[l++],D=s[l++],S=s[l++];a?n.setAttribute(r,D,S,w):r.setAttributeNS(w,D,S)}else{const w=p,D=s[++l];uo(w)?a&&n.setProperty(r,w,D):a?n.setAttribute(r,w,D):r.setAttribute(w,D),l++}}return l}function zs(n){return 3===n||4===n||6===n}function uo(n){return 64===n.charCodeAt(0)}function Io(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||$a(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function $a(n,r,s,a,l){let p=0,w=n.length;if(-1===r)w=-1;else for(;p<n.length;){const D=n[p++];if("number"==typeof D){if(D===r){w=-1;break}if(D>r){w=p-1;break}}}for(;p<n.length;){const D=n[p];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(n[p+1]=l));if(a===n[p+1])return void(n[p+2]=l)}p++,null!==a&&p++,null!==l&&p++}-1!==w&&(n.splice(w,0,r),p=w+1),n.splice(p++,0,s),null!==a&&n.splice(p++,0,a),null!==l&&n.splice(p++,0,l)}function da(n){return-1!==n}function Ws(n){return 32767&n}function ai(n,r){let s=function Xr(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Co=!0;function Ta(n){const r=Co;return Co=n,r}let Lo=0;function Do(n,r){const s=jr(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,St(a.data,n),St(r,null),St(a.blueprint,null));const l=T(n,r),p=n.injectorIndex;if(da(l)){const w=Ws(l),D=ai(l,r),S=D[1].data;for(let j=0;j<8;j++)r[p+j]=D[w+j]|S[w+j]}return r[p+8]=l,p}function St(n,r){n.push(0,0,0,0,0,0,0,0,r)}function jr(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function T(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const p=l[1],w=p.type;if(a=2===w?p.declTNode:1===w?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function C(n,r,s){!function Yo(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(yt)&&(a=s[yt]),null==a&&(a=s[yt]=Lo++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function M(n,r,s){if(s&Wt.Optional)return n;le(r,"NodeInjector")}function V(n,r,s,a){if(s&Wt.Optional&&void 0===a&&(a=null),0==(s&(Wt.Self|Wt.Host))){const l=n[9],p=mn(void 0);try{return l?l.get(r,a,s&Wt.Optional):ci(r,a,s&Wt.Optional)}finally{mn(p)}}return M(a,r,s)}function G(n,r,s,a=Wt.Default,l){if(null!==n){const p=function ln(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(yt)?n[yt]:void 0;return"number"==typeof r?r>=0?255&r:ne:r}(s);if("function"==typeof p){if(!Ia(r,n,a))return a&Wt.Host?M(l,s,a):V(r,s,a,l);try{const w=p(a);if(null!=w||a&Wt.Optional)return w;le(s)}finally{ru()}}else if("number"==typeof p){let w=null,D=jr(n,r),S=-1,j=a&Wt.Host?r[16][6]:null;for((-1===D||a&Wt.SkipSelf)&&(S=-1===D?T(n,r):r[D+8],-1!==S&&vr(a,!1)?(w=r[1],D=Ws(S),r=ai(S,r)):D=-1);-1!==D;){const Z=r[1];if(gr(p,D,Z.data)){const ue=et(D,r,s,w,a,j);if(ue!==W)return ue}S=r[D+8],-1!==S&&vr(a,r[1].data[D+8]===j)&&gr(p,D,r)?(w=Z,D=Ws(S),r=ai(S,r)):D=-1}}}return V(r,s,a,l)}const W={};function ne(){return new Tr(Qn(),ve())}function et(n,r,s,a,l,p){const w=r[1],D=w.data[n+8],Z=qt(D,w,s,null==a?Js(D)&&Co:a!=w&&0!=(3&D.type),l&Wt.Host&&p===D);return null!==Z?Bn(r,w,Z,D):W}function qt(n,r,s,a,l){const p=n.providerIndexes,w=r.data,D=1048575&p,S=n.directiveStart,Z=p>>20,Se=l?D+Z:n.directiveEnd;for(let Ke=a?D:D+Z;Ke<Se;Ke++){const mt=w[Ke];if(Ke<S&&s===mt||Ke>=S&&mt.type===s)return Ke}if(l){const Ke=w[S];if(Ke&&ls(Ke)&&Ke.type===s)return S}return null}function Bn(n,r,s,a){let l=n[s];const p=r.data;if(function as(n){return n instanceof oo}(l)){const w=l;w.resolving&&function xt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ut(-200,`Circular dependency in DI detected for ${n}${s}`)}(lt(p[s]));const D=Ta(w.canSeeViewProviders);w.resolving=!0;const S=w.injectImpl?mn(w.injectImpl):null;Ia(n,a,Wt.Default);try{l=n[s]=w.factory(void 0,p,n,a),r.firstCreatePass&&s>=a.directiveStart&&function ja(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:p}=r.type.prototype;if(a){const w=cs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,p))}(s,p[s],r)}finally{null!==S&&mn(S),Ta(D),w.resolving=!1,ru()}}return l}function gr(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function vr(n,r){return!(n&Wt.Self||n&Wt.Host&&r)}class Tr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return G(this._tNode,this._lView,r,a,s)}}function Ps(n){return Kr(()=>{const r=n.prototype.constructor,s=r[Le]||Vo(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const p=l[Le]||Vo(l);if(p&&p!==s)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Vo(n){return at(n)?()=>{const r=Vo(De(n));return r&&r()}:oi(n)}function Ga(n){return function E(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const p=s[l];if(zs(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(p===r)return s[l+1];l+=2}}}return null}(Qn(),n)}const ha="__parameters__";function za(n,r,s){return Kr(()=>{const a=function Aa(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...p){if(this instanceof l)return a.apply(this,p),this;const w=new l(...p);return D.annotation=w,D;function D(S,j,Z){const ue=S.hasOwnProperty(ha)?S[ha]:Object.defineProperty(S,ha,{value:[]})[ha];for(;ue.length<=Z;)ue.push(null);return(ue[Z]=ue[Z]||[]).push(w),S}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Ii{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Qe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const iu=new Ii("AnalyzeForEntryComponents");function bs(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),bs(a,r)):r!==n&&r.push(a)}return r}function ps(n,r){n.forEach(s=>Array.isArray(s)?ps(s,r):r(s))}function lo(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ei(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Is(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function pi(n,r,s){let a=ho(n,r);return a>=0?n[1|a]=s:(a=~a,function Ft(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function qa(n,r){const s=ho(n,r);if(s>=0)return n[1|s]}function ho(n,r){return function qs(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const p=a+(l-a>>1),w=n[p<<s];if(r===w)return p<<s;w>r?l=p:a=p+1}return~(l<<s)}(n,r,1)}const Mi={},Za="__NG_DI_FLAG__",au="ngTempTokenPath",F=/\n/gm,ae="__source",Ue=Ne({provide:String,useValue:Ne});let Xe;function Dt(n){const r=Xe;return Xe=n,r}function un(n,r=Wt.Default){if(void 0===Xe)throw new ut(203,"");return null===Xe?ci(n,void 0,r):Xe.get(n,r&Wt.Optional?null:void 0,r)}function hn(n,r=Wt.Default){return(function Cn(){return fn}()||un)(De(n),r)}const Jn=hn;function Dn(n){const r=[];for(let s=0;s<n.length;s++){const a=De(n[s]);if(Array.isArray(a)){if(0===a.length)throw new ut(900,"");let l,p=Wt.Default;for(let w=0;w<a.length;w++){const D=a[w],S=Xn(D);"number"==typeof S?-1===S?l=D.token:p|=S:l=D}r.push(hn(l,p))}else r.push(hn(a))}return r}function $i(n,r){return n[Za]=r,n.prototype[Za]=r,n}function Xn(n){return n[Za]}const dr=$i(za("Inject",n=>({token:n})),-1),Ks=$i(za("Optional"),8),Ya=$i(za("SkipSelf"),4);let Sa,Ou;function Ku(n){var r;return(null===(r=function cu(){if(void 0===Sa&&(Sa=null,Un.trustedTypes))try{Sa=Un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sa}())||void 0===r?void 0:r.createHTML(n))||n}function oc(n){var r;return(null===(r=function hu(){if(void 0===Ou&&(Ou=null,Un.trustedTypes))try{Ou=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ou}())||void 0===r?void 0:r.createHTML(n))||n}class Ja{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zu extends Ja{getTypeName(){return"HTML"}}class ya extends Ja{getTypeName(){return"Style"}}class Fc extends Ja{getTypeName(){return"Script"}}class pl extends Ja{getTypeName(){return"URL"}}class gl extends Ja{getTypeName(){return"ResourceURL"}}function So(n){return n instanceof Ja?n.changingThisBreaksApplicationSecurity:n}function Xa(n,r){const s=Bo(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Bo(n){return n instanceof Ja&&n.getTypeName()||null}function uc(n){return new Zu(n)}function lc(n){return new ya(n)}function Lc(n){return new Fc(n)}function kl(n){return new pl(n)}function Vc(n){return new gl(n)}class Uc{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Ku(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class Md{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Ku(r),s;const a=this.inertDocument.createElement("body");return a.innerHTML=Ku(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const s=r.attributes;for(let l=s.length-1;0<l;l--){const w=s.item(l).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Qu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function va(n){return(n=String(n)).match(Qu)||n.match(_a)?n:"unsafe:"+n}function Fs(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function Xu(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const ml=Fs("area,br,col,hr,img,wbr"),yl=Fs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jc=Fs("rp,rt"),_=Xu(ml,Xu(yl,Fs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xu(jc,Fs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xu(jc,yl)),c=Fs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),m=Fs("srcset"),$=Xu(c,m,Fs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),te=Fs("script,style,template");class se{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!_.hasOwnProperty(s))return this.sanitizedSomething=!0,!te.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const p=a.item(l),w=p.name,D=w.toLowerCase();if(!$.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let S=p.value;c[D]&&(S=va(S)),m[D]&&(n=S,S=(n=String(n)).split(",").map(r=>va(r.trim())).join(", ")),this.buf.push(" ",w,'="',Et(S),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();_.hasOwnProperty(s)&&!ml.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Et(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const _e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qe=/([^\#-~ |!])/g;function Et(n){return n.replace(/&/g,"&amp;").replace(_e,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(qe,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Lt;function tn(n,r){let s=null;try{Lt=Lt||function Yu(n){const r=new Md(n);return function Bc(){try{return!!(new window.DOMParser).parseFromString(Ku(""),"text/html")}catch(n){return!1}}()?new Uc(r):r}(n);let a=r?String(r):"";s=Lt.getInertBodyElement(a);let l=5,p=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=p,p=s.innerHTML,s=Lt.getInertBodyElement(a)}while(a!==p);return Ku((new se).sanitizeChildren(wn(s)||s))}finally{if(s){const a=wn(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function wn(n){return"content"in n&&function Nt(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var bt=(()=>((bt=bt||{})[bt.NONE=0]="NONE",bt[bt.HTML=1]="HTML",bt[bt.STYLE=2]="STYLE",bt[bt.SCRIPT=3]="SCRIPT",bt[bt.URL=4]="URL",bt[bt.RESOURCE_URL=5]="RESOURCE_URL",bt))();function Rn(n){const r=el();return r?oc(r.sanitize(bt.HTML,n)||""):Xa(n,"HTML")?oc(So(n)):tn(_i(),Ye(n))}function ar(n){const r=el();return r?r.sanitize(bt.URL,n)||"":Xa(n,"URL")?So(n):va(Ye(n))}function el(){const n=ve();return n&&n[12]}const pu="__ngContext__";function Gt(n,r){n[pu]=r}function On(n){const r=function bn(n){return n[pu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ra(n){return n.ngOriginalError}function xd(n,...r){n.error(...r)}class hc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function gu(n){return n&&n.ngErrorLogger||xd}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ra(r);for(;s&&Ra(s);)s=Ra(s);return s||null}}const Wc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function Ih(n){return n.ownerDocument}function y(n){return n instanceof Function?n():n}var X=(()=>((X=X||{})[X.Important=1]="Important",X[X.DashCase=2]="DashCase",X))();function nt(n,r){return undefined(n,r)}function gn(n){const r=n[3];return Oi(r)?r[3]:r}function ea(n){return Rd(n[13])}function Ul(n){return Rd(n[4])}function Rd(n){for(;null!==n&&!Oi(n);)n=n[4];return n}function _l(n,r,s,a,l){if(null!=a){let p,w=!1;Oi(a)?p=a:Zr(a)&&(w=!0,a=a[0]);const D=P(a);0===n&&null!==s?null==l?yu(r,s,D):tl(r,s,D,l||null,!0):1===n&&null!==s?tl(r,s,D,l||null,!0):2===n?function Zf(n,r,s){const a=nl(n,r);a&&function Pd(n,r,s,a){_r(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,D,w):3===n&&r.destroyNode(D),null!=p&&function fc(n,r,s,a,l){const p=s[7];p!==P(s)&&_l(r,n,a,p,l);for(let D=10;D<s.length;D++){const S=s[D];Jc(S[1],S,n,r,a,p)}}(r,n,p,s,l)}}function Zc(n,r,s){if(_r(n))return n.createElement(r,s);{const a=null!==s?function Rs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Ag(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,vi(l,-1)),s.splice(a,1)}function Sh(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Ag(l,a),r>0&&(n[s-1][4]=a[4]);const p=Ei(n,10+r);!function Od(n,r){Jc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=p[19];null!==w&&w.detachView(p[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Sg(n,r){if(!(256&r[2])){const s=r[11];_r(s)&&s.destroyNode&&Jc(n,r,s,3,null,null),function Nd(n){let r=n[13];if(!r)return Mh(n[1],n);for(;r;){let s=null;if(Zr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Zr(r)&&Mh(r[1],r),r=r[3];null===r&&(r=n),Zr(r)&&Mh(r[1],r),s=r&&r[4]}r=s}}(r)}}function Mh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Mg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof oo)){const p=s[a+1];if(Array.isArray(p))for(let w=0;w<p.length;w+=2){const D=l[p[w]],S=p[w+1];try{S.call(D)}finally{}}else try{p.call(l)}finally{}}}}(n,r),function By(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const w=s[p+1],D="function"==typeof w?w(r):P(r[w]),S=a[l=s[p+2]],j=s[p+3];"boolean"==typeof j?D.removeEventListener(s[p],S,j):j>=0?a[l=j]():a[l=-j].unsubscribe(),p+=2}else{const w=a[l=s[p+1]];s[p].call(w)}if(null!==a){for(let p=l+1;p<a.length;p++)a[p]();r[7]=null}}(n,r),1===r[1].type&&_r(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Oi(r[3])){s!==r[3]&&Ag(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function qf(n,r,s){return function dt(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Vt.None||l===Vt.Emulated)return null}return ot(a,s)}(n,r.parent,s)}function tl(n,r,s,a,l){_r(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function yu(n,r,s){_r(n)?n.appendChild(r,s):r.appendChild(s)}function xg(n,r,s,a,l){null!==a?tl(n,r,s,a,l):yu(n,r,s)}function nl(n,r){return _r(n)?n.parentNode(r):r.parentNode}function Bl(n,r,s){return xh(n,r,s)}let xh=function Kf(n,r,s){return 40&n.type?ot(n,s):null};function Yc(n,r,s,a){const l=qf(n,a,r),p=r[11],D=Bl(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let S=0;S<s.length;S++)xg(p,l,s[S],D,!1);else xg(p,l,s,D,!1)}function Qc(n,r){if(null!==r){const s=r.type;if(3&s)return ot(r,n);if(4&s)return rl(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Qc(n,a);{const l=n[r.index];return Oi(l)?rl(-1,l):P(l)}}if(32&s)return nt(r,n)()||P(n[r.index]);{const a=Oh(n,r);return null!==a?Array.isArray(a)?a[0]:Qc(gn(n[16]),a):Qc(n,r.next)}}return null}function Oh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function rl(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return Qc(a,l)}return r[7]}function Yf(n,r,s,a,l,p,w){for(;null!=s;){const D=a[s.index],S=s.type;if(w&&0===r&&(D&&Gt(P(D),a),s.flags|=4),64!=(64&s.flags))if(8&S)Yf(n,r,s.child,a,l,p,!1),_l(r,n,l,D,p);else if(32&S){const j=nt(s,a);let Z;for(;Z=j();)_l(r,n,l,Z,p);_l(r,n,l,D,p)}else 16&S?jl(n,r,a,s,l,p):_l(r,n,l,D,p);s=w?s.projectionNext:s.next}}function Jc(n,r,s,a,l,p){Yf(s,a,n.firstChild,r,l,p,!1)}function jl(n,r,s,a,l,p){const w=s[16],S=w[6].projection[a.projection];if(Array.isArray(S))for(let j=0;j<S.length;j++)_l(r,n,l,S[j],p);else Yf(n,r,S,w[3],l,p,!0)}function ed(n,r,s){_r(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Ph(n,r,s){_r(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function kh(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const p=r.length;if(l+p===a||n.charCodeAt(l+p)<=32)return l}s=l+1}}const Qf="ng-template";function Hy(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==kh(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Jf(n){return 4===n.type&&n.value!==Qf}function Og(n,r,s){return r===(4!==n.type||s?n.value:Qf)}function Xf(n,r,s){let a=4;const l=n.attrs||[],p=function $y(n){for(let r=0;r<n.length;r++)if(zs(n[r]))return r;return n.length}(l);let w=!1;for(let D=0;D<r.length;D++){const S=r[D];if("number"!=typeof S){if(!w)if(4&a){if(a=2|1&a,""!==S&&!Og(n,S,s)||""===S&&1===r.length){if(Ea(a))return!1;w=!0}}else{const j=8&a?S:r[++D];if(8&a&&null!==n.attrs){if(!Hy(n.attrs,j,s)){if(Ea(a))return!1;w=!0}continue}const ue=pc(8&a?"class":S,l,Jf(n),s);if(-1===ue){if(Ea(a))return!1;w=!0;continue}if(""!==j){let Se;Se=ue>p?"":l[ue+1].toLowerCase();const Ke=8&a?Se:null;if(Ke&&-1!==kh(Ke,j,0)||2&a&&j!==Se){if(Ea(a))return!1;w=!0}}}}else{if(!w&&!Ea(a)&&!Ea(S))return!1;if(w&&Ea(S))continue;w=!1,a=S|1&a}}return Ea(a)||w}function Ea(n){return 0==(1&n)}function pc(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let p=!1;for(;l<r.length;){const w=r[l];if(w===n)return l;if(3===w||6===w)p=!0;else{if(1===w||2===w){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===w)break;if(0===w){l+=4;continue}}l+=p?1:2}return-1}return function Gy(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ng(n,r,s=!1){for(let a=0;a<r.length;a++)if(Xf(n,r[a],s))return!0;return!1}function zy(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function td(n,r){return n?":not("+r.trim()+")":r}function gc(n){let r=n[0],s=1,a=2,l="",p=!1;for(;s<n.length;){let w=n[s];if("string"==typeof w)if(2&a){const D=n[++s];l+="["+w+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+w:4&a&&(l+=" "+w);else""!==l&&!Ea(w)&&(r+=td(p,l),l=""),a=w,p=p||!Ea(a);s++}return""!==l&&(r+=td(p,l)),r}const er={};function Fg(n){Fh(Tt(),ve(),os()+n,!1)}function Fh(n,r,s,a){if(!a)if(3==(3&r[2])){const p=n.preOrderCheckHooks;null!==p&&io(r,p,s)}else{const p=n.preOrderHooks;null!==p&&ko(r,p,0,s)}No(s)}function Lh(n,r){return n<<17|r<<2}function _u(n){return n>>17&32767}function rd(n){return 2|n}function il(n){return(131068&n)>>2}function ta(n,r){return-131069&n|r<<2}function id(n){return 1|n}function qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],p=s[a+1];if(-1!==p){const w=n.data[p];Ko(l),w.contentQueries(2,r[p],p)}}}function vc(n,r,s,a,l,p,w,D,S,j){const Z=r.blueprint.slice();return Z[0]=l,Z[2]=140|a,Pr(Z),Z[3]=Z[15]=n,Z[8]=s,Z[10]=w||n&&n[10],Z[11]=D||n&&n[11],Z[12]=S||n&&n[12]||null,Z[9]=j||n&&n[9]||null,Z[6]=p,Z[16]=2==r.type?n[16]:Z,Z}function wl(n,r,s,a,l){let p=n.data[r];if(null===p)p=function Gh(n,r,s,a,l){const p=ki(),w=Os(),S=n.data[r]=function t_(n,r,s,a,l,p){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?p:p&&p.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=S),null!==p&&(w?null==p.child&&null!==S.parent&&(p.child=S):null===p.next&&(p.next=S)),S}(n,r,s,a,l),function qo(){return vn.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=s,p.value=a,p.attrs=l;const w=function hs(){const n=vn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();p.injectorIndex=null===w?-1:w.injectorIndex}return Fi(p,!0),p}function Ec(n,r,s,a){if(0===s)return-1;const l=r.length;for(let p=0;p<s;p++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function ud(n,r,s){bo(r);try{const a=n.viewQuery;null!==a&&dd(1,a,s);const l=n.template;null!==l&&Kg(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qg(n,r),n.staticViewQueries&&dd(2,n.viewQuery,s);const p=n.components;null!==p&&function ad(n,r){for(let s=0;s<r.length;s++)_p(n,r[s])}(r,p)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,la()}}function ld(n,r,s,a){const l=r[2];if(256!=(256&l)){bo(r);try{Pr(r),function ba(n){return vn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Kg(n,r,s,2,a);const w=3==(3&l);if(w){const j=n.preOrderCheckHooks;null!==j&&io(r,j,null)}else{const j=n.preOrderHooks;null!==j&&ko(r,j,0,null),En(r,0)}if(function Hd(n){for(let r=ea(n);null!==r;r=Ul(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],p=l[3];0==(1024&l[2])&&vi(p,1),l[2]|=1024}}}(r),function Jh(n){for(let r=ea(n);null!==r;r=Ul(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Nr(a)&&ld(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&qg(n,r),w){const j=n.contentCheckHooks;null!==j&&io(r,j)}else{const j=n.contentHooks;null!==j&&ko(r,j,1),En(r,1)}!function Wg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)No(~l);else{const p=l,w=s[++a],D=s[++a];Jr(w,p),D(2,r[p])}}}finally{No(-1)}}(n,r);const D=n.components;null!==D&&function od(n,r){for(let s=0;s<r.length;s++)yp(n,r[s])}(r,D);const S=n.viewQuery;if(null!==S&&dd(2,S,a),w){const j=n.viewCheckHooks;null!==j&&io(r,j)}else{const j=n.viewHooks;null!==j&&ko(r,j,2),En(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,vi(r[3],-1))}finally{la()}}}function ap(n,r,s,a){const l=r[10],w=Ln(r);try{!w&&l.begin&&l.begin(),w&&ud(n,r,a),ld(n,r,s,a)}finally{!w&&l.end&&l.end()}}function Kg(n,r,s,a,l){const p=os(),w=2&a;try{No(-1),w&&r.length>20&&Fh(n,r,20,!1),s(a,l)}finally{No(p)}}function zh(n,r,s){if(As(r)){const l=r.directiveEnd;for(let p=r.directiveStart;p<l;p++){const w=n.data[p];w.contentQueries&&w.contentQueries(1,s[p],p)}}}function up(n,r,s){!N()||(function r_(n,r,s,a){const l=s.directiveStart,p=s.directiveEnd;n.firstCreatePass||Do(s,r),Gt(a,r);const w=s.initialInputs;for(let D=l;D<p;D++){const S=n.data[D],j=ls(S);j&&s_(r,s,S);const Z=Bn(r,n,D,s);Gt(Z,r),null!==w&&Bd(0,D-l,Z,S,0,w),j&&(In(s.index,r)[8]=Z)}}(n,r,s,ot(s,r)),128==(128&s.flags)&&function i_(n,r,s){const a=s.directiveStart,l=s.directiveEnd,w=s.index,D=function nu(){return vn.lFrame.currentDirectiveIndex}();try{No(w);for(let S=a;S<l;S++){const j=n.data[S],Z=r[S];Pa(S),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&fp(j,Z)}}finally{No(-1),Pa(D)}}(n,r,s))}function lp(n,r,s=ot){const a=r.localNames;if(null!==a){let l=r.index+1;for(let p=0;p<a.length;p+=2){const w=a[p+1],D=-1===w?s(r,n):n[w];n[l++]=D}}}function Wh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Vs(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Vs(n,r,s,a,l,p,w,D,S,j){const Z=20+a,ue=Z+l,Se=function e_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:er);return s}(Z,ue),Ke="function"==typeof j?j():j;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:D,declTNode:r,data:Se.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:S,consts:Ke,incompleteFirstPass:!1}}function Qg(n,r,s,a){const l=wc(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&nf(n).push(a,l.length-1))}function qh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function wa(n,r,s,a,l,p,w,D){const S=ot(r,s);let Z,j=r.inputs;!D&&null!=j&&(Z=j[a])?(wp(n,s,Z,a,l),Js(r)&&function Kh(n,r){const s=In(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Xg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=w?w(l,r.value||"",a):l,_r(p)?p.setProperty(S,a,l):uo(a)||(S.setProperty?S.setProperty(a,l):S[a]=l))}function dp(n,r,s,a){let l=!1;if(N()){const p=function Yh(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let p=0;p<a.length;p++){const w=a[p];Ng(s,w.selectors,!1)&&(l||(l=[]),C(Do(s,r),n,w.type),ls(w)?(cd(n,s),l.unshift(w)):l.push(w))}return l}(n,r,s),w=null===a?null:{"":-1};if(null!==p){l=!0,im(s,n.data.length,p.length);for(let Z=0;Z<p.length;Z++){const ue=p[Z];ue.providersResolver&&ue.providersResolver(ue)}let D=!1,S=!1,j=Ec(n,r,p.length,null);for(let Z=0;Z<p.length;Z++){const ue=p[Z];s.mergedAttrs=Io(s.mergedAttrs,ue.hostAttrs),sm(n,s,r,j,ue),rm(j,ue,w),null!==ue.contentQueries&&(s.flags|=8),(null!==ue.hostBindings||null!==ue.hostAttrs||0!==ue.hostVars)&&(s.flags|=128);const Se=ue.type.prototype;!D&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),D=!0),!S&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),S=!0),j++}!function Jg(n,r){const a=r.directiveEnd,l=n.data,p=r.attrs,w=[];let D=null,S=null;for(let j=r.directiveStart;j<a;j++){const Z=l[j],ue=Z.inputs,Se=null===p||Jf(r)?null:mp(ue,p);w.push(Se),D=qh(ue,j,D),S=qh(Z.outputs,j,S)}null!==D&&(D.hasOwnProperty("class")&&(r.flags|=16),D.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=D,r.outputs=S}(n,s)}w&&function pp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const p=s[r[l+1]];if(null==p)throw new ut(-301,!1);a.push(r[l],p)}}}(s,a,w)}return s.mergedAttrs=Io(s.mergedAttrs,s.attrs),l}function hp(n,r,s,a,l,p){const w=p.hostBindings;if(w){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const S=~r.index;(function n_(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(D)!=S&&D.push(S),D.push(a,l,w)}}function fp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function cd(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function rm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;ls(r)&&(s[""]=n)}}function im(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function sm(n,r,s,a,l){n.data[a]=l;const p=l.factory||(l.factory=oi(l.type)),w=new oo(p,ls(l),null);n.blueprint[a]=w,s[a]=w,hp(n,r,0,a,Ec(n,s,l.hostVars,er),l)}function s_(n,r,s){const a=ot(r,n),l=Wh(s),p=n[10],w=ku(n,vc(n,l,null,s.onPush?64:16,a,r,p,p.createRenderer(a,s),null,null));n[r.index]=w}function ol(n,r,s,a,l,p){const w=ot(n,r);!function gp(n,r,s,a,l,p,w){if(null==p)_r(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const D=null==w?Ye(p):w(p,a||"",l);_r(n)?n.setAttribute(r,l,D,s):s?r.setAttributeNS(s,l,D):r.setAttribute(l,D)}}(r[11],w,p,n.value,s,a,l)}function Bd(n,r,s,a,l,p){const w=p[r];if(null!==w){const D=a.setInput;for(let S=0;S<w.length;){const j=w[S++],Z=w[S++],ue=w[S++];null!==D?a.setInput(s,ue,j,Z):s[Z]=ue}}}function mp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Qh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function yp(n,r){const s=In(r,n);if(Nr(s)){const a=s[1];80&s[2]?ld(a,s,a.template,s[8]):s[5]>0&&Xh(s)}}function Xh(n){for(let a=ea(n);null!==a;a=Ul(a))for(let l=10;l<a.length;l++){const p=a[l];if(1024&p[2]){const w=p[1];ld(w,p,w.template,p[8])}else p[5]>0&&Xh(p)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=In(s[a],n);Nr(l)&&l[5]>0&&Xh(l)}}function _p(n,r){const s=In(r,n),a=s[1];(function vp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),ud(a,s,s[8])}function ku(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function ef(n){for(;n;){n[2]|=64;const r=gn(n);if(Xi(n)&&!r)return n;n=r}return null}function tf(n){!function $d(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=On(s),l=a[1];ap(l,a,l.template,s)}}(n[8])}function dd(n,r,s){Ko(0),r(n,s)}const um=(()=>Promise.resolve(null))();function wc(n){return n[7]||(n[7]=[])}function nf(n){return n.cleanup||(n.cleanup=[])}function cm(n,r){const s=n[9],a=s?s.get(hc,null):null;a&&a.handleError(r)}function wp(n,r,s,a,l){for(let p=0;p<s.length;){const w=s[p++],D=s[p++],S=r[w],j=n.data[w];null!==j.setInput?j.setInput(S,l,a,D):S[D]=l}}function al(n,r,s){const a=rt(r,n);!function Kc(n,r,s){_r(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function rf(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,p=0;if(null!==r)for(let w=0;w<r.length;w++){const D=r[w];"number"==typeof D?p=D:1==p?l=je(l,D):2==p&&(a=je(a,D+": "+r[++w]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const Ip=new Ii("INJECTOR",-1);class sf{get(r,s=Mi){if(s===Mi){const a=new Error(`NullInjectorError: No provider for ${Fe(r)}!`);throw a.name="NullInjectorError",a}return s}}const Cp=new Ii("Set Injector scope."),bc={},hm={};let Gd;function af(){return void 0===Gd&&(Gd=new sf),Gd}function uf(n,r=null,s=null,a){const l=Ic(n,r,s,a);return l._resolveInjectorDefTypes(),l}function Ic(n,r=null,s=null,a){return new Gl(n,s,r||af(),a)}class Gl{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];s&&ps(s,D=>this.processProvider(D,r,s)),ps([r],D=>this.processInjectorType(D,[],p)),this.records.set(Ip,Fu(void 0,this));const w=this.records.get(Cp);this.scope=null!=w?w.value:null,this.source=l||("object"==typeof r?null:Fe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Mi,a=Wt.Default){this.assertNotDestroyed();const l=Dt(this),p=mn(void 0);try{if(!(a&Wt.SkipSelf)){let D=this.records.get(r);if(void 0===D){const S=function c_(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ii}(r)&&vt(r);D=S&&this.injectableDefInScope(S)?Fu(zd(r),bc):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&Wt.Self?af():this.parent).get(r,s=a&Wt.Optional&&s===Mi?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[au]=w[au]||[]).unshift(Fe(r)),l)throw w;return function ma(n,r,s,a){const l=n[au];throw r[ae]&&l.unshift(r[ae]),n.message=function Ci(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Fe(r);if(Array.isArray(r))l=r.map(Fe).join(" -> ");else if("object"==typeof r){let p=[];for(let w in r)if(r.hasOwnProperty(w)){let D=r[w];p.push(w+":"+("string"==typeof D?JSON.stringify(D):Fe(D)))}l=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(F,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[au]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{mn(p),Dt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Fe(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ut(205,!1)}processInjectorType(r,s,a){if(!(r=De(r)))return!1;let l=Wn(r);const p=null==l&&r.ngModule||void 0,w=void 0===p?r:p,D=-1!==a.indexOf(w);if(void 0!==p&&(l=Wn(p)),null==l)return!1;if(null!=l.imports&&!D){let Z;a.push(w);try{ps(l.imports,ue=>{this.processInjectorType(ue,s,a)&&(void 0===Z&&(Z=[]),Z.push(ue))})}finally{}if(void 0!==Z)for(let ue=0;ue<Z.length;ue++){const{ngModule:Se,providers:Ke}=Z[ue];ps(Ke,mt=>this.processProvider(mt,Se,Ke||ge))}}this.injectorDefTypes.add(w);const S=oi(w)||(()=>new w);this.records.set(w,Fu(S,bc));const j=l.providers;if(null!=j&&!D){const Z=r;ps(j,ue=>this.processProvider(ue,Z,j))}return void 0!==p&&void 0!==r.providers}processProvider(r,s,a){let l=zl(r=De(r))?r:De(r&&r.provide);const p=function fd(n,r,s){return fm(n)?Fu(void 0,n.useValue):Fu(Dp(n),bc)}(r);if(zl(r)||!0!==r.multi)this.records.get(l);else{let w=this.records.get(l);w||(w=Fu(void 0,bc,!0),w.factory=()=>Dn(w.multi),this.records.set(l,w)),l=r,w.multi.push(r)}this.records.set(l,p)}hydrate(r,s){return s.value===bc&&(s.value=hm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function l_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=De(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function zd(n){const r=vt(n),s=null!==r?r.factory:oi(n);if(null!==s)return s;if(n instanceof Ii)throw new ut(204,!1);if(n instanceof Function)return function hd(n){const r=n.length;if(r>0)throw Is(r,"?"),new ut(204,!1);const s=function Nn(n){const r=n&&(n[wr]||n[lr]);if(r){const s=function Kn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ut(204,!1)}function Dp(n,r,s){let a;if(zl(n)){const l=De(n);return oi(l)||zd(l)}if(fm(n))a=()=>De(n.useValue);else if(function Tp(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Dn(n.deps||[]));else if(function u_(n){return!(!n||!n.useExisting)}(n))a=()=>hn(De(n.useExisting));else{const l=De(n&&(n.useClass||n.provide));if(!function Sp(n){return!!n.deps}(n))return oi(l)||zd(l);a=()=>new l(...Dn(n.deps))}return a}function Fu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function fm(n){return null!==n&&"object"==typeof n&&Ue in n}function zl(n){return"function"==typeof n}let vu=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return uf({name:""},a,s,"");{const p=null!==(l=s.name)&&void 0!==l?l:"";return uf({name:p},s.parent,s.providers,p)}}}return n.THROW_IF_NOT_FOUND=Mi,n.NULL=new sf,n.\u0275prov=Qe({token:n,providedIn:"any",factory:()=>hn(Ip)}),n.__NG_ELEMENT_ID__=-1,n})();function Pp(n,r){Po(On(n)[1],Qn())}function Kd(n){let r=function df(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(ls(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ut(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const w=n;w.inputs=Wl(n.inputs),w.declaredInputs=Wl(n.declaredInputs),w.outputs=Wl(n.outputs);const D=l.hostBindings;D&&f_(n,D);const S=l.viewQuery,j=l.contentQueries;if(S&&Tm(n,S),j&&Fp(n,j),He(n.inputs,l.inputs),He(n.declaredInputs,l.declaredInputs),He(n.outputs,l.outputs),ls(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let w=0;w<p.length;w++){const D=p[w];D&&D.ngInherit&&D(n),D===Kd&&(s=!1)}}r=Object.getPrototypeOf(r)}!function kp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Io(l.hostAttrs,s=Io(s,l.hostAttrs))}}(a)}function Wl(n){return n===cr?{}:n===ge?[]:n}function Tm(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Fp(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,p)=>{r(a,l,p),s(a,l,p)}:r}function f_(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let hf=null;function ql(){if(!hf){const n=Un.Symbol;if(n&&n.iterator)hf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(hf=a)}}}return hf}function Zd(n){return!!Yd(n)&&(Array.isArray(n)||!(n instanceof Map)&&ql()in n)}function Yd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function na(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function ff(n,r,s,a){const l=ve();return na(l,xo(),r)&&(Tt(),ol(kr(),l,n,r,s,a)),ff}function gf(n,r,s,a,l,p,w,D){const S=ve(),j=Tt(),Z=n+20,ue=j.firstCreatePass?function Om(n,r,s,a,l,p,w,D,S){const j=r.consts,Z=wl(r,n,4,w||null,Dr(j,D));dp(r,s,Z,Dr(j,S)),Po(r,Z);const ue=Z.tViews=Vs(2,Z,a,l,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,j);return null!==r.queries&&(r.queries.template(r,Z),ue.queries=r.queries.embeddedTView(Z)),Z}(Z,j,S,r,s,a,l,p,w):j.data[Z];Fi(ue,!1);const Se=S[11].createComment("");Yc(j,S,Se,ue),Gt(Se,S),ku(S,S[Z]=Qh(Se,S,Se,ue)),Ji(ue)&&up(j,S,ue),null!=w&&lp(S,ue,D)}function nh(n,r=Wt.Default){const s=ve();return null===s?hn(n,r):G(Qn(),s,De(n),r)}function qi(){throw new Error("invalid")}function jm(n,r,s){const a=ve();return na(a,xo(),r)&&wa(Tt(),kr(),a,n,r,a[11],s,!1),jm}function Hm(n,r,s,a,l){const w=l?"class":"style";wp(n,s,r.inputs[w],w,a)}function rh(n,r,s,a){const l=ve(),p=Tt(),w=20+n,D=l[11],S=l[w]=Zc(D,r,function Hu(){return vn.lFrame.currentNamespace}()),j=p.firstCreatePass?function Zs(n,r,s,a,l,p,w){const D=r.consts,j=wl(r,n,2,l,Dr(D,p));return dp(r,s,j,Dr(D,w)),null!==j.attrs&&rf(j,j.attrs,!1),null!==j.mergedAttrs&&rf(j,j.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,j),j}(w,p,l,0,r,s,a):p.data[w];Fi(j,!0);const Z=j.mergedAttrs;null!==Z&&Zo(D,S,Z);const ue=j.classes;null!==ue&&Ph(D,S,ue);const Se=j.styles;return null!==Se&&ed(D,S,Se),64!=(64&j.flags)&&Yc(p,l,S,j),0===function Eo(){return vn.lFrame.elementDepthCount}()&&Gt(S,l),function Mo(){vn.lFrame.elementDepthCount++}(),Ji(j)&&(up(p,l,j),zh(p,j,l)),null!==a&&lp(l,j),rh}function wf(){let n=Qn();Os()?wo():(n=n.parent,Fi(n,!1));const r=n;!function L(){vn.lFrame.elementDepthCount--}();const s=Tt();return s.firstCreatePass&&(Po(s,n),As(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Tu(n){return 0!=(16&n.flags)}(r)&&Hm(s,r,ve(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ha(n){return 0!=(32&n.flags)}(r)&&Hm(s,r,ve(),r.stylesWithoutHost,!1),wf}function eg(n,r,s,a){return rh(n,r,s,a),wf(),eg}function bf(n,r,s){const a=ve(),l=Tt(),p=n+20,w=l.firstCreatePass?function C_(n,r,s,a,l){const p=r.consts,w=Dr(p,a),D=wl(r,n,8,"ng-container",w);return null!==w&&rf(D,w,!0),dp(r,s,D,Dr(p,l)),null!==r.queries&&r.queries.elementStart(r,D),D}(p,l,a,r,s):l.data[p];Fi(w,!0);const D=a[p]=a[11].createComment("");return Yc(l,a,D,w),Gt(D,a),Ji(w)&&(up(l,a,w),zh(l,w,a)),null!=s&&lp(a,w),bf}function If(){let n=Qn();const r=Tt();return Os()?wo():(n=n.parent,Fi(n,!1)),r.firstCreatePass&&(Po(r,n),As(n)&&r.queries.elementEnd(n)),If}function D_(){return ve()}function tg(n){return!!n&&"function"==typeof n.then}function Gm(n){return!!n&&"function"==typeof n.subscribe}const ng=Gm;function Vu(n,r,s,a){const l=ve(),p=Tt(),w=Qn();return function Jl(n,r,s,a,l,p,w,D){const S=Ji(a),Z=n.firstCreatePass&&nf(n),ue=r[8],Se=wc(r);let Ke=!0;if(3&a.type||D){const Jt=ot(a,r),_n=D?D(Jt):Jt,Ct=Se.length,Fn=D?$r=>D(P($r[a.index])):a.index;if(_r(s)){let $r=null;if(!D&&S&&($r=function ll(n,r,s,a){const l=n.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const w=l[p];if(w===s&&l[p+1]===a){const D=r[7],S=l[p+2];return D.length>S?D[S]:null}"string"==typeof w&&(p+=2)}return null}(n,r,l,a.index)),null!==$r)($r.__ngLastListenerFn__||$r).__ngNextListenerFn__=p,$r.__ngLastListenerFn__=p,Ke=!1;else{p=rg(a,r,ue,p,!1);const Ti=s.listen(_n,l,p);Se.push(p,Ti),Z&&Z.push(l,Fn,Ct,Ct+1)}}else p=rg(a,r,ue,p,!0),_n.addEventListener(l,p,w),Se.push(p),Z&&Z.push(l,Fn,Ct,w)}else p=rg(a,r,ue,p,!1);const mt=a.outputs;let Ht;if(Ke&&null!==mt&&(Ht=mt[l])){const Jt=Ht.length;if(Jt)for(let _n=0;_n<Jt;_n+=2){const Bu=r[Ht[_n]][Ht[_n+1]].subscribe(p),mh=Se.length;Se.push(p,Bu),Z&&Z.push(l,a.index,mh,-(mh+1))}}}(p,l,l[11],w,n,r,!!s,a),Vu}function ih(n,r,s,a){try{return!1!==s(a)}catch(l){return cm(n,l),!1}}function rg(n,r,s,a,l){return function p(w){if(w===Function)return a;const D=2&n.flags?In(n.index,r):r;0==(32&r[2])&&ef(D);let S=ih(r,0,a,w),j=p.__ngNextListenerFn__;for(;j;)S=ih(r,0,j,w)&&S,j=j.__ngNextListenerFn__;return l&&!1===S&&(w.preventDefault(),w.returnValue=!1),S}}function zm(n=1){return function Du(n){return(vn.lFrame.contextLView=function Oo(n,r){for(;n>0;)r=r[15],n--;return r}(n,vn.lFrame.contextLView))[8]}(n)}function Wm(n,r){let s=null;const a=function Pg(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const p=r[l];if("*"!==p){if(null===a?Ng(n,p,!0):zy(a,p))return l}else s=l}return s}function ig(n){const r=ve()[16][6];if(!r.projection){const a=r.projection=Is(n?n.length:1,null),l=a.slice();let p=r.child;for(;null!==p;){const w=n?Wm(p,n):0;null!==w&&(l[w]?l[w].projectionNext=p:a[w]=p,l[w]=p),p=p.next}}}function sh(n,r=0,s){const a=ve(),l=Tt(),p=wl(l,20+n,16,null,s||null);null===p.projection&&(p.projection=r),wo(),64!=(64&p.flags)&&function Nh(n,r,s){jl(r[11],0,r,s,qf(n,s,r),Bl(s.parent||r[6],s,r))}(l,a,p)}function og(n,r,s,a,l){const p=n[s+1],w=null===r;let D=a?_u(p):il(p),S=!1;for(;0!==D&&(!1===S||w);){const Z=n[D+1];Xm(n[D],r)&&(S=!0,n[D+1]=a?id(Z):rd(Z)),D=a?_u(Z):il(Z)}S&&(n[s+1]=a?rd(p):id(p))}function Xm(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ho(n,r)>=0}const Us={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tf(n){return n.substring(Us.key,Us.keyEnd)}function ah(n,r){const s=Us.textEnd;return s===r?-1:(r=Us.keyEnd=function Mc(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,Us.key=r,s),Dl(n,r,s))}function Dl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Sf(n,r,s){return Uu(n,r,s,!1),Sf}function xc(n,r){return Uu(n,r,null,!0),xc}function ry(n){!function wu(n,r,s,a){const l=Tt(),p=ss(2);l.firstUpdatePass&&sy(l,null,p,a);const w=ve();if(s!==er&&na(w,p,s)){const D=l.data[os()];if(dy(D,a)&&!iy(l,p)){let S=a?D.classesWithoutHost:D.stylesWithoutHost;null!==S&&(s=je(S,s||"")),Hm(l,D,w,s,a)}else!function ly(n,r,s,a,l,p,w,D){l===er&&(l=ge);let S=0,j=0,Z=0<l.length?l[0]:null,ue=0<p.length?p[0]:null;for(;null!==Z||null!==ue;){const Se=S<l.length?l[S+1]:void 0,Ke=j<p.length?p[j+1]:void 0;let Ht,mt=null;Z===ue?(S+=2,j+=2,Se!==Ke&&(mt=ue,Ht=Ke)):null===ue||null!==Z&&Z<ue?(S+=2,mt=Z):(j+=2,mt=ue,Ht=Ke),null!==mt&&lg(n,r,s,a,mt,Ht,w,D),Z=S<l.length?l[S]:null,ue=j<p.length?p[j]:null}}(l,D,w,w[11],w[p+1],w[p+1]=function uy(n,r,s){if(null==s||""===s)return ge;const a=[],l=So(s);if(Array.isArray(l))for(let p=0;p<l.length;p++)n(a,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&n(a,p,l[p]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,p)}}(pi,cl,n,!0)}function cl(n,r){for(let s=function Af(n){return function ty(n){Us.key=0,Us.keyEnd=0,Us.value=0,Us.valueEnd=0,Us.textEnd=n.length}(n),ah(n,Dl(n,0,Us.textEnd))}(r);s>=0;s=ah(r,s))pi(n,Tf(r),!0)}function Uu(n,r,s,a){const l=ve(),p=Tt(),w=ss(2);p.firstUpdatePass&&sy(p,n,w,a),r!==er&&na(l,w,r)&&lg(p,p.data[os()],l,l[11],n,l[w+1]=function Mf(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Fe(So(n)))),n}(r,s),a,w)}function iy(n,r){return r>=n.expandoStartIndex}function sy(n,r,s,a){const l=n.data;if(null===l[s+1]){const p=l[os()],w=iy(n,s);dy(p,a)&&null===r&&!w&&(r=!1),r=function oy(n,r,s,a){const l=ka(n);let p=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=uh(s=ag(null,n,r,s,a),r.attrs,a),p=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==l)if(s=ag(l,n,r,s,a),null===p){let S=function x_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==il(a))return n[_u(a)]}(n,r,a);void 0!==S&&Array.isArray(S)&&(S=ag(null,n,r,S[1],a),S=uh(S,r.attrs,a),function R_(n,r,s,a){n[_u(s?r.classBindings:r.styleBindings)]=a}(n,r,a,S))}else p=function ay(n,r,s){let a;const l=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<l;p++)a=uh(a,n[p].hostAttrs,s);return uh(a,r.attrs,s)}(n,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),s}(l,p,r,a),function Jm(n,r,s,a,l,p){let w=p?r.classBindings:r.styleBindings,D=_u(w),S=il(w);n[a]=s;let Z,j=!1;if(Array.isArray(s)){const ue=s;Z=ue[1],(null===Z||ho(ue,Z)>0)&&(j=!0)}else Z=s;if(l)if(0!==S){const Se=_u(n[D+1]);n[a+1]=Lh(Se,D),0!==Se&&(n[Se+1]=ta(n[Se+1],a)),n[D+1]=function Vh(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=Lh(D,0),0!==D&&(n[D+1]=ta(n[D+1],a)),D=a;else n[a+1]=Lh(S,0),0===D?D=a:n[S+1]=ta(n[S+1],a),S=a;j&&(n[a+1]=rd(n[a+1])),og(n,Z,a,!0),og(n,Z,a,!1),function Sc(n,r,s,a,l){const p=l?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof r&&ho(p,r)>=0&&(s[a+1]=id(s[a+1]))}(r,Z,n,a,p),w=Lh(D,S),p?r.classBindings=w:r.styleBindings=w}(l,p,r,s,w,a)}}function ag(n,r,s,a,l){let p=null;const w=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<w&&(p=r[D],a=uh(a,p.hostAttrs,l),p!==n);)D++;return null!==n&&(s.directiveStylingLast=D),a}function uh(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let p=0;p<r.length;p++){const w=r[p];"number"==typeof w?l=w:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),pi(n,w,!!s||r[++p]))}return void 0===n?null:n}function lg(n,r,s,a,l,p,w,D){if(!(3&r.type))return;const S=n.data,j=S[D+1];wd(function ep(n){return 1==(1&n)}(j)?cy(S,r,s,l,il(j),w):void 0)||(wd(p)||function nd(n){return 2==(2&n)}(j)&&(p=cy(S,null,s,l,D,w)),function Xc(n,r,s,a,l){const p=_r(n);if(r)l?p?n.addClass(s,a):s.classList.add(a):p?n.removeClass(s,a):s.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:X.DashCase;if(null==l)p?n.removeStyle(s,a,w):s.style.removeProperty(a);else{const D="string"==typeof l&&l.endsWith("!important");D&&(l=l.slice(0,-10),w|=X.Important),p?n.setStyle(s,a,l,w):s.style.setProperty(a,l,D?"important":"")}}}(a,w,rt(os(),s),l,p))}function cy(n,r,s,a,l,p){const w=null===r;let D;for(;l>0;){const S=n[l],j=Array.isArray(S),Z=j?S[1]:S,ue=null===Z;let Se=s[l+1];Se===er&&(Se=ue?ge:void 0);let Ke=ue?qa(Se,a):Z===a?Se:void 0;if(j&&!wd(Ke)&&(Ke=qa(S,a)),wd(Ke)&&(D=Ke,w))return D;const mt=n[l+1];l=w?_u(mt):il(mt)}if(null!==r){let S=p?r.residualClasses:r.residualStyles;null!=S&&(D=qa(S,a))}return D}function wd(n){return void 0!==n}function dy(n,r){return 0!=(n.flags&(r?16:32))}function cg(n,r=""){const s=ve(),a=Tt(),l=n+20,p=a.firstCreatePass?wl(a,l,1,r,null):a.data[l],w=s[l]=function qc(n,r){return _r(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Yc(a,s,w,p),Fi(p,!1)}function xf(n,r,s){const a=ve(),l=function gd(n,r,s,a){return na(n,xo(),s)?r+Ye(s)+a:er}(a,n,r,s);return l!==er&&al(a,os(),l),xf}function Nf(n,r,s){const a=ve();if(na(a,xo(),r)){const p=Tt(),w=kr();wa(p,w,a,n,r,function lm(n,r,s){return(null===n||ls(n))&&(s=function Q(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[r.index])),s[11]}(ka(p.data),w,a),s,!0)}return Nf}const tc=void 0;var bu=["en",[["a","p"],["AM","PM"],tc],[["AM","PM"],tc,tc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tc,"{1} 'at' {0}",tc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rc(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ys={};function Pf(n){const r=function Dd(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=ia(r);if(s)return s;const a=r.split("-")[0];if(s=ia(a),s)return s;if("en"===a)return bu;throw new Error(`Missing locale data for the locale "${n}".`)}function Cd(n){return Pf(n)[kn.PluralCase]}function ia(n){return n in Ys||(Ys[n]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[n]),Ys[n]}var kn=(()=>((kn=kn||{})[kn.LocaleId=0]="LocaleId",kn[kn.DayPeriodsFormat=1]="DayPeriodsFormat",kn[kn.DayPeriodsStandalone=2]="DayPeriodsStandalone",kn[kn.DaysFormat=3]="DaysFormat",kn[kn.DaysStandalone=4]="DaysStandalone",kn[kn.MonthsFormat=5]="MonthsFormat",kn[kn.MonthsStandalone=6]="MonthsStandalone",kn[kn.Eras=7]="Eras",kn[kn.FirstDayOfWeek=8]="FirstDayOfWeek",kn[kn.WeekendRange=9]="WeekendRange",kn[kn.DateFormat=10]="DateFormat",kn[kn.TimeFormat=11]="TimeFormat",kn[kn.DateTimeFormat=12]="DateTimeFormat",kn[kn.NumberSymbols=13]="NumberSymbols",kn[kn.NumberFormats=14]="NumberFormats",kn[kn.CurrencyCode=15]="CurrencyCode",kn[kn.CurrencySymbol=16]="CurrencySymbol",kn[kn.CurrencyName=17]="CurrencyName",kn[kn.Currencies=18]="Currencies",kn[kn.Directionality=19]="Directionality",kn[kn.PluralCase=20]="PluralCase",kn[kn.ExtraData=21]="ExtraData",kn))();const dl="en-US";let by=dl;function J_(n,r,s,a,l){if(n=De(n),Array.isArray(n))for(let p=0;p<n.length;p++)J_(n[p],r,s,a,l);else{const p=Tt(),w=ve();let D=zl(n)?n:De(n.provide),S=Dp(n);const j=Qn(),Z=1048575&j.providerIndexes,ue=j.directiveStart,Se=j.providerIndexes>>20;if(zl(n)||!n.multi){const Ke=new oo(S,l,nh),mt=ev(D,r,l?Z:Z+Se,ue);-1===mt?(C(Do(j,w),p,D),X_(p,n,r.length),r.push(D),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),s.push(Ke),w.push(Ke)):(s[mt]=Ke,w[mt]=Ke)}else{const Ke=ev(D,r,Z+Se,ue),mt=ev(D,r,Z,Z+Se),Ht=Ke>=0&&s[Ke],Jt=mt>=0&&s[mt];if(l&&!Jt||!l&&!Ht){C(Do(j,w),p,D);const _n=function dw(n,r,s,a,l){const p=new oo(n,s,nh);return p.multi=[],p.index=r,p.componentProviders=0,m0(p,l,a&&!s),p}(l?cw:lw,s.length,l,a,S);!l&&Jt&&(s[mt].providerFactory=_n),X_(p,n,r.length,0),r.push(D),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),s.push(_n),w.push(_n)}else X_(p,n,Ke>-1?Ke:mt,m0(s[l?mt:Ke],S,!l&&a));!l&&a&&Jt&&s[mt].componentProviders++}}}function X_(n,r,s,a){const l=zl(r),p=function Ap(n){return!!n.useClass}(r);if(l||p){const S=(p?De(r.useClass):r).prototype.ngOnDestroy;if(S){const j=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=j.indexOf(s);-1===Z?j.push(s,[a,S]):j[Z+1].push(a,S)}else j.push(s,S)}}}function m0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function ev(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function lw(n,r,s,a){return tv(this.multi,[])}function cw(n,r,s,a){const l=this.multi;let p;if(this.providerFactory){const w=this.providerFactory.componentProviders,D=Bn(s,s[1],this.providerFactory.index,a);p=D.slice(0,w),tv(l,p);for(let S=w;S<D.length;S++)p.push(D[S])}else p=[],tv(l,p);return p}function tv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function y0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function uw(n,r,s){const a=Tt();if(a.firstCreatePass){const l=ls(n);J_(s,a.data,a.blueprint,l,!0),J_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class _0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Fe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let xy=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return Bf(Qn(),ve())}function Bf(n,r){return new wg(ot(n,r))}let wg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof wg?n.nativeElement:n}class E0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=ve(),s=In(Qn().index,n);return function _w(n){return n[11]}(Zr(s)?s:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:()=>null}),n})();class w0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const b0=new w0("13.3.10"),nv={};function Ry(n,r,s,a,l=!1){for(;null!==s;){const p=r[s.index];if(null!==p&&a.push(P(p)),Oi(p))for(let D=10;D<p.length;D++){const S=p[D],j=S[1].firstChild;null!==j&&Ry(S[1],S,j,a)}const w=s.type;if(8&w)Ry(n,r,s.child,a);else if(32&w){const D=nt(s,r);let S;for(;S=D();)a.push(S)}else if(16&w){const D=Oh(r,s);if(Array.isArray(D))a.push(...D);else{const S=gn(r[16]);Ry(S[1],S,D,a,!0)}}s=l?s.projectionNext:s.next}return a}class bg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Ry(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Oi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Sh(r,a),Ei(s,a))}this._attachedToViewContainer=!1}Sg(this._lView[1],this._lView)}onDestroy(r){Qg(this._lView[1],this._lView,null,r)}markForCheck(){ef(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Ep(n,r,s){const a=r[10];a.begin&&a.begin();try{ld(n,r,n.template,s)}catch(l){throw cm(r,l),l}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ut(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zf(n,r){Jc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ut(902,"");this._appRef=r}}class ww extends bg{constructor(r){super(r),this._view=r}detectChanges(){tf(this._view)}checkNoChanges(){}get context(){return null}}class I0 extends xy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Re(r);return new rv(s,this.ngModule)}}function C0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class rv extends _0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function mc(n){return n.map(gc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return C0(this.componentDef.inputs)}get outputs(){return C0(this.componentDef.outputs)}create(r,s,a,l){const p=(l=l||this.ngModule)?function Iw(n,r){return{get:(s,a,l)=>{const p=n.get(s,nv,l);return p!==nv||a===nv?p:r.get(s,a,l)}}}(r,l.injector):r,w=p.get(E0,k),D=p.get(Ew,null),S=w.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",Z=a?function Yg(n,r,s){if(_r(n))return n.selectRootElement(r,s===Vt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(S,a,this.componentDef.encapsulation):Zc(w.createRenderer(null,this.componentDef),j,function bw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(j)),ue=this.componentDef.onPush?576:528,Se=function Dm(n,r){return{components:[],scheduler:n||Wc,clean:um,playerHandler:r||null,flags:0}}(),Ke=Vs(0,null,null,1,0,null,null,null,null,null),mt=vc(null,Ke,Se,ue,null,null,w,S,D,p);let Ht,Jt;bo(mt);try{const _n=function Cm(n,r,s,a,l,p){const w=s[1];s[20]=n;const S=wl(w,20,2,"#host",null),j=S.mergedAttrs=r.hostAttrs;null!==j&&(rf(S,j,!0),null!==n&&(Zo(l,n,j),null!==S.classes&&Ph(l,n,S.classes),null!==S.styles&&ed(l,n,S.styles)));const Z=a.createRenderer(n,r),ue=vc(s,Wh(r),null,r.onPush?64:16,s[20],S,a,Z,p||null,null);return w.firstCreatePass&&(C(Do(S,s),w,r.type),cd(w,S),im(S,s.length,1)),ku(s,ue),s[20]=ue}(Z,this.componentDef,mt,w,S);if(Z)if(a)Zo(S,Z,["ng-version",b0.full]);else{const{attrs:Ct,classes:Fn}=function kg(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let p=n[a];if("string"==typeof p)2===l?""!==p&&r.push(p,n[++a]):8===l&&s.push(p);else{if(!Ea(l))break;l=p}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ct&&Zo(S,Z,Ct),Fn&&Fn.length>0&&Ph(S,Z,Fn.join(" "))}if(Jt=Mn(Ke,20),void 0!==s){const Ct=Jt.projection=[];for(let Fn=0;Fn<this.ngContentSelectors.length;Fn++){const $r=s[Fn];Ct.push(null!=$r?Array.from($r):null)}}Ht=function cf(n,r,s,a,l){const p=s[1],w=function nm(n,r,s){const a=Qn();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),sm(n,a,r,Ec(n,r,1,null),s));const l=Bn(r,n,a.directiveStart,a);Gt(l,r);const p=ot(a,r);return p&&Gt(p,r),l}(p,s,r);if(a.components.push(w),n[8]=w,l&&l.forEach(S=>S(w,r)),r.contentQueries){const S=Qn();r.contentQueries(1,w,S.directiveStart)}const D=Qn();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(No(D.index),hp(s[1],D,0,D.directiveStart,D.directiveEnd,r),fp(r,w)),w}(_n,this.componentDef,mt,Se,[Pp]),ud(Ke,mt,null)}finally{la()}return new Dw(this.componentType,Ht,Bf(Jt,mt),mt,Jt)}}class Dw extends class hw{}{constructor(r,s,a,l,p){super(),this.location=a,this._rootLView=l,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new ww(l),this.componentType=r}get injector(){return new Tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class jf{}class D0{}const Hf=new Map;class S0 extends jf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new I0(this);const a=sn(r);this._bootstrapComponents=y(a.bootstrap),this._r3Injector=Ic(r,s,[{provide:jf,useValue:this},{provide:xy,useValue:this.componentFactoryResolver}],Fe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=vu.THROW_IF_NOT_FOUND,a=Wt.Default){return r===vu||r===jf||r===Ip?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class iv extends D0{constructor(r){super(),this.moduleType=r,null!==sn(r)&&function Aw(n){const r=new Set;!function s(a){const l=sn(a,!0),p=l.id;null!==p&&(function T0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Fe(r)} vs ${Fe(r.name)}`)}(p,Hf.get(p),a),Hf.set(p,a));const w=y(l.imports);for(const D of w)r.has(D)||(r.add(D),s(D))}(n)}(r)}create(r){return new S0(this.moduleType,r)}}function M0(n,r,s,a,l,p){const w=r+s;return na(n,w,l)?function ul(n,r,s){return n[r]=s}(n,w+1,p?a.call(p,l):a(l)):function Ig(n,r){const s=n[r];return s===er?void 0:s}(n,w+1)}function P0(n,r){const s=Tt();let a;const l=n+20;s.firstCreatePass?(a=function Vw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const p=a.factory||(a.factory=oi(a.type)),w=mn(nh);try{const D=Ta(!1),S=p();return Ta(D),function Nm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,ve(),l,S),S}finally{mn(w)}}function k0(n,r,s){const a=n+20,l=ve(),p=function nr(n,r){return n[r]}(l,a);return function Cg(n,r){return n[1].data[r].pure}(l,a)?M0(l,function Si(){const n=vn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),r,p.transform,s,p):p.transform(s)}function sv(n){return r=>{setTimeout(n,void 0,r)}}const nc=class $w extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,p,w;let D=r,S=s||(()=>null),j=a;if(r&&"object"==typeof r){const ue=r;D=null===(l=ue.next)||void 0===l?void 0:l.bind(ue),S=null===(p=ue.error)||void 0===p?void 0:p.bind(ue),j=null===(w=ue.complete)||void 0===w?void 0:w.bind(ue)}this.__isAsync&&(S=sv(S),D&&(D=sv(D)),j&&(j=sv(j)));const Z=super.subscribe({next:D,error:S,complete:j});return r instanceof z.w0&&r.add(Z),Z}};function Gw(){return this._results[ql()]()}class ov{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ql(),a=ov.prototype;a[s]||(a[s]=Gw)}get changes(){return this._changes||(this._changes=new nc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=bs(r);(this._changesDetected=!function zu(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],p=r[a];if(s&&(l=s(l),p=s(p)),p!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=qw,n})();const zw=Dg,Ww=class extends zw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=vc(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(a[19]=p.createEmbeddedView(s)),ud(s,a,r),new bg(a)}};function qw(){return Oy(Qn(),ve())}function Oy(n,r){return 4&n.type?new Ww(r,n,Bf(n,r)):null}let Ny=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kw,n})();function Kw(){return V0(Qn(),ve())}const Zw=Ny,F0=class extends Zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Bf(this._hostTNode,this._hostLView)}get injector(){return new Tr(this._hostTNode,this._hostLView)}get parentInjector(){const r=T(this._hostTNode,this._hostLView);if(da(r)){const s=ai(r,this._hostLView),a=Ws(r);return new Tr(s[1].data[a+8],s)}return new Tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=L0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,p){const w=r&&!function Qr(n){return"function"==typeof n}(r);let D;if(w)D=s;else{const ue=s||{};D=ue.index,a=ue.injector,l=ue.projectableNodes,p=ue.ngModuleRef}const S=w?r:new rv(Re(r)),j=a||this.parentInjector;if(!p&&null==S.ngModule){const Se=(w?j:this.parentInjector).get(jf,null);Se&&(p=Se)}const Z=S.create(j,l,void 0,p);return this.insert(Z.hostView,D),Z}insert(r,s){const a=r._lView,l=a[1];if(function or(n){return Oi(n[3])}(a)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const ue=a[3],Se=new F0(ue,ue[6],ue[3]);Se.detach(Se.indexOf(r))}}const p=this._adjustIndex(s),w=this._lContainer;!function Wf(n,r,s,a){const l=10+a,p=s.length;a>0&&(s[l-1][4]=r),a<p-10?(r[4]=s[l],lo(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const w=r[17];null!==w&&s!==w&&function Uy(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(w,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=128}(l,a,w,p);const D=rl(p,w),S=a[11],j=nl(S,w[7]);return null!==j&&function Ah(n,r,s,a,l,p){a[0]=l,a[6]=r,Jc(n,a,s,1,l,p)}(l,w[6],S,a,j,D),r.attachToViewContainerRef(),lo(av(w),p,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=L0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Sh(this._lContainer,s);a&&(Ei(av(this._lContainer),s),Sg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Sh(this._lContainer,s);return a&&null!=Ei(av(this._lContainer),s)?new bg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function L0(n){return n[8]}function av(n){return n[8]||(n[8]=[])}function V0(n,r){let s;const a=r[n.index];if(Oi(a))s=a;else{let l;if(8&n.type)l=P(a);else{const p=r[11];l=p.createComment("");const w=ot(n,r);tl(p,nl(p,w),l,function jy(n,r){return _r(n)?n.nextSibling(r):r.nextSibling}(p,w),!1)}r[n.index]=s=Qh(a,r,l,n),ku(r,s)}return new F0(s,n,r)}class uv{constructor(r){this.queryList=r,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class lv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let p=0;p<a;p++){const w=s.getByIndex(p);l.push(this.queries[w.indexInDeclarationView].clone())}return new lv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==q0(r,s).matches&&this.queries[s].setDirty()}}class U0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class cv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(r,l);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new cv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class dv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new dv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const p=a[l];this.matchTNodeWithReadOption(r,s,Jw(s,p)),this.matchTNodeWithReadOption(r,s,qt(s,r,p,!1,!1))}else a===Dg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,qt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===wg||l===Ny||l===Dg&&4&s.type)this.addMatch(s.index,-2);else{const p=qt(s,r,l,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Jw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function eb(n,r,s,a){return-1===s?function Xw(n,r){return 11&n.type?Bf(n,r):4&n.type?Oy(n,r):null}(r,n):-2===s?function tb(n,r,s){return s===wg?Bf(r,n):s===Dg?Oy(r,n):s===Ny?V0(r,n):void 0}(n,r,a):Bn(n,n[1],s,r)}function B0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const p=n.data,w=s.matches,D=[];for(let S=0;S<w.length;S+=2){const j=w[S];D.push(j<0?null:eb(r,p[j],w[S+1],s.metadata.read))}l.matches=D}return l.matches}function hv(n,r,s,a){const l=n.queries.getByIndex(s),p=l.matches;if(null!==p){const w=B0(n,r,l,s);for(let D=0;D<p.length;D+=2){const S=p[D];if(S>0)a.push(w[D/2]);else{const j=p[D+1],Z=r[-S];for(let ue=10;ue<Z.length;ue++){const Se=Z[ue];Se[17]===Se[3]&&hv(Se[1],Se,j,a)}if(null!==Z[9]){const ue=Z[9];for(let Se=0;Se<ue.length;Se++){const Ke=ue[Se];hv(Ke[1],Ke,j,a)}}}}}return a}function j0(n){const r=ve(),s=Tt(),a=Cu();Ko(a+1);const l=q0(s,a);if(n.dirty&&Ln(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const p=l.crossesNgTemplate?hv(s,r,a,[]):B0(s,r,l,a);n.reset(p,mw),n.notifyOnChanges()}return!0}return!1}function H0(n,r,s){const a=Tt();a.firstCreatePass&&(W0(a,new U0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),z0(a,ve(),r)}function $0(n,r,s,a){const l=Tt();if(l.firstCreatePass){const p=Qn();W0(l,new U0(r,s,a),p.index),function rb(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}z0(l,ve(),s)}function G0(){return function nb(n,r){return n[19].queries[r].queryList}(ve(),Cu())}function z0(n,r,s){const a=new ov(4==(4&s));Qg(n,r,a,a.destroy),null===r[19]&&(r[19]=new lv),r[19].queries.push(new uv(a))}function W0(n,r,s){null===n.queries&&(n.queries=new cv),n.queries.track(new dv(r,s))}function q0(n,r){return n.queries.getByIndex(r)}function Fy(...n){}const cE=new Ii("Application Initializer");let _v=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Fy,this.reject=Fy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(tg(p))s.push(p);else if(ng(p)){const w=new Promise((D,S)=>{p.subscribe({complete:D,error:S})});s.push(w)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(hn(cE,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dE=new Ii("AppId",{providedIn:"root",factory:function hE(){return`${vv()}${vv()}${vv()}`}});function vv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new Ii("Platform Initializer"),wb=new Ii("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pE=new Ii("appBootstrapListener");let bb=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ev=new Ii("LocaleId",{providedIn:"root",factory:()=>Jn(Ev,Wt.Optional|Wt.SkipSelf)||function Ib(){return"undefined"!=typeof $localize&&$localize.locale||dl}()}),Cb=new Ii("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Db{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Tb=(()=>{class n{compileModuleSync(s){return new iv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=y(sn(s).declarations).reduce((w,D)=>{const S=Re(D);return S&&w.push(new rv(S)),w},[]);return new Db(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sb=(()=>Promise.resolve(0))();function wv(n){"undefined"==typeof Zone?Sb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Sl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nc(!1),this.onMicrotaskEmpty=new nc(!1),this.onStable=new nc(!1),this.onError=new nc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Mb(){let n=Un.requestAnimationFrame,r=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Ob(n){const r=()=>{!function Rb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,p,w,D)=>{try{return gE(n),s.invokeTask(l,p,w,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&r(),mE(n)}},onInvoke:(s,a,l,p,w,D,S)=>{try{return gE(n),s.invoke(l,p,w,D,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),mE(n)}},onHasTask:(s,a,l,p)=>{s.hasTask(l,p),a===l&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,Iv(n),bv(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,l,p)=>(s.handleError(l,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Sl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const p=this._inner,w=p.scheduleEventTask("NgZoneEvent: "+l,r,xb,Fy,Fy);try{return p.runTask(w,s,a)}finally{p.cancelTask(w)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const xb={};function bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mE(n){n._nesting--,bv(n)}class Nb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nc,this.onMicrotaskEmpty=new nc,this.onStable=new nc,this.onError=new nc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let yE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sl.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(hn(Sl))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),Pb=(()=>{class n{constructor(){this._applications=new Map,Cv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Cv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class kb{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function Fb(n){Cv=n}let Cv=new kb,ph=null;const _E=new Ii("AllowMultipleToken"),vE=new Ii("PlatformOnDestroy");class Ub{constructor(r,s){this.name=r,this.token=s}}function EE(n,r,s=[]){const a=`Platform: ${r}`,l=new Ii(a);return(p=[])=>{let w=Dv();if(!w||w.injector.get(_E,!1)){const D=[...s,...p,{provide:l,useValue:!0}];n?n(D):function Bb(n){if(ph&&!ph.get(_E,!1))throw new ut(400,"");ph=n;const r=n.get(wE),s=n.get(fE,null);s&&s.forEach(a=>a())}(function Hb(n=[],r){return vu.create({name:r,providers:[{provide:Cp,useValue:"platform"},{provide:vE,useValue:()=>ph=null},...n]})}(D,a))}return function jb(n){const r=Dv();if(!r)throw new ut(401,"");return r}()}}function Dv(){var n;return null!==(n=null==ph?void 0:ph.get(wE))&&void 0!==n?n:null}let wE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const D=function $b(n,r){let s;return s="noop"===n?new Nb:("zone.js"===n?void 0:n)||new Sl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),S=[{provide:Sl,useValue:D}];return D.run(()=>{const j=vu.create({providers:S,parent:this.injector,name:s.moduleType.name}),Z=s.create(j),ue=Z.injector.get(hc,null);if(!ue)throw new ut(402,"");return D.runOutsideAngular(()=>{const Se=D.onError.subscribe({next:Ke=>{ue.handleError(Ke)}});Z.onDestroy(()=>{Av(this._modules,Z),Se.unsubscribe()})}),function Gb(n,r,s){try{const a=s();return tg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(ue,D,()=>{const Se=Z.injector.get(_v);return Se.runInitializers(),Se.donePromise.then(()=>(function W_(n){Zt(n,"Expected localeId to be defined"),"string"==typeof n&&(by=n.toLowerCase().replace(/_/g,"-"))}(Z.injector.get(Ev,dl)||dl),this._moduleDoBootstrap(Z),Z))})})}bootstrapModule(s,a=[]){const l=bE({},a);return function Lb(n,r,s){const a=new iv(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(s){const a=s.injector.get(Tv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ut(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ut(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(vE,null);null==s||s(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(hn(vu))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function bE(n,r){return Array.isArray(r)?r.reduce(bE,n):Object.assign(Object.assign({},n),r)}let Tv=(()=>{class n{constructor(s,a,l,p){this._zone=s,this._injector=a,this._exceptionHandler=l,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new ee.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),D=new ee.y(S=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{Sl.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Sl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{j.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Ce.T)(w,D.pipe((0,Me.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new ut(405,"");let l;l=s instanceof _0?s:this._injector.get(xy).resolveComponentFactory(s),this.componentTypes.push(l.componentType);const p=function Vb(n){return n.isBoundToModule}(l)?void 0:this._injector.get(jf),D=l.create(vu.NULL,[],a||l.selector,p),S=D.location.nativeElement,j=D.injector.get(yE,null),Z=j&&D.injector.get(Pb);return j&&Z&&Z.registerApplication(S,j),D.onDestroy(()=>{this.detachView(D.hostView),Av(this.components,D),Z&&Z.unregisterApplication(S)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ut(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Av(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(pE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(hn(Sl),hn(vu),hn(hc),hn(_v))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let CE=!0,DE=!1;function Wb(){return DE=!0,CE}function qb(){if(DE)throw new Error("Cannot enable prod mode after platform setup.");CE=!1}let Kb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zb,n})();function Zb(n){return function Yb(n,r,s){if(Js(n)&&!s){const a=In(n.index,r);return new bg(a,a)}return 47&n.type?new bg(r[16],r):null}(Qn(),ve(),16==(16&n))}class ME{constructor(){}supports(r){return Zd(r)}create(r){return new nI(r)}}const tI=(n,r)=>r;class nI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||tI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,p=null;for(;s||a;){const w=!a||s&&s.currentIndex<RE(a,l,p)?s:a,D=RE(w,l,p),S=w.currentIndex;if(w===a)l--,a=a._nextRemoved;else if(s=s._next,null==w.previousIndex)l++;else{p||(p=[]);const j=D-l,Z=S-l;if(j!=Z){for(let Se=0;Se<j;Se++){const Ke=Se<p.length?p[Se]:p[Se]=0,mt=Ke+Se;Z<=mt&&mt<j&&(p[Se]=Ke+1)}p[w.previousIndex]=Z-j}}D!==S&&r(w,D,S)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Zd(r))throw new ut(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,p,w,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)p=r[D],w=this._trackByFn(D,p),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,p,w,D)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,w,D),a=!0),s=s._next}else l=0,function g_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[ql()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{w=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,D,w,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,w,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,p,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,p,l)):r=this._addAfter(new rI(s,a),p,l),r}_verifyReinsertion(r,s,a,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,p=r._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new xE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class rI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class xE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new iI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class OE{constructor(){}supports(r){return r instanceof Map||Yd(r)}create(){return new sI}}class sI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Yd(r)))throw new ut(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const p=l._prev,w=l._next;return p&&(p._next=w),w&&(w._prev=p),l._next=null,l._prev=null,l}const a=new oI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class oI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NE(){return new Ov([new ME])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||NE()),deps:[[n,new Ya,new Ks]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ut(901,"")}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:NE}),n})();function PE(){return new Nv([new OE])}let Nv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||PE()),deps:[[n,new Ya,new Ks]]}}find(s){const a=this.factories.find(p=>p.supports(s));if(a)return a;throw new ut(901,"")}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:PE}),n})();const lI=EE(null,"core",[]);let cI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(hn(Tv))},n.\u0275mod=Lr({type:n}),n.\u0275inj=Ve({}),n})()},2382:(kt,We,U)=>{U.d(We,{Fj:()=>oe,u5:()=>vn,JJ:()=>br,On:()=>Ni});var g=U(5e3),z=U(9808),ee=U(8306),Ce=U(4742),Me=U(8421),Ne=U(7669),He=U(5403),Fe=U(3268),je=U(1810),fe=U(8996),De=U(4004);let at=(()=>{class L{constructor(R,J){this._renderer=R,this._elementRef=J,this.onChange=ve=>{},this.onTouched=()=>{}}setProperty(R,J){this._renderer.setProperty(this._elementRef.nativeElement,R,J)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}}return L.\u0275fac=function(R){return new(R||L)(g.Y36(g.Qsj),g.Y36(g.SBq))},L.\u0275dir=g.lG2({type:L}),L})(),Je=(()=>{class L extends at{}return L.\u0275fac=function(){let N;return function(J){return(N||(N=g.n5z(L)))(J||L)}}(),L.\u0275dir=g.lG2({type:L,features:[g.qOj]}),L})();const ut=new g.OlP("NgValueAccessor"),lt={provide:ut,useExisting:(0,g.Gpc)(()=>oe),multi:!0},Rt=new g.OlP("CompositionEventMode");let oe=(()=>{class L extends at{constructor(R,J,ve){super(R,J),this._compositionMode=ve,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xt(){const L=(0,z.q)()?(0,z.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(R){this.setProperty("value",null==R?"":R)}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}}return L.\u0275fac=function(R){return new(R||L)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Rt,8))},L.\u0275dir=g.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(R,J){1&R&&g.NdJ("input",function(Tt){return J._handleInput(Tt.target.value)})("blur",function(){return J.onTouched()})("compositionstart",function(){return J._compositionStart()})("compositionend",function(Tt){return J._compositionEnd(Tt.target.value)})},features:[g._Bn([lt]),g.qOj]}),L})();const ct=new g.OlP("NgValidators"),st=new g.OlP("NgAsyncValidators");function ft(L){return null!=L}function pn(L){const N=(0,g.QGY)(L)?(0,fe.D)(L):L;return(0,g.CqO)(N),N}function on(L){let N={};return L.forEach(R=>{N=null!=R?Object.assign(Object.assign({},N),R):N}),0===Object.keys(N).length?null:N}function tt(L,N){return N.map(R=>R(L))}function Te(L){return L.map(N=>function Qe(L){return!L.validate}(N)?N:R=>N.validate(R))}function vt(L){return null!=L?function Ve(L){if(!L)return null;const N=L.filter(ft);return 0==N.length?null:function(R){return on(tt(R,N))}}(Te(L)):null}function Nn(L){return null!=L?function an(L){if(!L)return null;const N=L.filter(ft);return 0==N.length?null:function(R){return function pe(...L){const N=(0,Ne.jO)(L),{args:R,keys:J}=(0,Ce.D)(L),ve=new ee.y(Tt=>{const{length:pr}=R;if(!pr)return void Tt.complete();const Qn=new Array(pr);let ki=pr,hs=pr;for(let Fi=0;Fi<pr;Fi++){let Os=!1;(0,Me.Xf)(R[Fi]).subscribe((0,He.x)(Tt,wo=>{Os||(Os=!0,hs--),Qn[Fi]=wo},()=>ki--,void 0,()=>{(!ki||!Os)&&(hs||Tt.next(J?(0,je.n)(J,Qn):Qn),Tt.complete())}))}});return N?ve.pipe((0,Fe.Z)(N)):ve}(tt(R,N).map(pn)).pipe((0,De.U)(on))}}(Te(L)):null}function Kn(L,N){return null===L?[N]:Array.isArray(L)?[...L,N]:[L,N]}function ur(L){return L?Array.isArray(L)?L:[L]:[]}function lr(L,N){return Array.isArray(L)?L.includes(N):L===N}function Hn(L,N){const R=ur(N);return ur(L).forEach(ve=>{lr(R,ve)||R.push(ve)}),R}function Wt(L,N){return ur(N).filter(R=>!lr(L,R))}class fn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=vt(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=Nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N){this.control&&this.control.reset(N)}hasError(N,R){return!!this.control&&this.control.hasError(N,R)}getError(N,R){return this.control?this.control.getError(N,R):null}}class Cn extends fn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mn extends fn{get formDirective(){return null}get path(){return null}}let br=(()=>{class L extends class ci{constructor(N){this._cd=N}is(N){var R,J,ve;return"submitted"===N?!!(null===(R=this._cd)||void 0===R?void 0:R.submitted):!!(null===(ve=null===(J=this._cd)||void 0===J?void 0:J.control)||void 0===ve?void 0:ve[N])}}{constructor(R){super(R)}}return L.\u0275fac=function(R){return new(R||L)(g.Y36(Cn,2))},L.\u0275dir=g.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(R,J){2&R&&g.ekj("ng-untouched",J.is("untouched"))("ng-touched",J.is("touched"))("ng-pristine",J.is("pristine"))("ng-dirty",J.is("dirty"))("ng-valid",J.is("valid"))("ng-invalid",J.is("invalid"))("ng-pending",J.is("pending"))},features:[g.qOj]}),L})();function Ut(L,N){(function rn(L,N){const R=function Wn(L){return L._rawValidators}(L);null!==N.validator?L.setValidators(Kn(R,N.validator)):"function"==typeof R&&L.setValidators([R]);const J=function wr(L){return L._rawAsyncValidators}(L);null!==N.asyncValidator?L.setAsyncValidators(Kn(J,N.asyncValidator)):"function"==typeof J&&L.setAsyncValidators([J]);const ve=()=>L.updateValueAndValidity();nn(N._rawValidators,ve),nn(N._rawAsyncValidators,ve)})(L,N),N.valueAccessor.writeValue(L.value),function Lr(L,N){N.valueAccessor.registerOnChange(R=>{L._pendingValue=R,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&ze(L,N)})}(L,N),function be(L,N){const R=(J,ve)=>{N.valueAccessor.writeValue(J),ve&&N.viewToModelUpdate(J)};L.registerOnChange(R),N._registerOnDestroy(()=>{L._unregisterOnChange(R)})}(L,N),function gi(L,N){N.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&ze(L,N),"submit"!==L.updateOn&&L.markAsTouched()})}(L,N),function ir(L,N){if(N.valueAccessor.setDisabledState){const R=J=>{N.valueAccessor.setDisabledState(J)};L.registerOnDisabledChange(R),N._registerOnDestroy(()=>{L._unregisterOnDisabledChange(R)})}}(L,N)}function nn(L,N){L.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(N)})}function ze(L,N){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function Ir(L,N){const R=L.indexOf(N);R>-1&&L.splice(R,1)}const Pt="VALID",Bt="INVALID",yn="PENDING",xr="DISABLED";function Cr(L){return(Rr(L)?L.validators:L)||null}function yi(L){return Array.isArray(L)?vt(L):L||null}function qn(L,N){return(Rr(N)?N.asyncValidators:L)||null}function Ri(L){return Array.isArray(L)?Nn(L):L||null}function Rr(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}const Qi=L=>L instanceof yr;function Hi(L){return(L=>L instanceof Ur)(L)?L.value:L.getRawValue()}function Ai(L,N){const R=Qi(L),J=L.controls;if(!(R?Object.keys(J):J).length)throw new g.vHH(1e3,"");if(!J[N])throw new g.vHH(1001,"")}function Wr(L,N){Qi(L),L._forEachChild((J,ve)=>{if(void 0===N[ve])throw new g.vHH(1002,"")})}class Vr{constructor(N,R){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=N,this._rawAsyncValidators=R,this._composedValidatorFn=yi(this._rawValidators),this._composedAsyncValidatorFn=Ri(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===Pt}get invalid(){return this.status===Bt}get pending(){return this.status==yn}get disabled(){return this.status===xr}get enabled(){return this.status!==xr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._rawValidators=N,this._composedValidatorFn=yi(N)}setAsyncValidators(N){this._rawAsyncValidators=N,this._composedAsyncValidatorFn=Ri(N)}addValidators(N){this.setValidators(Hn(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(Hn(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators(Wt(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators(Wt(N,this._rawAsyncValidators))}hasValidator(N){return lr(this._rawValidators,N)}hasAsyncValidator(N){return lr(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=yn,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const R=this._parentMarkedDirty(N.onlySelf);this.status=xr,this.errors=null,this._forEachChild(J=>{J.disable(Object.assign(Object.assign({},N),{onlySelf:!0}))}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},N),{skipPristineCheck:R})),this._onDisabledChange.forEach(J=>J(!0))}enable(N={}){const R=this._parentMarkedDirty(N.onlySelf);this.status=Pt,this._forEachChild(J=>{J.enable(Object.assign(Object.assign({},N),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},N),{skipPristineCheck:R})),this._onDisabledChange.forEach(J=>J(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pt||this.status===yn)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xr:Pt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const R=pn(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(J=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(J,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,R={}){this.errors=N,this._updateControlsErrors(!1!==R.emitEvent)}get(N){return function mr(L,N,R){if(null==N||(Array.isArray(N)||(N=N.split(R)),Array.isArray(N)&&0===N.length))return null;let J=L;return N.forEach(ve=>{J=Qi(J)?J.controls.hasOwnProperty(ve)?J.controls[ve]:null:(L=>L instanceof sr)(J)&&J.at(ve)||null}),J}(this,N,".")}getError(N,R){const J=R?this.get(R):this;return J&&J.errors?J.errors[N]:null}hasError(N,R){return!!this.getError(N,R)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?xr:this.errors?Bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(Bt)?Bt:Pt}_anyControlsHaveStatus(N){return this._anyControls(R=>R.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_isBoxedValue(N){return"object"==typeof N&&null!==N&&2===Object.keys(N).length&&"value"in N&&"disabled"in N}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){Rr(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ur extends Vr{constructor(N=null,R,J){super(Cr(R),qn(J,R)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rr(R)&&R.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(N)?N.value:N)}setValue(N,R={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(J=>J(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(N,R={}){this.setValue(N,R)}reset(N=this.defaultValue,R={}){this._applyFormState(N),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){Ir(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){Ir(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){this._isBoxedValue(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}}class yr extends Vr{constructor(N,R,J){super(Cr(R),qn(J,R)),this.controls=N,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(N,R){return this.controls[N]?this.controls[N]:(this.controls[N]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(N,R,J={}){this.registerControl(N,R),this.updateValueAndValidity({emitEvent:J.emitEvent}),this._onCollectionChange()}removeControl(N,R={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(N,R,J={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],R&&this.registerControl(N,R),this.updateValueAndValidity({emitEvent:J.emitEvent}),this._onCollectionChange()}contains(N){return this.controls.hasOwnProperty(N)&&this.controls[N].enabled}setValue(N,R={}){Wr(this,N),Object.keys(N).forEach(J=>{Ai(this,J),this.controls[J].setValue(N[J],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(N,R={}){null!=N&&(Object.keys(N).forEach(J=>{this.controls[J]&&this.controls[J].patchValue(N[J],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(N={},R={}){this._forEachChild((J,ve)=>{J.reset(N[ve],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(N,R,J)=>(N[J]=Hi(R),N))}_syncPendingControls(){let N=this._reduceChildren(!1,(R,J)=>!!J._syncPendingControls()||R);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){Object.keys(this.controls).forEach(R=>{const J=this.controls[R];J&&N(J,R)})}_setUpControls(){this._forEachChild(N=>{N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(N){for(const R of Object.keys(this.controls)){const J=this.controls[R];if(this.contains(R)&&N(J))return!0}return!1}_reduceValue(){return this._reduceChildren({},(N,R,J)=>((R.enabled||this.disabled)&&(N[J]=R.value),N))}_reduceChildren(N,R){let J=N;return this._forEachChild((ve,Tt)=>{J=R(J,ve,Tt)}),J}_allControlsDisabled(){for(const N of Object.keys(this.controls))if(this.controls[N].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class sr extends Vr{constructor(N,R,J){super(Cr(R),qn(J,R)),this.controls=N,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(N){return this.controls[N]}push(N,R={}){this.controls.push(N),this._registerControl(N),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(N,R,J={}){this.controls.splice(N,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:J.emitEvent})}removeAt(N,R={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),this.controls.splice(N,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(N,R,J={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),this.controls.splice(N,1),R&&(this.controls.splice(N,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:J.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(N,R={}){Wr(this,N),N.forEach((J,ve)=>{Ai(this,ve),this.at(ve).setValue(J,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(N,R={}){null!=N&&(N.forEach((J,ve)=>{this.at(ve)&&this.at(ve).patchValue(J,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(N=[],R={}){this._forEachChild((J,ve)=>{J.reset(N[ve],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this.controls.map(N=>Hi(N))}clear(N={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:N.emitEvent}))}_syncPendingControls(){let N=this.controls.reduce((R,J)=>!!J._syncPendingControls()||R,!1);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){this.controls.forEach((R,J)=>{N(R,J)})}_updateValue(){this.value=this.controls.filter(N=>N.enabled||this.disabled).map(N=>N.value)}_anyControls(N){return this.controls.some(R=>R.enabled&&N(R))}_setUpControls(){this._forEachChild(N=>this._registerControl(N))}_allControlsDisabled(){for(const N of this.controls)if(N.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(N){N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)}}const oa={provide:Cn,useExisting:(0,g.Gpc)(()=>Ni)},Zn=(()=>Promise.resolve(null))();let Ni=(()=>{class L extends Cn{constructor(R,J,ve,Tt,pr){super(),this._changeDetectorRef=pr,this.control=new Ur,this._registered=!1,this.update=new g.vpe,this._parent=R,this._setValidators(J),this._setAsyncValidators(ve),this.valueAccessor=function ni(L,N){if(!N)return null;let R,J,ve;return Array.isArray(N),N.forEach(Tt=>{Tt.constructor===oe?R=Tt:function ji(L){return Object.getPrototypeOf(L.constructor)===Je}(Tt)?J=Tt:ve=Tt}),ve||J||R||null}(0,Tt)}ngOnChanges(R){if(this._checkForErrors(),!this._registered||"name"in R){if(this._registered&&(this._checkName(),this.formDirective)){const J=R.name.previousValue;this.formDirective.removeControl({name:J,path:this._getPath(J)})}this._setUpControl()}"isDisabled"in R&&this._updateDisabled(R),function Mr(L,N){if(!L.hasOwnProperty("model"))return!1;const R=L.model;return!!R.isFirstChange()||!Object.is(N,R.currentValue)}(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ut(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){Zn.then(()=>{var J;this.control.setValue(R,{emitViewToModelChange:!1}),null===(J=this._changeDetectorRef)||void 0===J||J.markForCheck()})}_updateDisabled(R){const J=R.isDisabled.currentValue,ve=""===J||J&&"false"!==J;Zn.then(()=>{var Tt;ve&&!this.control.disabled?this.control.disable():!ve&&this.control.disabled&&this.control.enable(),null===(Tt=this._changeDetectorRef)||void 0===Tt||Tt.markForCheck()})}_getPath(R){return this._parent?function yt(L,N){return[...N.path,L]}(R,this._parent):[R]}}return L.\u0275fac=function(R){return new(R||L)(g.Y36(mn,9),g.Y36(ct,10),g.Y36(st,10),g.Y36(ut,10),g.Y36(g.sBO,8))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([oa]),g.qOj,g.TTD]}),L})(),Ot=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=g.oAB({type:L}),L.\u0275inj=g.cJS({}),L})(),vi=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=g.oAB({type:L}),L.\u0275inj=g.cJS({imports:[[Ot]]}),L})(),vn=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=g.oAB({type:L}),L.\u0275inj=g.cJS({imports:[vi]}),L})()},2313:(kt,We,U)=>{U.d(We,{H7:()=>rn,b2:()=>lr,q6:()=>wr,se:()=>Be});var g=U(9808),z=U(5e3);class ee extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends ee{static makeCurrent(){(0,g.HT)(new Ce)}onAndCancel(be,ie,Re){return be.addEventListener(ie,Re,!1),()=>{be.removeEventListener(ie,Re,!1)}}dispatchEvent(be,ie){be.dispatchEvent(ie)}remove(be){be.parentNode&&be.parentNode.removeChild(be)}createElement(be,ie){return(ie=ie||this.getDefaultDocument()).createElement(be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(be){return be.nodeType===Node.ELEMENT_NODE}isShadowRoot(be){return be instanceof DocumentFragment}getGlobalEventTarget(be,ie){return"window"===ie?window:"document"===ie?be:"body"===ie?be.body:null}getBaseHref(be){const ie=function Ne(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==ie?null:function Fe(ze){He=He||document.createElement("a"),He.setAttribute("href",ze);const be=He.pathname;return"/"===be.charAt(0)?be:`/${be}`}(ie)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(be){return(0,g.Mx)(document.cookie,be)}}let He,Me=null;const je=new z.OlP("TRANSITION_ID"),fe=[{provide:z.ip1,useFactory:function pe(ze,be,ie){return()=>{ie.get(z.CZH).donePromise.then(()=>{const Re=(0,g.q)(),gt=be.querySelectorAll(`style[ng-transition="${ze}"]`);for(let Xt=0;Xt<gt.length;Xt++)Re.remove(gt[Xt])})}},deps:[je,g.K0,z.zs3],multi:!0}];class De{static init(){(0,z.VLi)(new De)}addToWindow(be){z.dqk.getAngularTestability=(Re,gt=!0)=>{const Xt=be.findTestabilityInTree(Re,gt);if(null==Xt)throw new Error("Could not find testability for element.");return Xt},z.dqk.getAllAngularTestabilities=()=>be.getAllTestabilities(),z.dqk.getAllAngularRootElements=()=>be.getAllRootElements(),z.dqk.frameworkStabilizers||(z.dqk.frameworkStabilizers=[]),z.dqk.frameworkStabilizers.push(Re=>{const gt=z.dqk.getAllAngularTestabilities();let Xt=gt.length,sn=!1;const zn=function(Mr){sn=sn||Mr,Xt--,0==Xt&&Re(sn)};gt.forEach(function(Mr){Mr.whenStable(zn)})})}findTestabilityInTree(be,ie,Re){if(null==ie)return null;const gt=be.getTestability(ie);return null!=gt?gt:Re?(0,g.q)().isShadowRoot(ie)?this.findTestabilityInTree(be,ie.host,!0):this.findTestabilityInTree(be,ie.parentElement,!0):null}}let at=(()=>{class ze{build(){return new XMLHttpRequest}}return ze.\u0275fac=function(ie){return new(ie||ze)},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const Je=new z.OlP("EventManagerPlugins");let ut=(()=>{class ze{constructor(ie,Re){this._zone=Re,this._eventNameToPlugin=new Map,ie.forEach(gt=>gt.manager=this),this._plugins=ie.slice().reverse()}addEventListener(ie,Re,gt){return this._findPluginFor(Re).addEventListener(ie,Re,gt)}addGlobalEventListener(ie,Re,gt){return this._findPluginFor(Re).addGlobalEventListener(ie,Re,gt)}getZone(){return this._zone}_findPluginFor(ie){const Re=this._eventNameToPlugin.get(ie);if(Re)return Re;const gt=this._plugins;for(let Xt=0;Xt<gt.length;Xt++){const sn=gt[Xt];if(sn.supports(ie))return this._eventNameToPlugin.set(ie,sn),sn}throw new Error(`No event manager plugin found for event ${ie}`)}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(Je),z.LFG(z.R0b))},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class wt{constructor(be){this._doc=be}addGlobalEventListener(be,ie,Re){const gt=(0,g.q)().getGlobalEventTarget(this._doc,be);if(!gt)throw new Error(`Unsupported event target ${gt} for event ${ie}`);return this.addEventListener(gt,ie,Re)}}let Ye=(()=>{class ze{constructor(){this._stylesSet=new Set}addStyles(ie){const Re=new Set;ie.forEach(gt=>{this._stylesSet.has(gt)||(this._stylesSet.add(gt),Re.add(gt))}),this.onStylesAdded(Re)}onStylesAdded(ie){}getAllStyles(){return Array.from(this._stylesSet)}}return ze.\u0275fac=function(ie){return new(ie||ze)},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})(),lt=(()=>{class ze extends Ye{constructor(ie){super(),this._doc=ie,this._hostNodes=new Map,this._hostNodes.set(ie.head,[])}_addStylesToHost(ie,Re,gt){ie.forEach(Xt=>{const sn=this._doc.createElement("style");sn.textContent=Xt,gt.push(Re.appendChild(sn))})}addHost(ie){const Re=[];this._addStylesToHost(this._stylesSet,ie,Re),this._hostNodes.set(ie,Re)}removeHost(ie){const Re=this._hostNodes.get(ie);Re&&Re.forEach(xt),this._hostNodes.delete(ie)}onStylesAdded(ie){this._hostNodes.forEach((Re,gt)=>{this._addStylesToHost(ie,gt,Re)})}ngOnDestroy(){this._hostNodes.forEach(ie=>ie.forEach(xt))}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(g.K0))},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();function xt(ze){(0,g.q)().remove(ze)}const Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oe=/%COMP%/g;function re(ze,be,ie){for(let Re=0;Re<be.length;Re++){let gt=be[Re];Array.isArray(gt)?re(ze,gt,ie):(gt=gt.replace(oe,ze),ie.push(gt))}return ie}function ce(ze){return be=>{if("__ngUnwrap__"===be)return ze;!1===ze(be)&&(be.preventDefault(),be.returnValue=!1)}}let Be=(()=>{class ze{constructor(ie,Re,gt){this.eventManager=ie,this.sharedStylesHost=Re,this.appId=gt,this.rendererByCompId=new Map,this.defaultRenderer=new Ge(ie)}createRenderer(ie,Re){if(!ie||!Re)return this.defaultRenderer;switch(Re.encapsulation){case z.ifc.Emulated:{let gt=this.rendererByCompId.get(Re.id);return gt||(gt=new Kt(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,gt)),gt.applyToHost(ie),gt}case 1:case z.ifc.ShadowDom:return new Zt(this.eventManager,this.sharedStylesHost,ie,Re);default:if(!this.rendererByCompId.has(Re.id)){const gt=re(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(gt),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(ut),z.LFG(lt),z.LFG(z.AFp))},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class Ge{constructor(be){this.eventManager=be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(be,ie){return ie?document.createElementNS(Rt[ie]||ie,be):document.createElement(be)}createComment(be){return document.createComment(be)}createText(be){return document.createTextNode(be)}appendChild(be,ie){be.appendChild(ie)}insertBefore(be,ie,Re){be&&be.insertBefore(ie,Re)}removeChild(be,ie){be&&be.removeChild(ie)}selectRootElement(be,ie){let Re="string"==typeof be?document.querySelector(be):be;if(!Re)throw new Error(`The selector "${be}" did not match any elements`);return ie||(Re.textContent=""),Re}parentNode(be){return be.parentNode}nextSibling(be){return be.nextSibling}setAttribute(be,ie,Re,gt){if(gt){ie=gt+":"+ie;const Xt=Rt[gt];Xt?be.setAttributeNS(Xt,ie,Re):be.setAttribute(ie,Re)}else be.setAttribute(ie,Re)}removeAttribute(be,ie,Re){if(Re){const gt=Rt[Re];gt?be.removeAttributeNS(gt,ie):be.removeAttribute(`${Re}:${ie}`)}else be.removeAttribute(ie)}addClass(be,ie){be.classList.add(ie)}removeClass(be,ie){be.classList.remove(ie)}setStyle(be,ie,Re,gt){gt&(z.JOm.DashCase|z.JOm.Important)?be.style.setProperty(ie,Re,gt&z.JOm.Important?"important":""):be.style[ie]=Re}removeStyle(be,ie,Re){Re&z.JOm.DashCase?be.style.removeProperty(ie):be.style[ie]=""}setProperty(be,ie,Re){be[ie]=Re}setValue(be,ie){be.nodeValue=ie}listen(be,ie,Re){return"string"==typeof be?this.eventManager.addGlobalEventListener(be,ie,ce(Re)):this.eventManager.addEventListener(be,ie,ce(Re))}}class Kt extends Ge{constructor(be,ie,Re,gt){super(be),this.component=Re;const Xt=re(gt+"-"+Re.id,Re.styles,[]);ie.addStyles(Xt),this.contentAttr=function me(ze){return"_ngcontent-%COMP%".replace(oe,ze)}(gt+"-"+Re.id),this.hostAttr=function ke(ze){return"_nghost-%COMP%".replace(oe,ze)}(gt+"-"+Re.id)}applyToHost(be){super.setAttribute(be,this.hostAttr,"")}createElement(be,ie){const Re=super.createElement(be,ie);return super.setAttribute(Re,this.contentAttr,""),Re}}class Zt extends Ge{constructor(be,ie,Re,gt){super(be),this.sharedStylesHost=ie,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=re(gt.id,gt.styles,[]);for(let sn=0;sn<Xt.length;sn++){const zn=document.createElement("style");zn.textContent=Xt[sn],this.shadowRoot.appendChild(zn)}}nodeOrShadowRoot(be){return be===this.hostEl?this.shadowRoot:be}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(be,ie){return super.appendChild(this.nodeOrShadowRoot(be),ie)}insertBefore(be,ie,Re){return super.insertBefore(this.nodeOrShadowRoot(be),ie,Re)}removeChild(be,ie){return super.removeChild(this.nodeOrShadowRoot(be),ie)}parentNode(be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(be)))}}let ft=(()=>{class ze extends wt{constructor(ie){super(ie)}supports(ie){return!0}addEventListener(ie,Re,gt){return ie.addEventListener(Re,gt,!1),()=>this.removeEventListener(ie,Re,gt)}removeEventListener(ie,Re,gt){return ie.removeEventListener(Re,gt)}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(g.K0))},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const pn=["alt","control","meta","shift"],tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Te={alt:ze=>ze.altKey,control:ze=>ze.ctrlKey,meta:ze=>ze.metaKey,shift:ze=>ze.shiftKey};let Ve=(()=>{class ze extends wt{constructor(ie){super(ie)}supports(ie){return null!=ze.parseEventName(ie)}addEventListener(ie,Re,gt){const Xt=ze.parseEventName(Re),sn=ze.eventCallback(Xt.fullKey,gt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(ie,Xt.domEventName,sn))}static parseEventName(ie){const Re=ie.toLowerCase().split("."),gt=Re.shift();if(0===Re.length||"keydown"!==gt&&"keyup"!==gt)return null;const Xt=ze._normalizeKey(Re.pop());let sn="";if(pn.forEach(Mr=>{const ji=Re.indexOf(Mr);ji>-1&&(Re.splice(ji,1),sn+=Mr+".")}),sn+=Xt,0!=Re.length||0===Xt.length)return null;const zn={};return zn.domEventName=gt,zn.fullKey=sn,zn}static getEventFullKey(ie){let Re="",gt=function vt(ze){let be=ze.key;if(null==be){if(be=ze.keyIdentifier,null==be)return"Unidentified";be.startsWith("U+")&&(be=String.fromCharCode(parseInt(be.substring(2),16)),3===ze.location&&Qe.hasOwnProperty(be)&&(be=Qe[be]))}return tt[be]||be}(ie);return gt=gt.toLowerCase()," "===gt?gt="space":"."===gt&&(gt="dot"),pn.forEach(Xt=>{Xt!=gt&&Te[Xt](ie)&&(Re+=Xt+".")}),Re+=gt,Re}static eventCallback(ie,Re,gt){return Xt=>{ze.getEventFullKey(Xt)===ie&&gt.runGuarded(()=>Re(Xt))}}static _normalizeKey(ie){return"esc"===ie?"escape":ie}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(g.K0))},ze.\u0275prov=z.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const wr=(0,z.eFA)(z._c5,"browser",[{provide:z.Lbi,useValue:g.bD},{provide:z.g9A,useValue:function an(){Ce.makeCurrent(),De.init()},multi:!0},{provide:g.K0,useFactory:function Kn(){return(0,z.RDi)(document),document},deps:[]}]),ur=[{provide:z.zSh,useValue:"root"},{provide:z.qLn,useFactory:function Nn(){return new z.qLn},deps:[]},{provide:Je,useClass:ft,multi:!0,deps:[g.K0,z.R0b,z.Lbi]},{provide:Je,useClass:Ve,multi:!0,deps:[g.K0]},{provide:Be,useClass:Be,deps:[ut,lt,z.AFp]},{provide:z.FYo,useExisting:Be},{provide:Ye,useExisting:lt},{provide:lt,useClass:lt,deps:[g.K0]},{provide:z.dDg,useClass:z.dDg,deps:[z.R0b]},{provide:ut,useClass:ut,deps:[Je,z.R0b]},{provide:g.JF,useClass:at,deps:[]}];let lr=(()=>{class ze{constructor(ie){if(ie)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ie){return{ngModule:ze,providers:[{provide:z.AFp,useValue:ie.appId},{provide:je,useExisting:z.AFp},fe]}}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(ze,12))},ze.\u0275mod=z.oAB({type:ze}),ze.\u0275inj=z.cJS({providers:ur,imports:[g.ez,z.hGG]}),ze})();"undefined"!=typeof window&&window;let rn=(()=>{class ze{}return ze.\u0275fac=function(ie){return new(ie||ze)},ze.\u0275prov=z.Yz7({token:ze,factory:function(ie){let Re=null;return Re=ie?new(ie||ze):z.LFG(Lr),Re},providedIn:"root"}),ze})(),Lr=(()=>{class ze extends rn{constructor(ie){super(),this._doc=ie}sanitize(ie,Re){if(null==Re)return null;switch(ie){case z.q3G.NONE:return Re;case z.q3G.HTML:return(0,z.qzn)(Re,"HTML")?(0,z.z3N)(Re):(0,z.EiD)(this._doc,String(Re)).toString();case z.q3G.STYLE:return(0,z.qzn)(Re,"Style")?(0,z.z3N)(Re):Re;case z.q3G.SCRIPT:if((0,z.qzn)(Re,"Script"))return(0,z.z3N)(Re);throw new Error("unsafe value used in a script context");case z.q3G.URL:return(0,z.yhl)(Re),(0,z.qzn)(Re,"URL")?(0,z.z3N)(Re):(0,z.mCW)(String(Re));case z.q3G.RESOURCE_URL:if((0,z.qzn)(Re,"ResourceURL"))return(0,z.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ie} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ie){return(0,z.JVY)(ie)}bypassSecurityTrustStyle(ie){return(0,z.L6k)(ie)}bypassSecurityTrustScript(ie){return(0,z.eBb)(ie)}bypassSecurityTrustUrl(ie){return(0,z.LAX)(ie)}bypassSecurityTrustResourceUrl(ie){return(0,z.pB0)(ie)}}return ze.\u0275fac=function(ie){return new(ie||ze)(z.LFG(g.K0))},ze.\u0275prov=z.Yz7({token:ze,factory:function(ie){let Re=null;return Re=ie?new ie:function tr(ze){return new Lr(ze.get(g.K0))}(z.LFG(z.zs3)),Re},providedIn:"root"}),ze})()},441:(kt,We,U)=>{U.d(We,{F0:()=>En,yS:()=>oo,Bz:()=>da,lC:()=>Rs});var g=U(5e3),z=U(8306),ee=U(4742),Ce=U(8996),Me=U(4671),Ne=U(3268),He=U(7669),Fe=U(1810),je=U(5403),pe=U(9672);function at(T,C,E){T?(0,pe.f)(E,T,C):C()}var Je=U(576);function ut(T,C){const E=(0,Je.m)(T)?T:()=>T,M=V=>V.error(E());return new z.y(C?V=>C.schedule(M,0,V):M)}var wt=U(8421);function Ye(T){return new z.y(C=>{(0,wt.Xf)(T()).subscribe(C)})}var lt=U(727),xt=U(4482);function Rt(){return(0,xt.e)((T,C)=>{let E=null;T._refCount++;const M=(0,je.x)(C,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(E=null);const V=T._connection,G=E;E=null,V&&(!G||V===G)&&V.unsubscribe(),C.unsubscribe()});T.subscribe(M),M.closed||(E=T.connect())})}class oe extends z.y{constructor(C,E){super(),this.source=C,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,xt.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,null==C||C.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new lt.w0;const E=this.getSubject();C.add(this.source.subscribe((0,je.x)(E,void 0,()=>{this._teardown(),E.complete()},M=>{this._teardown(),E.error(M)},()=>this._teardown()))),C.closed&&(this._connection=null,C=lt.w0.EMPTY)}return C}refCount(){return Rt()(this)}}var le=U(9646),$e=U(1135),ct=U(6805),st=U(7272),me=U(515),ke=U(7579);function re(T){return(0,xt.e)((C,E)=>{let G,M=null,V=!1;M=C.subscribe((0,je.x)(E,void 0,void 0,W=>{G=(0,wt.Xf)(T(W,re(T)(C))),M?(M.unsubscribe(),M=null,G.subscribe(E)):V=!0})),V&&(M.unsubscribe(),M=null,G.subscribe(E))})}var ce=U(5577);function de(T,C){return(0,Je.m)(C)?(0,ce.z)(T,C,1):(0,ce.z)(T,1)}var Be=U(9300);function Ge(T){return T<=0?()=>me.E:(0,xt.e)((C,E)=>{let M=[];C.subscribe((0,je.x)(E,V=>{M.push(V),T<M.length&&M.shift()},()=>{for(const V of M)E.next(V);E.complete()},void 0,()=>{M=null}))})}var _t=U(8068),Mt=U(6590),ft=U(4004),pn=U(3900),on=U(5698),tt=U(8675),Qe=U(5026),Te=U(590),Ve=U(8505),vt=U(8189),an=U(9808);class Nn{constructor(C,E){this.id=C,this.url=E}}class Kn extends Nn{constructor(C,E,M="imperative",V=null){super(C,E),this.navigationTrigger=M,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wn extends Nn{constructor(C,E,M){super(C,E),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wr extends Nn{constructor(C,E,M){super(C,E),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ur extends Nn{constructor(C,E,M){super(C,E),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lr extends Nn{constructor(C,E,M,V){super(C,E),this.urlAfterRedirects=M,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hn extends Nn{constructor(C,E,M,V){super(C,E),this.urlAfterRedirects=M,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wt extends Nn{constructor(C,E,M,V,G){super(C,E),this.urlAfterRedirects=M,this.state=V,this.shouldActivate=G}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fn extends Nn{constructor(C,E,M,V){super(C,E),this.urlAfterRedirects=M,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cn extends Nn{constructor(C,E,M,V){super(C,E),this.urlAfterRedirects=M,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mn{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ci{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fr{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kr{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ti{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(C,E,M){this.routerEvent=C,this.position=E,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Yt{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const E=this.params[C];return Array.isArray(E)?E[0]:E}return null}getAll(C){if(this.has(C)){const E=this.params[C];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function en(T){return new Yt(T)}const rr="ngNavigationCancelingError";function zr(T){const C=Error("NavigationCancelingError: "+T);return C[rr]=!0,C}function Yi(T,C,E){const M=E.path.split("/");if(M.length>T.length||"full"===E.pathMatch&&(C.hasChildren()||M.length<T.length))return null;const V={};for(let G=0;G<M.length;G++){const W=M[G],ne=T[G];if(W.startsWith(":"))V[W.substring(1)]=ne;else if(W!==ne.path)return null}return{consumed:T.slice(0,M.length),posParams:V}}function cr(T,C){const E=T?Object.keys(T):void 0,M=C?Object.keys(C):void 0;if(!E||!M||E.length!=M.length)return!1;let V;for(let G=0;G<E.length;G++)if(V=E[G],!ge(T[V],C[V]))return!1;return!0}function ge(T,C){if(Array.isArray(T)&&Array.isArray(C)){if(T.length!==C.length)return!1;const E=[...T].sort(),M=[...C].sort();return E.every((V,G)=>M[G]===V)}return T===C}function we(T){return Array.prototype.concat.apply([],T)}function Ae(T){return T.length>0?T[T.length-1]:null}function ye(T,C){for(const E in T)T.hasOwnProperty(E)&&C(T[E],E)}function Le(T){return(0,g.CqO)(T)?T:(0,g.QGY)(T)?(0,Ce.D)(Promise.resolve(T)):(0,le.of)(T)}const Ut={exact:function rn(T,C,E){if(!Xt(T.segments,C.segments)||!ze(T.segments,C.segments,E)||T.numberOfChildren!==C.numberOfChildren)return!1;for(const M in C.children)if(!T.children[M]||!rn(T.children[M],C.children[M],E))return!1;return!0},subset:Lr},jt={exact:function ir(T,C){return cr(T,C)},subset:function tr(T,C){return Object.keys(C).length<=Object.keys(T).length&&Object.keys(C).every(E=>ge(T[E],C[E]))},ignored:()=>!0};function nn(T,C,E){return Ut[E.paths](T.root,C.root,E.matrixParams)&&jt[E.queryParams](T.queryParams,C.queryParams)&&!("exact"===E.fragment&&T.fragment!==C.fragment)}function Lr(T,C,E){return gi(T,C,C.segments,E)}function gi(T,C,E,M){if(T.segments.length>E.length){const V=T.segments.slice(0,E.length);return!(!Xt(V,E)||C.hasChildren()||!ze(V,E,M))}if(T.segments.length===E.length){if(!Xt(T.segments,E)||!ze(T.segments,E,M))return!1;for(const V in C.children)if(!T.children[V]||!Lr(T.children[V],C.children[V],M))return!1;return!0}{const V=E.slice(0,T.segments.length),G=E.slice(T.segments.length);return!!(Xt(T.segments,V)&&ze(T.segments,V,M)&&T.children[Vt])&&gi(T.children[Vt],C,G,M)}}function ze(T,C,E){return C.every((M,V)=>jt[E](T[V].parameters,M.parameters))}class be{constructor(C,E,M){this.root=C,this.queryParams=E,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return ji.serialize(this)}}class ie{constructor(C,E){this.segments=C,this.children=E,this.parent=null,ye(E,(M,V)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class Re{constructor(C,E){this.path=C,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=en(this.parameters)),this._parameterMap}toString(){return xr(this)}}function Xt(T,C){return T.length===C.length&&T.every((E,M)=>E.path===C[M].path)}class zn{}class Mr{parse(C){const E=new Bs(C);return new be(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(C){const E=`/${ni(C.root,!0)}`,M=function Cr(T){const C=Object.keys(T).map(E=>{const M=T[E];return Array.isArray(M)?M.map(V=>`${mi(E)}=${mi(V)}`).join("&"):`${mi(E)}=${mi(M)}`}).filter(E=>!!E);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${E}${M}${"string"==typeof C.fragment?`#${function ri(T){return encodeURI(T)}(C.fragment)}`:""}`}}const ji=new Mr;function di(T){return T.segments.map(C=>xr(C)).join("/")}function ni(T,C){if(!T.hasChildren())return di(T);if(C){const E=T.children[Vt]?ni(T.children[Vt],!1):"",M=[];return ye(T.children,(V,G)=>{G!==Vt&&M.push(`${G}:${ni(V,!1)}`)}),M.length>0?`${E}(${M.join("//")})`:E}{const E=function sn(T,C){let E=[];return ye(T.children,(M,V)=>{V===Vt&&(E=E.concat(C(M,V)))}),ye(T.children,(M,V)=>{V!==Vt&&(E=E.concat(C(M,V)))}),E}(T,(M,V)=>V===Vt?[ni(T.children[Vt],!1)]:[`${V}:${ni(M,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Vt]?`${di(T)}/${E[0]}`:`${di(T)}/(${E.join("//")})`}}function Ir(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mi(T){return Ir(T).replace(/%3B/gi,";")}function Pt(T){return Ir(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bt(T){return decodeURIComponent(T)}function yn(T){return Bt(T.replace(/\+/g,"%20"))}function xr(T){return`${Pt(T.path)}${function mr(T){return Object.keys(T).map(C=>`;${Pt(C)}=${Pt(T[C])}`).join("")}(T.parameters)}`}const yi=/^[^\/()?;=#]+/;function qn(T){const C=T.match(yi);return C?C[0]:""}const Ri=/^[^=?&#]+/,Sn=/^[^&#]+/;class Bs{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(C.length>0||Object.keys(E).length>0)&&(M[Vt]=new ie(C,E)),M}parseSegment(){const C=qn(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new Re(Bt(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const E=qn(this.remaining);if(!E)return;this.capture(E);let M="";if(this.consumeOptional("=")){const V=qn(this.remaining);V&&(M=V,this.capture(M))}C[Bt(E)]=Bt(M)}parseQueryParam(C){const E=function Rr(T){const C=T.match(Ri);return C?C[0]:""}(this.remaining);if(!E)return;this.capture(E);let M="";if(this.consumeOptional("=")){const W=function Qi(T){const C=T.match(Sn);return C?C[0]:""}(this.remaining);W&&(M=W,this.capture(M))}const V=yn(E),G=yn(M);if(C.hasOwnProperty(V)){let W=C[V];Array.isArray(W)||(W=[W],C[V]=W),W.push(G)}else C[V]=G}parseParens(C){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=qn(this.remaining),V=this.remaining[M.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let G;M.indexOf(":")>-1?(G=M.substr(0,M.indexOf(":")),this.capture(G),this.capture(":")):C&&(G=Vt);const W=this.parseChildren();E[G]=1===Object.keys(W).length?W[Vt]:new ie([],W),this.consumeOptional("//")}return E}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class Hi{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const E=this.pathFromRoot(C);return E.length>1?E[E.length-2]:null}children(C){const E=Ai(C,this._root);return E?E.children.map(M=>M.value):[]}firstChild(C){const E=Ai(C,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(C){const E=Wr(C,this._root);return E.length<2?[]:E[E.length-2].children.map(V=>V.value).filter(V=>V!==C)}pathFromRoot(C){return Wr(C,this._root).map(E=>E.value)}}function Ai(T,C){if(T===C.value)return C;for(const E of C.children){const M=Ai(T,E);if(M)return M}return null}function Wr(T,C){if(T===C.value)return[C];for(const E of C.children){const M=Wr(T,E);if(M.length)return M.unshift(C),M}return[]}class Vr{constructor(C,E){this.value=C,this.children=E}toString(){return`TreeNode(${this.value})`}}function Ur(T){const C={};return T&&T.children.forEach(E=>C[E.value.outlet]=E),C}class yr extends Hi{constructor(C,E){super(C),this.snapshot=E,Ji(this,C)}toString(){return this.snapshot.toString()}}function sr(T,C){const E=function Ts(T,C){const W=new As([],{},{},"",{},Vt,C,null,T.root,-1,{});return new Js("",new Vr(W,[]))}(T,C),M=new $e.X([new Re("",{})]),V=new $e.X({}),G=new $e.X({}),W=new $e.X({}),ne=new $e.X(""),et=new ii(M,V,W,ne,G,Vt,C,E.root);return et.snapshot=E.root,new yr(new Vr(et,[]),E)}class ii{constructor(C,E,M,V,G,W,ne,et){this.url=C,this.params=E,this.queryParams=M,this.fragment=V,this.data=G,this.outlet=W,this.component=ne,this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(C=>en(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(C=>en(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zr(T,C="emptyOnly"){const E=T.pathFromRoot;let M=0;if("always"!==C)for(M=E.length-1;M>=1;){const V=E[M],G=E[M-1];if(V.routeConfig&&""===V.routeConfig.path)M--;else{if(G.component)break;M--}}return function Oi(T){return T.reduce((C,E)=>({params:Object.assign(Object.assign({},C.params),E.params),data:Object.assign(Object.assign({},C.data),E.data),resolve:Object.assign(Object.assign({},C.resolve),E._resolvedData)}),{params:{},data:{},resolve:{}})}(E.slice(M))}class As{constructor(C,E,M,V,G,W,ne,et,qt,Bn,ln){this.url=C,this.params=E,this.queryParams=M,this.fragment=V,this.data=G,this.outlet=W,this.component=ne,this.routeConfig=et,this._urlSegment=qt,this._lastPathIndex=Bn,this._resolve=ln}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=en(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Js extends Hi{constructor(C,E){super(E),this.url=C,Ji(this,E)}toString(){return ls(this._root)}}function Ji(T,C){C.value._routerState=T,C.children.forEach(E=>Ji(T,E))}function ls(T){const C=T.children.length>0?` { ${T.children.map(ls).join(", ")} } `:"";return`${T.value}${C}`}function Xi(T){if(T.snapshot){const C=T.snapshot,E=T._futureSnapshot;T.snapshot=E,cr(C.queryParams,E.queryParams)||T.queryParams.next(E.queryParams),C.fragment!==E.fragment&&T.fragment.next(E.fragment),cr(C.params,E.params)||T.params.next(E.params),function Fr(T,C){if(T.length!==C.length)return!1;for(let E=0;E<T.length;++E)if(!cr(T[E],C[E]))return!1;return!0}(C.url,E.url)||T.url.next(E.url),cr(C.data,E.data)||T.data.next(E.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function Xs(T,C){const E=cr(T.params,C.params)&&function gt(T,C){return Xt(T,C)&&T.every((E,M)=>cr(E.parameters,C[M].parameters))}(T.url,C.url);return E&&!(!T.parent!=!C.parent)&&(!T.parent||Xs(T.parent,C.parent))}function Zn(T,C,E){if(E&&T.shouldReuseRoute(C.value,E.value.snapshot)){const M=E.value;M._futureSnapshot=C.value;const V=function Ni(T,C,E){return C.children.map(M=>{for(const V of E.children)if(T.shouldReuseRoute(M.value,V.value.snapshot))return Zn(T,M,V);return Zn(T,M)})}(T,C,E);return new Vr(M,V)}{if(T.shouldAttach(C.value)){const G=T.retrieve(C.value);if(null!==G){const W=G.route;return W.value._futureSnapshot=C.value,W.children=C.children.map(ne=>Zn(T,ne)),W}}const M=function js(T){return new ii(new $e.X(T.url),new $e.X(T.params),new $e.X(T.queryParams),new $e.X(T.fragment),new $e.X(T.data),T.outlet,T.component,T)}(C.value),V=C.children.map(G=>Zn(T,G));return new Vr(M,V)}}function Ie(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Ze(T){return"object"==typeof T&&null!=T&&T.outlets}function ht(T,C,E,M,V){let G={};if(M&&ye(M,(ne,et)=>{G[et]=Array.isArray(ne)?ne.map(qt=>`${qt}`):`${ne}`}),T===C)return new be(E,G,V);const W=Ot(T,C,E);return new be(W,G,V)}function Ot(T,C,E){const M={};return ye(T.children,(V,G)=>{M[G]=V===C?E:Ot(V,C,E)}),new ie(T.segments,M)}class zt{constructor(C,E,M){if(this.isAbsolute=C,this.numberOfDoubleDots=E,this.commands=M,C&&M.length>0&&Ie(M[0]))throw new Error("Root segment cannot have matrix parameters");const V=M.find(Ze);if(V&&V!==Ae(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Br{constructor(C,E,M){this.segmentGroup=C,this.processChildren=E,this.index=M}}function si(T,C,E){if(T||(T=new ie([],{})),0===T.segments.length&&T.hasChildren())return eo(T,C,E);const M=function Ms(T,C,E){let M=0,V=C;const G={match:!1,pathIndex:0,commandIndex:0};for(;V<T.segments.length;){if(M>=E.length)return G;const W=T.segments[V],ne=E[M];if(Ze(ne))break;const et=`${ne}`,qt=M<E.length-1?E[M+1]:null;if(V>0&&void 0===et)break;if(et&&qt&&"object"==typeof qt&&void 0===qt.outlets){if(!oi(et,qt,W))return G;M+=2}else{if(!oi(et,{},W))return G;M++}V++}return{match:!0,pathIndex:V,commandIndex:M}}(T,C,E),V=E.slice(M.commandIndex);if(M.match&&M.pathIndex<T.segments.length){const G=new ie(T.segments.slice(0,M.pathIndex),{});return G.children[Vt]=new ie(T.segments.slice(M.pathIndex),T.children),eo(G,0,V)}return M.match&&0===V.length?new ie(T.segments,{}):M.match&&!T.hasChildren()?to(T,C,E):M.match?eo(T,0,V):to(T,C,E)}function eo(T,C,E){if(0===E.length)return new ie(T.segments,{});{const M=function Ss(T){return Ze(T[0])?T[0].outlets:{[Vt]:T}}(E),V={};return ye(M,(G,W)=>{"string"==typeof G&&(G=[G]),null!==G&&(V[W]=si(T.children[W],C,G))}),ye(T.children,(G,W)=>{void 0===M[W]&&(V[W]=G)}),new ie(T.segments,V)}}function to(T,C,E){const M=T.segments.slice(0,C);let V=0;for(;V<E.length;){const G=E[V];if(Ze(G)){const et=xs(G.outlets);return new ie(M,et)}if(0===V&&Ie(E[0])){M.push(new Re(T.segments[C].path,yo(E[0]))),V++;continue}const W=Ze(G)?G.outlets[Vt]:`${G}`,ne=V<E.length-1?E[V+1]:null;W&&ne&&Ie(ne)?(M.push(new Re(W,yo(ne))),V+=2):(M.push(new Re(W,{})),V++)}return new ie(M,{})}function xs(T){const C={};return ye(T,(E,M)=>{"string"==typeof E&&(E=[E]),null!==E&&(C[M]=to(new ie([],{}),0,E))}),C}function yo(T){const C={};return ye(T,(E,M)=>C[M]=`${E}`),C}function oi(T,C,E){return T==E.path&&cr(C,E.parameters)}class ts{constructor(C,E,M,V){this.routeReuseStrategy=C,this.futureState=E,this.currState=M,this.forwardEvent=V}activate(C){const E=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,M,C),Xi(this.futureState.root),this.activateChildRoutes(E,M,C)}deactivateChildRoutes(C,E,M){const V=Ur(E);C.children.forEach(G=>{const W=G.value.outlet;this.deactivateRoutes(G,V[W],M),delete V[W]}),ye(V,(G,W)=>{this.deactivateRouteAndItsChildren(G,M)})}deactivateRoutes(C,E,M){const V=C.value,G=E?E.value:null;if(V===G)if(V.component){const W=M.getContext(V.outlet);W&&this.deactivateChildRoutes(C,E,W.children)}else this.deactivateChildRoutes(C,E,M);else G&&this.deactivateRouteAndItsChildren(E,M)}deactivateRouteAndItsChildren(C,E){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,E):this.deactivateRouteAndOutlet(C,E)}detachAndStoreRouteSubtree(C,E){const M=E.getContext(C.value.outlet),V=M&&C.value.component?M.children:E,G=Ur(C);for(const W of Object.keys(G))this.deactivateRouteAndItsChildren(G[W],V);if(M&&M.outlet){const W=M.outlet.detach(),ne=M.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:W,route:C,contexts:ne})}}deactivateRouteAndOutlet(C,E){const M=E.getContext(C.value.outlet),V=M&&C.value.component?M.children:E,G=Ur(C);for(const W of Object.keys(G))this.deactivateRouteAndItsChildren(G[W],V);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(C,E,M){const V=Ur(E);C.children.forEach(G=>{this.activateRoutes(G,V[G.value.outlet],M),this.forwardEvent(new ti(G.value.snapshot))}),C.children.length&&this.forwardEvent(new Kr(C.value.snapshot))}activateRoutes(C,E,M){const V=C.value,G=E?E.value:null;if(Xi(V),V===G)if(V.component){const W=M.getOrCreateContext(V.outlet);this.activateChildRoutes(C,E,W.children)}else this.activateChildRoutes(C,E,M);else if(V.component){const W=M.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const ne=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),W.children.onOutletReAttached(ne.contexts),W.attachRef=ne.componentRef,W.route=ne.route.value,W.outlet&&W.outlet.attach(ne.componentRef,ne.route.value),Xi(ne.route.value),this.activateChildRoutes(C,null,W.children)}else{const ne=function cs(T){for(let C=T.parent;C;C=C.parent){const E=C.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig;if(E&&E.component)return null}return null}(V.snapshot),et=ne?ne.module.componentFactoryResolver:null;W.attachRef=null,W.route=V,W.resolver=et,W.outlet&&W.outlet.activateWith(V,et),this.activateChildRoutes(C,null,W.children)}}else this.activateChildRoutes(C,null,M)}}class $s{constructor(C,E){this.routes=C,this.module=E}}function ds(T){return"function"==typeof T}function bi(T){return T instanceof be}const ns=Symbol("INITIAL_VALUE");function Or(){return(0,pn.w)(T=>function fe(...T){const C=(0,He.yG)(T),E=(0,He.jO)(T),{args:M,keys:V}=(0,ee.D)(T);if(0===M.length)return(0,Ce.D)([],C);const G=new z.y(function De(T,C,E=Me.y){return M=>{at(C,()=>{const{length:V}=T,G=new Array(V);let W=V,ne=V;for(let et=0;et<V;et++)at(C,()=>{const qt=(0,Ce.D)(T[et],C);let Bn=!1;qt.subscribe((0,je.x)(M,ln=>{G[et]=ln,Bn||(Bn=!0,ne--),ne||M.next(E(G.slice()))},()=>{--W||M.complete()}))},M)},M)}}(M,C,V?W=>(0,Fe.n)(V,W):Me.y));return E?G.pipe((0,Ne.Z)(E)):G}(T.map(C=>C.pipe((0,on.q)(1),(0,tt.O)(ns)))).pipe((0,Qe.R)((C,E)=>{let M=!1;return E.reduce((V,G,W)=>V!==ns?V:(G===ns&&(M=!0),M||!1!==G&&W!==E.length-1&&!bi(G)?V:G),C)},ns),(0,Be.h)(C=>C!==ns),(0,ft.U)(C=>bi(C)?C:!0===C),(0,on.q)(1)))}class vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new no,this.attachRef=null}}class no{constructor(){this.contexts=new Map}onChildOutletCreated(C,E){const M=this.getOrCreateContext(C);M.outlet=E,this.contexts.set(C,M)}onChildOutletDestroyed(C){const E=this.getContext(C);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let E=this.getContext(C);return E||(E=new vo,this.contexts.set(C,E)),E}getContext(C){return this.contexts.get(C)||null}}let Rs=(()=>{class T{constructor(E,M,V,G,W){this.parentContexts=E,this.location=M,this.resolver=V,this.changeDetector=W,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=G||Vt,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,M){this.activated=E,this._activatedRoute=M,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;const W=(M=M||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),ne=this.parentContexts.getOrCreateContext(this.name).children,et=new rs(E,ne,this.location.injector);this.activated=this.location.createComponent(W,this.location.length,et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(E){return new(E||T)(g.Y36(no),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},T.\u0275dir=g.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class rs{constructor(C,E,M){this.route=C,this.childContexts=E,this.parent=M}get(C,E){return C===ii?this.route:C===no?this.childContexts:this.parent.get(C,E)}}let is=(()=>{class T{}return T.\u0275fac=function(E){return new(E||T)},T.\u0275cmp=g.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(E,M){1&E&&g._UZ(0,"router-outlet")},directives:[Rs],encapsulation:2}),T})();function _i(T,C=""){for(let E=0;E<T.length;E++){const M=T[E];ua(M,_r(C,M))}}function ua(T,C){T.children&&_i(T.children,C)}function _r(T,C){return C?T||C.path?T&&!C.path?`${T}/`:!T&&C.path?C.path:`${T}/${C.path}`:"":T}function k(T){const C=T.children&&T.children.map(k),E=C?Object.assign(Object.assign({},T),{children:C}):Object.assign({},T);return!E.component&&(C||E.loadChildren)&&E.outlet&&E.outlet!==Vt&&(E.component=is),E}function q(T){return T.outlet||Vt}function P(T,C){const E=T.filter(M=>q(M)===C);return E.push(...T.filter(M=>q(M)!==C)),E}const Q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ee(T,C,E){var M;if(""===C.path)return"full"===C.pathMatch&&(T.hasChildren()||E.length>0)?Object.assign({},Q):{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const G=(C.matcher||Yi)(E,T,C);if(!G)return Object.assign({},Q);const W={};ye(G.posParams,(et,qt)=>{W[qt]=et.path});const ne=G.consumed.length>0?Object.assign(Object.assign({},W),G.consumed[G.consumed.length-1].parameters):W;return{matched:!0,consumedSegments:G.consumed,remainingSegments:E.slice(G.consumed.length),parameters:ne,positionalParamSegments:null!==(M=G.posParams)&&void 0!==M?M:{}}}function rt(T,C,E,M,V="corrected"){if(E.length>0&&function Mn(T,C,E){return E.some(M=>In(T,C,M)&&q(M)!==Vt)}(T,E,M)){const W=new ie(C,function Qt(T,C,E,M){const V={};V[Vt]=M,M._sourceSegment=T,M._segmentIndexShift=C.length;for(const G of E)if(""===G.path&&q(G)!==Vt){const W=new ie([],{});W._sourceSegment=T,W._segmentIndexShift=C.length,V[q(G)]=W}return V}(T,C,M,new ie(E,T.children)));return W._sourceSegment=T,W._segmentIndexShift=C.length,{segmentGroup:W,slicedSegments:[]}}if(0===E.length&&function nr(T,C,E){return E.some(M=>In(T,C,M))}(T,E,M)){const W=new ie(T.segments,function ot(T,C,E,M,V,G){const W={};for(const ne of M)if(In(T,E,ne)&&!V[q(ne)]){const et=new ie([],{});et._sourceSegment=T,et._segmentIndexShift="legacy"===G?T.segments.length:C.length,W[q(ne)]=et}return Object.assign(Object.assign({},V),W)}(T,C,E,M,T.children,V));return W._sourceSegment=T,W._segmentIndexShift=C.length,{segmentGroup:W,slicedSegments:E}}const G=new ie(T.segments,T.children);return G._sourceSegment=T,G._segmentIndexShift=C.length,{segmentGroup:G,slicedSegments:E}}function In(T,C,E){return(!(T.hasChildren()||C.length>0)||"full"!==E.pathMatch)&&""===E.path}function Ln(T,C,E,M){return!!(q(T)===M||M!==Vt&&In(C,E,T))&&("**"===T.path||Ee(C,T,E).matched)}function Nr(T,C,E){return 0===C.length&&!T.children[E]}class or{constructor(C){this.segmentGroup=C||null}}class Dr{constructor(C){this.urlTree=C}}function Pr(T){return ut(new or(T))}function vi(T){return ut(new Dr(T))}class Eo{constructor(C,E,M,V,G){this.configLoader=E,this.urlSerializer=M,this.urlTree=V,this.config=G,this.allowRedirects=!0,this.ngModule=C.get(g.h0i)}apply(){const C=rt(this.urlTree.root,[],[],this.config).segmentGroup,E=new ie(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,E,Vt).pipe((0,ft.U)(G=>this.createUrlTree(L(G),this.urlTree.queryParams,this.urlTree.fragment))).pipe(re(G=>{if(G instanceof Dr)return this.allowRedirects=!1,this.match(G.urlTree);throw G instanceof or?this.noMatchError(G):G}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,Vt).pipe((0,ft.U)(V=>this.createUrlTree(L(V),C.queryParams,C.fragment))).pipe(re(V=>{throw V instanceof or?this.noMatchError(V):V}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,E,M){const V=C.segments.length>0?new ie([],{[Vt]:C}):C;return new be(V,E,M)}expandSegmentGroup(C,E,M,V){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(C,E,M).pipe((0,ft.U)(G=>new ie([],G))):this.expandSegment(C,M,E,M.segments,V,!0)}expandChildren(C,E,M){const V=[];for(const G of Object.keys(M.children))"primary"===G?V.unshift(G):V.push(G);return(0,Ce.D)(V).pipe(de(G=>{const W=M.children[G],ne=P(E,G);return this.expandSegmentGroup(C,ne,W,G).pipe((0,ft.U)(et=>({segment:et,outlet:G})))}),(0,Qe.R)((G,W)=>(G[W.outlet]=W.segment,G),{}),function Kt(T,C){const E=arguments.length>=2;return M=>M.pipe(T?(0,Be.h)((V,G)=>T(V,G,M)):Me.y,Ge(1),E?(0,Mt.d)(C):(0,_t.T)(()=>new ct.K))}())}expandSegment(C,E,M,V,G,W){return(0,Ce.D)(M).pipe(de(ne=>this.expandSegmentAgainstRoute(C,E,M,ne,V,G,W).pipe(re(qt=>{if(qt instanceof or)return(0,le.of)(null);throw qt}))),(0,Te.P)(ne=>!!ne),re((ne,et)=>{if(ne instanceof ct.K||"EmptyError"===ne.name)return Nr(E,V,G)?(0,le.of)(new ie([],{})):Pr(E);throw ne}))}expandSegmentAgainstRoute(C,E,M,V,G,W,ne){return Ln(V,E,G,W)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(C,E,V,G,W):ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,E,M,V,G,W):Pr(E):Pr(E)}expandSegmentAgainstRouteUsingRedirect(C,E,M,V,G,W){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,M,V,W):this.expandRegularSegmentAgainstRouteUsingRedirect(C,E,M,V,G,W)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,E,M,V){const G=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?vi(G):this.lineralizeSegments(M,G).pipe((0,ce.z)(W=>{const ne=new ie(W,{});return this.expandSegment(C,ne,E,W,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,E,M,V,G,W){const{matched:ne,consumedSegments:et,remainingSegments:qt,positionalParamSegments:Bn}=Ee(E,V,G);if(!ne)return Pr(E);const ln=this.applyRedirectCommands(et,V.redirectTo,Bn);return V.redirectTo.startsWith("/")?vi(ln):this.lineralizeSegments(V,ln).pipe((0,ce.z)(gr=>this.expandSegment(C,E,M,gr.concat(qt),W,!1)))}matchSegmentAgainstRoute(C,E,M,V,G){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,le.of)(M._loadedConfig):this.configLoader.load(C.injector,M)).pipe((0,ft.U)(ln=>(M._loadedConfig=ln,new ie(V,{})))):(0,le.of)(new ie(V,{}));const{matched:W,consumedSegments:ne,remainingSegments:et}=Ee(E,M,V);return W?this.getChildConfig(C,M,V).pipe((0,ce.z)(Bn=>{const ln=Bn.module,gr=Bn.routes,{segmentGroup:vr,slicedSegments:Tr}=rt(E,ne,et,gr),Ps=new ie(vr.segments,vr.children);if(0===Tr.length&&Ps.hasChildren())return this.expandChildren(ln,gr,Ps).pipe((0,ft.U)(ha=>new ie(ne,ha)));if(0===gr.length&&0===Tr.length)return(0,le.of)(new ie(ne,{}));const Vo=q(M)===G;return this.expandSegment(ln,Ps,gr,Tr,Vo?Vt:G,!0).pipe((0,ft.U)(Yr=>new ie(ne.concat(Yr.segments),Yr.children)))})):Pr(E)}getChildConfig(C,E,M){return E.children?(0,le.of)(new $s(E.children,C)):E.loadChildren?void 0!==E._loadedConfig?(0,le.of)(E._loadedConfig):this.runCanLoadGuards(C.injector,E,M).pipe((0,ce.z)(V=>V?this.configLoader.load(C.injector,E).pipe((0,ft.U)(G=>(E._loadedConfig=G,G))):function Pi(T){return ut(zr(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))}(E))):(0,le.of)(new $s([],C))}runCanLoadGuards(C,E,M){const V=E.canLoad;if(!V||0===V.length)return(0,le.of)(!0);const G=V.map(W=>{const ne=C.get(W);let et;if(function _o(T){return T&&ds(T.canLoad)}(ne))et=ne.canLoad(E,M);else{if(!ds(ne))throw new Error("Invalid CanLoad guard");et=ne(E,M)}return Le(et)});return(0,le.of)(G).pipe(Or(),(0,Ve.b)(W=>{if(!bi(W))return;const ne=zr(`Redirecting to "${this.urlSerializer.serialize(W)}"`);throw ne.url=W,ne}),(0,ft.U)(W=>!0===W))}lineralizeSegments(C,E){let M=[],V=E.root;for(;;){if(M=M.concat(V.segments),0===V.numberOfChildren)return(0,le.of)(M);if(V.numberOfChildren>1||!V.children[Vt])return ut(new Error(`Only absolute redirects can have named outlets. redirectTo: '${C.redirectTo}'`));V=V.children[Vt]}}applyRedirectCommands(C,E,M){return this.applyRedirectCreatreUrlTree(E,this.urlSerializer.parse(E),C,M)}applyRedirectCreatreUrlTree(C,E,M,V){const G=this.createSegmentGroup(C,E.root,M,V);return new be(G,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(C,E){const M={};return ye(C,(V,G)=>{if("string"==typeof V&&V.startsWith(":")){const ne=V.substring(1);M[G]=E[ne]}else M[G]=V}),M}createSegmentGroup(C,E,M,V){const G=this.createSegments(C,E.segments,M,V);let W={};return ye(E.children,(ne,et)=>{W[et]=this.createSegmentGroup(C,ne,M,V)}),new ie(G,W)}createSegments(C,E,M,V){return E.map(G=>G.path.startsWith(":")?this.findPosParam(C,G,V):this.findOrReturn(G,M))}findPosParam(C,E,M){const V=M[E.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${C}'. Cannot find '${E.path}'.`);return V}findOrReturn(C,E){let M=0;for(const V of E){if(V.path===C.path)return E.splice(M),V;M++}return C}}function L(T){const C={};for(const M of Object.keys(T.children)){const G=L(T.children[M]);(G.segments.length>0||G.hasChildren())&&(C[M]=G)}return function Mo(T){if(1===T.numberOfChildren&&T.children[Vt]){const C=T.children[Vt];return new ie(T.segments.concat(C.segments),C.children)}return T}(new ie(T.segments,C))}class R{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class J{constructor(C,E){this.component=C,this.route=E}}function ve(T,C,E){const M=T._root;return ki(M,C?C._root:null,E,[M.value])}function pr(T,C,E){const M=function Qn(T){if(!T)return null;for(let C=T.parent;C;C=C.parent){const E=C.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig}return null}(C);return(M?M.module.injector:E).get(T)}function ki(T,C,E,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const G=Ur(C);return T.children.forEach(W=>{(function hs(T,C,E,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const G=T.value,W=C?C.value:null,ne=E?E.getContext(T.value.outlet):null;if(W&&G.routeConfig===W.routeConfig){const et=function Fi(T,C,E){if("function"==typeof E)return E(T,C);switch(E){case"pathParamsChange":return!Xt(T.url,C.url);case"pathParamsOrQueryParamsChange":return!Xt(T.url,C.url)||!cr(T.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xs(T,C)||!cr(T.queryParams,C.queryParams);default:return!Xs(T,C)}}(W,G,G.routeConfig.runGuardsAndResolvers);et?V.canActivateChecks.push(new R(M)):(G.data=W.data,G._resolvedData=W._resolvedData),ki(T,C,G.component?ne?ne.children:null:E,M,V),et&&ne&&ne.outlet&&ne.outlet.isActivated&&V.canDeactivateChecks.push(new J(ne.outlet.component,W))}else W&&Os(C,ne,V),V.canActivateChecks.push(new R(M)),ki(T,null,G.component?ne?ne.children:null:E,M,V)})(W,G[W.value.outlet],E,M.concat([W.value]),V),delete G[W.value.outlet]}),ye(G,(W,ne)=>Os(W,E.getContext(ne),V)),V}function Os(T,C,E){const M=Ur(T),V=T.value;ye(M,(G,W)=>{Os(G,V.component?C?C.children.getContext(W):null:C,E)}),E.canDeactivateChecks.push(new J(V.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,V))}class xo{}function ss(T){return new z.y(C=>C.error(T))}class Na{constructor(C,E,M,V,G,W){this.rootComponentType=C,this.config=E,this.urlTree=M,this.url=V,this.paramsInheritanceStrategy=G,this.relativeLinkResolution=W}recognize(){const C=rt(this.urlTree.root,[],[],this.config.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution).segmentGroup,E=this.processSegmentGroup(this.config,C,Vt);if(null===E)return null;const M=new As([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Vr(M,E),G=new Js(this.url,V);return this.inheritParamsAndData(G._root),G}inheritParamsAndData(C){const E=C.value,M=Zr(E,this.paramsInheritanceStrategy);E.params=Object.freeze(M.params),E.data=Object.freeze(M.data),C.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(C,E,M){return 0===E.segments.length&&E.hasChildren()?this.processChildren(C,E):this.processSegment(C,E,E.segments,M)}processChildren(C,E){const M=[];for(const G of Object.keys(E.children)){const W=E.children[G],ne=P(C,G),et=this.processSegmentGroup(ne,W,G);if(null===et)return null;M.push(...et)}const V=ka(M);return function Jr(T){T.sort((C,E)=>C.value.outlet===Vt?-1:E.value.outlet===Vt?1:C.value.outlet.localeCompare(E.value.outlet))}(V),V}processSegment(C,E,M,V){for(const G of C){const W=this.processSegmentAgainstRoute(G,E,M,V);if(null!==W)return W}return Nr(E,M,V)?[]:null}processSegmentAgainstRoute(C,E,M,V){if(C.redirectTo||!Ln(C,E,M,V))return null;let G,W=[],ne=[];if("**"===C.path){const vr=M.length>0?Ae(M).parameters:{};G=new As(M,vr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ia(C),q(C),C.component,C,Ko(E),Fa(E)+M.length,bo(C))}else{const vr=Ee(E,C,M);if(!vr.matched)return null;W=vr.consumedSegments,ne=vr.remainingSegments,G=new As(W,vr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ia(C),q(C),C.component,C,Ko(E),Fa(E)+W.length,bo(C))}const et=function nu(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(C),{segmentGroup:qt,slicedSegments:Bn}=rt(E,W,ne,et.filter(vr=>void 0===vr.redirectTo),this.relativeLinkResolution);if(0===Bn.length&&qt.hasChildren()){const vr=this.processChildren(et,qt);return null===vr?null:[new Vr(G,vr)]}if(0===et.length&&0===Bn.length)return[new Vr(G,[])];const ln=q(C)===V,gr=this.processSegment(et,qt,Bn,ln?Vt:V);return null===gr?null:[new Vr(G,gr)]}}function Pa(T){const C=T.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function ka(T){const C=[],E=new Set;for(const M of T){if(!Pa(M)){C.push(M);continue}const V=C.find(G=>M.value.routeConfig===G.value.routeConfig);void 0!==V?(V.children.push(...M.children),E.add(V)):C.push(M)}for(const M of E){const V=ka(M.children);C.push(new Vr(M.value,V))}return C.filter(M=>!E.has(M))}function Ko(T){let C=T;for(;C._sourceSegment;)C=C._sourceSegment;return C}function Fa(T){let C=T,E=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,E+=C._segmentIndexShift?C._segmentIndexShift:0;return E-1}function Ia(T){return T.data||{}}function bo(T){return T.resolve||{}}function la(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function Oo(T){return(0,pn.w)(C=>{const E=T(C);return E?(0,Ce.D)(E).pipe((0,ft.U)(()=>C)):(0,le.of)(C)})}class kr extends class No{shouldDetach(C){return!1}store(C,E){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,E){return C.routeConfig===E.routeConfig}}{}const Va=new g.OlP("ROUTES");class Ua{constructor(C,E,M,V){this.injector=C,this.compiler=E,this.onLoadStartListener=M,this.onLoadEndListener=V}load(C,E){if(E._loader$)return E._loader$;this.onLoadStartListener&&this.onLoadStartListener(E);const V=this.loadModuleFactory(E.loadChildren).pipe((0,ft.U)(G=>{this.onLoadEndListener&&this.onLoadEndListener(E);const W=G.create(C);return new $s(we(W.injector.get(Va,void 0,g.XFs.Self|g.XFs.Optional)).map(k),W)}),re(G=>{throw E._loader$=void 0,G}));return E._loader$=new oe(V,()=>new ke.x).pipe(Rt()),E._loader$}loadModuleFactory(C){return Le(C()).pipe((0,ce.z)(E=>E instanceof g.YKP?(0,le.of)(E):(0,Ce.D)(this.compiler.compileModuleAsync(E))))}}class Gs{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,E){return C}}function Hu(T){throw T}function ja(T,C,E){return C.parse("/")}function Po(T,C){return(0,le.of)(null)}const io={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let En=(()=>{class T{constructor(E,M,V,G,W,ne,et){this.rootComponentType=E,this.urlSerializer=M,this.rootContexts=V,this.location=G,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ke.x,this.errorHandler=Hu,this.malformedUriErrorHandler=ja,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Po,afterPreactivation:Po},this.urlHandlingStrategy=new Gs,this.routeReuseStrategy=new kr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=W.get(g.h0i),this.console=W.get(g.c2e);const ln=W.get(g.R0b);this.isNgZoneEnabled=ln instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function yt(){return new be(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ua(W,ne,gr=>this.triggerEvent(new mn(gr)),gr=>this.triggerEvent(new ci(gr))),this.routerState=sr(this.currentUrlTree,this.rootComponentType),this.transitions=new $e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var E;return null===(E=this.location.getState())||void 0===E?void 0:E.\u0275routerPageId}setupNavigations(E){const M=this.events;return E.pipe((0,Be.h)(V=>0!==V.id),(0,ft.U)(V=>Object.assign(Object.assign({},V),{extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,pn.w)(V=>{let G=!1,W=!1;return(0,le.of)(V).pipe((0,Ve.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.currentRawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,pn.w)(ne=>{const et=this.browserUrlTree.toString(),qt=!this.navigated||ne.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qt)&&this.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return ca(ne.source)&&(this.browserUrlTree=ne.extractedUrl),(0,le.of)(ne).pipe((0,pn.w)(ln=>{const gr=this.transitions.getValue();return M.next(new Kn(ln.id,this.serializeUrl(ln.extractedUrl),ln.source,ln.restoredState)),gr!==this.transitions.getValue()?me.E:Promise.resolve(ln)}),function N(T,C,E,M){return(0,pn.w)(V=>function vs(T,C,E,M,V){return new Eo(T,C,E,M,V).apply()}(T,C,E,V.extractedUrl,M).pipe((0,ft.U)(G=>Object.assign(Object.assign({},V),{urlAfterRedirects:G}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(ln=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ln.urlAfterRedirects})}),function La(T,C,E,M,V){return(0,ce.z)(G=>function qo(T,C,E,M,V="emptyOnly",G="legacy"){try{const W=new Na(T,C,E,M,V,G).recognize();return null===W?ss(new xo):(0,le.of)(W)}catch(W){return ss(W)}}(T,C,G.urlAfterRedirects,E(G.urlAfterRedirects),M,V).pipe((0,ft.U)(W=>Object.assign(Object.assign({},G),{targetSnapshot:W}))))}(this.rootComponentType,this.config,ln=>this.serializeUrl(ln),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(ln=>{if("eager"===this.urlUpdateStrategy){if(!ln.extras.skipLocationChange){const vr=this.urlHandlingStrategy.merge(ln.urlAfterRedirects,ln.rawUrl);this.setBrowserUrl(vr,ln)}this.browserUrlTree=ln.urlAfterRedirects}const gr=new lr(ln.id,this.serializeUrl(ln.extractedUrl),this.serializeUrl(ln.urlAfterRedirects),ln.targetSnapshot);M.next(gr)}));if(qt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:gr,extractedUrl:vr,source:Tr,restoredState:Ps,extras:Vo}=ne,Ga=new Kn(gr,this.serializeUrl(vr),Tr,Ps);M.next(Ga);const Yr=sr(vr,this.rootComponentType).snapshot;return(0,le.of)(Object.assign(Object.assign({},ne),{targetSnapshot:Yr,urlAfterRedirects:vr,extras:Object.assign(Object.assign({},Vo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ne.rawUrl,ne.resolve(null),me.E}),Oo(ne=>{const{targetSnapshot:et,id:qt,extractedUrl:Bn,rawUrl:ln,extras:{skipLocationChange:gr,replaceUrl:vr}}=ne;return this.hooks.beforePreactivation(et,{navigationId:qt,appliedUrlTree:Bn,rawUrlTree:ln,skipLocationChange:!!gr,replaceUrl:!!vr})}),(0,Ve.b)(ne=>{const et=new Hn(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot);this.triggerEvent(et)}),(0,ft.U)(ne=>Object.assign(Object.assign({},ne),{guards:ve(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)})),function wo(T,C){return(0,ce.z)(E=>{const{targetSnapshot:M,currentSnapshot:V,guards:{canActivateChecks:G,canDeactivateChecks:W}}=E;return 0===W.length&&0===G.length?(0,le.of)(Object.assign(Object.assign({},E),{guardsResult:!0})):function Iu(T,C,E,M){return(0,Ce.D)(T).pipe((0,ce.z)(V=>function ba(T,C,E,M,V){const G=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,le.of)(!0);const W=G.map(ne=>{const et=pr(ne,C,V);let qt;if(function fi(T){return T&&ds(T.canDeactivate)}(et))qt=Le(et.canDeactivate(T,C,E,M));else{if(!ds(et))throw new Error("Invalid CanDeactivate guard");qt=Le(et(T,C,E,M))}return qt.pipe((0,Te.P)())});return(0,le.of)(W).pipe(Or())}(V.component,V.route,E,C,M)),(0,Te.P)(V=>!0!==V,!0))}(W,M,V,T).pipe((0,ce.z)(ne=>ne&&function aa(T){return"boolean"==typeof T}(ne)?function ju(T,C,E,M){return(0,Ce.D)(C).pipe(de(V=>(0,st.z)(function ro(T,C){return null!==T&&C&&C(new fr(T)),(0,le.of)(!0)}(V.route.parent,M),function hl(T,C){return null!==T&&C&&C(new br(T)),(0,le.of)(!0)}(V.route,M),function fs(T,C,E){const M=C[C.length-1],G=C.slice(0,C.length-1).reverse().map(W=>function Tt(T){const C=T.routeConfig?T.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:T,guards:C}:null}(W)).filter(W=>null!==W).map(W=>Ye(()=>{const ne=W.guards.map(et=>{const qt=pr(et,W.node,E);let Bn;if(function Wo(T){return T&&ds(T.canActivateChild)}(qt))Bn=Le(qt.canActivateChild(M,T));else{if(!ds(qt))throw new Error("Invalid CanActivateChild guard");Bn=Le(qt(M,T))}return Bn.pipe((0,Te.P)())});return(0,le.of)(ne).pipe(Or())}));return(0,le.of)(G).pipe(Or())}(T,V.path,E),function Si(T,C,E){const M=C.routeConfig?C.routeConfig.canActivate:null;if(!M||0===M.length)return(0,le.of)(!0);const V=M.map(G=>Ye(()=>{const W=pr(G,C,E);let ne;if(function hi(T){return T&&ds(T.canActivate)}(W))ne=Le(W.canActivate(C,T));else{if(!ds(W))throw new Error("Invalid CanActivate guard");ne=Le(W(C,T))}return ne.pipe((0,Te.P)())}));return(0,le.of)(V).pipe(Or())}(T,V.route,E))),(0,Te.P)(V=>!0!==V,!0))}(M,G,T,C):(0,le.of)(ne)),(0,ft.U)(ne=>Object.assign(Object.assign({},E),{guardsResult:ne})))})}(this.ngModule.injector,ne=>this.triggerEvent(ne)),(0,Ve.b)(ne=>{if(bi(ne.guardsResult)){const qt=zr(`Redirecting to "${this.serializeUrl(ne.guardsResult)}"`);throw qt.url=ne.guardsResult,qt}const et=new Wt(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.triggerEvent(et)}),(0,Be.h)(ne=>!!ne.guardsResult||(this.restoreHistory(ne),this.cancelNavigationTransition(ne,""),!1)),Oo(ne=>{if(ne.guards.canActivateChecks.length)return(0,le.of)(ne).pipe((0,Ve.b)(et=>{const qt=new fn(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(qt)}),(0,pn.w)(et=>{let qt=!1;return(0,le.of)(et).pipe(function Ro(T,C){return(0,ce.z)(E=>{const{targetSnapshot:M,guards:{canActivateChecks:V}}=E;if(!V.length)return(0,le.of)(E);let G=0;return(0,Ce.D)(V).pipe(de(W=>function Es(T,C,E,M){return function ru(T,C,E,M){const V=la(T);if(0===V.length)return(0,le.of)({});const G={};return(0,Ce.D)(V).pipe((0,ce.z)(W=>function Du(T,C,E,M){const V=pr(T,C,M);return Le(V.resolve?V.resolve(C,E):V(C,E))}(T[W],C,E,M).pipe((0,Ve.b)(ne=>{G[W]=ne}))),Ge(1),(0,ce.z)(()=>la(G).length===V.length?(0,le.of)(G):me.E))}(T._resolve,T,C,M).pipe((0,ft.U)(G=>(T._resolvedData=G,T.data=Object.assign(Object.assign({},T.data),Zr(T,E).resolve),null)))}(W.route,M,T,C)),(0,Ve.b)(()=>G++),Ge(1),(0,ce.z)(W=>G===V.length?(0,le.of)(E):me.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>qt=!0,complete:()=>{qt||(this.restoreHistory(et),this.cancelNavigationTransition(et,"At least one route resolver didn't emit any value."))}}))}),(0,Ve.b)(et=>{const qt=new Cn(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(qt)}))}),Oo(ne=>{const{targetSnapshot:et,id:qt,extractedUrl:Bn,rawUrl:ln,extras:{skipLocationChange:gr,replaceUrl:vr}}=ne;return this.hooks.afterPreactivation(et,{navigationId:qt,appliedUrlTree:Bn,rawUrlTree:ln,skipLocationChange:!!gr,replaceUrl:!!vr})}),(0,ft.U)(ne=>{const et=function oa(T,C,E){const M=Zn(T,C._root,E?E._root:void 0);return new yr(M,C)}(this.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return Object.assign(Object.assign({},ne),{targetRouterState:et})}),(0,Ve.b)(ne=>{this.currentUrlTree=ne.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),this.routerState=ne.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ne.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ne),this.browserUrlTree=ne.urlAfterRedirects)}),((T,C,E)=>(0,ft.U)(M=>(new ts(C,M.targetRouterState,M.currentRouterState,E).activate(T),M)))(this.rootContexts,this.routeReuseStrategy,ne=>this.triggerEvent(ne)),(0,Ve.b)({next(){G=!0},complete(){G=!0}}),function Zt(T){return(0,xt.e)((C,E)=>{try{C.subscribe(E)}finally{E.add(T)}})}(()=>{var ne;G||W||this.cancelNavigationTransition(V,`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.id)===V.id&&(this.currentNavigation=null)}),re(ne=>{if(W=!0,function Un(T){return T&&T[rr]}(ne)){const et=bi(ne.url);et||(this.navigated=!0,this.restoreHistory(V,!0));const qt=new wr(V.id,this.serializeUrl(V.extractedUrl),ne.message);M.next(qt),et?setTimeout(()=>{const Bn=this.urlHandlingStrategy.merge(ne.url,this.rawUrlTree),ln={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ca(V.source)};this.scheduleNavigation(Bn,"imperative",null,ln,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const et=new ur(V.id,this.serializeUrl(V.extractedUrl),ne);M.next(et);try{V.resolve(this.errorHandler(ne))}catch(qt){V.reject(qt)}}return me.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),E))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const M="popstate"===E.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var V;const G={replaceUrl:!0},W=(null===(V=E.state)||void 0===V?void 0:V.navigationId)?E.state:null;if(W){const et=Object.assign({},W);delete et.navigationId,delete et.\u0275routerPageId,0!==Object.keys(et).length&&(G.state=et)}const ne=this.parseUrl(E.url);this.scheduleNavigation(ne,M,W,G)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){_i(E),this.config=E.map(k),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,M={}){const{relativeTo:V,queryParams:G,fragment:W,queryParamsHandling:ne,preserveFragment:et}=M,qt=V||this.routerState.root,Bn=et?this.currentUrlTree.fragment:W;let ln=null;switch(ne){case"merge":ln=Object.assign(Object.assign({},this.currentUrlTree.queryParams),G);break;case"preserve":ln=this.currentUrlTree.queryParams;break;default:ln=G||null}return null!==ln&&(ln=this.removeEmptyProps(ln)),function Oe(T,C,E,M,V){if(0===E.length)return ht(C.root,C.root,C.root,M,V);const G=function Yn(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new zt(!0,0,T);let C=0,E=!1;const M=T.reduce((V,G,W)=>{if("object"==typeof G&&null!=G){if(G.outlets){const ne={};return ye(G.outlets,(et,qt)=>{ne[qt]="string"==typeof et?et.split("/"):et}),[...V,{outlets:ne}]}if(G.segmentPath)return[...V,G.segmentPath]}return"string"!=typeof G?[...V,G]:0===W?(G.split("/").forEach((ne,et)=>{0==et&&"."===ne||(0==et&&""===ne?E=!0:".."===ne?C++:""!=ne&&V.push(ne))}),V):[...V,G]},[]);return new zt(E,C,M)}(E);if(G.toRoot())return ht(C.root,C.root,new ie([],{}),M,V);const W=function $n(T,C,E){if(T.isAbsolute)return new Br(C.root,!0,0);if(-1===E.snapshot._lastPathIndex){const G=E.snapshot._urlSegment;return new Br(G,G===C.root,0)}const M=Ie(T.commands[0])?0:1;return function es(T,C,E){let M=T,V=C,G=E;for(;G>V;){if(G-=V,M=M.parent,!M)throw new Error("Invalid number of '../'");V=M.segments.length}return new Br(M,!1,V-G)}(E.snapshot._urlSegment,E.snapshot._lastPathIndex+M,T.numberOfDoubleDots)}(G,C,T),ne=W.processChildren?eo(W.segmentGroup,W.index,G.commands):si(W.segmentGroup,W.index,G.commands);return ht(C.root,W.segmentGroup,ne,M,V)}(qt,this.currentUrlTree,E,ln,null!=Bn?Bn:null)}navigateByUrl(E,M={skipLocationChange:!1}){const V=bi(E)?E:this.parseUrl(E),G=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(G,"imperative",null,M)}navigate(E,M={skipLocationChange:!1}){return function Ca(T){for(let C=0;C<T.length;C++){const E=T[C];if(null==E)throw new Error(`The requested path contains ${E} segment at index ${C}`)}}(E),this.navigateByUrl(this.createUrlTree(E,M),M)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let M;try{M=this.urlSerializer.parse(E)}catch(V){M=this.malformedUriErrorHandler(V,this.urlSerializer,E)}return M}isActive(E,M){let V;if(V=!0===M?Object.assign({},io):!1===M?Object.assign({},ko):M,bi(E))return nn(this.currentUrlTree,E,V);const G=this.parseUrl(E);return nn(this.currentUrlTree,G,V)}removeEmptyProps(E){return Object.keys(E).reduce((M,V)=>{const G=E[V];return null!=G&&(M[V]=G),M},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new Wn(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,M,V,G,W){var ne,et;if(this.disposed)return Promise.resolve(!1);let qt,Bn,ln;W?(qt=W.resolve,Bn=W.reject,ln=W.promise):ln=new Promise((Tr,Ps)=>{qt=Tr,Bn=Ps});const gr=++this.navigationId;let vr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),vr=V&&V.\u0275routerPageId?V.\u0275routerPageId:G.replaceUrl||G.skipLocationChange?null!==(ne=this.browserPageId)&&void 0!==ne?ne:0:(null!==(et=this.browserPageId)&&void 0!==et?et:0)+1):vr=0,this.setTransition({id:gr,targetPageId:vr,source:M,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:G,resolve:qt,reject:Bn,promise:ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ln.catch(Tr=>Promise.reject(Tr))}setBrowserUrl(E,M){const V=this.urlSerializer.serialize(E),G=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(V)||M.extras.replaceUrl?this.location.replaceState(V,"",G):this.location.go(V,"",G)}restoreHistory(E,M=!1){var V,G;if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===W?this.currentUrlTree===(null===(G=this.currentNavigation)||void 0===G?void 0:G.finalUrl)&&0===W&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(W)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,M){const V=new wr(E.id,this.serializeUrl(E.extractedUrl),M);this.triggerEvent(V),E.resolve(!1)}generateNgRouterState(E,M){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:M}:{navigationId:E}}}return T.\u0275fac=function(E){g.$Z()},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})();function ca(T){return"imperative"!==T}let oo=(()=>{class T{constructor(E,M,V){this.router=E,this.route=M,this.locationStrategy=V,this.commands=null,this.href=null,this.onChanges=new ke.x,this.subscription=E.events.subscribe(G=>{G instanceof Wn&&this.updateTargetUrlAndHref()})}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:null}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,M,V,G,W){if(0!==E||M||V||G||W||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ne={skipLocationChange:as(this.skipLocationChange),replaceUrl:as(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ne),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:as(this.preserveFragment)})}}return T.\u0275fac=function(E){return new(E||T)(g.Y36(En),g.Y36(ii),g.Y36(an.S$))},T.\u0275dir=g.lG2({type:T,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,M){1&E&&g.NdJ("click",function(G){return M.onClick(G.button,G.ctrlKey,G.shiftKey,G.altKey,G.metaKey)}),2&E&&g.uIk("target",M.target)("href",M.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),T})();function as(T){return""===T||!!T}class Da{}class Ha{preload(C,E){return(0,le.of)(null)}}let Ns=(()=>{class T{constructor(E,M,V,G){this.router=E,this.injector=V,this.preloadingStrategy=G,this.loader=new Ua(V,M,et=>E.triggerEvent(new mn(et)),et=>E.triggerEvent(new ci(et)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Be.h)(E=>E instanceof Wn),de(()=>this.preload())).subscribe(()=>{})}preload(){const E=this.injector.get(g.h0i);return this.processRoutes(E,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,M){const V=[];for(const G of M)if(G.loadChildren&&!G.canLoad&&G._loadedConfig){const W=G._loadedConfig;V.push(this.processRoutes(W.module,W.routes))}else G.loadChildren&&!G.canLoad?V.push(this.preloadConfig(E,G)):G.children&&V.push(this.processRoutes(E,G.children));return(0,Ce.D)(V).pipe((0,vt.J)(),(0,ft.U)(G=>{}))}preloadConfig(E,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,le.of)(M._loadedConfig):this.loader.load(E.injector,M)).pipe((0,ce.z)(G=>(M._loadedConfig=G,this.processRoutes(G.module,G.routes)))))}}return T.\u0275fac=function(E){return new(E||T)(g.LFG(En),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Da))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),ws=(()=>{class T{constructor(E,M,V={}){this.router=E,this.viewportScroller=M,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Kn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof Wn&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Gr&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,M){this.router.triggerEvent(new Gr(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(E){g.$Z()},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})();const zs=new g.OlP("ROUTER_CONFIGURATION"),uo=new g.OlP("ROUTER_FORROOT_GUARD"),Io=[an.Ye,{provide:zn,useClass:Mr},{provide:En,useFactory:function Ta(T,C,E,M,V,G,W={},ne,et){const qt=new En(null,T,C,E,M,V,we(G));return ne&&(qt.urlHandlingStrategy=ne),et&&(qt.routeReuseStrategy=et),function Au(T,C){T.errorHandler&&(C.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(C.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(C.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(C.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(C.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(C.canceledNavigationResolution=T.canceledNavigationResolution)}(W,qt),W.enableTracing&&qt.events.subscribe(Bn=>{var ln,gr;null===(ln=console.group)||void 0===ln||ln.call(console,`Router Event: ${Bn.constructor.name}`),console.log(Bn.toString()),console.log(Bn),null===(gr=console.groupEnd)||void 0===gr||gr.call(console)}),qt},deps:[zn,no,an.Ye,g.zs3,g.Sil,Va,zs,[class Ba{},new g.FiY],[class os{},new g.FiY]]},no,{provide:ii,useFactory:function Li(T){return T.routerState.root},deps:[En]},Ns,Ha,class Tu{preload(C,E){return E().pipe(re(()=>(0,le.of)(null)))}},{provide:zs,useValue:{enableTracing:!1}}];function $a(){return new g.PXZ("Router",En)}let da=(()=>{class T{constructor(E,M){}static forRoot(E,M){return{ngModule:T,providers:[Io,Co(E),{provide:uo,useFactory:ai,deps:[[En,new g.FiY,new g.tp0]]},{provide:zs,useValue:M||{}},{provide:an.S$,useFactory:Xr,deps:[an.lw,[new g.tBr(an.mr),new g.FiY],zs]},{provide:ws,useFactory:Ws,deps:[En,an.EM,zs]},{provide:Da,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:Ha},{provide:g.PXZ,multi:!0,useFactory:$a},[Fo,{provide:g.ip1,multi:!0,useFactory:Lo,deps:[Fo]},{provide:Do,useFactory:Yo,deps:[Fo]},{provide:g.tb,multi:!0,useExisting:Do}]]}}static forChild(E){return{ngModule:T,providers:[Co(E)]}}}return T.\u0275fac=function(E){return new(E||T)(g.LFG(uo,8),g.LFG(En,8))},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();function Ws(T,C,E){return E.scrollOffset&&C.setOffset(E.scrollOffset),new ws(T,C,E)}function Xr(T,C,E={}){return E.useHash?new an.Do(T,C):new an.b0(T,C)}function ai(T){return"guarded"}function Co(T){return[{provide:g.deG,multi:!0,useValue:T},{provide:Va,multi:!0,useValue:T}]}let Fo=(()=>{class T{constructor(E){this.injector=E,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ke.x}appInitializer(){return this.injector.get(an.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const V=new Promise(ne=>M=ne),G=this.injector.get(En),W=this.injector.get(zs);return"disabled"===W.initialNavigation?(G.setUpLocationChangeListener(),M(!0)):"enabled"===W.initialNavigation||"enabledBlocking"===W.initialNavigation?(G.hooks.afterPreactivation=()=>this.initNavigation?(0,le.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),G.initialNavigation()):M(!0),V})}bootstrapListener(E){const M=this.injector.get(zs),V=this.injector.get(Ns),G=this.injector.get(ws),W=this.injector.get(En),ne=this.injector.get(g.z2F);E===ne.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&W.initialNavigation(),V.setUpPreloading(),G.init(),W.resetRootComponentType(ne.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(E){return new(E||T)(g.LFG(g.zs3))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})();function Lo(T){return T.appInitializer.bind(T)}function Yo(T){return T.bootstrapListener.bind(T)}const Do=new g.OlP("Router Initializer")},3942:(kt,We,U)=>{U.d(We,{Z:()=>ut});var g=U(2090),z=U(4859),ee=U(9681),Ce=U(1877);class Me{constructor(Ye,lt){this._delegate=Ye,this.firebase=lt,(0,ee._addComponent)(Ye,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(Ye,lt=ee._DEFAULT_ENTRY_NAME){var xt;this._delegate.checkDestroyed();const Rt=this._delegate.container.getProvider(Ye);return!Rt.isInitialized()&&"EXPLICIT"===(null===(xt=Rt.getComponent())||void 0===xt?void 0:xt.instantiationMode)&&Rt.initialize(),Rt.getImmediate({identifier:lt})}_removeServiceInstance(Ye,lt=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(lt)}_addComponent(Ye){(0,ee._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,ee._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const He=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function je(){const wt=function Fe(wt){const Ye={},lt={__esModule:!0,initializeApp:function oe(st,me={}){const ke=ee.initializeApp(st,me);if((0,g.r3)(Ye,ke.name))return Ye[ke.name];const re=new wt(ke,lt);return Ye[ke.name]=re,re},app:Rt,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function $e(st){const me=st.name,ke=me.replace("-compat","");if(ee._registerComponent(st)&&"PUBLIC"===st.type){const re=(ce=Rt())=>{if("function"!=typeof ce[ke])throw He.create("invalid-app-argument",{appName:me});return ce[ke]()};void 0!==st.serviceProps&&(0,g.ZB)(re,st.serviceProps),lt[ke]=re,wt.prototype[ke]=function(...ce){return this._getService.bind(this,me).apply(this,st.multipleInstances?ce:[])}}return"PUBLIC"===st.type?lt[ke]:null},removeApp:function xt(st){delete Ye[st]},useAsService:function ct(st,me){return"serverAuth"===me?null:me},modularAPIs:ee}};function Rt(st){if(!(0,g.r3)(Ye,st=st||ee._DEFAULT_ENTRY_NAME))throw He.create("no-app",{appName:st});return Ye[st]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function le(){return Object.keys(Ye).map(st=>Ye[st])}}),Rt.App=wt,lt}(Me);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:je,extendNamespace:function Ye(lt){(0,g.ZB)(wt,lt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),wt}(),fe=new Ce.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=pe;!function Je(wt){(0,ee.registerVersion)("@firebase/app-compat","0.1.26",wt)}()},9681:(kt,We,U)=>{U.r(We),U.d(We,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>wr,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>tt,_addOrOverwriteComponent:()=>Qe,_apps:()=>pn,_clearComponents:()=>an,_components:()=>on,_getProvider:()=>Ve,_registerComponent:()=>Te,_removeServiceInstance:()=>vt,deleteApp:()=>Wt,getApp:()=>lr,getApps:()=>Hn,initializeApp:()=>ur,onLog:()=>mn,registerVersion:()=>Cn,setLogLevel:()=>ci});var g=U(5861),z=U(4859),ee=U(1877),Ce=U(2090),Me=U(8766);class Ne{constructor(Le){this.container=Le}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function He(ye){const Le=ye.getComponent();return"VERSION"===(null==Le?void 0:Le.type)}(yt)){const Ut=yt.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(yt=>yt).join(" ")}}const Fe="@firebase/app",pe=new ee.Yd("@firebase/app"),Zt="[DEFAULT]",ft={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,on=new Map;function tt(ye,Le){try{ye.container.addComponent(Le)}catch(yt){pe.debug(`Component ${Le.name} failed to register with FirebaseApp ${ye.name}`,yt)}}function Qe(ye,Le){ye.container.addOrOverwriteComponent(Le)}function Te(ye){const Le=ye.name;if(on.has(Le))return pe.debug(`There were multiple attempts to register component ${Le}.`),!1;on.set(Le,ye);for(const yt of pn.values())tt(yt,ye);return!0}function Ve(ye,Le){const yt=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),ye.container.getProvider(Le)}function vt(ye,Le,yt=Zt){Ve(ye,Le).clearInstance(yt)}function an(){on.clear()}const Kn=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Wn{constructor(Le,yt,Ut){this._isDeleted=!1,this._options=Object.assign({},Le),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this.checkDestroyed(),this._automaticDataCollectionEnabled=Le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Le){this._isDeleted=Le}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const wr="9.8.2";function ur(ye,Le={}){"object"!=typeof Le&&(Le={name:Le});const yt=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},Le),Ut=yt.name;if("string"!=typeof Ut||!Ut)throw Kn.create("bad-app-name",{appName:String(Ut)});const jt=pn.get(Ut);if(jt){if((0,Ce.vZ)(ye,jt.options)&&(0,Ce.vZ)(yt,jt.config))return jt;throw Kn.create("duplicate-app",{appName:Ut})}const nn=new z.H0(Ut);for(const rn of on.values())nn.addComponent(rn);const ir=new Wn(ye,yt,nn);return pn.set(Ut,ir),ir}function lr(ye=Zt){const Le=pn.get(ye);if(!Le)throw Kn.create("no-app",{appName:ye});return Le}function Hn(){return Array.from(pn.values())}function Wt(ye){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(ye){const Le=ye.name;pn.has(Le)&&(pn.delete(Le),yield Promise.all(ye.container.getProviders().map(yt=>yt.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Cn(ye,Le,yt){var Ut;let jt=null!==(Ut=ft[ye])&&void 0!==Ut?Ut:ye;yt&&(jt+=`-${yt}`);const nn=jt.match(/\s|\//),ir=Le.match(/\s|\//);if(nn||ir){const rn=[`Unable to register library "${jt}" with version "${Le}":`];return nn&&rn.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),nn&&ir&&rn.push("and"),ir&&rn.push(`version name "${Le}" contains illegal characters (whitespace or "/")`),void pe.warn(rn.join(" "))}Te(new z.wA(`${jt}-version`,()=>({library:jt,version:Le}),"VERSION"))}function mn(ye,Le){if(null!==ye&&"function"!=typeof ye)throw Kn.create("invalid-log-argument");(0,ee.Am)(ye,Le)}function ci(ye){(0,ee.Ub)(ye)}const br="firebase-heartbeat-store";let ti=null;function Gr(){return ti||(ti=(0,Me.X3)("firebase-heartbeat-database",1,{upgrade:(ye,Le)=>{0===Le&&ye.createObjectStore(br)}}).catch(ye=>{throw Kn.create("storage-open",{originalErrorMessage:ye.message})})),ti}function Yt(){return(Yt=(0,g.Z)(function*(ye){try{return(yield Gr()).transaction(br).objectStore(br).get(zr(ye))}catch(Le){throw Kn.create("storage-get",{originalErrorMessage:Le.message})}})).apply(this,arguments)}function en(ye,Le){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(ye,Le){try{const Ut=(yield Gr()).transaction(br,"readwrite");return yield Ut.objectStore(br).put(Le,zr(ye)),Ut.done}catch(yt){throw Kn.create("storage-set",{originalErrorMessage:yt.message})}})).apply(this,arguments)}function zr(ye){return`${ye.name}!${ye.options.appId}`}class Fr{constructor(Le){this.container=Le,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new we(yt),this._heartbeatsCachePromise=this._storage.read().then(Ut=>(this._heartbeatsCache=Ut,Ut))}triggerHeartbeat(){var Le=this;return(0,g.Z)(function*(){const Ut=Le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=cr();if(null===Le._heartbeatsCache&&(Le._heartbeatsCache=yield Le._heartbeatsCachePromise),Le._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Le._heartbeatsCache.heartbeats.some(nn=>nn.date===jt))return Le._heartbeatsCache.heartbeats.push({date:jt,agent:Ut}),Le._heartbeatsCache.heartbeats=Le._heartbeatsCache.heartbeats.filter(nn=>{const ir=new Date(nn.date).valueOf();return Date.now()-ir<=2592e6}),Le._storage.overwrite(Le._heartbeatsCache)})()}getHeartbeatsHeader(){var Le=this;return(0,g.Z)(function*(){if(null===Le._heartbeatsCache&&(yield Le._heartbeatsCachePromise),null===Le._heartbeatsCache||0===Le._heartbeatsCache.heartbeats.length)return"";const yt=cr(),{heartbeatsToSend:Ut,unsentEntries:jt}=function ge(ye,Le=1024){const yt=[];let Ut=ye.slice();for(const jt of ye){const nn=yt.find(ir=>ir.agent===jt.agent);if(nn){if(nn.dates.push(jt.date),Ae(yt)>Le){nn.dates.pop();break}}else if(yt.push({agent:jt.agent,dates:[jt.date]}),Ae(yt)>Le){yt.pop();break}Ut=Ut.slice(1)}return{heartbeatsToSend:yt,unsentEntries:Ut}}(Le._heartbeatsCache.heartbeats),nn=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ut}));return Le._heartbeatsCache.lastSentHeartbeatDate=yt,jt.length>0?(Le._heartbeatsCache.heartbeats=jt,yield Le._storage.overwrite(Le._heartbeatsCache)):(Le._heartbeatsCache.heartbeats=[],Le._storage.overwrite(Le._heartbeatsCache)),nn})()}}function cr(){return(new Date).toISOString().substring(0,10)}class we{constructor(Le){this.app=Le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Le=this;return(0,g.Z)(function*(){return(yield Le._canUseIndexedDBPromise)&&(yield function Vt(ye){return Yt.apply(this,arguments)}(Le.app))||{heartbeats:[]}})()}overwrite(Le){var yt=this;return(0,g.Z)(function*(){var Ut;if(yield yt._canUseIndexedDBPromise){const nn=yield yt.read();return en(yt.app,{lastSentHeartbeatDate:null!==(Ut=Le.lastSentHeartbeatDate)&&void 0!==Ut?Ut:nn.lastSentHeartbeatDate,heartbeats:Le.heartbeats})}})()}add(Le){var yt=this;return(0,g.Z)(function*(){var Ut;if(yield yt._canUseIndexedDBPromise){const nn=yield yt.read();return en(yt.app,{lastSentHeartbeatDate:null!==(Ut=Le.lastSentHeartbeatDate)&&void 0!==Ut?Ut:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...Le.heartbeats]})}})()}}function Ae(ye){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function pt(ye){Te(new z.wA("platform-logger",Le=>new Ne(Le),"PRIVATE")),Te(new z.wA("heartbeat",Le=>new Fr(Le),"PRIVATE")),Cn(Fe,"0.7.25",ye),Cn(Fe,"0.7.25","esm2017"),Cn("fire-js","")}("")},4859:(kt,We,U)=>{U.d(We,{H0:()=>Fe,wA:()=>ee});var g=U(5861),z=U(2090);class ee{constructor(pe,fe,De){this.name=pe,this.instanceFactory=fe,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Ce="[DEFAULT]";class Me{constructor(pe,fe){this.name=pe,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const fe=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(fe)){const De=new z.BH;if(this.instancesDeferred.set(fe,De),this.isInitialized(fe)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:fe});at&&De.resolve(at)}catch(at){}}return this.instancesDeferred.get(fe).promise}getImmediate(pe){var fe;const De=this.normalizeInstanceIdentifier(null==pe?void 0:pe.identifier),at=null!==(fe=null==pe?void 0:pe.optional)&&void 0!==fe&&fe;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(Je){if(at)return null;throw Je}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function He(je){return"EAGER"===je.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch(fe){}for(const[fe,De]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(fe);try{const Je=this.getOrInitializeService({instanceIdentifier:at});De.resolve(Je)}catch(Je){}}}}clearInstance(pe=Ce){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,g.Z)(function*(){const fe=Array.from(pe.instances.values());yield Promise.all([...fe.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...fe.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Ce){return this.instances.has(pe)}getOptions(pe=Ce){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:fe={}}=pe,De=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:De,options:fe});for(const[Je,ut]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(Je)&&ut.resolve(at);return at}onInit(pe,fe){var De;const at=this.normalizeInstanceIdentifier(fe),Je=null!==(De=this.onInitCallbacks.get(at))&&void 0!==De?De:new Set;Je.add(pe),this.onInitCallbacks.set(at,Je);const ut=this.instances.get(at);return ut&&pe(ut,at),()=>{Je.delete(pe)}}invokeOnInitCallbacks(pe,fe){const De=this.onInitCallbacks.get(fe);if(De)for(const at of De)try{at(pe,fe)}catch(Je){}}getOrInitializeService({instanceIdentifier:pe,options:fe={}}){let De=this.instances.get(pe);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(je=pe,je===Ce?void 0:je),options:fe}),this.instances.set(pe,De),this.instancesOptions.set(pe,fe),this.invokeOnInitCallbacks(De,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,De)}catch(at){}var je;return De||null}normalizeInstanceIdentifier(pe=Ce){return this.component?this.component.multipleInstances?pe:Ce:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const fe=this.getProvider(pe.name);if(fe.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);fe.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const fe=new Me(pe,this);return this.providers.set(pe,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(kt,We,U)=>{U.d(We,{Am:()=>je,Ub:()=>Fe,Yd:()=>He,in:()=>z});const g=[];var z=(()=>{return(pe=z||(z={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",z;var pe})();const ee={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},Ce=z.INFO,Me={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Ne=(pe,fe,...De)=>{if(fe<pe.logLevel)return;const at=(new Date).toISOString(),Je=Me[fe];if(!Je)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Je](`[${at}]  ${pe.name}:`,...De)};class He{constructor(fe){this.name=fe,this._logLevel=Ce,this._logHandler=Ne,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in z))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?ee[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...fe),this._logHandler(this,z.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...fe),this._logHandler(this,z.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,z.INFO,...fe),this._logHandler(this,z.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,z.WARN,...fe),this._logHandler(this,z.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...fe),this._logHandler(this,z.ERROR,...fe)}}function Fe(pe){g.forEach(fe=>{fe.setLogLevel(pe)})}function je(pe,fe){for(const De of g){let at=null;fe&&fe.level&&(at=ee[fe.level]),De.userLogHandler=null===pe?null:(Je,ut,...wt)=>{const Ye=wt.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch(xt){return null}}).filter(lt=>lt).join(" ");ut>=(null!=at?at:Je.logLevel)&&pe({level:z[ut].toLowerCase(),message:Ye,args:wt,type:Je.name})}}}},8766:(kt,We,U)=>{U.d(We,{Lj:()=>oe,X3:()=>Rt});var g=U(5861);let ee,Ce;const He=new WeakMap,Fe=new WeakMap,je=new WeakMap,pe=new WeakMap,fe=new WeakMap;let Je={get(me,ke,re){if(me instanceof IDBTransaction){if("done"===ke)return Fe.get(me);if("objectStoreNames"===ke)return me.objectStoreNames||je.get(me);if("store"===ke)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return lt(me[ke])},set:(me,ke,re)=>(me[ke]=re,!0),has:(me,ke)=>me instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in me};function Ye(me){return"function"==typeof me?function wt(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...ke){return me.apply(xt(this),ke),lt(He.get(this))}:function(...ke){return lt(me.apply(xt(this),ke))}:function(ke,...re){const ce=me.call(xt(this),ke,...re);return je.set(ce,ke.sort?ke.sort():[ke]),lt(ce)}}(me):(me instanceof IDBTransaction&&function at(me){if(Fe.has(me))return;const ke=new Promise((re,ce)=>{const de=()=>{me.removeEventListener("complete",Be),me.removeEventListener("error",Ge),me.removeEventListener("abort",Ge)},Be=()=>{re(),de()},Ge=()=>{ce(me.error||new DOMException("AbortError","AbortError")),de()};me.addEventListener("complete",Be),me.addEventListener("error",Ge),me.addEventListener("abort",Ge)});Fe.set(me,ke)}(me),((me,ke)=>ke.some(re=>me instanceof re))(me,function Me(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Je):me)}function lt(me){if(me instanceof IDBRequest)return function De(me){const ke=new Promise((re,ce)=>{const de=()=>{me.removeEventListener("success",Be),me.removeEventListener("error",Ge)},Be=()=>{re(lt(me.result)),de()},Ge=()=>{ce(me.error),de()};me.addEventListener("success",Be),me.addEventListener("error",Ge)});return ke.then(re=>{re instanceof IDBCursor&&He.set(re,me)}).catch(()=>{}),fe.set(ke,me),ke}(me);if(pe.has(me))return pe.get(me);const ke=Ye(me);return ke!==me&&(pe.set(me,ke),fe.set(ke,me)),ke}const xt=me=>fe.get(me);function Rt(me,ke,{blocked:re,upgrade:ce,blocking:de,terminated:Be}={}){const Ge=indexedDB.open(me,ke),_t=lt(Ge);return ce&&Ge.addEventListener("upgradeneeded",Mt=>{ce(lt(Ge.result),Mt.oldVersion,Mt.newVersion,lt(Ge.transaction))}),re&&Ge.addEventListener("blocked",()=>re()),_t.then(Mt=>{Be&&Mt.addEventListener("close",()=>Be()),de&&Mt.addEventListener("versionchange",()=>de())}).catch(()=>{}),_t}function oe(me,{blocked:ke}={}){const re=indexedDB.deleteDatabase(me);return ke&&re.addEventListener("blocked",()=>ke()),lt(re).then(()=>{})}const le=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],ct=new Map;function st(me,ke){if(!(me instanceof IDBDatabase)||ke in me||"string"!=typeof ke)return;if(ct.get(ke))return ct.get(ke);const re=ke.replace(/FromIndex$/,""),ce=ke!==re,de=$e.includes(re);if(!(re in(ce?IDBIndex:IDBObjectStore).prototype)||!de&&!le.includes(re))return;const Be=function(){var Ge=(0,g.Z)(function*(_t,...Mt){const Kt=this.transaction(_t,de?"readwrite":"readonly");let Zt=Kt.store;return ce&&(Zt=Zt.index(Mt.shift())),(yield Promise.all([Zt[re](...Mt),de&&Kt.done]))[0]});return function(Mt){return Ge.apply(this,arguments)}}();return ct.set(ke,Be),Be}!function ut(me){Je=me(Je)}(me=>VE(LE({},me),{get:(ke,re,ce)=>st(ke,re)||me.get(ke,re,ce),has:(ke,re)=>!!st(ke,re)||me.has(ke,re)}))},7562:(kt,We,U)=>{U.d(We,{Ro:()=>st,ef:()=>me,t2:()=>$e});var g=U(5e3),z=U(1135),ee=U(7579),Ce=U(4482),Me=U(5403),Ne=U(8421),He=U(5032),je=U(9300),pe=U(1777),fe=U(9808),De=U(2313);const at=["overlay"];function Je(ke,re){1&ke&&g._UZ(0,"div")}function ut(ke,re){if(1&ke&&(g.TgZ(0,"div"),g.YNc(1,Je,1,0,"div",6),g.qZA()),2&ke){const ce=g.oxw(2);g.Tol(ce.spinner.class),g.Udp("color",ce.spinner.color),g.xp6(1),g.Q6J("ngForOf",ce.spinner.divArray)}}function wt(ke,re){if(1&ke&&(g._UZ(0,"div",7),g.ALo(1,"safeHtml")),2&ke){const ce=g.oxw(2);g.Q6J("innerHTML",g.lcZ(1,1,ce.template),g.oJD)}}function Ye(ke,re){if(1&ke&&(g.TgZ(0,"div",1,2),g.YNc(2,ut,2,5,"div",3),g.YNc(3,wt,2,3,"div",4),g.TgZ(4,"div",5),g.Hsn(5),g.qZA()()),2&ke){const ce=g.oxw();g.Udp("background-color",ce.spinner.bdColor)("z-index",ce.spinner.zIndex)("position",ce.spinner.fullScreen?"fixed":"absolute"),g.Q6J("@.disabled",ce.disableAnimation)("@fadeIn","in"),g.xp6(2),g.Q6J("ngIf",!ce.template),g.xp6(1),g.Q6J("ngIf",ce.template),g.xp6(1),g.Udp("z-index",ce.spinner.zIndex)}}const lt=["*"],xt={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},oe="primary";class le{constructor(re){Object.assign(this,re)}static create(re){return(null==(null==re?void 0:re.type)||0===re.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new le(re)}}let $e=(()=>{class ke{constructor(){this.spinnerObservable=new z.X(null)}getSpinner(ce){return this.spinnerObservable.asObservable().pipe((0,je.h)(de=>de&&de.name===ce))}show(ce=oe,de){return new Promise((Be,Ge)=>{setTimeout(()=>{de&&Object.keys(de).length?(de.name=ce,this.spinnerObservable.next(new le(Object.assign(Object.assign({},de),{show:!0}))),Be(!0)):(this.spinnerObservable.next(new le({name:ce,show:!0})),Be(!0))},10)})}hide(ce=oe,de=10){return new Promise((Be,Ge)=>{setTimeout(()=>{this.spinnerObservable.next(new le({name:ce,show:!1})),Be(!0)},de)})}}return ke.\u0275fac=function(ce){return new(ce||ke)},ke.\u0275prov=g.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})(),ct=(()=>{class ke{constructor(ce){this._sanitizer=ce}transform(ce){if(ce)return this._sanitizer.bypassSecurityTrustHtml(ce)}}return ke.\u0275fac=function(ce){return new(ce||ke)(g.Y36(De.H7,16))},ke.\u0275pipe=g.Yjl({name:"safeHtml",type:ke,pure:!0}),ke})(),st=(()=>{class ke{constructor(ce,de,Be){this.spinnerService=ce,this.changeDetector=de,this.elementRef=Be,this.disableAnimation=!1,this.spinner=new le,this.ngUnsubscribe=new ee.x,this.setDefaultOptions=()=>{this.spinner=le.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=oe,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(ce){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(ce.target))&&(ce.returnValue=!1,ce.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe(function Fe(ke){return(0,Ce.e)((re,ce)=>{(0,Ne.Xf)(ke).subscribe((0,Me.x)(ce,()=>ce.complete(),He.Z)),!ce.closed&&re.subscribe(ce)})}(this.ngUnsubscribe)).subscribe(ce=>{this.setDefaultOptions(),Object.assign(this.spinner,ce),ce.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(ce){return ce===this.elementRef.nativeElement.parentElement||ce.parentNode&&this.isSpinnerZone(ce.parentNode)}ngOnChanges(ce){for(const de in ce)if(de){const Be=ce[de];if(Be.isFirstChange())return;void 0!==Be.currentValue&&Be.currentValue!==Be.previousValue&&""!==Be.currentValue&&(this.spinner[de]=Be.currentValue,"showSpinner"===de&&(Be.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===de&&this.initObservable())}}getClass(ce,de){this.spinner.divCount=xt[ce],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((Ge,_t)=>_t);let Be="";switch(de.toLowerCase()){case"small":Be="la-sm";break;case"medium":Be="la-2x";break;case"large":Be="la-3x"}return"la-"+ce+" "+Be}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return ke.\u0275fac=function(ce){return new(ce||ke)(g.Y36($e),g.Y36(g.sBO),g.Y36(g.SBq))},ke.\u0275cmp=g.Xpm({type:ke,selectors:[["ngx-spinner"]],viewQuery:function(ce,de){if(1&ce&&g.Gf(at,5),2&ce){let Be;g.iGM(Be=g.CRH())&&(de.spinnerDOM=Be.first)}},hostBindings:function(ce,de){1&ce&&g.NdJ("keydown",function(Ge){return de.handleKeyboardEvent(Ge)},!1,g.evT)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[g.TTD],ngContentSelectors:lt,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(ce,de){1&ce&&(g.F$t(),g.YNc(0,Ye,6,12,"div",0)),2&ce&&g.Q6J("ngIf",de.spinner.show)},directives:[fe.O5,fe.sg],pipes:[ct],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,pe.X$)("fadeIn",[(0,pe.SB)("in",(0,pe.oB)({opacity:1})),(0,pe.eR)(":enter",[(0,pe.oB)({opacity:0}),(0,pe.jt)(300)]),(0,pe.eR)(":leave",(0,pe.jt)(200,(0,pe.oB)({opacity:0})))])]},changeDetection:0}),ke})(),me=(()=>{class ke{}return ke.\u0275fac=function(ce){return new(ce||ke)},ke.\u0275mod=g.oAB({type:ke}),ke.\u0275inj=g.cJS({imports:[[fe.ez]]}),ke})()},2290:(kt,We,U)=>{U.d(We,{Rh:()=>Kt,_W:()=>Ge});var g=U(5e3),z=U(1777),ee=U(7579),Ce=U(9808),Me=U(2313);const Ne=["toast-component",""];function He(tt,Qe){if(1&tt){const Te=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(Te),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Fe(tt,Qe){if(1&tt&&(g.ynx(0),g._uU(1),g.BQk()),2&tt){const Te=g.oxw(2);g.xp6(1),g.hij("[",Te.duplicatesCount+1,"]")}}function je(tt,Qe){if(1&tt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Fe,2,1,"ng-container",4),g.qZA()),2&tt){const Te=g.oxw();g.Tol(Te.options.titleClass),g.uIk("aria-label",Te.title),g.xp6(1),g.hij(" ",Te.title," "),g.xp6(1),g.Q6J("ngIf",Te.duplicatesCount)}}function pe(tt,Qe){if(1&tt&&g._UZ(0,"div",7),2&tt){const Te=g.oxw();g.Tol(Te.options.messageClass),g.Q6J("innerHTML",Te.message,g.oJD)}}function fe(tt,Qe){if(1&tt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&tt){const Te=g.oxw();g.Tol(Te.options.messageClass),g.uIk("aria-label",Te.message),g.xp6(1),g.hij(" ",Te.message," ")}}function De(tt,Qe){if(1&tt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&tt){const Te=g.oxw();g.xp6(1),g.Udp("width",Te.width+"%")}}function at(tt,Qe){if(1&tt){const Te=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(Te),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Je(tt,Qe){if(1&tt&&(g.ynx(0),g._uU(1),g.BQk()),2&tt){const Te=g.oxw(2);g.xp6(1),g.hij("[",Te.duplicatesCount+1,"]")}}function ut(tt,Qe){if(1&tt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Je,2,1,"ng-container",4),g.qZA()),2&tt){const Te=g.oxw();g.Tol(Te.options.titleClass),g.uIk("aria-label",Te.title),g.xp6(1),g.hij(" ",Te.title," "),g.xp6(1),g.Q6J("ngIf",Te.duplicatesCount)}}function wt(tt,Qe){if(1&tt&&g._UZ(0,"div",7),2&tt){const Te=g.oxw();g.Tol(Te.options.messageClass),g.Q6J("innerHTML",Te.message,g.oJD)}}function Ye(tt,Qe){if(1&tt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&tt){const Te=g.oxw();g.Tol(Te.options.messageClass),g.uIk("aria-label",Te.message),g.xp6(1),g.hij(" ",Te.message," ")}}function lt(tt,Qe){if(1&tt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&tt){const Te=g.oxw();g.xp6(1),g.Udp("width",Te.width+"%")}}class oe{constructor(Qe,Te){this.component=Qe,this.injector=Te}attach(Qe,Te){return this._attachedHost=Qe,Qe.attach(this,Te)}detach(){const Qe=this._attachedHost;if(Qe)return this._attachedHost=void 0,Qe.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Qe){this._attachedHost=Qe}}class $e{constructor(Qe,Te,Ve,vt,an,Nn){this.toastId=Qe,this.config=Te,this.message=Ve,this.title=vt,this.toastType=an,this.toastRef=Nn,this._onTap=new ee.x,this._onAction=new ee.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Qe){this._onAction.next(Qe)}onAction(){return this._onAction.asObservable()}}const ct={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},st=new g.OlP("ToastConfig");class me{constructor(Qe){this._overlayRef=Qe,this.duplicatesCount=0,this._afterClosed=new ee.x,this._activate=new ee.x,this._manualClose=new ee.x,this._resetTimeout=new ee.x,this._countDuplicate=new ee.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Qe,Te){Qe&&this._resetTimeout.next(),Te&&this._countDuplicate.next(++this.duplicatesCount)}}class ke{constructor(Qe,Te){this._toastPackage=Qe,this._parentInjector=Te}get(Qe,Te,Ve){return Qe===$e?this._toastPackage:this._parentInjector.get(Qe,Te,Ve)}}class re extends class le{attach(Qe,Te){return this._attachedPortal=Qe,this.attachComponentPortal(Qe,Te)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Qe){this._disposeFn=Qe}}{constructor(Qe,Te,Ve){super(),this._hostDomElement=Qe,this._componentFactoryResolver=Te,this._appRef=Ve}attachComponentPortal(Qe,Te){const Ve=this._componentFactoryResolver.resolveComponentFactory(Qe.component);let vt;return vt=Ve.create(Qe.injector),this._appRef.attachView(vt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(vt.hostView),vt.destroy()}),Te?this._hostDomElement.insertBefore(this._getComponentRootNode(vt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(vt)),vt}_getComponentRootNode(Qe){return Qe.hostView.rootNodes[0]}}class ce{constructor(Qe){this._portalHost=Qe}attach(Qe,Te=!0){return this._portalHost.attach(Qe,Te)}detach(){return this._portalHost.detach()}}let de=(()=>{class tt{constructor(Te){this._document=Te}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Te=this._document.createElement("div");Te.classList.add("overlay-container"),Te.setAttribute("aria-live","polite"),this._document.body.appendChild(Te),this._containerElement=Te}}return tt.\u0275fac=function(Te){return new(Te||tt)(g.LFG(Ce.K0))},tt.\u0275prov=g.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),Be=(()=>{class tt{constructor(Te,Ve,vt,an){this._overlayContainer=Te,this._componentFactoryResolver=Ve,this._appRef=vt,this._document=an,this._paneElements=new Map}create(Te,Ve){return this._createOverlayRef(this.getPaneElement(Te,Ve))}getPaneElement(Te="",Ve){return this._paneElements.get(Ve)||this._paneElements.set(Ve,{}),this._paneElements.get(Ve)[Te]||(this._paneElements.get(Ve)[Te]=this._createPaneElement(Te,Ve)),this._paneElements.get(Ve)[Te]}_createPaneElement(Te,Ve){const vt=this._document.createElement("div");return vt.id="toast-container",vt.classList.add(Te),vt.classList.add("toast-container"),Ve?Ve.getContainerElement().appendChild(vt):this._overlayContainer.getContainerElement().appendChild(vt),vt}_createPortalHost(Te){return new re(Te,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Te){return new ce(this._createPortalHost(Te))}}return tt.\u0275fac=function(Te){return new(Te||tt)(g.LFG(de),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(Ce.K0))},tt.\u0275prov=g.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),Ge=(()=>{class tt{constructor(Te,Ve,vt,an,Nn){this.overlay=Ve,this._injector=vt,this.sanitizer=an,this.ngZone=Nn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Te.default),Te.config),Te.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Te.default.iconClasses),Te.config.iconClasses))}show(Te,Ve,vt={},an=""){return this._preBuildNotification(an,Te,Ve,this.applyConfig(vt))}success(Te,Ve,vt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Te,Ve,this.applyConfig(vt))}error(Te,Ve,vt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Te,Ve,this.applyConfig(vt))}info(Te,Ve,vt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Te,Ve,this.applyConfig(vt))}warning(Te,Ve,vt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Te,Ve,this.applyConfig(vt))}clear(Te){for(const Ve of this.toasts)if(void 0!==Te){if(Ve.toastId===Te)return void Ve.toastRef.manualClose()}else Ve.toastRef.manualClose()}remove(Te){const Ve=this._findToast(Te);if(!Ve||(Ve.activeToast.toastRef.close(),this.toasts.splice(Ve.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const vt=this.toasts[this.currentlyActive].toastRef;vt.isInactive()||(this.currentlyActive=this.currentlyActive+1,vt.activate())}return!0}findDuplicate(Te="",Ve="",vt,an){const{includeTitleDuplicates:Nn}=this.toastrConfig;for(const Kn of this.toasts){const Wn=Nn&&Kn.title===Te;if((!Nn||Wn)&&Kn.message===Ve)return Kn.toastRef.onDuplicate(vt,an),Kn}return null}applyConfig(Te={}){return Object.assign(Object.assign({},this.toastrConfig),Te)}_findToast(Te){for(let Ve=0;Ve<this.toasts.length;Ve++)if(this.toasts[Ve].toastId===Te)return{index:Ve,activeToast:this.toasts[Ve]};return null}_preBuildNotification(Te,Ve,vt,an){return an.onActivateTick?this.ngZone.run(()=>this._buildNotification(Te,Ve,vt,an)):this._buildNotification(Te,Ve,vt,an)}_buildNotification(Te,Ve,vt,an){if(!an.toastComponent)throw new Error("toastComponent required");const Nn=this.findDuplicate(vt,Ve,this.toastrConfig.resetTimeoutOnDuplicate&&an.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&vt||Ve)&&this.toastrConfig.preventDuplicates&&null!==Nn)return Nn;this.previousToastMessage=Ve;let Kn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Kn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Wn=this.overlay.create(an.positionClass,this.overlayContainer);this.index=this.index+1;let wr=Ve;Ve&&an.enableHtml&&(wr=this.sanitizer.sanitize(g.q3G.HTML,Ve));const ur=new me(Wn),lr=new $e(this.index,an,wr,vt,Te,ur),Hn=new ke(lr,this._injector),Wt=new oe(an.toastComponent,Hn),fn=Wn.attach(Wt,this.toastrConfig.newestOnTop);ur.componentInstance=fn.instance;const Cn={toastId:this.index,title:vt||"",message:Ve||"",toastRef:ur,onShown:ur.afterActivate(),onHidden:ur.afterClosed(),onTap:lr.onTap(),onAction:lr.onAction(),portal:fn};return Kn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Cn.toastRef.activate()})),this.toasts.push(Cn),Cn}}return tt.\u0275fac=function(Te){return new(Te||tt)(g.LFG(st),g.LFG(Be),g.LFG(g.zs3),g.LFG(Me.H7),g.LFG(g.R0b))},tt.\u0275prov=g.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),_t=(()=>{class tt{constructor(Te,Ve,vt){this.toastrService=Te,this.toastPackage=Ve,this.ngZone=vt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Ve.message,this.title=Ve.title,this.options=Ve.config,this.originalTimeout=Ve.config.timeOut,this.toastClasses=`${Ve.toastType} ${Ve.config.toastClass}`,this.sub=Ve.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ve.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ve.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ve.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Te=(new Date).getTime();this.width=(this.hideTime-Te)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Te,Ve){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Te),Ve)):this.timeout=setTimeout(()=>Te(),Ve)}outsideInterval(Te,Ve){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Te),Ve)):this.intervalId=setInterval(()=>Te(),Ve)}runInsideAngular(Te){this.ngZone?this.ngZone.run(()=>Te()):Te()}}return tt.\u0275fac=function(Te){return new(Te||tt)(g.Y36(Ge),g.Y36($e),g.Y36(g.R0b))},tt.\u0275cmp=g.Xpm({type:tt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Te,Ve){1&Te&&g.NdJ("click",function(){return Ve.tapToast()})("mouseenter",function(){return Ve.stickAround()})("mouseleave",function(){return Ve.delayedHideToast()}),2&Te&&(g.d8E("@flyInOut",Ve.state),g.Tol(Ve.toastClasses),g.Udp("display",Ve.displayStyle))},attrs:Ne,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Te,Ve){1&Te&&(g.YNc(0,He,3,0,"button",0),g.YNc(1,je,3,5,"div",1),g.YNc(2,pe,1,3,"div",2),g.YNc(3,fe,2,4,"div",3),g.YNc(4,De,2,2,"div",4)),2&Te&&(g.Q6J("ngIf",Ve.options.closeButton),g.xp6(1),g.Q6J("ngIf",Ve.title),g.xp6(1),g.Q6J("ngIf",Ve.message&&Ve.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Ve.message&&!Ve.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Ve.options.progressBar))},directives:[Ce.O5],encapsulation:2,data:{animation:[(0,z.X$)("flyInOut",[(0,z.SB)("inactive",(0,z.oB)({opacity:0})),(0,z.SB)("active",(0,z.oB)({opacity:1})),(0,z.SB)("removed",(0,z.oB)({opacity:0})),(0,z.eR)("inactive => active",(0,z.jt)("{{ easeTime }}ms {{ easing }}")),(0,z.eR)("active => removed",(0,z.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),tt})();const Mt=Object.assign(Object.assign({},ct),{toastComponent:_t});let Kt=(()=>{class tt{static forRoot(Te={}){return{ngModule:tt,providers:[{provide:st,useValue:{default:Mt,config:Te}}]}}}return tt.\u0275fac=function(Te){return new(Te||tt)},tt.\u0275mod=g.oAB({type:tt}),tt.\u0275inj=g.cJS({imports:[[Ce.ez]]}),tt})(),ft=(()=>{class tt{constructor(Te,Ve,vt){this.toastrService=Te,this.toastPackage=Ve,this.appRef=vt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=Ve.message,this.title=Ve.title,this.options=Ve.config,this.originalTimeout=Ve.config.timeOut,this.toastClasses=`${Ve.toastType} ${Ve.config.toastClass}`,this.sub=Ve.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ve.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ve.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ve.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Te=(new Date).getTime();this.width=(this.hideTime-Te)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return tt.\u0275fac=function(Te){return new(Te||tt)(g.Y36(Ge),g.Y36($e),g.Y36(g.z2F))},tt.\u0275cmp=g.Xpm({type:tt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Te,Ve){1&Te&&g.NdJ("click",function(){return Ve.tapToast()})("mouseenter",function(){return Ve.stickAround()})("mouseleave",function(){return Ve.delayedHideToast()}),2&Te&&(g.Tol(Ve.toastClasses),g.Udp("display",Ve.displayStyle))},attrs:Ne,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Te,Ve){1&Te&&(g.YNc(0,at,3,0,"button",0),g.YNc(1,ut,3,5,"div",1),g.YNc(2,wt,1,3,"div",2),g.YNc(3,Ye,2,4,"div",3),g.YNc(4,lt,2,2,"div",4)),2&Te&&(g.Q6J("ngIf",Ve.options.closeButton),g.xp6(1),g.Q6J("ngIf",Ve.title),g.xp6(1),g.Q6J("ngIf",Ve.message&&Ve.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Ve.message&&!Ve.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Ve.options.progressBar))},directives:[Ce.O5],encapsulation:2}),tt})();Object.assign(Object.assign({},ct),{toastComponent:ft})},5861:(kt,We,U)=>{function g(ee,Ce,Me,Ne,He,Fe,je){try{var pe=ee[Fe](je),fe=pe.value}catch(De){return void Me(De)}pe.done?Ce(fe):Promise.resolve(fe).then(Ne,He)}function z(ee){return function(){var Ce=this,Me=arguments;return new Promise(function(Ne,He){var Fe=ee.apply(Ce,Me);function je(fe){g(Fe,Ne,He,je,pe,"next",fe)}function pe(fe){g(Fe,Ne,He,je,pe,"throw",fe)}je(void 0)})}}U.d(We,{Z:()=>z})}},kt=>{kt(kt.s=5278)}]);